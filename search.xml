<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>toypipi在这里安家啦</title>
    <url>/2016/12/17/toypipi%E5%9C%A8%E8%BF%99%E9%87%8C%E5%AE%89%E5%AE%B6%E5%95%A6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>这是我使用 <a href="https://hexo.io/">Hexo</a>
在github上搭建的个人博客!
从今往后在这里记录自己的所学，所思，所想……很多功能还有待完善，期待五年后，能有一个华丽的蜕变:)</p>
<p>一开始使用<a
href="https://github.com/litten/hexo-theme-yilia">yilia</a>主题，在配置分类和标签的时候花了很长时间。后来发现了一个更容易配置的主题<a
href="https://github.com/iissnan/hexo-theme-next">Next</a>，<a
href="https://github.com/iissnan/hexo-theme-next">Next</a>帮助文档写的比较详细，样式也是我喜欢的简洁的风格，所以马上就切换过来了。基本上按照<a
href="https://github.com/litten/hexo-theme-yilia">文档</a>配置都不会怎么出错。不过一开始研究<a
href="https://github.com/litten/hexo-theme-yilia">yilia</a>积累的经验也让我节约了很多时间。</p>
<blockquote>
<p>参考文档</p>
</blockquote>
<p><a href="https://hexo.io/zh-cn/">Hexo主页</a> <a
href="https://github.com/iissnan/hexo-theme-next">iissnan/hexo-theme-next</a>
<a
href="https://xuanwo.org/2015/03/26/hexo-intor/">史上最详细的Hexo博客搭建图文教程</a>
<a
href="http://jiji262.github.io/2016/04/15/2016-04-15-hexo-github-pages-blog/">手把手教你使用Hexo
+ Github Pages搭建个人独立博客</a></p>
<span id="more"></span>
<blockquote>
<p>解决安装过程中出现的问题</p>
</blockquote>
<p>1.博客文章乱码
<strong>原因：</strong>自己用UltraEdit编辑器编辑网页时，把文件格式保存成GBK格式的了。
<strong>解决办法：</strong>通过修改文件编码为UTF-8以后，问题解决。可以使用WebStorm编写博客，安装markdown插件后，写博客或是发布博客非常好用。</p>
<p>2.设置头像
<strong>原因：</strong>修改主题文件夹下的_config.yml文件，新增字段
avatar 和图片地址后，还是不能显示头像。
<strong>解决办法：</strong>需要修改根目录文件夹下的_config.yml文件，才能生效。
<strong>参考文档：</strong> <a
href="http://theme-next.iissnan.com/getting-started.html#avatar-setting">设置头像</a></p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>部署</tag>
      </tags>
  </entry>
  <entry>
    <title>完善Hexo功能</title>
    <url>/2016/12/21/%E5%AE%8C%E5%96%84Hexo%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>1.给Hexo nexT主题增加多说评论</p>
</blockquote>
<p>首先登陆<a
href="http://duoshuo.com/">多说官网</a>，点击<strong>我要安装</strong>后，输入以下内容：</p>
<p>站点名称：自己起，我使用的是github账户名
站点地址：github个人主页的ip地址。类似于：https://username.github.io
多说域名：自己起，我使用的是github账户名 电子邮箱：常用的电子邮箱
点击创建按钮。</p>
<span id="more"></span>
<p>编辑D:_config.yml文件，添加 <code>duoshuo_shortname: toypipi</code>
，其中yourname指的是你在多说官网申请的多说域名。</p>
<p><strong>参考文档：</strong> <a
href="http://www.voidking.com/2015/05/31/deve-hexo-theme-optimize/">hexo主题优化</a></p>
<blockquote>
<p>2.网站地址栏小图标</p>
</blockquote>
<p>首先准备一张16X16像素大小的小图标，然后将它放在站点根目录下的hexo/source/img文件夹下。
<strong>注意：</strong>
不是放在hexo/themes/next/source/img文件下下，如果放在这里将不能正常显示。
编辑hexo/themes/next/_config.yml文件，添加
<code>favicon: /img/cat.png</code> 即可。</p>
<blockquote>
<p>3.增加百度统计</p>
</blockquote>
<p>首先在<a
href="http://tongji.baidu.com/web/welcome/login">百度统计官网</a>点击注册，注册百度统计站长版。登陆百度统计后，点击管理，在下面的网站域名右边点击获取代码，找到
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> _hmt = _hmt || [];</span><br><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> hm = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span><br><span class="line">  hm.<span class="property">src</span> = <span class="string">&quot;https://hm.baidu.com/hm.js?4xxxxxxxxxxxxxxxxxxxxxx8&quot;</span>;</span><br><span class="line">  <span class="keyword">var</span> s = <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;script&quot;</span>)[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>
其中，4xxxxxxxxxxxxxxxxxxxxxx8就是你的baidu_analytics_id(每个人都不同)，在hexo/themes/next/_config.yml文件中添加
<code>baidu_analytics: 4xxxxxxxxxxxxxxxxxxxxxx8</code> 即可。</p>
<p><strong>参考文档：</strong> <a
href="http://wayneshawn.github.io/2015/04/07/hexo-config-and-optimization/">hexo
添加百度统计</a></p>
<blockquote>
<p>4.增加分类和标签</p>
</blockquote>
<p>首先在hexo/themes/next/_config.yml文件中找到如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: /</span><br><span class="line">  categories: /categories</span><br><span class="line">  #about: /about</span><br><span class="line">  archives: /archives</span><br><span class="line">  tags: /tags</span><br><span class="line">  #sitemap: /sitemap.xml</span><br><span class="line">  #commonweal: /404.html</span><br></pre></td></tr></table></figure>
<p>将categories和tags前面的#删除，然后在hexo目录下输入命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure>
<p>该命令会在hexo/source文件夹下创建一个categories目录，并在categories目录下生成一个index.md文件，打开这个文件，修改它的内容为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line">date: 2016-12-23 11:00:09</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>添加标签也是一样，在hexo目录下输入命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure>
<p>该命令会在hexo/source文件夹下创建一个tags目录，并在tags目录下生成一个index.md文件，打开这个文件，修改它的内容为：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 分类</span><br><span class="line">date: 2016-12-23 11:00:09</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">comments: false</span><br><span class="line">---</span><br></pre></td></tr></table></figure>
<p>这样，在新建博客时，只要头部包含：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">categories:</span><br><span class="line">- your category</span><br><span class="line">tags:</span><br><span class="line">- your tag</span><br><span class="line">- another tag</span><br></pre></td></tr></table></figure>
<p>文章就能够分类并且生成标签了。</p>
<p><strong>参考文档：</strong> <a
href="http://blog.csdn.net/lsshlsw/article/details/50322465">Hexo
主题使用进阶</a> <a
href="http://ws905.com/document/2016-07-16/page/hexo-1/">hexo主题NexT的标签与分类</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>多说</tag>
        <tag>百度统计</tag>
        <tag>分类</tag>
        <tag>标签</tag>
      </tags>
  </entry>
  <entry>
    <title>《R语言与商业智能》读书笔记</title>
    <url>/2016/12/23/%E3%80%8AR%E8%AF%AD%E8%A8%80%E4%B8%8E%E5%95%86%E4%B8%9A%E6%99%BA%E8%83%BD%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>学习<a
href="https://book.douban.com/subject/25913762/">《R语言与商业智能》</a>
，为了加深记忆，边读边做笔记。如有侵权，立即删除。</p>
</blockquote>
<h1 id="第-1-章-r简介">第 1 章 R简介</h1>
<p>R是用于统计分析、统计绘图的语言和操作环境，是属于GNU系统的一个自由、免费、源代码开放的软件，也是一个用于统计计算和统计制图的优秀工具。</p>
<h2 id="r的功能">R的功能</h2>
<p>R是一套完整的数据处理、计算和制图软件系统。其功能包括：数据存储和处理系统、数组运算工具（在向量、矩阵运算方面的功能尤其强大）、完整连贯的统计分析工具、优秀的统计制图功能、简便而强大的编程语言、可操纵数据的输入和输出，可实现分支、循环、用户可自定义功能。
<span id="more"></span>
与其说R是一种统计软件，还不如说R是一种数学计算的环境，因为R并不是仅仅提供若干统计程序，使用者只需指定数据来源和若干参数便可进行统计分析。R的思想是：它可以提供一些集成的统计工具，但更大量的是它提供各种数学计算、统计计算的函数，从而使使用者能灵活机动地进行数据分析，甚至创造出符合需要的新的统计计算方法。</p>
<p>R语言的语法表面上类似C，但在语义上是函数设计语言（functional
programming
language）的变种，并且和Lisp以及APL有很强的兼容性。特别的是，它允许在“语言上计算”(computing
on the
language)。这使得它可以把表达式作为函数的输入参数，而这种做法对统计模拟和绘图非常有用。</p>
<h2 id="cran-和-bioconductor">CRAN 和 Bioconductor</h2>
<p>CRAN为 Comprehensive R Archive
Network（R综合典藏网）的简称。它除了收藏了R可执行文件、源代码和说明文件，也收录了用户撰写的各种软件包。</p>
<h2 id="r的缺点">R的缺点</h2>
<ol type="1">
<li>R是一种解释性语言，和编译语言相比，速度显得略慢一点，但是随着硬件和R自身的发展，这个问题已经慢慢消失了。</li>
<li>R所有的计算都是在内存中进行的。</li>
<li>由于R语言的自由，各种包的编写者来自不同的领域，所以在一定程度上是比较混乱的，没有统一的命名格式，参数格式不一，源代码和文档质量良莠不齐。</li>
</ol>
<h2 id="r的使用">R的使用</h2>
<h3 id="第一次使用r">第一次使用R</h3>
<p>在R中可以使用“=”，也可是使用“&lt;-”来赋值，在实际使用中，这两种方法几乎没有区别。但是，一般在赋值的时候使用箭头，在传递参数的时候使用等号（必须使用等号，虽然有的时候用箭头也可以运行，但是很危险）。
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="operator">&gt;</span> x<span class="operator">&lt;-</span><span class="number">1</span><span class="operator">:</span><span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> x</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> y<span class="operator">=</span><span class="number">1</span><span class="operator">:</span><span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> y</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">1</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></span><br></pre></td></tr></table></figure> 不推荐使用等号赋值。在R中使用井号“#”来注释。</p>
<h3 id="获取帮助">获取帮助</h3>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment">#查看函数的帮助</span></span><br><span class="line">help<span class="punctuation">(</span>rnorm<span class="punctuation">)</span>        <span class="comment">#等价于?rnorm</span></span><br><span class="line"><span class="comment">#模糊查询</span></span><br><span class="line">help.search<span class="punctuation">(</span><span class="string">&quot;rnor&quot;</span><span class="punctuation">)</span><span class="comment">#等价于??rnor</span></span><br><span class="line"><span class="comment">#查看一个函数的例子的运行结果</span></span><br><span class="line">example<span class="punctuation">(</span><span class="string">&quot;rnorm&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">#列出包当中的小短文</span></span><br><span class="line">vignette<span class="punctuation">(</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h3 id="工作空间和工作目录">工作空间和工作目录</h3>
<p>R是在内存中运行的，所使用的数据和函数等都在内存中，这被称为之为工作空间。可以使用ls()来列出当前工作空间中的多有对象，使用rm()来删除工作空间中的某一个对象，特别地，可以使用rm(list=ls(all.names=T))来删除所有的对象，包括其中隐藏的对象。</p>
<p>另外一个概念是工作目录，工作目录是一个文件夹的路径，这个路径表示的是当前在哪一个文件夹下工作。在存取文件时，如果不指定路径的话，就会默认为这个文件夹。在R中，可以使用getwd(即get
work
directory)函数来获得当前目录，如果要改变当前工作目录，可以使用setwd函数来设置。</p>
<h2 id="包的安装和使用">包的安装和使用</h2>
<p>在R中使用命令来安装包 <figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 在R中使用命令来安装包</span></span><br><span class="line">install.packages<span class="punctuation">(</span><span class="string">&quot;安装的包名&quot;</span><span class="punctuation">,</span>dependencies<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 加载一个包</span></span><br><span class="line">library<span class="punctuation">(</span><span class="string">&quot;包名&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 查看一个包的使用说明</span></span><br><span class="line">library<span class="punctuation">(</span>help<span class="operator">=</span><span class="string">&quot;包名&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
一个包在安装完成后需要先加载才能使用。</p>
<h1 id="第-2-章-数据结构">第 2 章 数据结构</h1>
<h2 id="数据结构">数据结构</h2>
<h3 id="向量">向量</h3>
<p>向量是用来储存一维数据的，其中的数据必须具有相同的数据类型，比如都是整数或者都是字符。可以用c()来创建向量。
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="operator">&gt;</span> v.number<span class="operator">&lt;-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">3</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> v.char<span class="operator">&lt;-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;Jane&quot;</span><span class="punctuation">,</span><span class="string">&quot;Justin&quot;</span><span class="punctuation">,</span><span class="string">&quot;Tom&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> v.bool<span class="operator">&lt;-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="literal">TRUE</span><span class="punctuation">,</span><span class="literal">FALSE</span><span class="punctuation">,</span><span class="literal">FALSE</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure> <!-- more -->
在R中除了0、NULL和NA之外的其他值都是真，其中NULL和NA是无法辨认真假的，可以通过以下例子来理解：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="operator">&gt;</span> <span class="keyword">if</span><span class="punctuation">(</span><span class="operator">-</span><span class="number">1</span><span class="punctuation">)</span> print<span class="punctuation">(</span><span class="string">&quot;true&quot;</span><span class="punctuation">)</span>    <span class="comment">#-1为真</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;true&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">if</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">)</span> print<span class="punctuation">(</span><span class="string">&quot;false&quot;</span><span class="punctuation">)</span>    <span class="comment">#无输出</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">if</span><span class="punctuation">(</span><span class="literal">NA</span><span class="punctuation">)</span> print<span class="punctuation">(</span><span class="string">&quot;false&quot;</span><span class="punctuation">)</span>   <span class="comment">#报错，无法比较</span></span><br><span class="line">Error <span class="keyword">in</span> <span class="keyword">if</span> <span class="punctuation">(</span><span class="literal">NA</span><span class="punctuation">)</span> print<span class="punctuation">(</span><span class="string">&quot;false&quot;</span><span class="punctuation">)</span> <span class="operator">:</span> <span class="built_in">missing</span> value where <span class="literal">TRUE</span><span class="operator">/</span><span class="literal">FALSE</span> needed</span><br><span class="line"><span class="operator">&gt;</span> <span class="keyword">if</span><span class="punctuation">(</span><span class="literal">NULL</span><span class="punctuation">)</span> print<span class="punctuation">(</span><span class="string">&quot;false&quot;</span><span class="punctuation">)</span> <span class="comment">#报错，无法比较</span></span><br><span class="line">Error <span class="keyword">in</span> <span class="keyword">if</span> <span class="punctuation">(</span><span class="literal">NULL</span><span class="punctuation">)</span> print<span class="punctuation">(</span><span class="string">&quot;false&quot;</span><span class="punctuation">)</span> <span class="operator">:</span> argument is of <span class="built_in">length</span> zero</span><br></pre></td></tr></table></figure>
<p>在R中，如果在一个向量中有两种不同的数据类型，那么数据之间会进行转化，转化的顺序为由低级向高级转换，数据类型的的高低级顺序为”NULL&lt;raw&lt;integer&lt;double&lt;complex&lt;character&lt;list&lt;expression”。</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="operator">&gt;</span> x<span class="operator">&lt;-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">10</span><span class="punctuation">,</span><span class="string">&quot;Jane&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x</span><br><span class="line"> <span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;1&quot;</span>    <span class="string">&quot;2&quot;</span>    <span class="string">&quot;3&quot;</span>    <span class="string">&quot;4&quot;</span>    <span class="string">&quot;5&quot;</span>    <span class="string">&quot;6&quot;</span>    <span class="string">&quot;7&quot;</span>    <span class="string">&quot;8&quot;</span>    <span class="string">&quot;9&quot;</span>    <span class="string">&quot;10&quot;</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">11</span><span class="punctuation">]</span> <span class="string">&quot;Jane&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>x<span class="punctuation">)</span> <span class="comment">#返回变量的数据类型</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;character&quot;</span></span><br><span class="line"><span class="operator">&gt;</span> y<span class="operator">&lt;-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="built_in">class</span><span class="punctuation">(</span>y<span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="string">&quot;integer&quot;</span></span><br></pre></td></tr></table></figure>
<p>可以通过方括号来访问向量中的元素，注意，在R中，向量的下标是从1开始的，而不是0。
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="operator">&gt;</span> x<span class="operator">&lt;-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> x<span class="punctuation">[</span><span class="number">0</span><span class="punctuation">]</span>          <span class="comment">#x[0]返回的是一个和x类型相同的空对象</span></span><br><span class="line">integer<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&gt;</span> x<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>          <span class="comment">#取出第1个元素</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line"><span class="operator">&gt;</span> x<span class="punctuation">[</span><span class="number">2</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">]</span>        <span class="comment">#取出第2到第4个元素</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="operator">&gt;</span> x<span class="punctuation">[</span><span class="operator">-</span><span class="number">1</span><span class="punctuation">]</span>         <span class="comment">#取出除了第1个以外的元素</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span>  <span class="number">2</span>  <span class="number">3</span>  <span class="number">4</span>  <span class="number">5</span>  <span class="number">6</span>  <span class="number">7</span>  <span class="number">8</span>  <span class="number">9</span> <span class="number">10</span></span><br><span class="line"><span class="operator">&gt;</span> x<span class="punctuation">[</span><span class="number">11</span><span class="punctuation">]</span>         <span class="comment">#返回NA值，注意和x[0]的不同</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="literal">NA</span></span><br></pre></td></tr></table></figure>
上面出现了x[-1]，在R中，这种写法表示的意思是：除了第1个元素之外的其他元素。</p>
<p><strong>注意：</strong>在给变量命名的时候，需要符合一定的规则，必须是以字母或者“.”开头，并且“.”开头的名字后的第一个字符只能是下划线（“_”）或者字母。想要规范R语言命名和编程规范，推荐Google的R语言编程风格指南（<a
href="https://google.github.io/styleguide/Rguide.xml">Google’s R Style
Guide</a>）。</p>
<h3 id="矩阵">矩阵</h3>
<p>矩阵是一个二维数组，和向量一样，在创建它的时候，也需要注意其数据应该具有相同的数据类型，可以使用函数matrix来创建，matrix的使用方法为：
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">matrix<span class="punctuation">(</span>data<span class="operator">=</span><span class="literal">NA</span><span class="punctuation">,</span>nrow<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span>ncol<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span>byrow<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">,</span><span class="built_in">dimnames</span><span class="operator">=</span><span class="literal">NULL</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
data表示一个向量，也就是需要创建的矩阵中的元素。nrow表示行数，ncol表示列数。byrow是一个逻辑值，如果为TRUE，则会按照行来排列，在默认的情况下，是按照列排列的。R中是列优先而不是行优先，这对于使用单下标获取元素有影响。dimnames表示向量的行和列的名字，在默认的情况下是没有名字的。与向量类似，可以通过下标来取出元素，比如x[1,2]表示第一行第二列的元素，则x[,1]则表示所有行的第一列元素。
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="operator">&gt;</span> rowName<span class="operator">&lt;-</span>paste<span class="punctuation">(</span><span class="string">&quot;row&quot;</span><span class="punctuation">,</span><span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">,</span>sep<span class="operator">=</span><span class="string">&#x27;&#x27;</span><span class="punctuation">)</span> <span class="comment">#创建行名</span></span><br><span class="line"><span class="operator">&gt;</span> colName<span class="operator">&lt;-</span>paste<span class="punctuation">(</span><span class="string">&quot;col&quot;</span><span class="punctuation">,</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">,</span>sep<span class="operator">=</span><span class="string">&#x27;&#x27;</span><span class="punctuation">)</span> <span class="comment">#创建列名</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="punctuation">(</span>m1<span class="operator">&lt;-</span>matrix<span class="punctuation">(</span>data<span class="operator">=</span><span class="number">1</span><span class="operator">:</span><span class="number">12</span><span class="punctuation">,</span>nrow<span class="operator">=</span><span class="number">3</span><span class="punctuation">,</span>byrow<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">,</span><span class="built_in">dimnames</span><span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>rowName<span class="punctuation">,</span>colName<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">     col1 col2 col3 col4</span><br><span class="line">row1    <span class="number">1</span>    <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line">row2    <span class="number">5</span>    <span class="number">6</span>    <span class="number">7</span>    <span class="number">8</span></span><br><span class="line">row3    <span class="number">9</span>   <span class="number">10</span>   <span class="number">11</span>   <span class="number">12</span></span><br><span class="line"><span class="operator">&gt;</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="punctuation">(</span>m2<span class="operator">&lt;-</span>matrix<span class="punctuation">(</span>data<span class="operator">=</span><span class="number">1</span><span class="operator">:</span><span class="number">12</span><span class="punctuation">,</span>nrow<span class="operator">=</span><span class="number">3</span><span class="punctuation">,</span>byrow<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">,</span><span class="built_in">dimnames</span> <span class="operator">=</span> <span class="built_in">list</span><span class="punctuation">(</span>rowName<span class="punctuation">,</span>colName<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">     col1 col2 col3 col4</span><br><span class="line">row1    <span class="number">1</span>    <span class="number">4</span>    <span class="number">7</span>   <span class="number">10</span></span><br><span class="line">row2    <span class="number">2</span>    <span class="number">5</span>    <span class="number">8</span>   <span class="number">11</span></span><br><span class="line">row3    <span class="number">3</span>    <span class="number">6</span>    <span class="number">9</span>   <span class="number">12</span></span><br><span class="line"><span class="operator">&gt;</span> m1<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">2</span></span><br><span class="line"><span class="operator">&gt;</span> m1<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">]</span></span><br><span class="line">col2 col3 col4</span><br><span class="line">   <span class="number">2</span>    <span class="number">3</span>    <span class="number">4</span></span><br><span class="line"><span class="operator">&gt;</span> m1<span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line">row1 row2 row3</span><br><span class="line">   <span class="number">1</span>    <span class="number">5</span>    <span class="number">9</span></span><br><span class="line"><span class="operator">&gt;</span> m1<span class="punctuation">[</span><span class="number">3</span><span class="punctuation">]</span>    <span class="comment">#等价于m1[3,1]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">9</span></span><br></pre></td></tr></table></figure>
这里需要注意m1[3]的值，因为列优先，所以m1[3]和m1[3,1]是等价的。此外，上面使用了paste来构建行名和列名，关于paste函数的具体用法，在讲解字符串函数的时候会进行分析。</p>
<h3 id="数组">数组</h3>
<p>数组可以看成是矩阵的一个扩展，矩阵的维度只能是2，而数组的维度则可以更高，仍然要注意，数组数据的类型也要相同。可以通过函数array来创建数组，array函数的一般使用方法为：
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">array<span class="punctuation">(</span>data <span class="operator">=</span> <span class="literal">NA</span><span class="punctuation">,</span><span class="built_in">dim</span> <span class="operator">=</span> <span class="built_in">length</span><span class="punctuation">(</span>data<span class="punctuation">)</span><span class="punctuation">,</span><span class="built_in">dimnames</span> <span class="operator">=</span> <span class="literal">NULL</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
data表示一个向量，也就是我们想要用来构建数组的数据；dim表示数据的维度，也是一个向量，其默认值是数据的长度，也就是说默认建立1xn的向量；dimnames用来指定各个维度上的名字。与向量和矩阵类似，仍然通过下标来获取元素。
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="operator">&gt;</span> dim1Name<span class="operator">&lt;-</span>paste<span class="punctuation">(</span><span class="string">&quot;A&quot;</span><span class="punctuation">,</span><span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">,</span>sep<span class="operator">=</span><span class="string">&#x27;&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> dim2Name<span class="operator">&lt;-</span>paste<span class="punctuation">(</span><span class="string">&quot;B&quot;</span><span class="punctuation">,</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">,</span>sep<span class="operator">=</span><span class="string">&#x27;&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> dim3Name<span class="operator">&lt;-</span>paste<span class="punctuation">(</span><span class="string">&quot;C&quot;</span><span class="punctuation">,</span><span class="number">1</span><span class="operator">:</span><span class="number">2</span><span class="punctuation">,</span>sep<span class="operator">=</span><span class="string">&#x27;&#x27;</span><span class="punctuation">)</span></span><br><span class="line"><span class="operator">&gt;</span> <span class="punctuation">(</span>a<span class="operator">&lt;-</span>array<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">24</span><span class="punctuation">,</span><span class="built_in">dim</span><span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">3</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="built_in">dimnames</span><span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>dim1Name<span class="punctuation">,</span>dim2Name<span class="punctuation">,</span>dim3Name<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">,</span> <span class="punctuation">,</span> C1</span><br><span class="line"></span><br><span class="line">   B1 B2 B3 B4</span><br><span class="line">A1  <span class="number">1</span>  <span class="number">4</span>  <span class="number">7</span> <span class="number">10</span></span><br><span class="line">A2  <span class="number">2</span>  <span class="number">5</span>  <span class="number">8</span> <span class="number">11</span></span><br><span class="line">A3  <span class="number">3</span>  <span class="number">6</span>  <span class="number">9</span> <span class="number">12</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">,</span> <span class="punctuation">,</span> C2</span><br><span class="line"></span><br><span class="line">   B1 B2 B3 B4</span><br><span class="line">A1 <span class="number">13</span> <span class="number">16</span> <span class="number">19</span> <span class="number">22</span></span><br><span class="line">A2 <span class="number">14</span> <span class="number">17</span> <span class="number">20</span> <span class="number">23</span></span><br><span class="line">A3 <span class="number">15</span> <span class="number">18</span> <span class="number">21</span> <span class="number">24</span></span><br><span class="line"></span><br><span class="line"><span class="operator">&gt;</span> a<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">1</span></span><br><span class="line"><span class="operator">&gt;</span> a<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">C1 C2</span><br><span class="line"> <span class="number">4</span> <span class="number">16</span></span><br><span class="line"><span class="operator">&gt;</span> a<span class="punctuation">[</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">   C1 C2</span><br><span class="line">B1  <span class="number">1</span> <span class="number">13</span></span><br><span class="line">B2  <span class="number">4</span> <span class="number">16</span></span><br><span class="line">B3  <span class="number">7</span> <span class="number">19</span></span><br><span class="line">B4 <span class="number">10</span> <span class="number">22</span></span><br><span class="line"><span class="operator">&gt;</span> a<span class="punctuation">[</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="punctuation">]</span></span><br><span class="line">   C1 C2</span><br><span class="line">A1  <span class="number">1</span> <span class="number">13</span></span><br><span class="line">A2  <span class="number">2</span> <span class="number">14</span></span><br><span class="line">A3  <span class="number">3</span> <span class="number">15</span></span><br></pre></td></tr></table></figure> ### 因子
变量有连续性变量和非连续性变量之分，而非连续性变量又有有序和无序之分。对于连续性变量，使用数字来表示是有意义的，可以对其进行代数计算。而对于非连续型变量，它们有的有次序之分，有的无次序之分，变量只是用来标识不同的事件。在R中，对于连续性变量，使用integer（整数）或者numeric（实数）等类型的数据来表示；而对于非连续性变量，则专门使用一种称之为因子的类型来描述这种变量。在R中创建和改变因子会用到两个函数：factor和levels。
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">factor<span class="punctuation">(</span>x <span class="operator">=</span> character<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">,</span> levels<span class="punctuation">,</span>labels <span class="operator">=</span> levels<span class="punctuation">,</span> exclude <span class="operator">=</span> <span class="literal">NA</span><span class="punctuation">,</span>ordered <span class="operator">=</span> is.ordered<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">,</span>nmax <span class="operator">=</span> <span class="literal">NA</span><span class="punctuation">)</span></span><br><span class="line">levels<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br></pre></td></tr></table></figure> x
表示需要创建为因子的数据，是一个向量；levels表示所创建的因子数据的水平，如果不指定的话，就是x中不重复的所有值；labels用来标识这一水平的名称，与水平一一对应，labels是为了更加方便用户识别；exclude表示有哪些水平是不需要的；ordered是一个逻辑值，如果是TRUE，则表示有序因子，是FALSE则表示无序因子；nmax表示的是水平个数的上限。</p>
<h3 id="列表">列表</h3>
<p>list是一个强大的容器，可以在其中放入各种类型的的变量，比如数字、字符、向量、矩阵、数组以及数据框，甚至是列表本身。
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="built_in">list</span><span class="punctuation">(</span>x1<span class="punctuation">,</span>x2<span class="punctuation">,</span>x3<span class="punctuation">,</span>...<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
列表的参数就是要放入列表的元素。访问列表有两种方式，既可以通过下标来访问列表，也可以使用符号<span
class="math inline"><em>来</em><em>访</em><em>问</em>。<em>使</em><em>用</em>[]<em>时</em>，<em>必</em><em>须</em><em>使</em><em>用</em><em>精</em><em>确</em><em>值</em><em>来</em><em>匹</em><em>配</em>；<em>而</em><em>使</em><em>用</em></span>时，则可以使用模糊匹配。对于[[
]]的使用，可以这样理解：对于一个列表，用下标[
]取出来后的元素仍然是一个列表，所以需要把它解析成向量的时候，需要再加一个[
]。</p>
<h3 id="数据框">数据框</h3>
<p>数据框并不要求存储在其中的所有的数据类型都一样，但对于每一列的数据类型还是要求一样的。可以使用data.frame()创建数据框。
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">data.frame<span class="punctuation">(</span>...<span class="punctuation">,</span>row.names <span class="operator">=</span> <span class="literal">NULL</span><span class="punctuation">,</span> check.rows <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">,</span> check.names <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span> stringsAsFactors <span class="operator">=</span> default.stringsAsFactors<span class="punctuation">(</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
“…”表示各个列的数据集；row.names表示行名；check.rows是逻辑值，表示是不是检查行的长度和名字；check.names也是逻辑值，用来检查名字是不是合法；stringAsFactors是一个比较重要的参数，也是一个逻辑值，表示是不是把数据集中的字符串转化为因子类型。需要特别注意的是，如果不考虑这个参数，有时会把一些不想当作因子的函数当做因子来处理。
## 数据的导入与导出 ### 从键盘输入 <figure class="highlight r"><table><tr><td class="code"><pre><span class="line">m1 <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">)</span></span><br><span class="line">m2 <span class="operator">&lt;-</span> matrix<span class="punctuation">(</span><span class="number">0</span><span class="punctuation">)</span></span><br><span class="line">edit<span class="punctuation">(</span>m1<span class="punctuation">)</span></span><br><span class="line">fix<span class="punctuation">(</span>m2<span class="punctuation">)</span></span><br><span class="line">x<span class="operator">&lt;-</span>scan<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line">y <span class="operator">&lt;-</span> scan<span class="punctuation">(</span>what<span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>name<span class="operator">=</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span>age<span class="operator">=</span><span class="number">0</span><span class="punctuation">)</span><span class="punctuation">)</span> <span class="comment"># what指出输入的数据格式，可以通过给变量赋值的方式指明数据的格式。</span></span><br></pre></td></tr></table></figure>
使用edit编辑后的对象仍然是原来的，所做的修改没有保存，而使用fix修改过的对象则保留了修改。scan是一个比较底层的读取数据函数，可以从屏幕和文件中读取数据，按回车键表示输入结束。
### 从纯文本中读取数据 <figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">(</span>x<span class="operator">&lt;-</span>read.table<span class="punctuation">(</span>file <span class="operator">=</span> <span class="string">&quot;D:/data.txt&quot;</span><span class="punctuation">,</span>head <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span>sep <span class="operator">=</span> <span class="string">&quot;,&quot;</span><span class="punctuation">,</span>colClasses <span class="operator">=</span> <span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;character&quot;</span><span class="punctuation">,</span><span class="string">&quot;factor&quot;</span><span class="punctuation">,</span><span class="string">&quot;numeric&quot;</span><span class="punctuation">,</span><span class="string">&quot;numeric&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure></p>
<h2 id="总结和补充">总结和补充</h2>
<h3 id="补充">补充</h3>
<p>class函数可以用来查看R中对象的类型。 <figure class="highlight r"><table><tr><td class="code"><pre><span class="line">x <span class="operator">&lt;-</span> 1<span class="operator">:</span><span class="number">10</span></span><br><span class="line"><span class="built_in">class</span><span class="punctuation">(</span>x<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
在创建一个向量的时候，难免出现重复，而处理这种情况的比较好的方案之一就是使用rep()函数。
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="built_in">rep</span><span class="punctuation">(</span>x<span class="punctuation">,</span>times<span class="punctuation">,</span>each<span class="punctuation">,</span>length.out<span class="punctuation">,</span>...<span class="punctuation">)</span></span><br></pre></td></tr></table></figure> x 表示的是需要重复的那个向量；each
表示每个元素重复的次数，如果设置为空或者设置为非法参数，则当作是1来处理；times
表示经过each处理以后的新的向量中每个元素重复的次数。each 和times
应该是和x等长度的向量，但是，如果比x的长度短，就会重复使用该向量。</p>
<p>使用gl函数创建因子型。 <figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 创建一个3水平的每个水平重复2次的因子序列 </span></span><br><span class="line">gl<span class="punctuation">(</span>n<span class="operator">=</span><span class="number">3</span><span class="punctuation">,</span>k<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span>labels<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;R&quot;</span><span class="punctuation">,</span><span class="string">&quot;Python&quot;</span><span class="punctuation">,</span><span class="string">&quot;Lisp&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure> n 表示的是创建的变量的水平，k
表示的是每个水平重复的次数，labels 表示的是水平对应的标签。</p>
<p>cbind 函数和 rbind 函数是用来合并数据集的，cbind 表示的是按列，而
rbind 表示的是按行合并。 <figure class="highlight r"><table><tr><td class="code"><pre><span class="line">cbind<span class="punctuation">(</span>...<span class="punctuation">,</span> deparse.level<span class="operator">=</span><span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">rbind<span class="punctuation">(</span>...<span class="punctuation">,</span> deparse.level<span class="operator">=</span><span class="number">1</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure> “…”
表示需要合并的各个数据集，deparse.level 是一个整数，可以取
1、2、3，用来控制标签的建立，0 表示没有标签，1
表示如果有标签，就使用标签；2
表示没有标签时，强制使用参数的名字作为标签。这里的合并不是按照某一个关键字合并，如果要按照关键字合并，可以参考R中的merge。
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">rbind<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span><span class="string">&quot;aa&quot;</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">,</span>a<span class="punctuation">,</span>deparse.level <span class="operator">=</span> <span class="number">0</span><span class="punctuation">)</span>  <span class="comment"># 中间两行有标签</span></span><br><span class="line">rbind<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span><span class="string">&quot;aa&quot;</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">,</span>a<span class="punctuation">,</span>deparse.level <span class="operator">=</span> <span class="number">1</span><span class="punctuation">)</span>  <span class="comment"># 后三行有标签</span></span><br><span class="line">rbind<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span><span class="string">&quot;aa&quot;</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">,</span>a<span class="punctuation">,</span>deparse.level <span class="operator">=</span> <span class="number">2</span><span class="punctuation">)</span>  <span class="comment"># 全部都有标签</span></span><br><span class="line">cbind<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">4</span><span class="punctuation">,</span> <span class="built_in">c</span><span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span><span class="string">&quot;aa&quot;</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">,</span>a<span class="punctuation">,</span>deparse.level <span class="operator">=</span> <span class="number">2</span><span class="punctuation">)</span>  <span class="comment"># 列合并</span></span><br></pre></td></tr></table></figure> head 和 tail这两个函数可以只查看数据集的前几行和后几行。
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">head<span class="punctuation">(</span>iris<span class="punctuation">)</span> <span class="comment"># 查看前6行</span></span><br><span class="line">tail<span class="punctuation">(</span>iris <span class="punctuation">,</span> n<span class="operator">=</span><span class="number">3</span><span class="punctuation">)</span> <span class="comment"># 查看后3行</span></span><br></pre></td></tr></table></figure> head 和 tail
的参数只有两个，第一个是要查看的数据集，第二个是要查看的行数。</p>
<h1 id="第3章-数据清理和转换">第3章 数据清理和转换</h1>
<h2 id="数据清理">数据清理</h2>
<h3 id="缺失值的处理">缺失值的处理</h3>
<p>which() 函数的用法： <figure class="highlight r"><table><tr><td class="code"><pre><span class="line">which<span class="punctuation">(</span>x<span class="punctuation">,</span> arr.ind <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">,</span> ...<span class="punctuation">)</span></span><br><span class="line">SSEC <span class="operator">&lt;-</span> na.omit<span class="punctuation">(</span>SSEC<span class="punctuation">)</span>  <span class="comment"># 删除空缺的数据</span></span><br></pre></td></tr></table></figure> which
用来寻找逻辑值为真的值所在的位置。x
表示的是一个逻辑向量或者数组；arr.ind
是一个逻辑值，如果为真，会得出在数据中的位置，否则会得到储存的索引。 ###
类型转化 as.Date() 函数的使用 <figure class="highlight r"><table><tr><td class="code"><pre><span class="line">as.Date<span class="punctuation">(</span>x<span class="punctuation">,</span> format<span class="operator">=</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span> tz<span class="operator">=</span><span class="string">&quot;&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure></p>
<p><strong>参考文档：</strong> <a
href="http://www.voidcn.com/article/p-pzmsbrkm-bke.html">Rstudio
install.packages失败解决方式</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>R语言</tag>
        <tag>读书笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown 基本语法</title>
    <url>/2016/12/23/Markdown%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>添加删除线</p>
</blockquote>
<p>在需要添加删除线的文字两侧各加上两个波浪号
<del>，例如：</del>被删除的内容<del>，显示效果为：</del>被删除的内容<sub></sub></p>
<blockquote>
<p>加粗与斜体</p>
</blockquote>
<p>粗体的使用是在需要加粗的文字前后各加两个“*”，而斜体的使用则是在需要斜体的文字前后各加一个“*”，如果要使用粗体和斜体，那么就是在需要操作的文字前后各加三个“*”。如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">**这个是粗体**</span><br><span class="line">*这个是斜体*</span><br><span class="line">***这个是粗体加斜体***</span><br></pre></td></tr></table></figure>
<blockquote>
<p>表格</p>
</blockquote>
<p>可以使用冒号来定义表格的对齐方式，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">| Tables | Are | Cool |</span><br><span class="line">| ------------- |:-------------:| -----:|</span><br><span class="line">| col 3 is | right-aligned | $1600 |</span><br><span class="line">| col 2 is | centered | $12 |</span><br><span class="line">| zebra stripes | are neat | $1 |</span><br></pre></td></tr></table></figure>
<p>效果：</p>
<table>
<thead>
<tr>
<th>Tables</th>
<th style="text-align: center;">Are</th>
<th style="text-align: right;">Cool</th>
</tr>
</thead>
<tbody>
<tr>
<td>col 3 is</td>
<td style="text-align: center;">right-aligned</td>
<td style="text-align: right;">$1600</td>
</tr>
<tr>
<td>col 2 is</td>
<td style="text-align: center;">centered</td>
<td style="text-align: right;">$12</td>
</tr>
<tr>
<td>zebra stripes</td>
<td style="text-align: center;">are neat</td>
<td style="text-align: right;">$1</td>
</tr>
</tbody>
</table>
<span id="more"></span>
<blockquote>
<p>有序列表</p>
</blockquote>
<p>有序列表的使用，在数字及符号“.”后加空格几个，如下：</p>
<ol type="1">
<li>有序列表 1</li>
<li>有序列表 2</li>
<li>有序列表 3</li>
</ol>
<blockquote>
<p>链接与图片</p>
</blockquote>
<p>在文中直接加链接，中括号中是需要添加链接的文字，圆括号中是需要添加的链接，格式：<code>[link text](http://example.com/ "optional title")</code></p>
<p><a href="http://example.com/" title="optional title">link
text</a></p>
<p>插入互联网上图片，格式：<code>![这里写图片描述](图片地址)</code></p>
<figure>
<img
src="https://avatars3.githubusercontent.com/u/13879860?v=3&amp;s=460"
alt="我的头像" />
<figcaption aria-hidden="true">我的头像</figcaption>
</figure>
<p><strong>参考文档：</strong> <a
href="https://segmentfault.com/markdown#articleHeader1">Markdown
编辑器语法指南</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Markdown语法</tag>
      </tags>
  </entry>
  <entry>
    <title>Photoshop 常用快捷键大全</title>
    <url>/2016/12/26/Photoshop%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>一、文件</p>
</blockquote>
<p>新建 CTRL+N 打开 CTRL+O 打开为 ALT+CTRL+O 关闭 CTRL+W 保存 CTRL+S
另存为 CTRL+SHIFT+S 另存为网页格式 CTRL+ALT+S 打印设置 CTRL+ALT+P
页面设置 CTRL+SHIFT+P 打印 CTRL+P 退出 CTRL+Q</p>
<span id="more"></span>
<blockquote>
<p>二、编辑</p>
</blockquote>
<p>撤消 CTRL+Z 向前一步 CTRL+SHIFT+Z 向后一步 CTRL+ALT+Z 退取
CTRL+SHIFT+F 剪切 CTRL+X 复制 CTRL+C 合并复制 CTRL+SHIFT+C 粘贴 CTRL+V
原位粘贴 CTRL+SHIFT+V 自由变换 CTRL+T 再次变换 CTRL+SHIFT+T 色彩设置
CTRL+SHIFT+K</p>
<blockquote>
<p>三、图象</p>
</blockquote>
<p>调整→色阶 CTRL+L 调整→自动色阶 CTRL+SHIFT+L 调整→自动对比度
CTRL+SHIFT+ALT+L 调整→曲线 CTRL+M 调整→色彩平衡 CTRL+B
调整→色相/饱和度CTRL+U 调整→去色 CTRL+SHIFT+U 调整→反向 CTRL+I 提取
CTRL+ALT+X 液化 CTRL+SHIFT+X</p>
<blockquote>
<p>四、图层</p>
</blockquote>
<p>新建图层 CTRL+SHIFT+N 新建通过复制的图层 CTRL+J 与前一图层编组 CTRL+G
取消编组 CTRL+SHIFT+G 合并图层 CTRL+E 合并可见图层 CTRL+SHIFT+E</p>
<blockquote>
<p>五、选择</p>
</blockquote>
<p>全选 CTRL+A 取消选择 CTRL+D 全部选择 CTRL+SHIFT+D 反选 CTRL+SHIFT+I
羽化 CTRL+ALT+D</p>
<blockquote>
<p>六、滤镜</p>
</blockquote>
<p>上次滤镜操作 CTRL+F</p>
<blockquote>
<p>七、视图</p>
</blockquote>
<p>校验颜色 CTRL+Y 色域警告 CTRL+SHIFT+Y 放大 CTRL++ 缩小 CTRL+-
满画布显示 CTRL+0 实际像素 CTRL+ALT+0 显示附加 CTRL+H 显示网格
CTRL+ALT+’ 显示标尺 CTRL+R 启用对齐 CTRL+； 琐定参考线 CTRL+ALT+；</p>
<blockquote>
<p>八、窗口</p>
</blockquote>
<p>关闭全部 CTRL+SHIFT+W</p>
<blockquote>
<p>九、帮助</p>
</blockquote>
<p>目录 F1 矩形、椭圆选框工具 【M】 裁剪工具 【C】 移动工具 【V】
套索、多边形套索、磁性套索 【L】 魔棒工具 【W】 喷枪工具 【J】 画笔工具
【B】 像皮图章、图案图章 【S】 历史记录画笔工具 【Y】 像皮擦工具 【E】
铅笔、直线工具 【N】 模糊、锐化、涂抹工具 【R】 减淡、加深、海棉工具
【O】 钢笔、自由钢笔、磁性钢笔 【P】 添加锚点工具 【+】 删除锚点工具
【-】 直接选取工具 【A】 文字、文字蒙板、直排文字、直排文字蒙板 【T】
度量工具 【U】 直线渐变、径向渐变、对称渐变、角度渐变、菱形渐变 【G】
油漆桶工具 【K】 吸管、颜色取样器 【I】 抓手工具 【H】 缩放工具 【Z】
默认前景色和背景色 【D】 切换前景色和背景色 【X】
切换标准模式和快速蒙板模式 【Q】
标准屏幕模式、带有菜单栏的全屏模式、全屏模式 【F】 临时使用移动工具
【Ctrl】 临时使用吸色工具 【Alt】 临时使用抓手工具 【空格】
打开工具选项面板 【Enter】
快速输入工具选项(当前工具选项面板中至少有一个可调节数字): 【0】至【9】
循环选择画笔 【[】或【]】 选择第一个画笔 【Shift】+【[】
选择最后一个画笔 【Shift】+【]】 建立新渐变(在”渐变编辑器”中)
【Ctrl】+【N】</p>
<blockquote>
<p>文件操作</p>
</blockquote>
<p>新建图形文件 【Ctrl】+【N】 用默认设置创建新文件
【Ctrl】+【Alt】+【N】 打开已有的图像 【Ctrl】+【O】 打开为…
【Ctrl】+【Alt】+【O】 关闭当前图像 【Ctrl】+【W】 保存当前图像
【Ctrl】+【S】 另存为… 【Ctrl】+【Shift】+【S】 存储副本
【Ctrl】+【Alt】+【S】 页面设置 【Ctrl】+【Shift】+【P】 打印
【Ctrl】+【P】 打开“预置”对话框 【Ctrl】+【K】
显示最后一次显示的“预置”对话框 【Alt】+【Ctrl】+【K】
设置“常规”选项(在预置对话框中) 【Ctrl】+【1】
设置“存储文件”(在预置对话框中) 【Ctrl】+【2】
设置“显示和光标”(在预置对话框中) 【Ctrl】+【3】
设置“透明区域与色域”(在预置对话框中) 【Ctrl】+【4】
设置“单位与标尺”(在预置对话框中) 【Ctrl】+【5】
设置“参考线与网格”(在预置对话框中) 【Ctrl】+【6】
设置“增效工具与暂存盘”(在预置对话框中) 【Ctrl】+【7】
设置“内存与图像高速缓存”(在预置对话框中) 【Ctrl】+【8】</p>
<blockquote>
<p>编辑操作</p>
</blockquote>
<p>还原/重做前一步操作 【Ctrl】+【Z】 还原两步以上操作
【Ctrl】+【Alt】+【Z】 重做两步以上操作 【Ctrl】+【Shift】+【Z】
剪切选取的图像或路径 【Ctrl】+【X】或【F2】 拷贝选取的图像或路径
【Ctrl】+【C】 合并拷贝 【Ctrl】+【Shift】+【C】
将剪贴板的内容粘到当前图形中 【Ctrl】+【V】或【F4】
将剪贴板的内容粘到选框中 【Ctrl】+【Shift】+【V】 自由变换
【Ctrl】+【T】 应用自由变换(在自由变换模式下) 【Enter】
从中心或对称点开始变换 (在自由变换模式下) 【Alt】 限制(在自由变换模式下)
【Shift】 扭曲(在自由变换模式下) 【Ctrl】 取消变形(在自由变换模式下)
【Esc】 自由变换复制的象素数据 【Ctrl】+【Shift】+【T】
再次变换复制的象素数据并建立一个副本【Ctrl】+【Shift】+【Alt】+【T】
删除选框中的图案或选取的路径 【DEL】 用背景色填充所选区域或整个图层
【Ctrl】+【BackSpace】或【Ctrl】+【Del】
用前景色填充所选区域或整个图层【Alt】+【BackSpace】或【Alt】+【Del】
弹出“填充”对话框 【Shift】+【BackSpace】 从历史记录中填充
【Alt】+【Ctrl】+【Backspace】</p>
<blockquote>
<p>图像调整</p>
</blockquote>
<p>调整色阶 【Ctrl】+【L】 自动调整色阶 【Ctrl】+【Shift】+【L】
打开曲线调整对话框 【Ctrl】+【M】
取消选择所选通道上的所有点(‘曲线’对话框中) 【Ctrl】+【D】
打开“色彩平衡”对话框 【Ctrl】+【B】 打开“色相/饱和度”对话框
【Ctrl】+【U】 全图调整(在色相/饱和度”对话框中) 【Ctrl】+【~】
只调整红色(在色相/饱和度”对话框中) 【Ctrl】+【1】
只调整黄色(在色相/饱和度”对话框中) 【Ctrl】+【2】
只调整绿色(在色相/饱和度”对话框中) 【Ctrl】+【3】
只调整青色(在色相/饱和度”对话框中) 【Ctrl】+【4】
只调整蓝色(在色相/饱和度”对话框中) 【Ctrl】+【5】
只调整洋红(在色相/饱和度”对话框中) 【Ctrl】+【6】 去色
【Ctrl】+【Shift】+【U】 反相 【Ctrl】+【I】</p>
<blockquote>
<p>图层操作</p>
</blockquote>
<p>从对话框新建一个图层 【Ctrl】+【Shift】+【N】
以默认选项建立一个新的图层 【Ctrl】+【Alt】+【Shift】+【N】
通过拷贝建立一个图层 【Ctrl】+【J】 通过剪切建立一个图层
【Ctrl】+【Shift】+【J】 与前一图层编组 【Ctrl】+【G】 取消编组
【Ctrl】+【Shift】+【G】 向下合并或合并联接图层 【Ctrl】+【E】
合并可见图层 【Ctrl】+【Shift】+【E】 盖印或盖印联接图层
【Ctrl】+【Alt】+【E】 盖印可见图层 【Ctrl】+【Alt】+【Shift】+【E】
将当前层下移一层 【Ctrl】+【[】 将当前层上移一层 【Ctrl】+【]】
将当前层移到最下面 【Ctrl】+【Shift】+【[】 将当前层移到最上面
【Ctrl】+【Shift】+【]】 激活下一个图层 【Alt】+【[】 激活上一个图层
【Alt】+【]】 激活底部图层 【Shift】+【Alt】+【[】 激活顶部图层
【Shift】+【Alt】+【]】
调整当前图层的透明度(当前工具为无数字参数的,如移动工具) 【0】至【9】
保留当前图层的透明区域(开关) 【/】 投影效果(在”效果”对话框中)
【Ctrl】+【1】 内阴影效果(在”效果”对话框中) 【Ctrl】+【2】
外发光效果(在”效果”对话框中) 【Ctrl】+【3】 内发光效果(在”效果”对话框中)
【Ctrl】+【4】 斜面和浮雕效果(在”效果”对话框中) 【Ctrl】+【5】
应用当前所选效果并使参数可调(在”效果”对话框中) 【A】</p>
<blockquote>
<p>图层混合模式</p>
</blockquote>
<p>循环选择混合模式 【Alt】+【-】或【+】 正常 【Ctrl】+【Alt】+【N】
阈值（位图模式） 【Ctrl】+【Alt】+【L】 溶解 【Ctrl】+【Alt】+【I】 背后
【Ctrl】+【Alt】+【Q】 清除 【Ctrl】+【Alt】+【R】 正片叠底
【Ctrl】+【Alt】+【M】 屏幕 【Ctrl】+【Alt】+【S】 叠加
【Ctrl】+【Alt】+【O】 柔光 【Ctrl】+【Alt】+【F】 强光
【Ctrl】+【Alt】+【H】 颜色减淡 【Ctrl】+【Alt】+【D】 颜色加深
【Ctrl】+【Alt】+【B】 变暗 【Ctrl】+【Alt】+【K】 变亮
【Ctrl】+【Alt】+【G】 差值 【Ctrl】+【Alt】+【E】 排除
【Ctrl】+【Alt】+【X】 色相 【Ctrl】+【Alt】+【U】 饱和度
【Ctrl】+【Alt】+【T】 颜色 【Ctrl】+【Alt】+【C】 光度
【Ctrl】+【Alt】+【Y】 去色 海棉工具+【Ctrl】+【Alt】+【J】 加色
海棉工具+【Ctrl】+【Alt】+【A】 暗调
减淡/加深工具+【Ctrl】+【Alt】+【W】 中间调
减淡/加深工具+【Ctrl】+【Alt】+【V】 高光
减淡/加深工具+【Ctrl】+【Alt】+【Z】</p>
<blockquote>
<p>选择功能</p>
</blockquote>
<p>全部选取 【Ctrl】+【A】 取消选择 【Ctrl】+【D】 重新选择
【Ctrl】+【Shift】+【D】 羽化选择 【Ctrl】+【Alt】+【D】 反向选择
【Ctrl】+【Shift】+【I】 路径变选区 数字键盘的【Enter】 载入选区
【Ctrl】+点按图层、路径、通道面板中的缩约图
按上次的参数再做一次上次的滤镜 【Ctrl】+【F】 退去上次所做滤镜的效果
【Ctrl】+【Shift】+【F】 重复上次所做的滤镜(可调参数)
【Ctrl】+【Alt】+【F】 选择工具(在“3D变化”滤镜中) 【V】
立方体工具(在“3D变化”滤镜中) 【M】 球体工具(在“3D变化”滤镜中) 【N】
柱体工具(在“3D变化”滤镜中) 【C】 轨迹球(在“3D变化”滤镜中) 【R】
全景相机工具(在“3D变化”滤镜中) 【E】</p>
<blockquote>
<p>视图操作</p>
</blockquote>
<p>显示彩色通道 【Ctrl】+【~】 显示单色通道 【Ctrl】+【数字】
显示复合通道 【~】 以CMYK方式预览(开关) 【Ctrl】+【Y】 打开/关闭色域警告
【Ctrl】+【Shift】+【Y】 放大视图 【Ctrl】+【+】 缩小视图 【Ctrl】+【-】
满画布显示 【Ctrl】+【0】 实际象素显示 【Ctrl】+【Alt】+【0】
向上卷动一屏 【PageUp】 向下卷动一屏 【PageDown】 向左卷动一屏
【Ctrl】+【PageUp】 向右卷动一屏 【Ctrl】+【PageDown】 向上卷动10 个单位
【Shift】+【PageUp】 向下卷动10 个单位 【Shift】+【PageDown】 向左卷动10
个单位 【Shift】+【Ctrl】+【PageUp】 向右卷动10 个单位
【Shift】+【Ctrl】+【PageDown】 将视图移到左上角 【Home】
将视图移到右下角 【End】 显示/隐藏选择区域 【Ctrl】+【H】 显示/隐藏路径
【Ctrl】+【Shift】+【H】 显示/隐藏标尺 【Ctrl】+【R】 显示/隐藏参考线
【Ctrl】+【;】 显示/隐藏网格 【Ctrl】+【”】 贴紧参考线
【Ctrl】+【Shift】+【;】 锁定参考线 【Ctrl】+【Alt】+【;】 贴紧网格
【Ctrl】+【Shift】+【”】 显示/隐藏“画笔”面板 【F5】 显示/隐藏“颜色”面板
【F6】 显示/隐藏“图层”面板 【F7】 显示/隐藏“信息”面板 【F8】
显示/隐藏“动作”面板 【F9】 显示/隐藏所有命令面板 【TAB】
显示或隐藏工具箱以外的所有调板 【Shift】+【TAB】</p>
<blockquote>
<p>文字处理(在”文字工具”对话框中)</p>
</blockquote>
<p>左对齐或顶对齐 【Ctrl】+【Shift】+【L】 中对齐
【Ctrl】+【Shift】+【C】 右对齐或底对齐 【Ctrl】+【Shift】+【R】
左／右选择 1 个字符 【Shift】+【←】/【→】 下／上选择 1 行
【Shift】+【↑】/【↓】 选择所有字符 【Ctrl】+【A】
将所选文本的文字大小减小2 点象素 【Ctrl】+【Shift】+【&lt;】
将所选文本的文字大小增大2 点象素 【Ctrl】+【Shift】+【&gt;】
将所选文本的文字大小减小10 点象素 【Ctrl】+【Alt】+【Shift】+【&lt;】
将所选文本的文字大小增大10 点象素 【Ctrl】+【Alt】+【Shift】+【&gt;】
将行距减小2点象素 【Alt】+【↓】 将行距增大2点象素 【Alt】+【↑】
将基线位移减小2点象素 【Shift】+【Alt】+【↓】 将基线位移增加2点象素
【Shift】+【Alt】+【↑】 将字距微调或字距调整减小20/1000ems 【Alt】+【←】
将字距微调或字距调整增加20/1000ems 【Alt】+【→】
将字距微调或字距调整减小100/1000ems 【Ctrl】+【Alt】+【←】
将字距微调或字距调整增加100/1000ems 【Ctrl】+【Alt】+【→】
选择通道中白的像素（包括半色调）【Ctrl】+【Alt】+【1~9】</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Photoshop</tag>
        <tag>快捷键</tag>
      </tags>
  </entry>
  <entry>
    <title>IntelliJ IDEA 快捷键</title>
    <url>/2016/12/23/IntelliJ-IDEA-%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>总结一下IntelliJ IDEA 中常用的快捷键，方便以后复查。
<span id="more"></span></p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr>
<th>快捷键</th>
<th>介绍</th>
</tr>
</thead>
<tbody>
<tr>
<td>Ctrl + R</td>
<td>在当前文件进行文本替换</td>
</tr>
<tr>
<td>Ctrl + Alt + L</td>
<td>格式化代码，可以对当前文件和整个包目录使用</td>
</tr>
<tr>
<td>Ctrl + Shift + ↑</td>
<td>光标放在方法名上，将方法移动到上一个方法前面，调整方法排序</td>
</tr>
<tr>
<td>Ctrl + Shift + ↓</td>
<td>光标放在方法名上，将方法移动到下一个方法前面，调整方法排序</td>
</tr>
<tr>
<td>Alt + Shift + ↑</td>
<td>移动光标所在行向上移动</td>
</tr>
<tr>
<td>Alt + Shift + ↓</td>
<td>移动光标所在行向下移动</td>
</tr>
<tr>
<td>Ctrl + Alt + Enter</td>
<td>光标所在行上空出一行，光标定位到新行</td>
</tr>
<tr>
<td>Ctrl + Alt + o</td>
<td>优化导入的类，可以对当前文件和整个包目录使用</td>
</tr>
<tr>
<td>F2</td>
<td>跳转到下一个高亮错误或警告位置</td>
</tr>
<tr>
<td>Alt + Shift + F10</td>
<td>弹出run的可选择菜单</td>
</tr>
<tr>
<td>Alt + Shift + F9</td>
<td>弹出run的可选择菜单</td>
</tr>
<tr>
<td>Ctrl + Shift + 左键单击</td>
<td>把光标放在某个类变量上，按此快捷键可以直接定位到该类中</td>
</tr>
<tr>
<td>Ctrl + Shift + Backspace</td>
<td>退回到上次修改的地方</td>
</tr>
<tr>
<td>Ctrl + Shift + Space</td>
<td>智能代码提示</td>
</tr>
</tbody>
</table>
<p><strong>参考文档</strong> <a
href="http://wiki.jikexueyuan.com/project/intellij-idea-tutorial/keymap-introduce.html">IntelliJ
IDEA使用教程 &gt; 快捷键</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>快捷键</tag>
        <tag>IntelliJ IDEA</tag>
      </tags>
  </entry>
  <entry>
    <title>发财树发芽了</title>
    <url>/2016/12/26/%E5%8F%91%E8%B4%A2%E6%A0%91%E5%8F%91%E8%8A%BD%E4%BA%86/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>之前在花园里捡到的发财树种子，发芽了。</p>
<p>我很喜欢养花，也喜欢买花。买花之前总是信心满满的一定可以把它养的很好，买回来一段时间后，热情逐渐消散，最后因为疏于管理，这些花花草草也死的差不多了。</p>
<p>对事总是三分钟的热情，虽然感觉整天忙忙碌碌的，但是一年下来，取得的成绩并不是很多，反而那些真正喜欢做的事情都没有做。</p>
<p>那么，改变还不晚，从此刻开始，精简生活，做自己真正喜欢的事。明确自己的目标：</p>
<span id="more"></span>
<ol type="1">
<li>努力锻炼身体。</li>
<li>关心家人朋友。</li>
<li>做事情有始有终。</li>
</ol>
<p>每天早晨起床都要默念这三个目标，努力去实现它们，新的一年我要取得更大的进步。</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>成长感悟</tag>
      </tags>
  </entry>
  <entry>
    <title>2017年，我的几个小目标</title>
    <url>/2017/01/03/2017%E5%B9%B4%EF%BC%8C%E6%88%91%E7%9A%84%E5%87%A0%E4%B8%AA%E5%B0%8F%E7%9B%AE%E6%A0%87/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>2017 年来啦，我也给自己定几个小目标，在 2017 年努力实现它们！</p>
<blockquote>
<p>工作</p>
</blockquote>
<p><strong>1.项目驱动。</strong>
去年学习新技术时总是想学透彻了再去做项目，但是往往学了很多没用的东西，学习的过程也比较枯燥乏味。今年打算先做项目，然后在做项目的过程中再去学习新的技术，这种项目驱动的方式，目标明确，学习效果也比较好。</p>
<p><strong>2.学习时间管理。</strong>
自己的时间利用率不高，今年打算好好学习时间管理这方面的内容，并积极实践。</p>
<span id="more"></span>
<p><strong>3.主动要求而不是被动接受。</strong>
去年在做项目的时候，总是被动地等待领导分配。而且有点抗拒和领导交流。今年要改变这种想法，有什么问题，要主动找领导和同事交流，因为我们是一个团队。一个人可以走的很快，但是只有团队才能走的更远。希望我们这个小团队在
2017 年可以取得更多更好的成绩！</p>
<blockquote>
<p>生活</p>
</blockquote>
<p><strong>1.陪伴家人。</strong>
在我小的时候，爸爸妈妈付出一切去哺育我，照顾我，虽然家庭条件不是很好，但是他们也想方设法满足我的一切需要。记忆尤其深刻的是，老爸辛苦工作，晚上下班还去给我买那种发光的荧光环。现在他们老了，我也要好好照顾他们，让他们享受快乐的晚年生活。</p>
<p><strong>2.给自己做减法。</strong>
去年给自己定了很多目标，把每天的时间排的满满的。感觉很累，完成的效果也不好。今年打算精简自己的目标，每天先完成最重要的三件事，再去完成其他的事。生活中只买自己非常喜欢的，确实需要的物品。至于那些闲置的物品，整理一下送人或者丢掉。让家里变得干净整洁，同时不让太多的物品分散自己的精力。我就可以专注于自己喜欢的事情上啦
O(∩_∩)O<sub></sub></p>
<p><strong>3.努力锻炼身体。</strong>
身体是革命的本钱，只有自己的身体健康，才能创造更大的财富，才能照顾好自己的家人！</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>目标</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL Workbench生成ER图</title>
    <url>/2016/12/30/MySQL-Workbench%E7%94%9F%E6%88%90ER%E5%9B%BE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在 MySQL 数据库中创建表以后，可以直接通过 MySQL Workbench 生成 ER
图。</p>
<p><strong>版本</strong>：MySQL Workbench Version 6.3.6 (64bits)</p>
<p>1.点击 Workbench 菜单栏的<em>Database</em>，选中下拉框中的<em>Reverse
Engineer</em>，如下图所示：</p>
<img src="/2016/12/30/MySQL-Workbench%E7%94%9F%E6%88%90ER%E5%9B%BE/1.png" class="">
<p>2.根据向导提示完成配置，如下图所示：</p>
<span id="more"></span>
<img src="/2016/12/30/MySQL-Workbench%E7%94%9F%E6%88%90ER%E5%9B%BE/2.jpg" class="">
<p>3.生成 ER 图，如下图所示：</p>
<img src="/2016/12/30/MySQL-Workbench%E7%94%9F%E6%88%90ER%E5%9B%BE/3.jpg" class="">
<p>4.点击菜单栏的<em>File</em>，选中下拉框中的<em>Export</em>，在弹出框中选中<em>Export
as PNG</em>，如下图所示:</p>
<img src="/2016/12/30/MySQL-Workbench%E7%94%9F%E6%88%90ER%E5%9B%BE/4.png" class="">
<p>5.保存为 PNG 格式的 ER 图，如下图所示:</p>
<img src="/2016/12/30/MySQL-Workbench%E7%94%9F%E6%88%90ER%E5%9B%BE/5.png" class="">
<p>6.完成！</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>MySQL Workbench</tag>
        <tag>ER图</tag>
      </tags>
  </entry>
  <entry>
    <title>2017年书单</title>
    <url>/2017/01/13/2017%E5%B9%B4%E4%B9%A6%E5%8D%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>我从小就非常喜欢看书，那时候喜欢看读者，青年文摘之类的书。由于经常在写作文时引用书里面的名言警句，使用一些意味深长的句子，语文老师还经常会把我写的作文当成范文在全班同学面前朗读，虽然说表面上会觉得不好意思，但是心里面还是非常高兴的。甚至有一篇小短文还登上了我们当地的报纸，虽然只有十块钱的稿费，但是直到今天也忘不了这件事。
<span id="more"></span>
后来上了高中，也经常会去学校的图书馆借书看，世界名著基本上都是那段时间看的，比如莎士比亚全集，内容现在基本上全还给书本了(╥╯^╰╥)。大一大二还经常会去学校图书馆借书看。后来买了电脑，业余时间就花在了看动漫、看美剧和看电影上面，基本上很少看书了。毕业工作后，每天的工作就是面对电脑编程，回家以后又玩电脑玩手机，眼睛实在受不了了。所以打算重新捡起读书的爱好，加之前段时间网上翻译得了一个kindle，更加点燃了我读书的热情。</p>
<p>从今天开始，认真记录2017年自己读过的书。开阔视野，提高表达能力，获取更多知识，加油O(∩_∩)O<sub></sub></p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>书名</th>
<th>作者</th>
<th>ISBN</th>
</tr>
</thead>
<tbody>
<tr>
<td><a
href="https://book.douban.com/subject/6977777/">1.《少的力量：高效能人士的六个行动准则》</a></td>
<td>(美)里奥·巴伯塔 著，段淳淳 译</td>
<td>9787214075451</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/10794797/">2.《红处方》</a></td>
<td>毕淑敏 著</td>
<td>9787539953007</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/3558629/">3.《小强升职记》</a></td>
<td>邹鑫 著</td>
<td>9787200076509</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/3259440/">4.《白夜行》</a></td>
<td>[日] 东野奎吾 著</td>
<td>9787544242516</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26340138/">5.《岛上书店》</a></td>
<td>[美] 加布瑞埃拉·泽文 著</td>
<td>9787539971810</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/2985995/">6.《爱上统计学》</a></td>
<td>[美] 尼尔·J. 萨尔金德 著</td>
<td>9787562441960</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25775696/">7.《金字塔原理》</a></td>
<td>芭芭拉·明托 (Barbara Minto) 著</td>
<td>9787544268509</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/5257905/">8.《深入浅出数据分析》</a></td>
<td>Michael Milton 著</td>
<td>9787121116933</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25775696/">9.《银色仙人掌》</a></td>
<td>龙应台 著</td>
<td>9787549576760</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26803605/">10.《经济学关我什么事》</a></td>
<td>文安德·冯·彼特尔斯多夫 著，刘于怡 译</td>
<td>9787569909241</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26426429/">11.《后窗》</a></td>
<td>A·希区柯克 著，史玉哲 / 向宏 / 王强 / 王帆 译</td>
<td>9787538746013</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/1048007/">12.《高效能人士的七个习惯（精华版）》</a></td>
<td>[美] 史蒂芬·柯维 著，高新勇 / 王亦兵 / 葛雪蕾 译</td>
<td>9787500649038</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/4813786/">13.《版本控制之道——使用Git》</a></td>
<td>Travis Swicegood 著，董越 / 付昭伟 / 等 译</td>
<td>9787121107191</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26260187/">14.《零秒思考》</a></td>
<td>[日] 赤羽雄二 著，曹倩 译</td>
<td>9787550239517</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/3283314/">15.《受益一生的心理学启示》</a></td>
<td>吴文铭 著</td>
<td>9787506450942</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25842089/">16.《大嘴巴漫谈数据挖掘》</a></td>
<td>易向军 著</td>
<td>9787121225116</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25913762/">17.《R语言与商业智能》</a></td>
<td>韩伟 / 毛俊杰 著</td>
<td>9787121217067</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/4024318/">18.《深入浅出SQL》</a></td>
<td>[美] 贝里 著，O‘Reilly Taiwan公司 译</td>
<td>9787564115234</td>
</tr>
<tr>
<td><a href="https://book.douban.com/subject/25866405/">19.《Pentaho
Kettle解决方案：使用PDI构建开源ETL解决方案》</a></td>
<td>[美] Matt Casters / [美] Roland Bouman / [美] Jos van Dongen
著，初建军 / 曹雪梅 译</td>
<td>9787121224454</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26642399/">20.《云计算通俗讲义》</a></td>
<td>王良明 著</td>
<td>9787121271120</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/6828074/">21.《解析极限编程》</a></td>
<td>[美] Kent Beck / Cynthia Andres 著，雷剑文 / 李应樵 / 陈振冲 译</td>
<td>9787111357957</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/3259433/">22.《代码之道》</a></td>
<td>Eric Brechner 著，陆其明 译</td>
<td>9787111251675</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26642267/">23.《加斯通·勒鲁探案集2》</a></td>
<td>加斯通·勒鲁 著</td>
<td>9787307121690</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25767395/">24.《神的拉面》</a></td>
<td>[日] 多纪光 著</td>
<td>9787513310680</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26642266/">25.《加斯通·勒鲁探案集1》</a></td>
<td>加斯通·勒鲁 著</td>
<td>9787307121683</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/21329625/">26.《青春》</a></td>
<td>韩寒 著</td>
<td>9787201078861</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25862578/">27.《解忧杂货店》</a></td>
<td>[日] 东野圭吾 著</td>
<td>9787544270878</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/24750910/">28.《大悬疑-史上最经典的悬疑故事》</a></td>
<td>（英）柯南·道尔 等著</td>
<td>9787511332196</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/6558708/">29.《稻草人手记》</a></td>
<td>三毛 著</td>
<td>9787530211090</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26284304/">30.《簪中录1:春灯暗》</a></td>
<td>侧侧轻寒 著</td>
<td>9787539975351</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26320556/">31.《簪中录2:九鸾缺》</a></td>
<td>侧侧轻寒 著</td>
<td>9787539980713</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26347981/">32.《簪中录3:芙蓉旧》</a></td>
<td>侧侧轻寒 著</td>
<td>9787539970479</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26347982/">33.《簪中录4:天河倾》</a></td>
<td>侧侧轻寒 著</td>
<td>9787539981765</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26934555/">34.《法医秦明作品集》</a></td>
<td>秦明 著</td>
<td>9789900052685</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26865201/">35.《法医禁忌档案》</a></td>
<td>延北老九 著</td>
<td>9787505736825</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26926169/">36.《法医禁忌档案.2》</a></td>
<td>延北老九 著</td>
<td>9787505738799</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/20427187/">37.《看见》</a></td>
<td>柴静 著</td>
<td>9787549529322</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26952718/">38.《好好学习》</a></td>
<td>成甲 著</td>
<td>9787508671581</td>
</tr>
</tbody>
</table>
<!--| [36.《》]() |   著 |   |-->
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>阅读</tag>
        <tag>书单</tag>
      </tags>
  </entry>
  <entry>
    <title>正则表达式</title>
    <url>/2017/01/13/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>以下内容来自<a
href="https://msdn.microsoft.com/zh-cn/library/ae5bf541%28v=vs.100%29.aspx#Anchor_1">msdn正则表达式语法</a>，所有版权归其所有。</p>
</blockquote>
<p>“正则表达式”描述在搜索文本正文时要匹配的一个或多个字符串。
该表达式可用作一个将字符模式与要搜索的字符串相匹配的模板。
正则表达式包括普通字符（例如，a 到 z
之间的字母）和特殊字符（称为“元字符”）。 <span id="more"></span> #### 特殊字符
下表包含了单字符元字符的列表以及它们在正则表达式中的行为。
<strong>注意：</strong>
若要匹配这些特殊字符之一，必须首先转义字符，即，在字符前面加反斜杠字符
()。 例如，若要搜索“+”文本字符，可使用表达式“+”。</p>
<p><img src="http://img.blog.csdn.net/20160816154525873"
alt="这里写图片描述" />
大多数特殊字符在括号表达式内出现时失去它们的意义，并表示普通字符。
有关更多信息，请参见<a
href="https://msdn.microsoft.com/zh-cn/library/901zys3s(v=vs.100).aspx">匹配字符的列表</a>中的“括号表达式中的字符”。
#### 元字符
下表包含了多字符元字符的列表以及它们在正则表达式中的行为。</p>
<p><img src="http://img.blog.csdn.net/20160816154914424"
alt="这里写图片描述" /> #### 非打印字符
下表包含表示非打印字符的转义序列。</p>
<p><img src="http://img.blog.csdn.net/20160816153946506"
alt="这里写图片描述" /> #### 优先级顺序
正则表达式的计算方式与算术表达式非常类似；即从左到右进行计算，并遵循优先级顺序。
下表按从高到低的顺序包含了正则表达式运算符的优先级顺序。</p>
<p><img src="http://img.blog.csdn.net/20160816155122459"
alt="这里写图片描述" />
字符具有高于替换运算符的优先级，例如，允许“m|food”匹配“m”或“food”。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>正则表达式</tag>
      </tags>
  </entry>
  <entry>
    <title>Python 练习100例</title>
    <url>/2017/01/04/Python-%E7%BB%83%E4%B9%A0100%E4%BE%8B/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>本文主要内容来自<a
href="http://www.runoob.com/python/python-100-examples.html">Python 100
例</a>。为了加深印象，自己再敲一遍代码。如有侵权，立即删除。</p>
</blockquote>
<p>运行环境：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">操作系统：win7 64bit</span><br><span class="line">Python Version：Python 2.7.13</span><br><span class="line">开发IDE：PyCharm Community Edition 2.16.3.2</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h4 id="实例-1">实例 1</h4>
<p><strong>题目：</strong>
有四个数字：1、2、3、4，能组成多少个互不相同且无重复数字的三位数“各是多少？
<strong>程序分析：</strong> 可填在百位、十位、个位的数字都是
1、2、3、4，组成所有的排列后再去掉不满足条件的排列。
<strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">            <span class="keyword">if</span>(i != k) <span class="keyword">and</span> (i != j) <span class="keyword">and</span> (j != k):</span><br><span class="line">                <span class="built_in">print</span> i,j,k</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-2">实例 2</h4>
<p><strong>题目：</strong>
企业发放的奖金根据利润提成。利润（I）低于或等于 10 万元时，奖金可提
10%；利润高于 10 万元，低于 20 万元时，低于 10 万元的部分按
10%提成，高于 10 万元的部分，可提成 7.5%；20 万到 40 万之间时，高于 20
万元的部分，可提成 5%；40 万到 60 万之间时高于 40 万元的部分，可提成
3%；60 万到 100 万之间时，高于 60 万元的部分，可提成 1.5%，高于 100
万元的部分按 1%提成，从键盘输入当月利润 I，求应发放奖金总数？
<strong>程序分析：</strong>
请利用数轴来分界，定位。注意定义时需把奖金定义成长整型。使用 PyCharm
的调试功能，可以更清楚程序的执行过程。</p>
<img src="/2017/01/04/Python-%E7%BB%83%E4%B9%A0100%E4%BE%8B/1.png" class="">
<p><strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line">i = <span class="built_in">int</span>(raw_input(<span class="string">&#x27;净利润：&#x27;</span>))   <span class="comment"># 输入当月利润</span></span><br><span class="line">arr = [<span class="number">1000000</span>, <span class="number">600000</span>, <span class="number">400000</span>, <span class="number">200000</span>, <span class="number">100000</span>, <span class="number">0</span>]  <span class="comment"># 定义利润数组</span></span><br><span class="line">rat = [<span class="number">0.01</span>, <span class="number">0.015</span>, <span class="number">0.03</span>, <span class="number">0.05</span>, <span class="number">0.075</span>, <span class="number">0.1</span>]  <span class="comment"># 定义提成百分比</span></span><br><span class="line">r = <span class="number">0</span>  <span class="comment"># 定义应发放奖金总数</span></span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, <span class="number">6</span>):</span><br><span class="line">    <span class="keyword">if</span> i &gt; arr[idx]:</span><br><span class="line">        r += (i-arr[idx])*rat[idx]</span><br><span class="line">        <span class="built_in">print</span> (i-arr[idx])*rat[idx]</span><br><span class="line">        i = arr[idx]</span><br><span class="line"><span class="built_in">print</span> r</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-3">实例 3</h4>
<p><strong>题目：</strong> 一个整数，它加上 100 和加上 268
后都是一个完全平方数，请问该数是多少？ <strong>程序分析：</strong>
完全平方即用一个整数乘以自己例如 1*1，2*2，3*3
等，依此类推。若一个数能表示成某个整数的平方的形式，则称这个数为完全平方数。在
10000 以内判断，将该数加上 100 后再开方，加上 268
后再开方，如果开方后的结果满足如下条件，即是结果。
<strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">10000</span>):</span><br><span class="line">    <span class="comment"># 转化为整型值</span></span><br><span class="line">    x = <span class="built_in">int</span>(math.sqrt(i + <span class="number">100</span>))</span><br><span class="line">    y = <span class="built_in">int</span>(math.sqrt(i + <span class="number">268</span>))</span><br><span class="line">    <span class="keyword">if</span>(x * x == i + <span class="number">100</span>) <span class="keyword">and</span> (y * y == i + <span class="number">268</span>):</span><br><span class="line">        <span class="built_in">print</span> i</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-4">实例 4</h4>
<p><strong>题目：</strong>
输入某年某月某日，判断这一天是这一年的第几天？
<strong>程序分析：</strong> 以 3 月 5
日为例，应该先把前两个月的天数加起来，然后再加上 5
天即本年的第几天。特殊情况：闰年且输入月份大于 2 时需考虑多加一天：
<strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line">year = <span class="built_in">int</span>(raw_input(<span class="string">&#x27;Input year:\n&#x27;</span>))</span><br><span class="line">month = <span class="built_in">int</span>(raw_input(<span class="string">&#x27;Input month:\n&#x27;</span>))</span><br><span class="line">day = <span class="built_in">int</span>(raw_input(<span class="string">&#x27;Input day:\n&#x27;</span>))</span><br><span class="line"></span><br><span class="line">months = (<span class="number">0</span>, <span class="number">31</span>, <span class="number">59</span>, <span class="number">90</span>, <span class="number">120</span>, <span class="number">151</span>, <span class="number">181</span>, <span class="number">212</span>, <span class="number">243</span>, <span class="number">273</span>, <span class="number">304</span>, <span class="number">334</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="number">0</span> &lt; month &lt;= <span class="number">12</span>:</span><br><span class="line">    sumday = months[month - <span class="number">1</span>]</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;data error&#x27;</span></span><br><span class="line"></span><br><span class="line">sumday += day</span><br><span class="line">leap = <span class="number">0</span>  <span class="comment"># 是否是闰年</span></span><br><span class="line"><span class="keyword">if</span> (year % <span class="number">400</span> == <span class="number">0</span>) <span class="keyword">or</span> ((year % <span class="number">4</span> == <span class="number">0</span>) <span class="keyword">and</span> (year % <span class="number">100</span> != <span class="number">0</span>)):  <span class="comment"># 判断是否是闰年</span></span><br><span class="line">    leap = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">if</span> (leap == <span class="number">1</span>) <span class="keyword">and</span> (month &gt; <span class="number">2</span>):</span><br><span class="line">    sumday += <span class="number">1</span>  <span class="comment"># 如果是闰年并且月份大于2，则总的天数要加1</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;It is the %dth day.&#x27;</span> % sumday</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-5">实例 5</h4>
<p><strong>题目：</strong> 输入三个数 x,y,z，请把这三个数由小到大输出。
<strong>程序分析：</strong> 使用列表的 sort()方法进行排序。
<strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line">i = []</span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    x = <span class="built_in">int</span>(raw_input(<span class="string">&#x27;integer:\n&#x27;</span>))</span><br><span class="line">    i.append(x)</span><br><span class="line">i.sort()</span><br><span class="line"><span class="built_in">print</span> i</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-6">实例 6</h4>
<p><strong>题目：</strong> 斐波那契数列。 <strong>程序分析：</strong>
斐波那契数列（Fibonacci
sequence），又称黄金分割数列，指的是这样一个数列：0、1、1、2、3、5、8、13、21、34、……在数学上，费波那契数列是以递归的方法来定义：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">F0 = 0 （n=0)</span><br><span class="line">F1 = 1 （n=1)</span><br><span class="line">Fn = F(n-1) + F(n-2) （n=1)</span><br></pre></td></tr></table></figure>
<p><strong>源码：</strong> <strong>方法一：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params">n</span>):</span><br><span class="line">    a, b = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n-<span class="number">1</span>):</span><br><span class="line">        a, b = b, a+b</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出第10个斐波那契数列</span></span><br><span class="line"><span class="built_in">print</span> fib(<span class="number">10</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>方法二：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用递归</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span> <span class="keyword">or</span> n == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出了第10个斐波那契数列</span></span><br><span class="line"><span class="built_in">print</span> fib(<span class="number">10</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>方法三：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">fib</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">return</span> [<span class="number">1</span>]</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> [<span class="number">1</span>, <span class="number">1</span>]</span><br><span class="line">    fibs = [<span class="number">1</span>, <span class="number">1</span>]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, n):</span><br><span class="line">        fibs.append(fibs[-<span class="number">1</span>] + fibs[-<span class="number">2</span>])</span><br><span class="line">    <span class="keyword">return</span> fibs</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出了前10个斐波那契数列</span></span><br><span class="line"><span class="built_in">print</span> fib(<span class="number">10</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-7">实例 7</h4>
<p><strong>题目：</strong> 将一个列表的数据复制到另一个列表中。
<strong>程序分析：</strong> 使用列表[:]。 <strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">b = a[:]</span><br><span class="line"><span class="built_in">print</span> b</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-8">实例 8</h4>
<p><strong>题目：</strong> 输出 9*9 乘法口诀表。
<strong>程序分析：</strong> 分行与列考虑，共 9 行 9 列，i 控制行，j
控制列 <strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">10</span>):</span><br><span class="line">        result = i * j</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;%d * %d = % -3d&#x27;</span> % (i, j, result)</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-9">实例 9</h4>
<p><strong>题目：</strong> 暂停一秒输出。 <strong>程序分析：</strong>
无。 <strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">myD = &#123;<span class="number">1</span>: <span class="string">&#x27;a&#x27;</span>, <span class="number">2</span>: <span class="string">&#x27;b&#x27;</span>&#125;</span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> <span class="built_in">dict</span>.items(myD):</span><br><span class="line">    <span class="built_in">print</span> key, value</span><br><span class="line">    time.sleep(<span class="number">1</span>)  <span class="comment"># 暂停1秒</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-10">实例 10</h4>
<p><strong>题目：</strong> 暂停一秒输出。 <strong>程序分析：</strong>
无。 <strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>, time.localtime(time.time()))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 暂停一秒</span></span><br><span class="line">time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> time.strftime(<span class="string">&#x27;%Y-%m-%d %H:%M:%S&#x27;</span>, time.localtime(time.time()))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-11">实例 11</h4>
<p><strong>题目：</strong> 古典问题：有一对兔子，从出生后第 3
个月起每个月都生一对兔子，小兔子长到三个月后每个月又生一对兔子，假如兔子都不死，问每个月的兔子总数是多少？
<strong>程序分析：</strong> 兔子对数（注意是对数，不是个数）的规律为数列
1,1,2,3,5,8,13,21…… <strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line">f1 = <span class="number">1</span></span><br><span class="line">f2 = <span class="number">1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">21</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;%12ld %12ld&#x27;</span> % (f1, f2)</span><br><span class="line">    <span class="keyword">if</span> (i % <span class="number">3</span>) == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    f1 += f2</span><br><span class="line">    f2 = f1 + f2</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-12">实例 12</h4>
<p><strong>题目：</strong> 判断 101-200
之间有多少个素数，并输出所有素数。 <strong>程序分析：</strong>
判断素数的方法：用一个数分别去除 2 到
sqrt（这个数）之间的数，如果能被整除，则表明此数不是素数，反之是素数。
<strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> math <span class="keyword">import</span> sqrt</span><br><span class="line"></span><br><span class="line">h = <span class="number">0</span>  <span class="comment"># 所有素数的个数</span></span><br><span class="line">leap = <span class="number">1</span>  <span class="comment"># 是否能被整除</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> m <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">101</span>, <span class="number">201</span>):</span><br><span class="line">    k = <span class="built_in">int</span>(sqrt(m + <span class="number">1</span>))</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, k + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> m % i == <span class="number">0</span>:</span><br><span class="line">            leap = <span class="number">0</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> leap == <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;%-4d&#x27;</span> % m</span><br><span class="line">        h += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> h % <span class="number">10</span> == <span class="number">0</span>:</span><br><span class="line">            <span class="built_in">print</span> <span class="string">&#x27;&#x27;</span></span><br><span class="line">    leap = <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;The total is %d&#x27;</span> % h</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-13">实例 13</h4>
<p><strong>题目：</strong>
打印出所有的“水仙花数”，所谓“水仙花数”是指一个三位数，其各位数字立方和等于该数本身，例如：153
是一个“水仙花数”，因为<span
class="math inline">153 = 1<sup>3</sup> + 5<sup>3</sup> + 3<sup>3</sup></span>
<strong>程序分析：</strong> 利用 for 循环 100-999
之间的数，每个数分解出个位，十位，百位。 <strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>, <span class="number">1000</span>):</span><br><span class="line">    i = n / <span class="number">100</span></span><br><span class="line">    j = n / <span class="number">10</span> % <span class="number">10</span></span><br><span class="line">    k = n % <span class="number">10</span></span><br><span class="line">    <span class="keyword">if</span> n == i ** <span class="number">3</span> + j ** <span class="number">3</span> + k ** <span class="number">3</span>:</span><br><span class="line">        <span class="built_in">print</span> n</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-14">实例 14</h4>
<p><strong>题目：</strong> 将一个正整数分解质因数。例如：输入 90，打印出
90=2*3*3*5 <strong>程序分析：</strong> 对 n
进行分解质因数，应先找到一个最小的质数 k（质数又称素数，一个大于 1
的自然数，如果除了 1
和它自身外，不能被其他自然数整除的数；否则称为合数），然后按下述步骤完成：</p>
<ol type="1">
<li>如果这个质数恰等于
n，则说明分解质因数的过程已经结束，打印即可。</li>
<li>如果 n&lt;&gt;k，但 n 能被 k 整除，则应打印出 k 的值，并用 n 除以 k
的商，作为新的正整数 n，重复执行第一步。</li>
<li>如果 n 不能被 k 整除，则用 k+1 作为 k 的值，重复执行第一步。</li>
</ol>
<p><strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">reduceNum</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;&#123;&#125; = &#x27;</span>.<span class="built_in">format</span>(n),  <span class="comment"># print末尾加逗号把换行符替代成一个空格</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(n, <span class="built_in">int</span>) <span class="keyword">or</span> n &lt;= <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;请输入一个正确的数字！&#x27;</span></span><br><span class="line">        exit(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">elif</span> n <span class="keyword">in</span> [<span class="number">1</span>]:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;&#123;&#125;&#x27;</span>.<span class="built_in">format</span>(n)</span><br><span class="line">    <span class="keyword">while</span> n <span class="keyword">not</span> <span class="keyword">in</span> [<span class="number">1</span>]:  <span class="comment"># 循环保证递归</span></span><br><span class="line">        <span class="keyword">for</span> index <span class="keyword">in</span> xrange(<span class="number">2</span>, n + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">if</span> n % index == <span class="number">0</span>:</span><br><span class="line">                n /= index  <span class="comment"># n等于n/index</span></span><br><span class="line">                <span class="keyword">if</span> n == <span class="number">1</span>:</span><br><span class="line">                    <span class="built_in">print</span> index</span><br><span class="line">                <span class="keyword">else</span>:  <span class="comment"># index 一定是素数</span></span><br><span class="line">                    <span class="built_in">print</span> <span class="string">&#x27;&#123;&#125; *&#x27;</span>.<span class="built_in">format</span>(index),</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">reduceNum(<span class="number">90</span>)</span><br><span class="line">reduceNum(<span class="number">100</span>)</span><br><span class="line">reduceNum(<span class="number">3</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-15">实例 15</h4>
<p><strong>题目：</strong>
利用条件运算符的嵌套来完成此题：学习成绩&gt;=90 分的同学用 A 表示，60-89
分之间的用户用 B 表示，60 分一下的用 C 表示。
<strong>程序分析：</strong> 程序分析：(a&gt;b)?a:b
这是条件运算符的基本例子。 <strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line">score = <span class="built_in">int</span>(raw_input(<span class="string">&#x27;input score:\n&#x27;</span>))</span><br><span class="line"><span class="keyword">if</span> score &gt;= <span class="number">90</span>:</span><br><span class="line">    grade = <span class="string">&#x27;A&#x27;</span></span><br><span class="line"><span class="keyword">elif</span> score &gt;= <span class="number">60</span>:</span><br><span class="line">    grade = <span class="string">&#x27;B&#x27;</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    grade = <span class="string">&#x27;C&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;%d belongs to %s&#x27;</span> % (score, grade)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-16">实例 16</h4>
<p><strong>题目：</strong> 输出指定格式的日期。
<strong>程序分析：</strong> 使用 datetime 模块。
<strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 输出今日日期，格式为dd/mm/yyyy。更多选项可以查看strftime()方法</span></span><br><span class="line">    <span class="built_in">print</span>(datetime.date.today().strftime(<span class="string">&#x27;%d/%m/%Y&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 创建日期对象</span></span><br><span class="line">    birthDate = datetime.date(<span class="number">1941</span>, <span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line">    <span class="built_in">print</span>(birthDate.strftime(<span class="string">&#x27;%d/%m/%Y&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 日期算数运算</span></span><br><span class="line">    birthNextDay = birthDate + datetime.timedelta(days=<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(birthNextDay.strftime(<span class="string">&#x27;%d/%m/%Y&#x27;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 日期替换</span></span><br><span class="line">    birthNextYear = birthDate.replace(year=birthDate.year + <span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(birthNextYear.strftime(<span class="string">&#x27;%d/%m/%Y&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-17">实例 17</h4>
<p><strong>题目：</strong>
输入一行字符，分别统计出其中英文字母、空格、数字和其它字符的个数。
<strong>程序分析：</strong> 利用 while 语句，条件为输入的字符不为’’。
<strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line">s = raw_input(<span class="string">&quot;inout a string:\n&quot;</span>)</span><br><span class="line">letters = <span class="number">0</span></span><br><span class="line">space = <span class="number">0</span></span><br><span class="line">digit = <span class="number">0</span></span><br><span class="line">others = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> c <span class="keyword">in</span> s:</span><br><span class="line">    <span class="keyword">if</span> c.isalpha():</span><br><span class="line">        letters += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> c.isdigit():</span><br><span class="line">        digit += <span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> c.isspace():</span><br><span class="line">        space += <span class="number">1</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        others += <span class="number">1</span></span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;char = %d, space = %d, dight = %d, others = %d&#x27;</span> % (letters, space, digit, others)</span><br></pre></td></tr></table></figure>
<h4 id="实例-18">实例 18</h4>
<p><strong>题目：</strong> 求 s = a + aa + aaa + aaaa + aa…a 的值，其中
a 是一个数字。例如 3 + 22 + 222 + 2222 +22222（此时共有 5
个数相加），几个数相加由键盘控制。 <strong>程序分析：</strong>
关键是计算出每一项的值。 <strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line">Tn = <span class="number">0</span></span><br><span class="line">Sn = []</span><br><span class="line">n = <span class="built_in">int</span>(raw_input(<span class="string">&#x27;请输入相加数的个数n = :\n&#x27;</span>))</span><br><span class="line">a = <span class="built_in">int</span>(raw_input(<span class="string">&#x27;请输入数的大小a = :\n&#x27;</span>))</span><br><span class="line"><span class="keyword">for</span> count <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">    Tn += a</span><br><span class="line">    a *= <span class="number">10</span></span><br><span class="line">    Sn.append(Tn)</span><br><span class="line">    <span class="built_in">print</span> Tn</span><br><span class="line"></span><br><span class="line">Sn = reduce(<span class="keyword">lambda</span> x, y: x + y, Sn)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;求和：%d5&#x27;</span> % Sn</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-19">实例 19</h4>
<p><strong>题目：</strong>
一个数如果恰好等于它的因子之和，这个数就被称为“完数”，例如 6 = 1 + 2 +
3。找出 1000 以内的所有完数。 <strong>程序分析：</strong> 请参照程序
<strong>实例 14</strong> <strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sys <span class="keyword">import</span> stdout</span><br><span class="line"><span class="comment"># j保存了1000以内的所有正整数</span></span><br><span class="line"><span class="comment"># s的初值与j相同，每找到一个j的因子，就用s减去这个因子的值，当s的值减为0时，j就是一个完数</span></span><br><span class="line"><span class="comment"># 每找到一个因子，n的值就加一</span></span><br><span class="line"><span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>, <span class="number">1001</span>):</span><br><span class="line">    k = []  <span class="comment"># 保存因子列表</span></span><br><span class="line">    n = -<span class="number">1</span></span><br><span class="line">    s = j</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, j):</span><br><span class="line">        <span class="keyword">if</span> j % i == <span class="number">0</span>:</span><br><span class="line">            n += <span class="number">1</span></span><br><span class="line">            s -= i</span><br><span class="line">            k.append(i)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> s == <span class="number">0</span>:</span><br><span class="line">        <span class="built_in">print</span> j</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            stdout.write(<span class="built_in">str</span>(k[i]))</span><br><span class="line">            stdout.write(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span> k[n]  <span class="comment"># 打印最后一个因子并输出换行</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="实例-20">实例 20</h4>
<p><strong>题目：</strong> 一个球从 100
米高度自由落下，每次落地后反跳回原高度的一半；再落下，求它在第 10
次落地时，共经过多少米？第 10 次反弹多高？ <strong>程序分析：</strong>
无 <strong>源码：</strong></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding:UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line">Sn = <span class="number">100.0</span></span><br><span class="line">Hn = Sn / <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> n <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">2</span>,<span class="number">11</span>):</span><br><span class="line">    Sn += <span class="number">2</span> * Hn</span><br><span class="line">    Hn /= <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;Total of road is %f&#x27;</span> % Sn</span><br><span class="line"><span class="built_in">print</span> <span class="string">&#x27;The tenth is %f meter&#x27;</span> % Hn</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参考</p>
</blockquote>
<p><a
href="http://meta.math.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference">MathJax
basic tutorial and quick reference</a> <a
href="http://www.befuncool.com/2016/11/20/Hexo-NexT%E4%B8%BB%E9%A2%98%E4%BD%BF%E7%94%A8mathjax%E8%BE%93%E5%85%A5%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9/">Hexo-NexT
主题使用 mathjax 输入数学公式注意事项</a> <a
href="http://bennychen.me/mathjax.html">hexo 在 Next
主题下输入数学公式</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title>英文翻译积累</title>
    <url>/2017/01/16/%E8%8B%B1%E6%96%87%E7%BF%BB%E8%AF%91%E7%A7%AF%E7%B4%AF/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h4 id="throw-it-over-the-wall-to">throw it over the wall to</h4>
<p><strong>释义：</strong>
(事先未经磋商或协调就)将某一项目或问题丢给另一人或另一部门去处理。</p>
<h4 id="more-so-than">more so than</h4>
<p><strong>释义：</strong> 比 <strong>例句：</strong> 1.Everybody in the
Family was delighted, but Connie more so than anyone.
家族中的人个个都很高兴, 但康妮显得比任何人都高兴. 2.They are color
blind, and cats more so than dogs. 猫和狗都是色盲, 猫比狗更甚. 3.Most
carmakers had a rotten year, no more so than in America.
大部分汽车制造商今年都很倒霉, 美国就更不用说了. <span id="more"></span> #### you
can’t win them all. <strong>释义：</strong> 不可能事事都成功；有得必有失
<strong>例句：</strong> 1.It would have been great to get the job but I
suppose you can’t win them all. 我喜欢那份工作，但我认为有得必有失。</p>
<h4 id="go-to">“go to”</h4>
<p><strong>释义：</strong> 首选 <strong>例句：</strong> 1.Jenkins is
pretty much my “go to” CI software. Jenkins几乎是我首选的CI软件。</p>
<h4 id="go-out-on-a-limb">(Go) out on a limb</h4>
<p><strong>释义：</strong>
为了助人而将自己置于险地;大胆猜测并表达不受欢迎的观点;处于危险的境地;脆弱
实际上，go out on a
limb在日常用法中逐渐衍生出一种新的含义，那就是“taking
chances”（冒险），而冒险的目的可能并非为了帮助他人。
<strong>例句：</strong> 1.Ok, I’ll go out on a limb and vouch for you.
好吧，我冒险为你提供担保。</p>
<h4
id="字体粗细我们一般翻译成字重weight">字体粗细我们一般翻译成“字重(weight)”</h4>
<p>字重在英文对应 0 -&gt; not applicable 1 -&gt; Ultra light (lowest
ratio of glyph stem width to font height); 2 -&gt; Extra light; 3 -&gt;
light; 4 -&gt; semilight; 5 -&gt; medium; 6 -&gt; semi bold; 7 -&gt;
bold; 8 -&gt; extra bold; 9 -&gt; a Ultra bold (highest ratio of glyph
stem width to font height).</p>
<p>字重在中文对应 0 -&gt; 不用； 1 -&gt;
特细（字形主干宽度对字型高度最低的比率）； 2 -&gt; 非常细； 3 -&gt; 细；
4 -&gt; 稍细； 5 -&gt; 中等； 6 -&gt; 半粗； 7 -&gt; 粗； 8 -&gt; 常粗；
9 -&gt; 特粗（字形主干宽度对字型高度最高的比率）。
<strong>参考文章</strong>： <a
href="https://book.douban.com/review/7716056/">在专业词语的翻译上有问题</a></p>
<h4 id="inbound-sdr-and-outbound-sdr">inbound SDR and outbound SDR</h4>
<p><strong>释义：</strong> 入站SDR（销售开发代表）和出站SDR
<strong>例句：</strong> 参考文章：<a
href="http://www.tikehui.com/archives/29637">SaaS Sales |
三大关键策略助力最强销售开发团队</a></p>
<h4 id="the-hype-cycle">The Hype Cycle</h4>
<p><strong>释义：</strong> 技术成熟度曲线 <strong>例句：</strong>
参考文章：<a
href="https://www.wikiwand.com/zh-hans/%E6%8A%80%E6%9C%AF%E6%88%90%E7%86%9F%E5%BA%A6%E6%9B%B2%E7%BA%BF">技术成熟度曲线</a></p>
<h4 id="leave-money-on-the-table">leave money on the table</h4>
<p><strong>释义：</strong>
原是打牌的术语，指拿到好牌时因为对手虚张声势而放弃，结果错过了赢走所有赌注的机会。也就是说本来可以获取很大的利益，却（被迫、被骗）放弃了一部分。可以翻译为“主动放弃应有利益“。
<strong>例句：</strong> 参考文章：<a
href="http://www.proz.com/kudoz/english_to_chinese/it_information_technology/4804784-leaving_money_on_the_table.html">leave
money on the table</a></p>
<h4 id="ramp-up">ramp up</h4>
<p><strong>释义：</strong> Ramp
up是最近美国新闻媒体比较喜欢用的一个动词短语，且往往出现在“商业”有关的语境中。这里的ramp
up，意思是“逐步加大”（Gradually increase energy supplied, manpower
deployed, or quantities
produced）。ramp本意为斜坡，up是向上。合起来的意思是逐步向上，也就是慢慢加大的意思。这个短语隐含有“初期小量试产，效果不错后逐步加量”的意味。
<strong>例句：</strong> 1.We decided to ramp up our production as the
orders were coming in faster than expected.
我们决定逐步扩大产量，因为订单比预计的要来得更快。 2.Warren Buffett
ramps up his bet on Apple, cuts back on Wal-Mart.
沃伦.巴非特继续对苹果加注，降低了沃尔玛的投资比例</p>
<h4 id="janky">janky</h4>
<p><strong>释义：</strong> 1.俚语 of poor quality,odd. 2.(jargon,
computing, rare) Unresponsive (of a software application’s user
interface), sluggish. <strong>例句：</strong> 1.We’re gonna do some
janky shit. When you’re doin’ janky shit, you wear a mask.</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>英文</tag>
        <tag>翻译</tag>
      </tags>
  </entry>
  <entry>
    <title>git 常用命令</title>
    <url>/2017/02/08/git-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>总结一下git的常用命令，方便复习。 ### 创建版本库 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 创建仓库</span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"># 将文件添加到仓库</span><br><span class="line">git add readme.txt</span><br><span class="line"></span><br><span class="line"># 将文件提交到仓库</span><br><span class="line">git commit -m &quot;wrote a readme file&quot;</span><br><span class="line"></span><br><span class="line"># 查看仓库状态</span><br><span class="line">git status</span><br></pre></td></tr></table></figure>
<span id="more"></span> ### 版本回退 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 查看当前的工作目录与另外一个分支的差别</span><br><span class="line">git diff readme.txt</span><br><span class="line"></span><br><span class="line"># 查看历史记录</span><br><span class="line">git log</span><br><span class="line"></span><br><span class="line"># 查看输入的git命令历史</span><br><span class="line">git reflog</span><br><span class="line"></span><br><span class="line"># 带参数的git log</span><br><span class="line">git log --graph --pretty=oneline --abbrev=commit</span><br><span class="line"></span><br><span class="line"># 回退到上一个版本，上上个版本就是HEAD^^，上100个版本就是HEAD~100</span><br><span class="line">git reset --hard HEAD^</span><br><span class="line"></span><br><span class="line"># 回退到未来的某个版本</span><br><span class="line">git reset --hard commit_id</span><br></pre></td></tr></table></figure> ### 工作区和暂存区
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 查看当前工作目录与上次提交间的差异</span><br><span class="line">git diff HEAD -- readme.txt</span><br><span class="line"></span><br><span class="line"># 丢弃工作区的修改</span><br><span class="line">git checkout -- file</span><br><span class="line"></span><br><span class="line"># 撤销暂存区的修改，重新放回工作区</span><br><span class="line">git reset HEAD file</span><br></pre></td></tr></table></figure> ### 删除与恢复 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 从版本库中删除文件</span><br><span class="line">git rm</span><br><span class="line"></span><br><span class="line"># 恢复误删除的文件</span><br><span class="line">git checkout -- readme.txt</span><br><span class="line"></span><br><span class="line"># 查看远程仓库的详细信息</span><br><span class="line">git remote -v</span><br></pre></td></tr></table></figure> ### 远程仓库 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 将本地仓库与远程仓库关联</span><br><span class="line">git remote add origin https://github.com/toypipi/learngit.git</span><br><span class="line">git push -u origin master</span><br><span class="line"></span><br><span class="line"># 推送分支到远程仓库</span><br><span class="line">git push origin master</span><br><span class="line"></span><br><span class="line"># 克隆仓库</span><br><span class="line">git clone</span><br></pre></td></tr></table></figure>
### 分支管理 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 创建一个新的分支并切换</span><br><span class="line">git checkout -b dev</span><br><span class="line"></span><br><span class="line"># 同上</span><br><span class="line">git branch dev</span><br><span class="line">git checkout dev</span><br><span class="line"></span><br><span class="line"># 查看当前分支</span><br><span class="line">git branch</span><br><span class="line"></span><br><span class="line"># 合并指定分支到当前分支</span><br><span class="line">git merge</span><br><span class="line"></span><br><span class="line"># 删除分支</span><br><span class="line">git branch -d dev</span><br><span class="line"></span><br><span class="line"># 合并分支，使用--no-ff参数，表示禁用Fast forward</span><br><span class="line">git merge --no-ff -m &quot;merge with no-ff&quot; dev</span><br></pre></td></tr></table></figure> ### stash <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 把当前工作现场“储藏”起来</span><br><span class="line">git stash</span><br><span class="line"></span><br><span class="line"># 显示当前的stash列表</span><br><span class="line">git stash list</span><br><span class="line"></span><br><span class="line"># 恢复“储藏”起来的进度并删除</span><br><span class="line">git stash apply</span><br><span class="line">git stash drop</span><br><span class="line"></span><br><span class="line"># 同上</span><br><span class="line">git stash pop</span><br><span class="line"></span><br><span class="line"># 强行删除一个没有被合并过的分支</span><br><span class="line">git branch -D &lt;name&gt;</span><br><span class="line"></span><br><span class="line"># 在本地创建和远程分支对应的分支</span><br><span class="line">git checkout -b branch-name origin/branch-name</span><br><span class="line"></span><br><span class="line"># 建立本地分支与远程分支的链接关系</span><br><span class="line">git branch --set-upstream branch-name origin/branch-name</span><br><span class="line"></span><br><span class="line"># 抓取远程的新提交</span><br><span class="line">git pull</span><br></pre></td></tr></table></figure> ### 标签
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 新建一个标签</span><br><span class="line">git tag &lt;tag_name&gt;</span><br><span class="line"></span><br><span class="line"># 查看所有标签</span><br><span class="line">git tag</span><br><span class="line"></span><br><span class="line"># 查看标签信息</span><br><span class="line">git show &lt;tagname&gt;</span><br><span class="line"></span><br><span class="line"># 创建带有说明的标签</span><br><span class="line">git tag -a &lt;tag_name&gt; -m &quot;version 0.1 released&quot; &lt;commit_id&gt;</span><br><span class="line"></span><br><span class="line"># 用私钥签名一个标签</span><br><span class="line">git tag -s &lt;tag_name&gt; -m &quot;signed version 0.2 released&quot; &lt;commit_id&gt;</span><br><span class="line"></span><br><span class="line"># 删除本地标签</span><br><span class="line">git tag -d &lt;tag_name&gt;</span><br><span class="line"></span><br><span class="line"># 推送标签到远程</span><br><span class="line">git push origin &lt;tag_name&gt;</span><br><span class="line"></span><br><span class="line"># 一次性推送全部尚未推送到远程的本地标签</span><br><span class="line">git push origin --tags</span><br><span class="line"></span><br><span class="line"># 删除远程标签，先删除本地标签，再执行以下命令</span><br><span class="line">git push origin :refs/tags/&lt;tag_name&gt;</span><br></pre></td></tr></table></figure> ### 自定义git <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 忽略某些文件时，需要编写.gitignore</span><br><span class="line"></span><br><span class="line"># 将某些文件强制添加到git</span><br><span class="line">git add -f &lt;file_name&gt;</span><br><span class="line"></span><br><span class="line"># 查看gitignore规则</span><br><span class="line">git check-ignore -v &lt;file-name&gt;</span><br><span class="line"></span><br><span class="line"># 配置别名</span><br><span class="line">git config --global alias.st status</span><br><span class="line">git config --global alias.co checkout</span><br><span class="line">git config --global alias.ci commit</span><br><span class="line">git config --global alias.br branch</span><br><span class="line">git config --global alias.unstage &#x27;reset HEAD&#x27;</span><br><span class="line">git config --global alias.last &#x27;log -1&#x27;</span><br><span class="line">git config --global alias.lg &quot;log --color --graph --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27; --abbrev-commit&quot;</span><br></pre></td></tr></table></figure> <strong>参考文档</strong> <a
href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000">廖雪峰的Git教程</a>
<a href="http://iissnan.com/progit/html/zh/ch1_0.html">Pro git</a> <a
href="http://marklodato.github.io/visual-git-guide/index-zh-cn.html">图解Git</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>《Take My Hand》</title>
    <url>/2017/02/06/%E3%80%8ATake%20My%20Hand%E3%80%8B/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>今天在网易云音乐听每日歌曲推荐时，纯音乐《Take My Hand》 by
歌手：Omar Akram 下面的评论很精彩，特此记录一下： <blockquote class="blockquote-center">
<p><a href="">哪个我能读出来的名字:</a>
我曾经考虑自己会把手放在哪个手里，后来，我沉默的放进口袋里。</p>

</blockquote></p>
<span id="more"></span>
<blockquote class="blockquote-center">
<p><a href="">影幽如夢:</a>
我听说，将手放在左手里，代表感性是你生活的动力；我听说，将手放在右手中，意味理性是你生命的支配；我选择，将双手互相攒成一团，生命里需要互相依靠，生活里需要互相扶持。然而，我迷茫，从此双手合十，两手空空，祈盼那双手能够再次伴我前行。</p>

</blockquote>
<img src="/2017/02/06/%E3%80%8ATake%20My%20Hand%E3%80%8B/1.jpg" class="">
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>佳句欣赏</tag>
      </tags>
  </entry>
  <entry>
    <title>《用Python写网络爬虫》读书笔记</title>
    <url>/2017/01/16/%E3%80%8A%E7%94%A8Python%E5%86%99%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>学习<a
href="https://book.douban.com/subject/26869992/">《用Python写网络爬虫》</a>，为了加深记忆，边读边做笔记。如有侵权，立即删除。</p>
</blockquote>
<h1 id="网络爬虫简介">网络爬虫简介</h1>
<h2 id="背景调研">背景调研</h2>
<h3 id="识别网站所用技术">识别网站所用技术</h3>
<p>使用builtwith模块，可以检查网站构建的技术类型。安装方法如下：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install builtwith</span><br></pre></td></tr></table></figure> <span id="more"></span>
该模块将URL作为参数，下载该URL并对其进行分析，然后返回该网站使用的技术。下面是使用该模块的一个例子。
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> builtwith</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>builtwith.parse(<span class="string">&#x27;http://example.webscraping.com&#x27;</span>)</span><br></pre></td></tr></table></figure> ### 寻找网站的所有者
我们可以使用WHOIS协议查询域名的注册者是是谁。Python中有一个针对该协议的封装库，通过pig安装：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install python-whois</span><br></pre></td></tr></table></figure> 使用该模块对appspot.com这个域名进行WHOIS查询。
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> whois</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">print</span> whois.whois(<span class="string">&#x27;appspot.com&#x27;</span>)</span><br></pre></td></tr></table></figure> ## 编写第一个网络爬虫 ### 下载网页
要想爬取网页，我们首先要将其下载下来。使用Python的urllib2模块下载URL。当下载网页时，我们可能会遇到一些无法控制的错误，比如请求的页面可能不存在。此时，urllib2会抛出异常，然后退出脚本。安全起见，可以捕获这些异常。
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urllib2.urlopen(url).read()</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>,e.reason</span><br><span class="line">        html = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br></pre></td></tr></table></figure>
现在，当出现下载错误时，该函数能够捕获到异常，然后返回None。</p>
<h4 id="重试下载">重试下载</h4>
<p>下载时遇到的错误经常是临时性的，比如服务器过载时返回的503 Service
Unavailable错误。对于此类错误，我们可以尝试重新下载，因为这个服务器问题现在可能已经解决。不过，我们不需要对所有错误都尝试重新下载。如果服务器返回的是404
Not
Found这种错误，则说明该网页目前并不存在，再次尝试同样的请求一般也不会出现不同的结果。所以，我们只需要确保download函数在发生5xx错误时重试下载即可。下面是支持重试下载功能的新版本代码。
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url, num_retries=<span class="number">2</span></span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urllib2.urlopen(url).read()</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>, e.reason</span><br><span class="line">        html = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> num_retries &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">hasattr</span>(e, <span class="string">&#x27;code&#x27;</span>) <span class="keyword">and</span> <span class="number">500</span> &lt;= e.code &lt; <span class="number">600</span>:</span><br><span class="line">                <span class="comment"># recursively retry 5xx HTTP errors</span></span><br><span class="line">                <span class="keyword">return</span> download(url, num_retries-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
现在，当download函数遇到5xx错误码时，将会递归调用函数自身进行重试。此外，该函数还增加了一个参数，用于设定重试下载的次数，其默认值为两次。我们在这里限制网页下载的尝试次数，是因为服务器错误可能暂时还没有解决。可以通过下载http://httpstat.us/500
，该网址始终返回500错误，测试该函数。 <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>download(<span class="string">&#x27;http://httpstat.us/500&#x27;</span>)</span><br></pre></td></tr></table></figure></p>
<h4 id="设置用户代理">设置用户代理</h4>
<p>下面的代码对download函数进行了修改，设定了一个默认的用户代理“wswp”（即Web
Scraping with Python的首字母缩写） <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url, user_agent=<span class="string">&#x27;wswp&#x27;</span>, num_retries=<span class="number">2</span></span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    headers = &#123;<span class="string">&#x27;User-agent&#x27;</span>: user_agent&#125;</span><br><span class="line">    request = urllib2.Request(url, headers=headers)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urllib2.urlopen(request).read()</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>, e.reason</span><br><span class="line">        html = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> num_retries &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">hasattr</span>(e, <span class="string">&#x27;code&#x27;</span>) <span class="keyword">and</span> <span class="number">500</span> &lt;= e.code &lt; <span class="number">600</span>:</span><br><span class="line">                <span class="comment"># recursively retry 5xx HTTP errors</span></span><br><span class="line">                <span class="keyword">return</span> download(url, user_agent, num_retries - <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">download(<span class="string">&#x27;http://www.meetup.com/&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure> ### 网站地图爬虫
在第一个简单的爬虫中，我们将使用实例网站robots.txt文件中发现的网站地图来下载所有网页。为了解析网站地图，我们将会使用一个简单的正则表达式，从<loc>标签中提取出URL。
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urllib2.urlopen(url).read()</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>,e.reason</span><br><span class="line">        html = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">crawl_sitemap</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="comment"># download the sitemap file</span></span><br><span class="line">    sitemap = download(url)</span><br><span class="line">    <span class="comment"># extract the sitemap links</span></span><br><span class="line">    links = re.findall(<span class="string">&#x27;&lt;loc&gt;(.*?)&lt;/loc&gt;&#x27;</span>,sitemap)</span><br><span class="line">    <span class="comment"># download each link</span></span><br><span class="line">    <span class="keyword">for</span> link <span class="keyword">in</span> links:</span><br><span class="line">        html = download(link)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    crawl_sitemap(<span class="string">&#x27;http://example.webscraping.com/sitemap.xml&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h3 id="id遍历爬虫">ID遍历爬虫</h3>
<p>分析实例url - http://example.webscraping.com/view/Afghanistan-1 -
http://example.webscraping.com/view/Aland-Islands-2 -
http://example.webscraping.com/view/Albania-3</p>
<p>可以看出，这些URL只在结尾处有所区别，包括国家名（作为页面别名）和ID。在URL中包含页面别名是非常普遍的做法，可以对搜索引擎优化起到帮助作用。一般情况下，Web服务器会忽略这个字符串，只使用ID来匹配数据库中的相关记录。下面我们将别名移除，加载http://example.webscraping.com/view/1
，测试连接仍然可用。
因此，我们可以忽略页面别名，只遍历ID来下载所有国家的页面。 <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urllib2.urlopen(url).read()</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>,e.reason</span><br><span class="line">        html = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> page <span class="keyword">in</span> itertools.count(<span class="number">1</span>):</span><br><span class="line">    url = <span class="string">&#x27;http://example.webscraping.com/view/-%d&#x27;</span> % page</span><br><span class="line">    html = download(url)</span><br><span class="line">    <span class="keyword">if</span> html <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># success - can scrape the result</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
在这段代码中，我们对ID进行遍历，直到出现下载错误时停止，我们假设此时已到达最后一个国家的页面。不过，这种实现方式存在一个缺陷，那就是某些记录可能已被删除，数据库ID之间并不是连续的。此时，只要访问到某个间隔点，爬虫就会立即退出。下面是这段代码的改进版本，在该版本中连续发生多次下载错误后才会退出程序。
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> itertools</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urllib2.urlopen(url).read()</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>,e.reason</span><br><span class="line">        html = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"><span class="comment"># maximum number of consecutive download errors allowed</span></span><br><span class="line">max_errors = <span class="number">5</span></span><br><span class="line"><span class="comment"># current number of consecutive download errors</span></span><br><span class="line">num_errors = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> page <span class="keyword">in</span> itertools.count(<span class="number">1</span>):</span><br><span class="line">    url = <span class="string">&#x27;http://example.webscraping.com/view/-%d&#x27;</span> % page</span><br><span class="line">    html = download(url)</span><br><span class="line">    <span class="keyword">if</span> html <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        <span class="comment"># received an error trying to download this webpage</span></span><br><span class="line">        num_errors += <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> num_errors == max_errors:</span><br><span class="line">            <span class="comment"># reached maximum number of</span></span><br><span class="line">            <span class="comment"># consecutive errors so exit</span></span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="comment"># success - can scrape the result</span></span><br><span class="line">        <span class="comment"># ...</span></span><br><span class="line">        num_errors = <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
上面代码中实现的爬虫需要连续5次下载错误才会停止遍历，这样就很大程度上降低了遇到被删除记录时过早停止遍历的风险。
### 链接爬虫
如果想要爬取的是国家列表索引页和国家页面。其中，索引页链接格式如下： -
http://example.webscraping.com/index/1 -
http://example.webscraping.com/index/2</p>
<p>国家页链接格式如下： -
http://example.webscraping.com/view/Afghanistan-1 -
http://example.webscraping.com/view/Aland-Islands-2</p>
<p>因此，我们可以用<code>/(index|view)</code>这个简单的正则表达式来匹配这两类网页。可以使用如下代码：
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> urlparse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urllib2.urlopen(url).read()</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>, e.reason</span><br><span class="line">        html = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">link_crawler</span>(<span class="params">seed_url, link_regex</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Crawl from the given seed URL following links matched by link_regex&quot;&quot;&quot;</span></span><br><span class="line">    crawl_queue = [seed_url]</span><br><span class="line">    <span class="keyword">while</span> crawl_queue:</span><br><span class="line">        url = crawl_queue.pop()</span><br><span class="line">        html = download(url)</span><br><span class="line">        <span class="comment"># filter for links matching our regular expression</span></span><br><span class="line">        <span class="keyword">for</span> link <span class="keyword">in</span> get_links(html):</span><br><span class="line">            <span class="keyword">if</span> re.<span class="keyword">match</span>(link_regex, link):</span><br><span class="line">                crawl_queue.append(link)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_links</span>(<span class="params">html</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return a list of links from html&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># a regular expression to extract all links from the webpage</span></span><br><span class="line">    webpage_regex = re.<span class="built_in">compile</span>(<span class="string">&#x27;&lt;a[^&gt;]+href=[&quot;\&#x27;](.*?)[&quot;\&#x27;]&#x27;</span>, re.IGNORECASE)</span><br><span class="line">    <span class="comment"># list of all links from the webpage</span></span><br><span class="line">    <span class="keyword">return</span> webpage_regex.findall(html)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">link_crawler(<span class="string">&#x27;http://example.webscraping.com&#x27;</span>, <span class="string">&#x27;/(index|view)&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure> 你会发现我们会得到如下的下载错误： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh://root@192.168.1.122:22/usr/bin/python -u /root/pyFile/test.py</span><br><span class="line">Downloading: http://example.webscraping.com</span><br><span class="line">Downloading: /index/1</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  ...</span><br><span class="line">ValueError: unknown url type: /index/1</span><br></pre></td></tr></table></figure>
问题出在下载/index/1时，该链接只有网页的路径部分，而没有协议和服务器部分，也就是说这个一个<strong>相对链接</strong>。由于浏览器知道你正在浏览哪个网页，所以在浏览器浏览时，相对链接是能够正常工作的。但是urllib2是无法获知上下文的。为了让urllib2能够定位网页，我们需要将链接转换为<strong>绝对链接</strong>的形式，以便包含定位网页所有的细节。可以使用urlparse模块。
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> urlparse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urllib2.urlopen(url).read()</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>, e.reason</span><br><span class="line">        html = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">link_crawler</span>(<span class="params">seed_url, link_regex</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Crawl from the given seed URL following links matched by link_regex&quot;&quot;&quot;</span></span><br><span class="line">    crawl_queue = [seed_url]</span><br><span class="line">    <span class="keyword">while</span> crawl_queue:</span><br><span class="line">        url = crawl_queue.pop()</span><br><span class="line">        html = download(url)</span><br><span class="line">        <span class="comment"># filter for links matching our regular expression</span></span><br><span class="line">        <span class="keyword">for</span> link <span class="keyword">in</span> get_links(html):</span><br><span class="line">            <span class="keyword">if</span> re.<span class="keyword">match</span>(link_regex, link):</span><br><span class="line">                link = urlparse.urljoin(seed_url,link)</span><br><span class="line">                crawl_queue.append(link)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_links</span>(<span class="params">html</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return a list of links from html&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># a regular expression to extract all links from the webpage</span></span><br><span class="line">    webpage_regex = re.<span class="built_in">compile</span>(<span class="string">&#x27;&lt;a[^&gt;]+href=[&quot;\&#x27;](.*?)[&quot;\&#x27;]&#x27;</span>, re.IGNORECASE)</span><br><span class="line">    <span class="comment"># list of all links from the webpage</span></span><br><span class="line">    <span class="keyword">return</span> webpage_regex.findall(html)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">link_crawler(<span class="string">&#x27;http://example.webscraping.com&#x27;</span>, <span class="string">&#x27;/(index|view)&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
当你运行这段代码时，会发现虽然网页下载没有出现错误，但是同样的地点总是会被不断下载到。这是因为这些站点相互之间存在链接。比如，澳大利亚链接到了南极洲，而南极洲也存在到澳大利亚的链接，此时爬虫就会在它们之间不断循环下去。要想避免重复爬取相同的链接，我们需要记录哪些链接已经被爬取过。下面是修改后的link_crawler函数，已具备存储已发现URL的功能，可以避免重复下载。
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> urlparse</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urllib2.urlopen(url).read()</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>, e.reason</span><br><span class="line">        html = <span class="literal">None</span></span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">link_crawler</span>(<span class="params">seed_url, link_regex</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Crawl from the given seed URL following links matched by link_regex&quot;&quot;&quot;</span></span><br><span class="line">    crawl_queue = [seed_url]</span><br><span class="line">    <span class="comment"># keep track which URL&#x27;s have seen before</span></span><br><span class="line">    seen = <span class="built_in">set</span>(crawl_queue)</span><br><span class="line">    <span class="keyword">while</span> crawl_queue:</span><br><span class="line">        url = crawl_queue.pop()</span><br><span class="line">        html = download(url)</span><br><span class="line">        <span class="keyword">for</span> link <span class="keyword">in</span> get_links(html):</span><br><span class="line">            <span class="comment"># check if link matches expected regex</span></span><br><span class="line">            <span class="keyword">if</span> re.<span class="keyword">match</span>(link_regex, link):</span><br><span class="line">                <span class="comment"># from absolute link</span></span><br><span class="line">                link = urlparse.urljoin(seed_url, link)</span><br><span class="line">                <span class="comment"># check if have already seen this link</span></span><br><span class="line">                <span class="keyword">if</span> link <span class="keyword">not</span> <span class="keyword">in</span> seen:</span><br><span class="line">                    seen.add(link)</span><br><span class="line">                    crawl_queue.append(link)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_links</span>(<span class="params">html</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return a list of links from html&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># a regular expression to extract all links from the webpage</span></span><br><span class="line">    webpage_regex = re.<span class="built_in">compile</span>(<span class="string">&#x27;&lt;a[^&gt;]+href=[&quot;\&#x27;](.*?)[&quot;\&#x27;]&#x27;</span>, re.IGNORECASE)</span><br><span class="line">    <span class="comment"># list of all links from the webpage</span></span><br><span class="line">    <span class="keyword">return</span> webpage_regex.findall(html)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">link_crawler(<span class="string">&#x27;http://example.webscraping.com&#x27;</span>, <span class="string">&#x27;/(index|view)&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure> 当运行该脚本时，它会爬取所有地点，并且能够如期停止。 ####
高级功能 <strong>解析robot.txt</strong>
首先，我们需要解析robots.txt文件，以避免下载禁止爬取的URL。使用Python自带的robotparser模块，就可以轻松完成这项工作。
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> robotparser</span><br><span class="line"></span><br><span class="line">rp = robotparser.RobotFileParser()</span><br><span class="line">rp.set_url(<span class="string">&#x27;http://example.webscraping.com/robots.txt&#x27;</span>)</span><br><span class="line">rp.read()</span><br><span class="line">url = <span class="string">&#x27;http://example.webscraping.com&#x27;</span></span><br><span class="line">user_agent = <span class="string">&#x27;BadCrawler&#x27;</span></span><br><span class="line"><span class="built_in">print</span> rp.can_fetch(user_agent, url)</span><br><span class="line">user_agent = <span class="string">&#x27;GoodCrawler&#x27;</span></span><br><span class="line"><span class="built_in">print</span> rp.can_fetch(user_agent, url)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
当用户代理设置为’BadCrawler’时，robotparser模块会返回结果表明无法获取网页。
#### 支持代理 下面是集成了代理功能的新版download函数。 <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url, user_agent=<span class="string">&#x27;wswp&#x27;</span>, proxy=<span class="literal">None</span>, num_retries=<span class="number">2</span></span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    headers = &#123;<span class="string">&#x27;User-agent&#x27;</span>: user_agent&#125;</span><br><span class="line">    request = urllib2.Request(url, headers=headers)</span><br><span class="line">    opener = urllib2.build_opener()</span><br><span class="line">    <span class="keyword">if</span> proxy:</span><br><span class="line">        proxy_params = &#123;urlparse.urlparse(url).scheme: proxy&#125;</span><br><span class="line">        opener.add_handler(urllib2.ProxyHandler(proxy_params))</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = opener.urlopen(request).read()</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>, e.reason</span><br><span class="line">        html = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> num_retries &gt; <span class="number">0</span>:</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">hasattr</span>(e, <span class="string">&#x27;code&#x27;</span>) <span class="keyword">and</span> <span class="number">500</span> &lt;- e.code &lt; <span class="number">600</span>:</span><br><span class="line">                <span class="comment"># retry 5XX HTTP errors</span></span><br><span class="line">                html = download(url, user_agent, proxy, num_retries-<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> html</span><br></pre></td></tr></table></figure>
#### 下载限速
如果我们爬取网站的速度过快，就会面临被封禁或是造成服务器过载的风险。为了降低这些风险，我们可以在两次下载之间添加延时，从而对爬虫限速。
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Python</tag>
        <tag>爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>Mahout 算法库</title>
    <url>/2017/02/28/Mahout%E7%AE%97%E6%B3%95%E5%BA%93/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>聚类算法</p>
</blockquote>
<p>聚类分析又称群分析，它是研究（样品或指标）分类问题的一种统计分析方法，同时也是数据挖掘的一个重要算法。
聚类（Cluster）分析是由若干模式（Pattern）组成的，通常，模式时一个度量（Measurement）的向量，或者是多维空间中的一个点。
聚类分析以相似性为基础，在一个聚类中的模式之间比不在同一聚类中的模式之间具有更多的相似性。</p>
<table>
<thead>
<tr>
<th>算法类</th>
<th>算法名</th>
<th>中文名</th>
</tr>
</thead>
<tbody>
<tr>
<td>聚类算法</td>
<td>Canopy Clustering</td>
<td>Canopy聚类</td>
</tr>
<tr>
<td></td>
<td>K-Means Clustering</td>
<td>K均值算法</td>
</tr>
<tr>
<td></td>
<td>Fuzzy K-Means</td>
<td>模糊K均值</td>
</tr>
<tr>
<td></td>
<td>Expectation Maxmization</td>
<td>EM聚类（期望最大化聚类）</td>
</tr>
<tr>
<td></td>
<td>Mean Shift Clustering</td>
<td>均值漂移聚类</td>
</tr>
<tr>
<td></td>
<td>Hierarchical Clustering</td>
<td>层次聚类</td>
</tr>
<tr>
<td></td>
<td>Dirichlet Process clustering</td>
<td>狄利克雷过程聚类</td>
</tr>
<tr>
<td></td>
<td>Latent Dirichlet Allocation</td>
<td>LDA聚类</td>
</tr>
<tr>
<td></td>
<td>Spectral clustering</td>
<td>谱聚类</td>
</tr>
</tbody>
</table>
<span id="more"></span>
<blockquote>
<p>分类算法</p>
</blockquote>
<p>分类（Categorization or
Classification）就是按照某种标准给对象贴标签（label），再根据标签来区分归类。
分类是事先定义好类别，类别数不变。</p>
<table>
<thead>
<tr>
<th>算法类</th>
<th>算法名</th>
<th>中文名</th>
</tr>
</thead>
<tbody>
<tr>
<td>分类算法</td>
<td>Logistic Regression</td>
<td>逻辑回归</td>
</tr>
<tr>
<td></td>
<td>Bayesian</td>
<td>贝叶斯</td>
</tr>
<tr>
<td></td>
<td>Support Vector Machines</td>
<td>支持向量机</td>
</tr>
<tr>
<td></td>
<td>Perceptron and Winnow</td>
<td>感知器算法</td>
</tr>
<tr>
<td></td>
<td>Neural Network</td>
<td>神经网络</td>
</tr>
<tr>
<td></td>
<td>Random Forests</td>
<td>随机森林</td>
</tr>
<tr>
<td></td>
<td>Restricted Boltzmann Machines</td>
<td>有限玻尔兹曼机</td>
</tr>
</tbody>
</table>
<blockquote>
<p>协同过滤</p>
</blockquote>
<p>协同过滤推荐（Collaborative Filtering
recommendation）是在信息过滤和信息系统中正迅速成为一项很受欢迎的技术。与传统的基于内容过滤直接分析内容进行推荐不同，协同过滤分析用户兴趣，在用户群中找到指定用户的相似（兴趣）用户，综合这些相似用户对某一信息的评价，形成系统对该指定用户对此信息的喜好程度预测。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Mahout</tag>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库中用户密码的保存方式</title>
    <url>/2017/02/22/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81%E7%9A%84%E4%BF%9D%E5%AD%98%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>本文转载自<a
href="https://book.douban.com/subject/10432844/">《Spring
3.x企业应用开发实战》</a>，<strong>作者：</strong>陈雄华
，<strong>出版社：</strong>电子工业出版社出版,版权归期所有。</p>
</blockquote>
<p>在实际应用中，一般不会直接在数据库中以明文的方式保存用户的密码，因为这样很容易造成密码泄密问题。所以需要将密码加密后以密文的方式进行保存；另外一种更有效的办法是仅保存密码的MD5摘要，由于相等的两字符串摘要值也相等，在登录验证时，通过比较摘要的方式就可以判断用户所输入的密码是否正确。由于不能通过密码摘要反推出原来的密码，即使内部人员可以查看用户信息也无法知道用户的密码。所以，摘要存储方式已经成为大部分系统密码存储的通用方式。此外，为了防止黑客通过工具进行密码的暴力破解，目前大多数Web应用都使用了图片验证码功能，验证码具有一次性消费的特征，每次登录都不相同，这样工具暴力破解就无用武之地了。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>密码</tag>
        <tag>加密</tag>
        <tag>MD5摘要</tag>
        <tag>验证码</tag>
        <tag>暴力破解</tag>
      </tags>
  </entry>
  <entry>
    <title>《金字塔原理》读书笔记</title>
    <url>/2017/03/21/%E3%80%8A%E9%87%91%E5%AD%97%E5%A1%94%E5%8E%9F%E7%90%86%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>阅读<a
href="https://book.douban.com/subject/25775696/">《金字塔原理》</a>，摘录书中附录三的内容，版权归其所有，如有侵权，立即删除。</p>
</blockquote>
<p>话说这本书理解起来真的有点费劲，可能是自己的逻辑思维不强吧/(ㄒoㄒ)/<sub></sub>，摘录书中主要内容，留在今后慢慢理解。</p>
<h4 id="第1章-为什么要用金字塔结构">第1章 为什么要用金字塔结构</h4>
<p>1.为了交流方便，必须将思想（观点、结论、要点、论点、论据、建议、行动、步骤等）归类分组。
2.将分组后的思想，按照不同层次，进行抽象提炼、总结概括，搭建金字塔。
3.向读者介绍（传递、阐述、论证）思想最有效的途径，是结论先行，自上而下表达。
4.金字塔中的思想，应遵守4个基本原则。
5.条理清晰的关键，是把你的思想组织成金字塔结构，并在写作前用金字塔原理检查。</p>
<span id="more"></span>
<p><strong>关键概念</strong> 金字塔原理的4个基本原则 -
结论先行：每篇文章只有一个中心思想，并放在文章的最前面。 -
以上统下：每一层次上的思想必须是对下一层次思想的总结概括。 -
归类分组：每一组中的思想必须属于同一逻辑范畴。 -
逻辑递进：每一组中的思想必须按照逻辑顺序排列。</p>
<h4 id="第2章-金字塔内部的机构">第2章 金字塔内部的机构</h4>
<p>1.金字塔结构的各个层级上包括各种思想；思想使受众（包括读者、听众、观众或学员）产生疑问。
2.在纵向方向上，各分支、各层级上的的思想，与读者进行疑问/回答式对话。
3.在横向方向上，各种思想以演绎推理或归纳推理方式回答读者的疑问，但两种方式不可同时使用。
4.序言的讲故事形式是为了提醒读者，文章将回答的读者最初的疑问。
5.序言包括背景、冲突、读者的疑问和作者的回答。冲突因背景而产生，背景和冲突都是读者已知的事实。
6.冲突导致读者提出疑问，而文章将回答读者的疑问。</p>
<p><strong>关键概念</strong> 金字塔结构中的逻辑关系 -
各种思想纵向相关（疑问/回答式对话） -
各种思想横向相关（演绎/归纳,MECE原则） -
金字塔顶端思想回答的疑问，来自读者已知的事实 -
序言引出读者最初的疑问</p>
<h4 id="第3章-如何构建金字塔">第3章 如何构建金字塔</h4>
<p>1.自上而下法 - 确定作者想论述的主题 - 设想读者的疑问 - 给出答案 -
检查背景和冲突是否引发读者提出疑问 - 证实答案 - 填写关键句要点</p>
<p>2.自下而上法 - 列出所有作者想表达的要点 - 找出各要点之间的关系 -
得出结论 - 倒推出序言</p>
<p><strong>关键概念</strong> 构建金字塔 - 确定主题 - 设想疑问 - 给出答案
- 检查背景和冲突是否引发读者提出疑问 - 证实答案 - 填写关键句要点</p>
<h4 id="第4章-序言的具体写法">第4章 序言的具体写法</h4>
<p>1.序言的目的是提示读者已知的信息，而不是提供新信息。
2.序言通常包括背景、冲突、读者的疑问和作者的答案。
3.序言的长短，取决于读者的需要和主题的要求。
4.为每个关键句要点写一段引言。</p>
<p><strong>关键概念</strong> 写序言 - 说明背景 - 指出冲突 -
冲突引发读者提出疑问 - 作者的文章给出答案</p>
<h4 id="第5章-演绎推理与归纳推理">第5章 演绎推理与归纳推理</h4>
<p>1.演绎推理是一种论证，其中第二个论点对第一个论点加以评论，第三个论点说明前两个论点同时存在时的含义。
2.对演绎推理的概括，就是把最后一个论点作为主体，概括整个推理过程。
3.归纳推理是把具有相似性的思想归类分组，根据各要点具有的共同性得出结论。
4.在关键句层次，使用归纳推理比演绎推理更方便读者理解。</p>
<p><strong>关键概念</strong> 逻辑推理 - 演绎推理，是一系列线性推理过程。
- 归纳推理，是把相似的、具有共同点的思想或相关的行动归类分组。 -
在关键句要点层次，使用归纳推理，比演绎推理更有利于读者理解。</p>
<p>归纳组合逻辑顺序共有3种 - 时间顺序：通过设想某一流程得出的思想。 -
结构顺序：通过评论某一结构得出的思想。 -
程度顺序：通过按程序或重要性的不同分组，得出的思想。</p>
<h4 id="第6章-应用逻辑顺序">第6章 应用逻辑顺序</h4>
<p>1.应用逻辑顺序可以确保你不会： - 把新闻条目当做思想列入 -
遗漏某一组中重要的思想</p>
<p>2.任一组思想的逻辑顺序都呈现了该组思想的分组基础。 -
时间顺序：通过设想某一流程得出的思想。 -
结构顺序：通过评论某一结构得出的思想。 -
程度顺序：通过按程序或重要性的不同分组，得出的思想。</p>
<p>3.如果你在某一组思想中找不到以上顺序，说明这些思想之间不存在逻辑关系，或者你的思考还不周全。
4.为了检查一组思想的逻辑顺序，你可以： -
先把每一个句子改写成能说明其实质的短句（即只保留主语、谓语、宾语，删除定语、状语和补语，只保留动词、名词，删除形容词、副词）。
- 再把相匹配或具有相同点的句子合并同类项，组织在一起。 -
最后选择使用适当的顺序。</p>
<p>5.如果思想属于行动性思想（即说明行动、活动、行为、动作、步骤、流程等）
- 明确说明每一行动产生的最终结果（效果、目标）。 -
把能产生同样最终结果的行动（行为、步骤等）归类分组。 -
确定该组思想的分组基础（类别），并依此排序。 -
检查是否遗漏了任何步骤。</p>
<p>6.如果思想属于描述性思想（即介绍观点、情况、信息等） -
把说明类似事务，或具有共同点的思想归类分组。 -
确定该组思想的分组基础（找出相似之处、共同点）。 -
把所有思想转换成完整的句子，并决定其顺序。 -
检查是否遗漏了任何步骤。</p>
<p><strong>关键概念</strong>
将行动性思想（说明行动、活动、行为、动作、步骤、流程）排序
将描述性思想（即介绍观点、情况、信息）排序</p>
<h4 id="第7章-概括各组思想">第7章 概括各组思想</h4>
<p>1.避免使用”缺乏思想”的句子（比如”存在3个问题……“等）。
2.分组应遵循”相互独立不重叠，完全穷尽无遗漏”（MECE）原则。
3.行动总是按时间顺序进行，通过说明行动产生的直接结果，概括行动性思想。
4.把描述性思想归类分组，是因为该组思想具有共同特征，它们都： -
针对同一类主语 - 针对同一类谓语（动作或对象） - 包含同一类判断</p>
<p>5.将行动性思想分组时，要求： - 发掘每一个行动的本质 -
区分不同的抽象层次（比如，采取一项行动，是必须在另一行动开始之前，还是为了完成另一行动？）
- 明确说明行动产生的最终结果 - 直接由行动概括出结果</p>
<p>6.将描述性思想分组时，要求： - 找出居中结构的共同点 -
确定包括这些思想的最小范畴 - 说明共同点隐含的意义</p>
<p><strong>关键概念</strong> 概括各组思想 -
通过说明行动产生的直接结果，概括行动性思想（概括一组行动）。 -
通过说明各思想具有的共同点、相似性，概括描述性思想（概括一组信息）。</p>
<p>寻找思想的共同点 - 各思想是否针对同一类主题 -
各思想是否涉及同一类行动 - 各思想是否针对同一类对象 -
各思想是否包含同一类观点</p>
<p>行动性思想分组 描述性思想分组</p>
<h4 id="第8章-界定问题">第8章 界定问题</h4>
<p>1.展开”问题”的各要素 - 切入点/序幕（产生问题的具体领域、方面） -
困扰/困惑（它的发生打乱了该领域的稳定） -
现状R1（你不喜欢该方面正在产生的结果） -
目标R2（你希望在该方面得到的结果） -
答案（到目前为止，针对问题已经采取的措施，如果采取了的话）。 -
疑问（为了解决问题，必须做什么）</p>
<p>2.把界定的问题转换成序言 - 从左往右再往下 -
读者最后知道的事实就是冲突</p>
<p><strong>关键概念</strong> 界定问题 - 设想问题产生的领域 -
说明什么事情的发生打乱了该领域的稳定（困扰/困惑） -
确定非期望结果（现状，R1） - 确定期望结果（目标，R2） -
确定是否已经采取了解决问题的行动 - 确定分析所要回答的疑问</p>
<h4 id="第9章-结构化分析问题">第9章 结构化分析问题</h4>
<p>1.使用诊断框架，呈现存在问题领域的详细结构，展示一个系统内的各个单位是如何相互影响的。
- 查找具有因果关系的活动 - 将产生问题的可能原因进行分类</p>
<p>2.收集资料，以证明或排除结构中导致问题产生的部分 3.使用逻辑树 -
产生和检验解决方案 - 揭示思想一览表的内在关系</p>
<p><strong>关键概念</strong> 结构化分析问题 - 界定问题 -
使用诊断框架，呈现存在问题领域的详细结构 - 假设产生问题的可能原因 -
收集信息，以证明或排除所作假设</p>
<h4 id="第10章-在书面上呈现金字塔">第10章 在书面上呈现金字塔</h4>
<p>用多级标题、行首缩进、下划线和数字编号的方法，突出显示文章的整体结构
1.表现金字塔结构中主要组合之间的过渡
2.表现金字塔结构中主要思想组之间的过渡。</p>
<h4 id="第11章-在ppt演示文稿中呈现金字塔">第11章
在PPT演示文稿中呈现金字塔</h4>
<p>1.制作文字幻灯片，应尽量简明扼要。
2.制作图表幻灯片，使传达的信息更简单易懂；在幻灯片的上部说明要传达的信息。
3.使用故事梗概，简要说明整体结构。 4.排练，排练，再排练！</p>
<h4 id="第12章-在字里行间呈现金字塔">第12章 在字里行间呈现金字塔</h4>
<p>1.画脑图（在大脑中画图像，或画思维导图） 2.把图像复制成文字。 ___
完！</p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>逻辑思维</tag>
      </tags>
  </entry>
  <entry>
    <title>R语言绘图</title>
    <url>/2017/02/28/R%E8%AF%AD%E8%A8%80%E7%BB%98%E5%9B%BE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>本文转载自<a
href="http://jackycode.github.io/blog/categories/datavisualization/">Category:
DataVisualization</a>，对于不明白的地方加了自己检索后的说明。</p>
</blockquote>
<p>使用demo(graphics)，可以查看R漂亮的图像演示。</p>
<h1 id="点">点</h1>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">set.seed<span class="punctuation">(</span><span class="number">1234</span><span class="punctuation">)</span></span><br><span class="line">x<span class="operator">&lt;-</span>sample<span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">100</span><span class="punctuation">,</span><span class="number">80</span><span class="punctuation">,</span>replace <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">)</span></span><br><span class="line">y<span class="operator">&lt;-</span><span class="number">2</span><span class="operator">*</span>x<span class="operator">+</span><span class="number">20</span><span class="operator">+</span>rnorm<span class="punctuation">(</span><span class="number">80</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>x <span class="operator">=</span> x<span class="punctuation">,</span>y <span class="operator">=</span> y<span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>其中set.seed()，该命令的作用是设定生成随机数的种子，种子是为了让结果具有重复性。如果不设定种子，生成的随机数无法重现。</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">sample<span class="punctuation">(</span>x<span class="punctuation">,</span> size<span class="punctuation">,</span> replace <span class="operator">=</span> <span class="literal">FALSE</span><span class="punctuation">,</span> prob <span class="operator">=</span> <span class="literal">NULL</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>x可以是任何对象，
size规定了从对象中抽出多少个数，size应该小于x的规模，否则会报错
replace默认是FALSE，表示每次抽取后的数就不能在下一次被抽取；TRUE表示抽取过的数可以继续拿来被抽取
<span id="more"></span> &gt; 正态分布随机数rnorm()</p>
<p>句法是：rnorm（n,mean=0,sd=1）
其中n表示生成的随机数数量，mean是正态分布的均值，默认为0，sd是正态分布的标准差，默认时为1</p>
<h2 id="绘制一个最简单的散点图">绘制一个最简单的散点图：</h2>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">plot<span class="punctuation">(</span>x<span class="operator">=</span>x<span class="punctuation">,</span>y<span class="operator">=</span>y<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>其中x=x左侧的x表示横坐标，右侧的是数据名，y的相同。当然，x和y都是可以省略的。也可以使用<code>plot(formula)</code>这样的形式去绘制散点图：<code>plot(y~x)</code></p>
<h2 id="添加标题和标签">添加标题和标签</h2>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">plot<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">,</span>xlab<span class="operator">=</span><span class="string">&quot;name of x&quot;</span><span class="punctuation">,</span>ylab<span class="operator">=</span><span class="string">&quot;name of y&quot;</span><span class="punctuation">,</span>main<span class="operator">=</span><span class="string">&quot;Scatter Plot&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h2 id="设置坐标界限">设置坐标界限</h2>
<p>可先用<code>range(x)</code>或<code>range(y)</code>查看x,y的取值范围</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">plot<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">,</span>xlab<span class="operator">=</span><span class="string">&quot;name of x&quot;</span><span class="punctuation">,</span>ylab<span class="operator">=</span><span class="string">&quot;name of y&quot;</span><span class="punctuation">,</span>main<span class="operator">=</span><span class="string">&quot;Scatter Plot&quot;</span><span class="punctuation">,</span>xlim<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">100</span><span class="punctuation">)</span><span class="punctuation">,</span>ylim<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">250</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h2 id="更改字符">更改字符</h2>
<p>默认情形下，绘图字符为空心点，可以使用pch选项参数进行更改</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">plot<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">,</span>xlab<span class="operator">=</span><span class="string">&quot;name of x&quot;</span><span class="punctuation">,</span>ylab<span class="operator">=</span><span class="string">&quot;name of y&quot;</span><span class="punctuation">,</span>main<span class="operator">=</span><span class="string">&quot;Scatter Plot&quot;</span><span class="punctuation">,</span>xlim<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">100</span><span class="punctuation">)</span><span class="punctuation">,</span>ylim<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">250</span><span class="punctuation">)</span><span class="punctuation">,</span>pch<span class="operator">=</span><span class="number">19</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>pch的取值与其对应的图形字符，也可以使用plot绘制：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">a<span class="operator">&lt;-</span><span class="built_in">rep</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">5</span><span class="punctuation">,</span>each<span class="operator">=</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line">b<span class="operator">&lt;-</span><span class="built_in">rep</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">5</span><span class="punctuation">,</span><span class="number">5</span><span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>a<span class="punctuation">,</span>b<span class="punctuation">,</span>pch<span class="operator">=</span><span class="number">1</span><span class="operator">:</span><span class="number">25</span><span class="punctuation">)</span></span><br><span class="line">text<span class="punctuation">(</span>a<span class="punctuation">,</span>b<span class="punctuation">,</span><span class="number">1</span><span class="operator">:</span><span class="number">25</span><span class="punctuation">,</span>pos<span class="operator">=</span><span class="number">2</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h2 id="更改颜色">更改颜色</h2>
<p>默认情况下，R绘制的图像是黑白的。但其实，R中有若干和颜色相关的参数：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">plot<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">,</span>main<span class="operator">=</span><span class="string">&quot;Plot&quot;</span><span class="punctuation">,</span>sub<span class="operator">=</span><span class="string">&quot;Scatter Plot&quot;</span><span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&quot;red&quot;</span><span class="punctuation">,</span>col.axis<span class="operator">=</span><span class="string">&quot;green&quot;</span><span class="punctuation">,</span>col.lab<span class="operator">=</span><span class="string">&quot;blue&quot;</span><span class="punctuation">,</span>col.main<span class="operator">=</span><span class="string">&quot;#999000&quot;</span><span class="punctuation">,</span>col.sub<span class="operator">=</span><span class="string">&quot;#000999&quot;</span><span class="punctuation">,</span>fg<span class="operator">=</span><span class="string">&quot;gray&quot;</span><span class="punctuation">,</span>bg<span class="operator">=</span><span class="string">&quot;white&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>其中：</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>col</td>
<td>绘图字符的颜色</td>
</tr>
<tr>
<td>col.axis</td>
<td>坐标轴文字颜色</td>
</tr>
<tr>
<td>col.lab</td>
<td>坐标轴标签颜色</td>
</tr>
<tr>
<td>col.main</td>
<td>标题颜色</td>
</tr>
<tr>
<td>col.sub</td>
<td>副标题颜色</td>
</tr>
<tr>
<td>fg</td>
<td>前景色</td>
</tr>
<tr>
<td>bg</td>
<td>背景色</td>
</tr>
</tbody>
</table>
<h2 id="更改尺寸">更改尺寸</h2>
<p>与颜色类似，存在若干参数可以用来设置图形中元素的尺寸，而且与上表中设置颜色的参数相对应，只需将col更换成cex即可：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">plot<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">,</span>main<span class="operator">=</span><span class="string">&quot;Plot&quot;</span><span class="punctuation">,</span>sub<span class="operator">=</span><span class="string">&quot;Scatter Plot&quot;</span><span class="punctuation">,</span>cex<span class="operator">=</span><span class="number">0.5</span><span class="punctuation">,</span>cex.axis<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span>cex.lab<span class="operator">=</span><span class="number">0.8</span><span class="punctuation">,</span>cex.main<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span>cex.sub<span class="operator">=</span><span class="number">1.5</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h1 id="线">线</h1>
<p>有时候，我们不仅需要散点图，更需要折线图，比如在时间序列当中：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">t <span class="operator">&lt;-</span> 1<span class="operator">:</span><span class="number">50</span></span><br><span class="line">set.seed<span class="punctuation">(</span><span class="number">1234</span><span class="punctuation">)</span></span><br><span class="line">v<span class="operator">&lt;-</span>rnorm<span class="punctuation">(</span><span class="number">50</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>t<span class="punctuation">,</span>v<span class="punctuation">,</span>type<span class="operator">=</span><span class="string">&quot;l&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>注意，type的取值：</p>
<p>what type of plot should be drawn. Possible types are - “p” for
points, - “l” for lines, - “b” for both, - “c” for the lines part alone
of “b”, - “o” for both ‘overplotted’, - “h” for ‘histogram’ like (or
‘high-density’) vertical lines, - “s” for stair steps, - “S” for other
steps, see ‘Details’ below, - “n” for no plotting.</p>
<h2 id="更改线条类型">更改线条类型</h2>
<p>R中提供了很多类型的线条，可以通过lty选项来设定，如下：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">a<span class="operator">&lt;-</span><span class="built_in">c</span><span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>a<span class="punctuation">,</span>xlim<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">0</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">,</span>ylim<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">6</span><span class="punctuation">)</span><span class="punctuation">,</span>xlab<span class="operator">=</span><span class="string">&quot;&quot;</span><span class="punctuation">,</span>ylab <span class="operator">=</span> <span class="string">&quot;lty&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="keyword">for</span><span class="punctuation">(</span>i <span class="keyword">in</span> <span class="number">1</span><span class="operator">:</span><span class="number">6</span><span class="punctuation">)</span><span class="punctuation">&#123;</span>abline<span class="punctuation">(</span>h<span class="operator">=</span>i<span class="punctuation">,</span>lty<span class="operator">=</span>i<span class="punctuation">)</span><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="更改颜色-1">更改颜色</h2>
<p>与前面更改点的颜色方法相同！</p>
<h2 id="线条变宽">线条变宽</h2>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">plot<span class="punctuation">(</span>t<span class="punctuation">,</span>v<span class="punctuation">,</span>type<span class="operator">=</span><span class="string">&quot;l&quot;</span><span class="punctuation">,</span>lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h2 id="点与线">点与线</h2>
<p>有时候，我们还需要将点突出出来，此时需要利用type选型：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">plot<span class="punctuation">(</span>t<span class="punctuation">,</span>v<span class="punctuation">,</span>type<span class="operator">=</span><span class="string">&quot;b&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>type选项可以指定plot()函数绘制的类型，可以使用help(plot)查看。</p>
<h1 id="散点图与平滑线">散点图与平滑线</h1>
<p>在做线性回归时，我们常常会在散点图中添加一条拟合直线以查看效果：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">model <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>y<span class="operator">~</span>x<span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">)</span></span><br><span class="line">abline<span class="punctuation">(</span>model<span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&quot;blue&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>有时候，我们需要在散点图上画一条拟合的平滑线，一般使用loess:</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">plot<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">)</span></span><br><span class="line">model_loess<span class="operator">&lt;-</span>loess<span class="punctuation">(</span>y<span class="operator">~</span>x<span class="punctuation">)</span></span><br><span class="line">fit<span class="operator">&lt;-</span>fitted<span class="punctuation">(</span>model_loess<span class="punctuation">)</span></span><br><span class="line">ord<span class="operator">&lt;-</span>order<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">lines<span class="punctuation">(</span>x<span class="punctuation">[</span>ord<span class="punctuation">]</span><span class="punctuation">,</span>fit<span class="punctuation">[</span>ord<span class="punctuation">]</span><span class="punctuation">,</span>lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span>lty<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&quot;blue&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>当然，在R语言中要实现上面的图形有很多简单地方法，这里介绍两个： 1.
使用car包中的scatterplot()函数</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">library<span class="punctuation">(</span>car<span class="punctuation">)</span></span><br><span class="line">scatterplot<span class="punctuation">(</span>y<span class="operator">~</span>x<span class="punctuation">,</span>spread<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">,</span>lty<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span>lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span>smoother.args<span class="operator">=</span><span class="built_in">list</span><span class="punctuation">(</span>lty<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span>lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">,</span>smoother<span class="operator">=</span>loessLine<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>其中，直线为线性拟合，虚线为loess曲线拟合，边界为箱线图！
在函数中smoother.args选项指定曲拟合的参数，smoother选项指定是否使用曲线拟合，以及用什么方法进行曲线拟合。当然，如果不需要曲线平滑拟合，那么可以将smoother=FALSE。
使用以下语句安装需要的软件包</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">install.packages<span class="punctuation">(</span> pkgs <span class="operator">=</span> <span class="string">&quot;car&quot;</span><span class="punctuation">,</span> dependencies <span class="operator">=</span> <span class="literal">TRUE</span> <span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>使用ggplot2包
ggplot2是学习R语言制图的一座大山，它提供了一个基于全面而连贯的语法的绘图系统。功能非常强大，而且弥补了R中自带图形绘制的很多缺点。
使用这个包，实现的方法一般有两种，就是使用qplot()函数和ggplot()函数</li>
</ol>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">qplot<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">,</span>geom<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;point&quot;</span><span class="punctuation">,</span><span class="string">&quot;smooth&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span>method<span class="operator">=</span><span class="string">&quot;lm&quot;</span><span class="punctuation">,</span>se<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">)</span><span class="operator">+</span>geom_smooth<span class="punctuation">(</span>method<span class="operator">=</span><span class="string">&quot;loess&quot;</span><span class="punctuation">,</span>color<span class="operator">=</span><span class="string">&quot;red&quot;</span><span class="punctuation">,</span>se<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">,</span>LTY<span class="operator">=</span><span class="number">2</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>或者</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">ggplot<span class="punctuation">(</span>aes<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">)</span><span class="punctuation">,</span>data<span class="operator">=</span>dataSet<span class="punctuation">)</span><span class="operator">+</span>geom_point<span class="punctuation">(</span><span class="punctuation">)</span> <span class="operator">+</span> geom_smooth<span class="punctuation">(</span>method<span class="operator">=</span><span class="string">&quot;lm&quot;</span><span class="punctuation">,</span>color<span class="operator">=</span><span class="string">&quot;green&quot;</span><span class="punctuation">,</span>lty<span class="operator">=</span><span class="number">1</span><span class="punctuation">,</span>se<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">)</span> <span class="operator">+</span>geom_smooth<span class="punctuation">(</span>method<span class="operator">=</span><span class="string">&quot;loess&quot;</span><span class="punctuation">,</span>color<span class="operator">=</span><span class="string">&quot;red&quot;</span><span class="punctuation">,</span>lty<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span>se<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h1 id="饼图">饼图</h1>
<p>饼图，就是将一个圆（或者圆饼)按分类变量分成几块，每一块所占的面积比例就是相对应的变量在总体中所占的比例。</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">year<span class="operator">&lt;-</span><span class="number">2001</span><span class="operator">:</span><span class="number">2010</span></span><br><span class="line">set.seed<span class="punctuation">(</span><span class="number">1234</span><span class="punctuation">)</span></span><br><span class="line">counts <span class="operator">&lt;-</span> sample<span class="punctuation">(</span><span class="number">100</span><span class="operator">:</span><span class="number">500</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line">par<span class="punctuation">(</span><span class="string">&quot;mar&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5.1</span> <span class="number">4.1</span> <span class="number">4.1</span> <span class="number">2.1</span></span><br><span class="line">par<span class="punctuation">(</span>mar<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">pie<span class="punctuation">(</span>counts<span class="punctuation">,</span>labels<span class="operator">=</span>year<span class="punctuation">)</span></span><br><span class="line">pie<span class="punctuation">(</span>counts<span class="punctuation">,</span>labels<span class="operator">=</span>year<span class="punctuation">,</span>col<span class="operator">=</span>gray<span class="punctuation">(</span>seq<span class="punctuation">(</span><span class="number">0.1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="built_in">length</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span>clockwise <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line">lb <span class="operator">&lt;-</span>paste<span class="punctuation">(</span>year<span class="punctuation">,</span>counts<span class="punctuation">,</span>sep<span class="operator">=</span><span class="string">&quot;:&quot;</span><span class="punctuation">)</span></span><br><span class="line">pie<span class="punctuation">(</span>counts<span class="punctuation">,</span>labels<span class="operator">=</span>lb<span class="punctuation">,</span>col<span class="operator">=</span>rainbow<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h1 id="条形图">条形图</h1>
<p>条形图就是通过垂直或者水平的条形去展示分类变量的频数。</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">year<span class="operator">&lt;-</span><span class="number">2001</span><span class="operator">:</span><span class="number">2010</span></span><br><span class="line">set.seed<span class="punctuation">(</span><span class="number">1234</span><span class="punctuation">)</span></span><br><span class="line">counts <span class="operator">&lt;-</span> sample<span class="punctuation">(</span><span class="number">100</span><span class="operator">:</span><span class="number">500</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line">par<span class="punctuation">(</span><span class="string">&quot;mar&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">[</span><span class="number">1</span><span class="punctuation">]</span> <span class="number">5.1</span> <span class="number">4.1</span> <span class="number">4.1</span> <span class="number">2.1</span></span><br><span class="line">par<span class="punctuation">(</span>mar<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>counts<span class="punctuation">,</span>names.arg<span class="operator">=</span>year<span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>counts<span class="punctuation">,</span>names.arg<span class="operator">=</span>year<span class="punctuation">,</span>horiz<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>counts<span class="punctuation">,</span>names.arg<span class="operator">=</span>year<span class="punctuation">,</span>col <span class="operator">=</span> rainbow<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>counts<span class="punctuation">,</span>names.arg<span class="operator">=</span>year<span class="punctuation">,</span>col <span class="operator">=</span> grey<span class="punctuation">(</span>seq<span class="punctuation">(</span><span class="number">0.1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="built_in">length</span><span class="operator">=</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">,</span>horiz<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>当每一年有两个变量指标时，可以绘制堆砌条形图和分组条形图：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">set.seed<span class="punctuation">(</span><span class="number">4321</span><span class="punctuation">)</span></span><br><span class="line">counts2<span class="operator">&lt;-</span>sample<span class="punctuation">(</span><span class="number">100</span><span class="operator">:</span><span class="number">500</span><span class="punctuation">,</span><span class="number">10</span><span class="punctuation">)</span></span><br><span class="line">count<span class="operator">&lt;-</span>cbind<span class="punctuation">(</span>c1<span class="operator">=</span>counts<span class="punctuation">,</span>x2<span class="operator">=</span>counts2<span class="punctuation">)</span></span><br><span class="line">rownames<span class="punctuation">(</span>count<span class="punctuation">)</span><span class="operator">&lt;-</span>year</span><br><span class="line">par<span class="punctuation">(</span>mfrow<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">barplot<span class="punctuation">(</span>count<span class="punctuation">,</span>col<span class="operator">=</span>rainbow<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">,</span>legend<span class="operator">=</span>rownames<span class="punctuation">(</span>count<span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">barplot<span class="punctuation">(</span>count<span class="punctuation">,</span>col<span class="operator">=</span>rainbow<span class="punctuation">(</span><span class="number">10</span><span class="punctuation">)</span><span class="punctuation">,</span>beside <span class="operator">=</span> <span class="literal">TRUE</span><span class="punctuation">,</span>legend<span class="operator">=</span>rownames<span class="punctuation">(</span>count<span class="punctuation">)</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h1 id="直方图">直方图</h1>
<p>前面介绍的两种图形，一般都是用来处理离散数据的。那么对于连续数据，常用的图形就有这里所说的直方图。直方图在横轴上将数据值域划分成若干个组别，然后在纵轴上显示其频数。通过这种方式，可以将连续的点离散化，从而来描述连续型变量的分布。
在R语言中，可以使用hist()函数来绘制直方图：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment">##构造数据</span></span><br><span class="line">set.seed<span class="punctuation">(</span><span class="number">1234</span><span class="punctuation">)</span></span><br><span class="line">x<span class="operator">&lt;-</span>rnorm<span class="punctuation">(</span><span class="number">100</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">##设置画布</span></span><br><span class="line">par<span class="punctuation">(</span>mfrow<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">2</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">##1</span></span><br><span class="line">hist<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">box<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">##2 修改颜色，组数</span></span><br><span class="line">hist<span class="punctuation">(</span>x<span class="punctuation">,</span>breaks<span class="operator">=</span><span class="number">10</span><span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&quot;gray&quot;</span><span class="punctuation">)</span></span><br><span class="line">box<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">##3 添加核密度曲线</span></span><br><span class="line">hist<span class="punctuation">(</span>x<span class="punctuation">,</span>breaks <span class="operator">=</span> <span class="number">10</span><span class="punctuation">,</span>freq<span class="operator">=</span><span class="literal">FALSE</span><span class="punctuation">,</span>col <span class="operator">=</span> <span class="string">&quot;gray&quot;</span><span class="punctuation">)</span></span><br><span class="line">lines<span class="punctuation">(</span>density<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&quot;red&quot;</span><span class="punctuation">,</span>lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">box<span class="punctuation">(</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">##4 添加正态密度曲线</span></span><br><span class="line">h <span class="operator">&lt;-</span> hist<span class="punctuation">(</span>x<span class="punctuation">,</span>breaks<span class="operator">=</span><span class="number">10</span><span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&quot;gray&quot;</span><span class="punctuation">)</span></span><br><span class="line">xfit<span class="operator">&lt;-</span>seq<span class="punctuation">(</span><span class="built_in">min</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">,</span><span class="built_in">max</span><span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">,</span><span class="built_in">length</span><span class="operator">=</span><span class="number">100</span><span class="punctuation">)</span></span><br><span class="line">yfit<span class="operator">&lt;-</span>dnorm<span class="punctuation">(</span>xfit<span class="punctuation">,</span>mean <span class="operator">=</span> mean<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">,</span>sd<span class="operator">=</span>sd<span class="punctuation">(</span>x<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">yfit<span class="operator">&lt;-</span>yfit<span class="operator">*</span>diff<span class="punctuation">(</span>h<span class="operator">$</span>mids<span class="punctuation">[</span><span class="number">1</span><span class="operator">:</span><span class="number">2</span><span class="punctuation">]</span><span class="punctuation">)</span><span class="operator">*</span><span class="built_in">length</span><span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">lines<span class="punctuation">(</span>xfit<span class="punctuation">,</span>yfit<span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&quot;blue&quot;</span><span class="punctuation">,</span>lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">box<span class="punctuation">(</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>当然，可以使用ggplot2包中的函数绘制直方图：
先试试<code>qplot()</code>函数：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">x<span class="operator">&lt;-</span>rnorm<span class="punctuation">(</span><span class="number">100</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">qplot<span class="punctuation">(</span>x<span class="punctuation">,</span>geom<span class="operator">=</span><span class="string">&quot;histogram&quot;</span><span class="punctuation">,</span>binwidth<span class="operator">=</span><span class="number">0.5</span><span class="punctuation">,</span>fill<span class="operator">=</span>..count..<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>再试试<code>ggplot()</code>函数：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">x<span class="operator">&lt;-</span>rnorm<span class="punctuation">(</span><span class="number">100</span><span class="punctuation">,</span><span class="number">0</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span></span><br><span class="line">dataSet <span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>x<span class="punctuation">)</span></span><br><span class="line">h<span class="operator">&lt;-</span>ggplot<span class="punctuation">(</span>data<span class="operator">=</span>dataSet<span class="punctuation">,</span>aes<span class="punctuation">(</span>x<span class="operator">=</span>x<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">h<span class="operator">+</span>geom_histogram<span class="punctuation">(</span>aes<span class="punctuation">(</span>fill<span class="operator">=</span>..count..<span class="punctuation">)</span><span class="punctuation">,</span>binwidth <span class="operator">=</span> <span class="number">0.5</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">##添加核密度曲线</span></span><br><span class="line">h<span class="operator">+</span>geom_histogram<span class="punctuation">(</span>aes<span class="punctuation">(</span>y<span class="operator">=</span>..density..<span class="punctuation">,</span>fill<span class="operator">=</span>..count..<span class="punctuation">)</span><span class="punctuation">,</span>binwidth <span class="operator">=</span> <span class="number">0.5</span><span class="punctuation">)</span><span class="operator">+</span>geom_density<span class="punctuation">(</span>color<span class="operator">=</span><span class="string">&quot;red&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">##添加正态密度曲线</span></span><br><span class="line">dataSet2<span class="operator">&lt;-</span> data.frame<span class="punctuation">(</span>xfit<span class="punctuation">,</span>yfit<span class="punctuation">)</span></span><br><span class="line">h<span class="operator">+</span>geom_histogram<span class="punctuation">(</span>aes<span class="punctuation">(</span>fill<span class="operator">=</span>..count..<span class="punctuation">)</span><span class="punctuation">,</span>binwidth <span class="operator">=</span> <span class="number">0.5</span><span class="punctuation">)</span><span class="operator">+</span>geom_line<span class="punctuation">(</span>data<span class="operator">=</span>dataSet2<span class="punctuation">,</span>aes<span class="punctuation">(</span>x<span class="operator">=</span>xfit<span class="punctuation">,</span>y<span class="operator">=</span>yfit<span class="punctuation">)</span><span class="punctuation">,</span>color<span class="operator">=</span><span class="string">&quot;red&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h1 id="箱线图">箱线图</h1>
<p>还有一种常用的图形，就是<strong>箱线图</strong>，也称<strong>盒须图</strong>。它通过绘制连续型变量的五个分位数（最大最小值、25%和75%分位数以及中位数），描述变量的分布。</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">x1<span class="operator">&lt;-</span>x</span><br><span class="line">x2<span class="operator">&lt;-</span>rnorm<span class="punctuation">(</span><span class="number">100</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">)</span></span><br><span class="line">x3<span class="operator">&lt;-</span>rnorm<span class="punctuation">(</span><span class="number">100</span><span class="punctuation">,</span><span class="number">2</span><span class="punctuation">,</span><span class="number">4</span><span class="punctuation">)</span></span><br><span class="line">all_x <span class="operator">&lt;-</span> <span class="built_in">c</span><span class="punctuation">(</span>x1<span class="punctuation">,</span>x2<span class="punctuation">,</span>x3<span class="punctuation">)</span></span><br><span class="line">label <span class="operator">&lt;-</span> <span class="built_in">rep</span><span class="punctuation">(</span><span class="number">1</span><span class="operator">:</span><span class="number">3</span><span class="punctuation">,</span>each<span class="operator">=</span><span class="number">100</span><span class="punctuation">)</span></span><br><span class="line">dataSet3<span class="operator">&lt;-</span>data.frame<span class="punctuation">(</span>x<span class="operator">=</span>all_x<span class="punctuation">,</span>label<span class="operator">=</span>label<span class="punctuation">)</span></span><br><span class="line">boxplot<span class="punctuation">(</span>dataSet3<span class="operator">$</span>x<span class="punctuation">)</span></span><br><span class="line"><span class="comment">##考虑类别</span></span><br><span class="line">boxplot<span class="punctuation">(</span>x<span class="operator">~</span>label<span class="punctuation">,</span>data <span class="operator">=</span> dataSet3<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h1 id="基础绘图系统">基础绘图系统</h1>
<p>基础绘图系统，即是R语言自带的绘图系统。R中核心的绘图系统主要基于以下两个包：
-
graphics包，此包包含了基础绘图系统的绘图函数，比如：plot(),hist()等等；
- grDevices包，此包包含了各类型的图形设备（graphics
devices），包括：X11,PDF,PNG等等。</p>
<p>基础绘图系统总是从一幅空画布开始绘制图形，<strong>首先使用plot()这样的函数在空画布上画出图形，然后使用注释函数对图形进行添加或者修改</strong>，一般来说就是添加或者修改显示的文本、辅助线、辅助点以及标题等等。对于这样的一个流程，它可以很方便我们去使用，因为这样的流程可以完全将我们的思路反应出来。<strong>它就是通过一系列的R语言命令，一步一步地按照心中预想的绘图方式将其绘制出来</strong>。</p>
<p>这样的绘图方式在给予我们方便的同时，也带来了一些弊端。首先，我们必须事先安排好图形应该如何绘制，因为一旦我们开始绘制就不能后退了；此外，当一幅图形绘制完成，我们就不能对其进行修改了，因为基础绘图系统没有绘图语言（graphical
“language”)。</p>
<p>基础绘图一般来说：<strong>就是使用一系列单独的函数调用，将图形的各个零散的部分组合起来</strong>。</p>
<p>利用mtcar数据集，做个示例：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 取出感兴趣的数据</span></span><br><span class="line">dataSet <span class="operator">&lt;-</span>mtcars<span class="punctuation">[</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;mpg&quot;</span><span class="punctuation">,</span><span class="string">&quot;disp&quot;</span><span class="punctuation">,</span><span class="string">&quot;carb&quot;</span><span class="punctuation">)</span><span class="punctuation">]</span></span><br><span class="line"><span class="comment">## 转换数据的格式</span></span><br><span class="line">dataSet<span class="operator">&lt;-</span>transform<span class="punctuation">(</span>dataSet<span class="punctuation">,</span>carb<span class="operator">=</span>factor<span class="punctuation">(</span>carb<span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">par<span class="punctuation">(</span>mar<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">## 绘图查看数据 散点图</span></span><br><span class="line">plot<span class="punctuation">(</span>dataSet<span class="operator">$</span>mpg<span class="punctuation">,</span>dataSet<span class="operator">$</span>disp<span class="punctuation">,</span>xlab<span class="operator">=</span><span class="string">&quot;mpg&quot;</span><span class="punctuation">,</span>ylab<span class="operator">=</span><span class="string">&quot;disp&quot;</span><span class="punctuation">)</span></span><br><span class="line">title<span class="punctuation">(</span><span class="string">&quot;The Scatter Plot&quot;</span><span class="punctuation">)</span></span><br><span class="line">model<span class="operator">&lt;-</span>lm<span class="punctuation">(</span>disp<span class="operator">~</span>mpg<span class="punctuation">,</span>data<span class="operator">=</span>dataSet<span class="punctuation">)</span></span><br><span class="line">abline<span class="punctuation">(</span>model<span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&quot;red&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">## 加上条件</span></span><br><span class="line">with<span class="punctuation">(</span>dataSet<span class="punctuation">,</span>plot<span class="punctuation">(</span>mpg<span class="punctuation">,</span>disp<span class="punctuation">,</span>type<span class="operator">=</span><span class="string">&quot;n&quot;</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="keyword">for</span><span class="punctuation">(</span>i <span class="keyword">in</span> unique<span class="punctuation">(</span>dataSet<span class="operator">$</span>carb<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">&#123;</span>with<span class="punctuation">(</span>subset<span class="punctuation">(</span>dataSet<span class="punctuation">,</span>carb<span class="operator">==</span>i<span class="punctuation">)</span><span class="punctuation">,</span>points<span class="punctuation">(</span>mpg<span class="punctuation">,</span>disp<span class="punctuation">,</span>col<span class="operator">=</span>i<span class="punctuation">)</span><span class="punctuation">)</span><span class="punctuation">&#125;</span></span><br><span class="line"><span class="comment">## 对于carb==4的数据，添加拟合直线</span></span><br><span class="line">model1<span class="operator">&lt;-</span>lm<span class="punctuation">(</span>disp<span class="operator">~</span>mpg<span class="punctuation">,</span>data<span class="operator">=</span>subset<span class="punctuation">(</span>dataSet<span class="punctuation">,</span>carb<span class="operator">==</span><span class="number">4</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line">abline<span class="punctuation">(</span>model1<span class="punctuation">,</span>lty<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span>lwd<span class="operator">=</span><span class="number">2</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h1 id="lattice">Lattice</h1>
<p>Lattice一般会使用以下两个包： -
lattice包：包含于基础绘图独立的，能够生成Trellis
graphics的代码，包括xyplot,bwplot等等； -
grid包：lattice包建立在此包之上，在使用中很少直接调用这个包。</p>
<p>Lattice与基础绘图系统的一个非常明显的区别在于：<strong>所有的绘图以及注释都在一次函数调用中完成</strong>。
Lattice很擅长绘制需要分类的图形，比如说，想要根据不同的level，绘制y与x的散点图。这个在基础绘制系统中还是蛮麻烦的，但是在Lattice中就比较容易。也就是说，<strong>Lattice通过一维、二维或三维的条件绘图（即是Trellis）</strong>，对多元变量关系进行直观展示。
由于其所有的绘图与注释都需要在一次函数调用中完成，所以在使用之前就需要做好准备，因为一旦图形绘制好，就什么也不能添加了，接着上面的数据集做实例：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">library<span class="punctuation">(</span>lattice<span class="punctuation">)</span></span><br><span class="line">xyplot<span class="punctuation">(</span>disp<span class="operator">~</span>mpg<span class="punctuation">,</span>data<span class="operator">=</span>dataSet<span class="punctuation">)</span></span><br><span class="line">xyplot<span class="punctuation">(</span>disp<span class="operator">~</span>mpg<span class="operator">|</span>carb<span class="punctuation">,</span>data<span class="operator">=</span>dataSet<span class="punctuation">,</span>layout<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="number">6</span><span class="punctuation">,</span><span class="number">1</span><span class="punctuation">)</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">## 使用panel function</span></span><br><span class="line">xyplot<span class="punctuation">(</span>disp<span class="operator">~</span>mpg<span class="operator">|</span>carb<span class="punctuation">,</span>data<span class="operator">=</span>dataSet<span class="punctuation">,</span>panel <span class="operator">=</span> <span class="keyword">function</span><span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">,</span>...<span class="punctuation">)</span><span class="punctuation">&#123;</span></span><br><span class="line">  panel.xyplot<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">,</span>...<span class="punctuation">)</span></span><br><span class="line">  panel.abline<span class="punctuation">(</span>h<span class="operator">=</span>median<span class="punctuation">(</span>y<span class="punctuation">)</span><span class="punctuation">,</span>lty<span class="operator">=</span><span class="number">2</span><span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&quot;gray&quot;</span><span class="punctuation">)</span></span><br><span class="line">  panel.lmline<span class="punctuation">(</span>x<span class="punctuation">,</span>y<span class="punctuation">,</span>col<span class="operator">=</span><span class="string">&quot;red&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">)</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="ggplot2">ggplot2</h1>
<p>ggplot2是基于一种全面的图形语法，提供了一种全新的图形创建方法。能够自动处理位置、文本等等注释，也能够按照需求自定义设置。默认情况下有很多选项以供选择，在不设置时会直接使用默认值。</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">library<span class="punctuation">(</span>ggplot2<span class="punctuation">)</span></span><br><span class="line"><span class="comment">## 查看qplot函数</span></span><br><span class="line">str<span class="punctuation">(</span>qplot<span class="punctuation">)</span></span><br><span class="line"><span class="comment">## 散点图</span></span><br><span class="line">qplot<span class="punctuation">(</span>mpg<span class="punctuation">,</span>disp<span class="punctuation">,</span>data<span class="operator">=</span>dataSet<span class="punctuation">)</span></span><br><span class="line"><span class="comment">## 按carb区分 按颜色</span></span><br><span class="line">qplot<span class="punctuation">(</span>mpg<span class="punctuation">,</span>disp<span class="punctuation">,</span>data<span class="operator">=</span>dataSet<span class="punctuation">,</span>color<span class="operator">=</span>carb<span class="punctuation">)</span></span><br><span class="line"><span class="comment">## 按形状</span></span><br><span class="line">qplot<span class="punctuation">(</span>mpg<span class="punctuation">,</span>disp<span class="punctuation">,</span>data<span class="operator">=</span>dataSet<span class="punctuation">,</span>shape<span class="operator">=</span>carb<span class="punctuation">)</span></span><br><span class="line"><span class="comment">## 添加拟合直线</span></span><br><span class="line">qplot<span class="punctuation">(</span>mpg<span class="punctuation">,</span>disp<span class="punctuation">,</span>data<span class="operator">=</span>dataSet<span class="punctuation">,</span>geom<span class="operator">=</span><span class="built_in">c</span><span class="punctuation">(</span><span class="string">&quot;point&quot;</span><span class="punctuation">,</span><span class="string">&quot;smooth&quot;</span><span class="punctuation">)</span><span class="punctuation">,</span>method<span class="operator">=</span><span class="string">&quot;lm&quot;</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment">## 使用facets</span></span><br><span class="line">qplot<span class="punctuation">(</span>mpg<span class="punctuation">,</span>disp<span class="punctuation">,</span>data<span class="operator">=</span>dataSet<span class="punctuation">,</span>facets <span class="operator">=</span> .<span class="operator">~</span>carb<span class="punctuation">)</span></span><br><span class="line"><span class="comment">## 添加颜色和形状</span></span><br><span class="line">qplot<span class="punctuation">(</span>mpg<span class="punctuation">,</span>disp<span class="punctuation">,</span>data<span class="operator">=</span>dataSet<span class="punctuation">,</span>facets <span class="operator">=</span> .<span class="operator">~</span>carb<span class="punctuation">,</span>color<span class="operator">=</span>carb<span class="punctuation">,</span>shape<span class="operator">=</span>carb<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>R</tag>
        <tag>绘图</tag>
      </tags>
  </entry>
  <entry>
    <title>爬取云图网站图书详细信息</title>
    <url>/2017/02/14/%E7%88%AC%E5%8F%96%E4%BA%91%E5%9B%BE%E7%BD%91%E7%AB%99%E5%9B%BE%E4%B9%A6%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>最近打算做一个图书管理系统，其中图书的详细信息通过爬虫程序爬取<a
href="http://www.yuntu.io/book/list">云图</a>网站上所有图书的详细信息，有效避免了手动输入，节约了大量的时间。因为Python也是现学现用，程序还存在很多问题，但是目前的主要目的不是写爬虫，等后续有时间了，再来深入学习下Python，并完善我的爬虫程序。</p>
<p>爬取到的信息包括了每本书的：标题、作者、出版社、出版年、ISBN、简介、目录和图书缩略图。并且将这些信息保存在MySQL数据库中，如果有感兴趣的小伙伴可以留言给我哦。</p>
<p>为什么选择爬取<a
href="http://www.yuntu.io/book/list">云图</a>网站呢？主要是因为我学艺不精(ﾟｰﾟ)，而这个网站很好爬……好了，话不多说，让我们开始吧！</p>
<span id="more"></span>
<h3 id="学习python基本语法">学习Python基本语法</h3>
<p>既然使用Python写网页爬虫，那么学习Python基本语法肯定是少不了的啦！推荐学习<strong>菜鸟教程</strong>的<a
href="http://www.runoob.com/python/python-tutorial.html">Python
基础教程</a>，浅显易懂，很快可以上手。 ### 学习爬虫的基本工作原理
了解一下爬虫的工作原理，参考别人写的爬虫程序，对写爬虫程序的一般流程有一个大概的了解。
参考网站：<a href="https://www.zhihu.com/question/20899988">如何入门
Python 爬虫？</a> <a
href="http://blog.csdn.net/column/details/why-bug.html">Python爬虫入门教程</a>
### 分析待爬取的页面
这个过程分为两步进行：首先通过图书介绍页面获取所有图书详情页的url，然后依次访问每个图书详情页，爬取需要的信息。下面进行详细分析：</p>
<p><strong>第一步：循环500次得到每个页面上20本图书的url</strong> 进入<a
href="http://www.yuntu.io/">云图</a>官网，点击<a
href="http://www.yuntu.io/book/list">图书</a>超链接，可以发现该页面包含20本图书介绍，将网页拉到底，发现一共有500张这样的页面，而且：
第一页的url是：
http://www.yuntu.io/book/list?pageNumber=1&amp;keyword=&amp;type=&amp;searchType=view
第二页的url是：
http://www.yuntu.io/book/list?pageNumber=2&amp;keyword=&amp;type=&amp;searchType=view
依次类推，每一页的url变化的是pageNumber，我们只要将页数作为变量循环500次，就可以得到每张页面上20本图书的url，将所有这些url保存到url.txt文本中。</p>
<p><strong>代码：</strong> <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> urlparse</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 匹配出图书详情页的url并添加到crawl_queue中</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urllib2.urlopen(url).read()</span><br><span class="line">        <span class="keyword">for</span> link <span class="keyword">in</span> get_links(html):</span><br><span class="line">            <span class="comment"># check if link matches expected regex</span></span><br><span class="line">            <span class="keyword">if</span> re.<span class="keyword">match</span>(<span class="string">&#x27;/book/[0-9]+&#x27;</span>, link):</span><br><span class="line">                <span class="comment"># from absolute link</span></span><br><span class="line">                link = urlparse.urljoin(<span class="string">&#x27;http://www.yuntu.io&#x27;</span>, link)</span><br><span class="line">                <span class="comment"># check if have already seen this link</span></span><br><span class="line">                <span class="keyword">if</span> link <span class="keyword">not</span> <span class="keyword">in</span> seen:</span><br><span class="line">                    seen.add(link)</span><br><span class="line">                    crawl_queue.append(link)</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>, e.reason</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取每个页面中的链接</span></span><br><span class="line"><span class="comment"># 返回值包含所有链接</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_links</span>(<span class="params">html</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Return a list of links from html&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># a regular expression to extract all links from the webpage</span></span><br><span class="line">    <span class="comment"># 匹配web页面中所有的&lt;a&gt;标签</span></span><br><span class="line">    webpage_regex = re.<span class="built_in">compile</span>(<span class="string">&#x27;&lt;a[^&gt;]+href=[&quot;\&#x27;](.*?)[&quot;\&#x27;]&#x27;</span>, re.IGNORECASE)</span><br><span class="line">    <span class="comment"># list of all links from the webpage</span></span><br><span class="line">    <span class="keyword">return</span> webpage_regex.findall(html)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 程序开始</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 保存图书详情页的url</span></span><br><span class="line">    crawl_queue = []</span><br><span class="line">    <span class="comment"># 保存已经爬取过的url</span></span><br><span class="line">    seen = <span class="built_in">set</span>(crawl_queue)</span><br><span class="line">    <span class="comment"># 每次遍历从打开的页面中匹配出图书详情页的url并添加到crawl_queue中</span></span><br><span class="line">    <span class="keyword">for</span> page <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">501</span>):</span><br><span class="line">        url = <span class="string">&#x27;http://www.yuntu.io/book/list?pageNumber=%d&amp;keyword=&amp;type=&amp;searchType=view&#x27;</span> % page</span><br><span class="line">        download(url)</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span> <span class="built_in">len</span>(crawl_queue)</span><br><span class="line">    file = <span class="built_in">open</span>(<span class="string">&quot;url.txt&quot;</span>, <span class="string">&quot;wb&quot;</span>)</span><br><span class="line">    <span class="keyword">for</span> url <span class="keyword">in</span> crawl_queue:</span><br><span class="line">        file.write(<span class="built_in">str</span>(url) + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<strong>第二步：爬取10000本图书的url，使用正则表达式匹配需要爬取的字段，并将爬取的信息保存在MySQL数据库中</strong>
这部分内容涉及的知识点主要有：正则表达式的运用，Python操作MySQL数据库，Python抓取网页中的图片并保存到本地。代码中包含了详细的注释。</p>
<p><strong>代码：</strong> <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> cookielib</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> mysql_operation <span class="keyword">import</span> MySQL</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#定义图书信息类</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Book</span>:</span><br><span class="line">    <span class="string">&quot;&quot;&quot;保存图书的详细信息&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, book_name, book_author, book_publisher, book_publish_date,</span></span><br><span class="line"><span class="params">                 book_ISBN, book_introduction, book_content, book_image_url</span>):</span><br><span class="line">        self.book_name = book_name</span><br><span class="line">        self.book_author = book_author</span><br><span class="line">        self.book_publisher = book_publisher</span><br><span class="line">        self.book_publish_date = book_publish_date</span><br><span class="line">        self.book_ISBN = book_ISBN</span><br><span class="line">        self.book_introduction = book_introduction</span><br><span class="line">        self.book_content = book_content</span><br><span class="line">        self.book_image_url = book_image_url</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">displayBook</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;书名: &quot;</span>, self.book_name, <span class="string">&quot;\n作者: &quot;</span>, self.book_author, <span class="string">&quot;\n出版社：&quot;</span>, self.book_publisher, \</span><br><span class="line">            <span class="string">&quot;\n出版日期：&quot;</span>, self.book_publish_date, <span class="string">&quot;\nISBN：&quot;</span>, self.book_ISBN, <span class="string">&quot;\n简介：&quot;</span>, self.book_introduction, \</span><br><span class="line">            <span class="string">&quot;\n目录：&quot;</span>, self.book_content, <span class="string">&quot;\n缩略图地址：&quot;</span>, self.book_image_url</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用正则表达式获取图书详细信息</span></span><br><span class="line"><span class="comment"># 返回保存图书详细信息的book对象</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_book_detail</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        html = urllib2.urlopen(url).read()</span><br><span class="line">        book_name = re.search(<span class="string">r&#x27;&lt;div style=\&quot;font-size: 20px;font-weight:bold;margin-bottom:13px;\&quot;&gt;(.*?)&lt;/div&gt;&#x27;</span>, html,</span><br><span class="line">                              re.S).group(<span class="number">1</span>)</span><br><span class="line">        book_author = re.search(<span class="string">r&#x27;&lt;a href=\&quot;/book/listByAuthor\?keyword=.*?\&quot;&gt;(.*?)&lt;/a&gt;&#x27;</span>, html, re.S).group(<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 这里获取到的出版社和出版日期是连在一起的，之间用逗号或者空格分隔</span></span><br><span class="line">        book_publisher_date = re.search(<span class="string">r&#x27;str = \&quot;(.*?)\&quot;&#x27;</span>, html, re.S).group(<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># 判断是否匹配到出版社和出版时间</span></span><br><span class="line">        <span class="keyword">if</span> book_publisher_date:</span><br><span class="line">            <span class="comment"># 出版社</span></span><br><span class="line">            book_publisher = re.split(<span class="string">r&#x27;[,\s]\s*&#x27;</span>, book_publisher_date)[<span class="number">0</span>]</span><br><span class="line">            <span class="comment"># 出版日期</span></span><br><span class="line">            book_publish_date = re.split(<span class="string">r&#x27;[,\s]\s*&#x27;</span>, book_publisher_date)[<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            book_publisher = <span class="string">&#x27;&#x27;</span></span><br><span class="line">            book_publish_date = <span class="string">&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line">        book_ISBN = re.search(<span class="string">r&#x27;url: \&quot;/book/getErrata\.json\?mixedIsbn=(.*?)\&quot;&#x27;</span>, html, re.S).group(<span class="number">1</span>)</span><br><span class="line">        book_introduction = re.search(<span class="string">r&#x27;&lt;p &gt;\&amp;nbsp\;\&amp;nbsp\;(.*?)&lt;/p&gt;&#x27;</span>, html, re.S).group(<span class="number">1</span>)</span><br><span class="line">        book_content = re.search(<span class="string">r&#x27;&lt;p id=\&quot;book_catalog\&quot;&gt;(.*?)&lt;/p&gt;&#x27;</span>, html, re.S).group(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> book_content:</span><br><span class="line">            book_content = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        book_image_url = re.search(<span class="string">r&#x27;&lt;img src=\&quot;(http\://cover.yuntu.io/.*?/&#x27;</span> + <span class="built_in">str</span>(book_ISBN) + <span class="string">&#x27;\.jpg)\&quot; &gt;&#x27;</span>,</span><br><span class="line">                                   html, re.S).group(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        book = Book(book_name, book_author, book_publisher, book_publish_date,</span><br><span class="line">                    book_ISBN, book_introduction, book_content, book_image_url)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>, e.reason</span><br><span class="line">    <span class="keyword">return</span> book</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 抓取网页文件内容，保存到内存</span></span><br><span class="line"><span class="comment"># @url 欲抓取文件 ，path+filename</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_file</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        cj = cookielib.LWPCookieJar()</span><br><span class="line">        opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))</span><br><span class="line">        urllib2.install_opener(opener)</span><br><span class="line"></span><br><span class="line">        req = urllib2.Request(url)</span><br><span class="line">        operate = opener.<span class="built_in">open</span>(req)</span><br><span class="line">        data = operate.read()</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line">    <span class="keyword">except</span> BaseException, e:</span><br><span class="line">        <span class="built_in">print</span> e</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">None</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">保存文件到本地</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">@path  本地路径</span></span><br><span class="line"><span class="string">@file_name 文件名</span></span><br><span class="line"><span class="string">@data 文件内容</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_file</span>(<span class="params">path, file_name, data</span>):</span><br><span class="line">    <span class="keyword">if</span> data == <span class="literal">None</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">    file = <span class="built_in">open</span>(path + file_name, <span class="string">&quot;wb&quot;</span>)</span><br><span class="line">    file.write(data)</span><br><span class="line">    file.flush()</span><br><span class="line">    file.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用正则表达式获取图书详细信息</span></span><br><span class="line"><span class="comment"># 返回保存图书详细信息的book对象</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">download</span>(<span class="params">url</span>):</span><br><span class="line">    <span class="built_in">print</span> <span class="string">&#x27;Downloading:&#x27;</span>, url</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">if</span> url <span class="keyword">not</span> <span class="keyword">in</span> seen:</span><br><span class="line">            seen.add(url)</span><br><span class="line">            <span class="comment"># 获取图书详细信息</span></span><br><span class="line">            book = get_book_detail(url)</span><br><span class="line">            <span class="comment"># 显示获取到的图书详细信息</span></span><br><span class="line">            book.displayBook()</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">not</span> book.book_name:</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            <span class="comment"># 将图书信息保存在数据库中</span></span><br><span class="line">            <span class="comment"># SQL 插入语句</span></span><br><span class="line">            sql = <span class="string">&quot;&quot;&quot;INSERT INTO Book(BookName, BookImage, BookWriter, BookPublisher, BookPublicationDate, ISBN, BookAbstract, BookContent)</span></span><br><span class="line"><span class="string">                                                 VALUES (%s, %s, %s, %s, %s, %s, %s, %s)&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">            param = (</span><br><span class="line">            book.book_name, <span class="string">&quot;BookCover/&quot;</span> + book.book_ISBN + <span class="string">&quot;.jpg&quot;</span>, book.book_author, book.book_publisher, book.book_publish_date,</span><br><span class="line">            book.book_ISBN, book.book_introduction, book.book_content)</span><br><span class="line">            conn.insert(sql, param)</span><br><span class="line">            <span class="comment"># 根据图书的ISBN号构建图书缩略图的名称</span></span><br><span class="line">            book_image_name = book.book_ISBN + <span class="string">&quot;.jpg&quot;</span></span><br><span class="line">            <span class="comment"># 下载图书的缩略图</span></span><br><span class="line">            save_file(<span class="string">&quot;/root/BookCover/&quot;</span>, book_image_name, get_file(book.book_image_url))</span><br><span class="line">    <span class="keyword">except</span> urllib2.URLError <span class="keyword">as</span> e:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&#x27;Download error:&#x27;</span>, e.reason</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 程序开始</span></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="comment"># 获取数据库连接</span></span><br><span class="line">    conn = MySQL(<span class="string">&#x27;127.0.0.1&#x27;</span>, <span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;password&#x27;</span>, <span class="number">3306</span>)</span><br><span class="line">    <span class="comment"># 选择数据库</span></span><br><span class="line">    conn.selectDb(<span class="string">&#x27;YourDatabaseName&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    crawl_queue = []</span><br><span class="line">    <span class="comment"># 保存已经爬取过的url</span></span><br><span class="line">    seen = <span class="built_in">set</span>(crawl_queue)</span><br><span class="line">    <span class="comment"># 打开保存图书详细信息的文本文件</span></span><br><span class="line">    file = <span class="built_in">open</span>(<span class="string">&quot;url.txt&quot;</span>)</span><br><span class="line">    <span class="comment"># 计数</span></span><br><span class="line">    count = <span class="number">0</span></span><br><span class="line">    <span class="comment"># 循环迭代云图网站图书页面</span></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> file.readlines()[count:]:</span><br><span class="line">        <span class="built_in">print</span> <span class="string">&quot;***************正在打印第%d行****************&quot;</span> % count</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">        download(line)</span><br><span class="line">        <span class="comment"># 数据库提交，每获取一行的信息后就提交一次，</span></span><br><span class="line">        conn.commit()</span><br><span class="line">    <span class="comment"># 关闭数据库</span></span><br><span class="line">    conn.close()</span><br></pre></td></tr></table></figure> 其中MySQL操作参考博客<a
href="http://weipengfei.blog.51cto.com/1511707/1269034">Python
封装MySQL类</a>并根据需要做了一些改动。 <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> MySQLdb</span><br><span class="line"></span><br><span class="line">OperationalError = MySQLdb.OperationalError</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MySQL</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, host, user, password, port=<span class="number">3306</span>, charset=<span class="string">&quot;utf8&quot;</span></span>):</span><br><span class="line">        self.host = host</span><br><span class="line">        self.port = port</span><br><span class="line">        self.user = user</span><br><span class="line">        self.password = password</span><br><span class="line">        self.charset = charset</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.conn = MySQLdb.connect(host=self.host, port=self.port, user=self.user, passwd=self.password)</span><br><span class="line">            self.conn.autocommit(<span class="literal">False</span>)</span><br><span class="line">            self.conn.set_character_set(self.charset)</span><br><span class="line">            self.cur = self.conn.cursor()</span><br><span class="line">        <span class="keyword">except</span> MySQLdb.Error <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Mysql Error %d: %s&quot;</span> % (e.args[<span class="number">0</span>], e.args[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">selectDb</span>(<span class="params">self, db</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            self.conn.select_db(db)</span><br><span class="line">        <span class="keyword">except</span> MySQLdb.Error <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;Mysql Error %d: %s&quot;</span> % (e.args[<span class="number">0</span>], e.args[<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">insert</span>(<span class="params">self, sql, param</span>):</span><br><span class="line">        <span class="keyword">return</span> self.cur.execute(sql, param)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">commit</span>(<span class="params">self</span>):</span><br><span class="line">        self.conn.commit()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">close</span>(<span class="params">self</span>):</span><br><span class="line">        self.cur.close()</span><br><span class="line">        self.conn.close()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<strong>提问：</strong>
为什么不在获取了图书详情页的url后直接进行第二步，而是在获取了全部的10000（每页20个共500页）个url后才开始第二步？
<strong>回答：</strong>
因为我的程序在处理异常时还不够完善，如果直接处理的话，程序在爬取过程中遇到异常停止后，就不能从发生异常的那个url开始了。如果分两步进行的话，程序在遇到异常后，手动修改count值（加1），就可以跳过出现异常的url，接着从下一个url开始处理。</p>
<h3 id="结语">结语</h3>
<p>通过自学Python到实现一个简单的爬虫程序，前后用了不到一周的时间，虽然现在有很多漏洞，但是基本满足我现阶段的需求。通过这个过程也告诉我，有目的的去做一件事是多么高效，完全没必要等精通了Python再去学习爬虫，而是可以在边写爬虫的过程中边学Python，这样学到的知识才是最实用的。</p>
<p><strong>参考文档</strong> <a
href="http://www.runoob.com/python/python-tutorial.html">Python
基础教程</a> <a
href="http://tool.oschina.net/regex">在线正则表达式测试</a> <a
href="http://blog.csdn.net/column/details/why-bug.html">Python爬虫入门教程</a>
<a href="http://weipengfei.blog.51cto.com/1511707/1269034">Python
封装MySQL类</a> <a
href="https://www.zhihu.com/question/20899988">如何入门 Python
爬虫？</a> <a
href="http://www.cnblogs.com/linjiqin/p/3672285.html">python抓取网页中图片并保存到本地</a>
<a
href="https://book.douban.com/subject/26869992/">《用Python写网络爬虫》</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>网页爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>《爱上统计学》读书笔记</title>
    <url>/2017/02/28/%E3%80%8A%E7%88%B1%E4%B8%8A%E7%BB%9F%E8%AE%A1%E5%AD%A6%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>学习<a
href="https://book.douban.com/subject/2985995/">《爱上统计学》</a>，为了加深记忆，边读边做笔记。如有侵权，立即删除。</p>
</blockquote>
<h3 id="计算和理解平均数">计算和理解平均数</h3>
<h4 id="描述统计descriptive-statistics">描述统计(descriptive
statistics)</h4>
<p>描述统计常用于整理、描述所收集数据的特征。如描述大学最流行的的专业是什么。</p>
<h4 id="推论统计inferential-statistics">推论统计(inferential
statistics)</h4>
<p>推论统计通常是（但并非总是）数据收集和汇总的下一步。推论统计常利用较小群体的数据来推论可能的较大群体的特征。</p>
<h4 id="计算和理解平均数-1">计算和理解平均数</h4>
<p>平均数也叫做几种趋势量数（measures 偶发 central
tendency），一般有三种形式：均值、中位数和众数。参看<a
href="https://www.wikiwand.com/zh-hans/%E5%B9%B3%E5%9D%87%E6%95%B0">Wiki
百科</a>。<span id="more"></span></p>
<h5 id="计算均值">计算均值</h5>
<p>均值（mean）是计算平均数最常用的形式。均值很简单，就是数据组中所有数值的总和除以该组数值的个数。均值计算公式如下：
<span class="math display">$$ \overline{X} = \frac{\sum{X}}{X} $$</span>
其中</p>
<ul>
<li>上带横线的字母<em>X</em> (读做“<em>X</em>
bar”)是数据组的平均数或均值。</li>
<li><span class="math inline">∑</span>
或希腊字母西格玛是连加符号，也就是将其后的所有数值都加起来。</li>
<li><em>X</em> 是数据组中每个具体的数值。</li>
<li>最后，n 是从中计算均值的样本的规模。</li>
</ul>
<p>均值对极值很敏感。</p>
<h5 id="计算中位数">计算中位数</h5>
<p>中位数（median）被定义为一系列数据的中点。计算中位数的步骤：</p>
<ol type="1">
<li>以从大到小或者从小到大的顺序列出数值。</li>
<li>找到位于中间位置的数值。那就是中位数。</li>
</ol>
<p>如果数值个数是偶数，中位数就是中间两个数值的平均是。中位数对极值不敏感。</p>
<p>均值是一系列数值的中间点，而中位数是一系列个体的中间点。</p>
<h5 id="计算众数">计算众数</h5>
<p>众数（mode)就是出现次数最多的数值。</p>
<h3 id="理解变异性">理解变异性</h3>
<p>变异性（也叫做散布或离散度）可被看作是对不同数值之间的差异性的测量。如果把变异性看作是每个数值和特定值的差异程度可能更精确（而且也许更容易）。那么你认为哪一个“数值”可能被作为那个“特定值”呢？通常情况下这个“特定值”就是均值——很正确。因此，变异性成为测量数据组中每一个数值与均值的变异性的量数。</p>
<h4 id="计算极差">计算极差</h4>
<p>极差是对变异性最笼统的测量。极差可让你了解数值之间彼此差异的程度。极差（range）是通过数据分布中的最大值减去最小值来计算。其计算公式：
<span class="math display"><em>r</em> = <em>h</em> − <em>l</em></span>
其中</p>
<ul>
<li><span class="math inline"><em>r</em></span> 是极差</li>
<li><span class="math inline"><em>h</em></span> 是数据集中的最大值</li>
<li><span class="math inline"><em>l</em></span> 是数据集中的最小值</li>
</ul>
<p>以下面的数据组（以降序的形式排列）为例：98,86,77,56,48。在这个案例中，98-48=50。极差是
50。</p>
<p><em>注意：实际上极差有两种类型。一种是不包含极差，也就是我们上面定义的。第二种是包含极差，就是最大值减去最小值再加
1（<span
class="math inline"><em>h</em> − <em>l</em> + 1</span>）。</em></p>
<h4 id="计算标准差">计算标准差</h4>
<p>标准差（standard deviation,缩写为<span
class="math inline"><em>s</em></span>或<span
class="math inline"><em>S</em><em>D</em></span>）表示一个数据组中变异性的平均数量。实际的含义是与均值的平均距离。标准差越大，每一个数据点与数据分布的均值的平均距离越大。计算标准差的公式：
<span class="math display">$$s = \sqrt{\frac{\sum{(X -
\overline{X})^2}}{n - 1}}$$</span> 其中</p>
<ul>
<li><span class="math inline"><em>s</em></span> 是标准差</li>
<li><span class="math inline">∑</span>
是西格玛，表示将其后所有数值累加求和</li>
<li><span class="math inline"><em>X</em></span> 是具体的数值</li>
<li><span class="math inline">$\overline{X}$</span>
是所有数值的均值</li>
<li>$ n $ 是样本规模</li>
</ul>
<h5 id="为什么使用n---1而不是n">为什么使用<span
class="math inline"><em>n</em> − 1</span>,而不是<span
class="math inline"><em>n</em></span></h5>
<p>答案是<span
class="math inline"><em>s</em></span>(标准差)是总体标准差的估计值，但是只有我们用
n 减去 1 的情况下才是无偏估计。我们把分母减去 1
会使得标准差大于实际的大小。为什么我们要这样做？因为好的科学家一般都是保守的。保守的含义是，如果我们不得不出错，我们出错也是由于过高估计了总体的标准差。除以较小的分母可让我们做到这一点。</p>
<p><strong>注意：</strong></p>
<ol type="1">
<li>标准差越大，数值分布越广，则数值之间的相互差异越大。</li>
<li>和均值一样，标准差对极值很敏感。当你计算样本的标准差时，若数据中存在极值，你就要在数据报告中注明这一点。</li>
<li>如果<span
class="math inline"><em>s</em> = 0</span>，数据组中就绝对没有变异性，而且在数值上完全一致。这种情况很少发生。</li>
</ol>
<h4 id="计算方差">计算方差</h4>
<p>方差（variance），就是标准差的平方。公式： <span
class="math display">$$s^2 = \frac{\sum{(X - \overline{X})^2}}{n -
1}$$</span></p>
<h3 id="计算相关系数">计算相关系数</h3>
<h4 id="相关系数到底是什么">相关系数到底是什么</h4>
<p>相关系数（correlation
coefficient）是反映两个变量之间线性关系的数值性指标。这个描述统计值的值域范围是-1
到 1.两个变量的相关有时也叫做二元相关。</p>
<p>相关反映变量间关系的动态性质。如果变量变化方向相同，相关是直接相关或正相关（direct
correlation 或 positive
correlation).如果变量变化方向相反，相关是间接相关或负相关（indirect
correlation 或 negative correlation)。</p>
<p>相关系数的绝对值反映相关的强度。</p>
<p>皮尔逊积矩相关系数用小写字母<span
class="math inline"><em>r</em></span>表示，<span
class="math inline"><em>r</em></span>的下标表示相关的两个变量。例如：<span
class="math inline"><em>r</em><sub><em>X</em><em>Y</em></sub></span>
是变量<span class="math inline"><em>X</em></span>和变量<span
class="math inline"><em>Y</em></span>之间的相关系数。</p>
<h4 id="计算简单相关系数">计算简单相关系数</h4>
<p>变量<span class="math inline"><em>X</em></span>和变量<span
class="math inline"><em>Y</em><em>之</em></span>间的简单皮尔逊积矩相关系数的计算公式：
<span class="math display">$$r_{XY} = \frac{n\sum{XY} -
\sum{X}\sum{Y}}{\sqrt{\left[n\sum{X^2} - (\sum{X})^2
\right]\left[n\sum{Y^2} - (\sum{Y})^2 \right]}}$$</span> 其中：</p>
<ul>
<li><span
class="math inline"><em>r</em><sub><em>X</em><em>Y</em></sub></span>是<span
class="math inline"><em>X</em></span>与<span
class="math inline"><em>Y</em></span>之间的相关系数</li>
<li><span class="math inline"><em>n</em></span>是样本规模</li>
<li><span class="math inline"><em>X</em></span>是变量<span
class="math inline"><em>X</em></span>的具体数值</li>
<li><span class="math inline"><em>Y</em></span>是变量<span
class="math inline"><em>Y</em></span>的具体数值</li>
<li><span class="math inline"><em>X</em><em>Y</em></span>是每一个<span
class="math inline"><em>X</em></span>值与相应的<span
class="math inline"><em>Y</em></span>值的乘积</li>
<li><span class="math inline"><em>X</em><sup>2</sup></span>是<span
class="math inline"><em>X</em></span>值的平方</li>
<li><span class="math inline"><em>Y</em><sup>2</sup></span>是<span
class="math inline"><em>Y</em></span>值的平方</li>
</ul>
<h3 id="检验你的问题">检验你的问题</h3>
<h4 id="零假设">零假设</h4>
<p>我们已经从总体中选择了一个样本来检验我们的研究假设，我们首先要建立零假设（null
hypothesis）。零假设宣称两个或多个事物之间是等同的或没有关系的。</p>
<h5 id="零假设的目的">零假设的目的</h5>
<p>零假设既是研究起点也是测量实际的研究结果的基准。</p>
<p>首先，零假设是研究的起点，因为在没有其他信息的情况下零假设就被看作可接受的真实状态。换句话说，直到你能证明存在差异，否则你只能假定没有差异。而无差异或无关的陈述正是零假设的所有内容。</p>
<p>零假设的第二个目的是提供与观察到的结果进行比较的基准，进而分析是否是由于其他因素引起这些差异。零假设有助于定义观察到的群体间的差异范围是由偶然性引起（这是零假设的论点）还是由偶然性之外的因素引起。</p>
<h4 id="研究假设">研究假设</h4>
<p>研究假设（research hypothesis）是变量间有关系的明确陈述。</p>
<p>如果研究假设假定不等价关系没有方向（例如“不同于”），假设就是无方向研究假设。如果研究假设假定不等价关系有方向（例如“多于”或“少于”），这个研究假设就是有方向研究假设。</p>
<h5 id="无方向研究假设">无方向研究假设</h5>
<p>无方向研究假设（nondirectional research
hypothesis）反映群体间的差异，但是差异的方向是不确定的。可以用下面的式子表示:<span
class="math display">$$H_i:\overline{X}\_9 \neq
\overline{X}\_{12}$$</span> 其中</p>
<ul>
<li><span class="math inline"><em>H</em><sub><em>i</em></sub></span>
表示第一个（可能有几个）研究假设的符号</li>
<li><span class="math inline">$\overline{X}\_9$</span> 表示 12
年级学生样本的平均记忆成绩</li>
<li><span class="math inline">$\overline{X}_{12}$</span> 表示 9
年级学生样本的平均记忆成绩</li>
<li><span class="math inline">≠</span> 表示“不等于”</li>
</ul>
<h5 id="有方向研究假设">有方向研究假设</h5>
<p>有方向研究假设（directional research
hypothesis）反映群体间的差异，而且差异的方向是确定的。可以用下面的式子表示:<span
class="math display">$$H_i:\overline{X}\_9 &lt;
\overline{X}\_{12}$$</span> 其中</p>
<ul>
<li><span class="math inline"><em>H</em><sub><em>i</em></sub></span>
表示第一个（可能有几个）研究假设的符号</li>
<li><span class="math inline">$\overline{X}\_9$</span> 表示 12
年级学生样本的平均记忆成绩</li>
<li><span class="math inline">$\overline{X}\_{12}$</span> 表示 9
年级学生样本的平均记忆成绩</li>
<li><span class="math inline">&lt;</span> 表示“小于”</li>
</ul>
<h3 id="概率和概率的重要性">概率和概率的重要性</h3>
<h4 id="正态曲线或钟形曲线">正态曲线（或钟形曲线）</h4>
<p>正态曲线（normal
curve，叫做钟型曲线，或钟形曲线）就是具备三个特征的数据分布的形象表示。下图表明了这三个特征。</p>
<img src="/2017/02/28/%E3%80%8A%E7%88%B1%E4%B8%8A%E7%BB%9F%E8%AE%A1%E5%AD%A6%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/1.jpg" class="">
<p>正态曲线表示均值、中位数和众数相等的数值分布。正态曲线没有偏度。正态曲线有一个很好的波峰（只有一个），而且波峰正好处于中间。</p>
<p>正态曲线以均值为中心完全对称。曲线的一半是另一半的镜像。正态曲线的双尾是渐进的（asymptotic）。含义是曲线的双尾越来越逼近横轴，但是永远不会与横轴相交。</p>
<h4 id="z-值"><span class="math inline"><em>z</em></span> 值</h4>
<p><span class="math inline"><em>z</em></span>
值就是原始数据与数据分布均值的差除以标准差所得的结果。其公式为：<span
class="math display">$$z = \frac{(X - \overline{X})}{s}$$</span>
其中</p>
<ul>
<li><span class="math inline"><em>z</em></span> 是<span
class="math inline"><em>z</em></span> 值</li>
<li><span class="math inline"><em>X</em></span> 是具体的数值</li>
<li><span class="math inline">$\overline{X}$</span>
是数据分布的数值</li>
<li><span class="math inline"><em>s</em></span> 是数据分布的标准差</li>
</ul>
<h3 id="两个群体的t检验">两个群体的<span
class="math inline"><em>t</em></span>检验</h3>
<h4 id="计算检验统计量">计算检验统计量</h4>
<p>以下公式是计算独立均值<span
class="math inline"><em>t</em></span>检验中<span
class="math inline"><em>t</em></span>值的公式。公式的分子是均值之间的差。群体内和群体间的变化的数量构成分母。
<span class="math display">$$t = \frac{\overline{X_1} -
\overline{X_2}}{\sqrt{\left[ \frac{(n_1 - 1)s_1^2 + (n_2 - 1)s_2^2}{n_1
+ n_2-2} \right]\left[ \frac{n_1 + n_2}{n_1n_2} \right]}}$$</span>
其中</p>
<ul>
<li><span class="math inline">$\overline{X_1}$</span> 表示群体 1
的均值</li>
<li><span class="math inline">$\overline{X_2}$</span> 表示群体 2
的均值</li>
<li><span class="math inline"><em>n</em><sub>1</sub></span> 表示群体 1
中参与者的数量</li>
<li><span class="math inline"><em>n</em><sub>2</sub></span> 表示群体 2
中参与者的数量</li>
<li><span class="math inline"><em>s</em><sub>1</sub><sup>2</sup></span>
表示群体 1 的方差</li>
<li><span class="math inline"><em>s</em><sub>2</sub><sup>2</sup></span>
表示群体 2 的方差</li>
</ul>
<h4 id="计算和理解效应量">计算和理解效应量</h4>
<p>最简单的计算效应量（effect
size）的方式就是以均值之间的差除以任何一个群体的标准差。这样做有一定的风险——因为假定两个群体的标准差（和方差）相等。
<span class="math display">$$ES = \frac{\overline{X_1} -
\overline{X_2}}{SD}$$</span> 其中</p>
<ul>
<li><span class="math inline"><em>E</em><em>S</em></span>
表示效应量</li>
<li><span class="math inline">$\overline{x_1}$</span> 表示群体 1
的均值</li>
<li><span class="math inline">$\overline{x_2}$</span> 表示群体 2
的均值</li>
<li><span class="math inline"><em>S</em><em>D</em></span>
表示任何一个群体的标准差</li>
</ul>
<h3 id="两个相关群体的均值检验">两个相关群体的均值检验</h3>
<h4 id="非独立样本t检验介绍">非独立样本<span
class="math inline"><em>t</em></span>检验介绍</h4>
<p>为什么用非独立均值检验？非独立均值检验表明是相同的群体在两种不同的条件下进行相同的研究。非独立均值<span
class="math inline"><em>t</em></span>检验包含每一群体均值的比较，而且重点是不同数值之间的差异。如下公式，两次测试的差异总和构成分子，表示群体之间的差异。
<span class="math display">$$t = \frac{\sum{D}}{\sqrt{\frac{n\sum{D^2} -
(\sum{D})^2}{n-1}}}$$</span> 其中</p>
<ul>
<li><span class="math inline">∑<em>D</em></span>
表示群体间差异的总和</li>
<li><span class="math inline">∑<em>D</em><sup>2</sup></span>
表示群体间差异的平方和</li>
<li><span class="math inline"><em>n</em></span>
表示成对观察的参与者数量</li>
</ul>
<p><span class="math inline"><em>t</em></span>
检验统计量的计算步骤：</p>
<ol type="1">
<li>零假设和研究假设的表述。</li>
<li>设置零假设的风险水平（或显著性水平，或第一类错误）。</li>
<li>选择合适的检验统计量。 <img src="/2017/02/28/%E3%80%8A%E7%88%B1%E4%B8%8A%E7%BB%9F%E8%AE%A1%E5%AD%A6%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/2.jpg" class=""></li>
<li>计算检验统计值（也叫做实际值）。</li>
<li>使用特定统计量的临界值分布表确定拒绝零假设需要的值。</li>
<li>比较实际值和临界值。</li>
<li>和 8.
做出决定。如果实际值大于临界值就不能接受零假设。如果实际值没有超过临界值，零假设就是最有力的解释。</li>
</ol>
<h3 id="尝试进行方差分析">尝试进行方差分析</h3>
<h4 id="方差分析的不同类型">方差分析的不同类型</h4>
<p>方差分析有许多不同的形式。最简单的形式是简单方差分析（simple analysis
of
variance），只分析一个因素或者一个处理变量，而有两个以上的群体受到这个因素的影响。简单方差分析也叫做一元方差分析（one-way
analysis of variance），因为只有一个分组维度。</p>
<p>实际上，方差分析在许多情况下类似于<span
class="math inline"><em>t</em></span>检验。在这两项检验中都需要计算均值之间的差异。但方差分析要处理两个以上的均值。</p>
<p>更复杂的方差分析类型是析因设计（factorial
design），是分析一个以上的处理变量。</p>
<h4 id="计算检验统计量-1">计算检验统计量</h4>
<p>简单方差分析检验两个以上的群体在一个因素或一个维度上的均值差异。</p>
<p>任何分析如果：</p>
<ul>
<li>只有一个维度或者一个处理变量</li>
<li>分组因素有两个以上的层级，而且</li>
<li>关注不同群体在平均成绩上的差异</li>
</ul>
<p>就需要使用简单方差分析。</p>
<p><span class="math inline"><em>F</em></span>
值是检验假设也就是群体之间有差异的检验统计量，计算公式如下。 <span
class="math display">$$F =
\frac{MS\_{between}}{MS\_{within}}$$</span></p>
<p>方差分析公式（是一个比率）比较组间的变化量（由于分组因素产生）与组内的变化量（由于随机因素产生）。如果比值为
1，那么组内差异产生的变化量等于组间差异产生的变化量，而且组间的任何差异都不显著。如果组间差异的平均值变大（也就是比率的分子变大），<span
class="math inline"><em>F</em></span> 值也变大。如果<span
class="math inline"><em>F</em></span> 值变大，在所有的<span
class="math inline"><em>F</em></span>
值分布中就会更趋向于极值，也就是更可能由于随机因素之外的因素影响。</p>
<p><span class="math inline"><em>F</em></span>
检验统计量的计算步骤：</p>
<ol type="1">
<li>零假设和研究假设的表述。</li>
<li>设置零假设的风险水平（或显著性水平、或第一类错误）。风险水平完全由研究者决定。</li>
<li>选择合适的检验统计量。</li>
<li>计算检验统计值（也叫做实际值）。</li>
<li>使用特定统计量的临界值分布表确定拒绝零假设需要的值。</li>
<li>比较实际值和临界值。</li>
<li>和
8.做出决定。如果实际值大于临界值就不能接受零假设。如果实际值没有超过临界值，零假设就是最有力的解释。</li>
</ol>
<h3 id="使用线性回归">使用线性回归</h3>
<h4 id="什么是估计">什么是估计</h4>
<p>估计的基本含义就是使用已经收集的数据集（如变量<span
class="math inline"><em>X</em></span>、<span
class="math inline"><em>Y</em></span>的数据），计算变量如何相关，接着使用相关系数以及<span
class="math inline"><em>X</em></span>的信息来估计<span
class="math inline"><em>Y</em></span>。</p>
<p>相关系数的绝对值越大，依据相关以一个变量估计另一个变量的准确性越高，因为这两个变量共享的部分越多，依据第一个变量的了解就可以更多地了解第二个变量。</p>
<h4 id="估计的逻辑">估计的逻辑</h4>
<p>估计是以过去的结果估计未来结果的活动。当我们想通过一个变量估计另一个变量，我们首先需要计算两个变量之间的相关系数。</p>
<p>通过建立回归等式（regression
equation），并使用这个等式建立回归线（regression
line）。回归线反映我们以变量<span
class="math inline"><em>X</em></span>的值估计变量<span
class="math inline"><em>Y</em></span>值的最好猜测。</p>
<p>回归线也叫做<strong>最优拟合线（line of best
fit）</strong>。回归线最好地拟合了数据，因为这条线将每个数据点与回归线的距离最小化。</p>
<p>每一个具体数据点和回归线的距离就是估计误差（error in
prediction）——是两个变量之间相关的直接反映。</p>
<p>如果是完全相关，所有的数据点将沿着 45°
角成为一条直线，而且回归线通过每一个数据点、</p>
<h4 id="绘制拟合数据的最优直线">绘制拟合数据的最优直线</h4>
<p>理解估计的最简单的方式就是依据一个变量值（我们成为<span
class="math inline"><em>X</em></span>——独立变量，independent variable
或估计变量，predictor）确定另一个变量的值（我们成为<span
class="math inline"><em>Y</em></span>——依赖变量，dependent variable
或标准变量，criterion）。
以下公式是回归线的一般公式，这个公式在高中或者大学的数学课程中都可能用到，对你来说应该很熟悉。这个公式与其他任何直线公式一样。
<span
class="math display"><em>Y</em><sup>′</sup> = <em>b</em><em>X</em> + <em>a</em></span>
其中</p>
<ul>
<li><span class="math inline"><em>Y</em><sup>′</sup></span>
表示已知<span class="math inline"><em>X</em></span>值的<span
class="math inline"><em>Y</em></span>的估计值。</li>
<li><span class="math inline"><em>b</em></span>
表示直线的斜率或者方向。</li>
<li><span class="math inline"><em>a</em></span> 表示直线与<span
class="math inline"><em>y</em></span> 轴相交的点。</li>
<li><span class="math inline"><em>X</em></span>
表示用于估计的数值。</li>
</ul>
<p>以下公式用于计算回归线的斜率（直线公式中的 b）： <span
class="math display">$$b = \frac{\sum{XY} -
(\sum{X}\sum{Y})/n}{\sum{X^2}-[(\sum{X})^2/n]}$$</span></p>
<p>以下公式用于计算直线与<span
class="math inline"><em>y</em></span>轴相交的点（直线公式中的<span
class="math inline"><em>a</em></span>）: <span class="math display">$$a
= \frac{\sum{Y}-b\sum{X}}{n}$$</span></p>
<h4 id="多元回归multiple-regression">多元回归（multiple
regression）</h4>
<p>多元回归的模型是： <span
class="math display"><em>Y</em><sup>′</sup> = <em>b</em><em>X</em><sub>1</sub> + <em>b</em><em>X</em><sub>2</sub> + <em>a</em></span>
其中 <span class="math inline"><em>X</em><sub>1</sub></span>
表示第一个独立变量的数值 <span
class="math inline"><em>X</em><sub>2</sub></span>
表示第二个独立变量的数值 <span class="math inline"><em>b</em></span>
表示特定变量的回归权重</p>
<h5
id="使用多元估计变量应遵守的重要守则">使用多元估计变量应遵守的重要守则</h5>
<p>如果要使用不止一个估计变量，要谨记遵守下面的两项重要的原则：</p>
<ol type="1">
<li>如果选择一个独立变量估计一个结果，要选择与被估计变量（<span
class="math inline"><em>Y</em></span>）相关的估计变量（<span
class="math inline"><em>X</em></span>）。也就是这两个变量有共变的部分（记住，它们应该相关）。</li>
<li>如果选择不止一个独立变量或估计变量（如<span
class="math inline"><em>X</em><sub>1</sub></span>与<span
class="math inline"><em>X</em><sub>2</sub></span>），要尽量选择相互独立或者不相关的变量，但是都要与结果变量或被估计变量（<span
class="math inline"><em>Y</em></span>）相关。</li>
</ol>
<h3 id="卡方和其他非参数检验">卡方和其他非参数检验</h3>
<h4 id="单样本卡方检验介绍">单样本卡方检验介绍</h4>
<p>单样本卡方检验的原理是，就任何事件的发生而言都可以很容易地计算随机预期的结果。</p>
<h4 id="计算卡方检验统计量">计算卡方检验统计量</h4>
<p>卡方检验要进行观察值和随机预期值的比较。下列公式就是单样本卡方检验的卡方值计算公式。
<span class="math display">$$X^2 = \sum{\frac{(O - E)^2}{E}}$$</span>
其中</p>
<ul>
<li><span class="math inline"><em>X</em><sup>2</sup></span>
表示卡方值</li>
<li><span class="math inline">∑</span> 是连加符号</li>
<li><span class="math inline"><em>O</em></span> 表示观察频数</li>
<li><span class="math inline"><em>E</em></span> 表示预期频数</li>
</ul>
<h3 id="理解信度和效度">理解信度和效度</h3>
<p><strong>1. 定类测量水平</strong> 定类测量水平（nominal level of
measurement）是以观察结果的属性特征定义，也就是观察结果只适合一个而且唯一的一个分类或层级。例如，性别是定类变量（男性和女性）。定类测量水平的各个类别相互排斥，例如，性别不能同时是男性和女性。</p>
<p><strong>2. 定序测量水平</strong> 定序测量水平（ordinal level of
measurement）的“序”表示次序，而且被测量的事物按照它们的属性特征排序。最好的案例是一份工作的应征者的次序。</p>
<p><strong>3. 定距测量水平</strong> 定距测量水平（interval level of
measurement），是指检验或评估工具是基于某种连续体。例如，你的词汇测试成绩是
10 个单词正确，是 5 个单词正确的两倍。</p>
<p><strong>4. 定比例测量水平</strong> 定比测量水平（ration level of
measurement）的评估工具的特征是测量尺度中绝对零值的存在。这意味着没有要测量的任何特征。</p>
<h4 id="信度">信度</h4>
<p>信度就是一个测试或者你使用的其他任何测量工具对事物的测量可以保持一致性。</p>
<h5 id="信度的不同类型">信度的不同类型</h5>
<p>信度有几种不同的类型，现在主要介绍最重要也是最常用的四种类型。</p>
<img src="/2017/02/28/%E3%80%8A%E7%88%B1%E4%B8%8A%E7%BB%9F%E8%AE%A1%E5%AD%A6%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/3.jpg" class="">
<p><strong>1. 再测信度（前测-后测信度）</strong> 再测信度（test-retest
reliability）用于检验一个测试在不同时期是否可信。</p>
<p>例如，你想建立检验不同类型职业项目的选择偏好的测试。你在六月份进行了测试，接着在九月份进行了相同的测试（保持相同很重要）。那么你计算两次测试的得分集（记住是相同的人进行了两次测试）是否相关，也就是进行了信度的测试。再测信度是检验不同时间的变化或差异所必需的信度。</p>
<p>你必须确保你测量的内容是以可信的方式测量的，这样你得到的测试结果才能与每个个体每个时间的值更接近。</p>
<p><strong>2. 平行形式信度</strong> 平行形式信度（parallel forms
reliability）用于检验相同测试的不同形式的等价性和相似性。</p>
<p><strong>3. 内在一致性信度</strong> 内在一致性信度（internal
consistency
reliability）用于确定测试中的项目是否彼此一致，都只表示一个维度、一个结构或一个关注的领域。
计算克隆巴赫系数的公式： <span class="math display">$$\delta =
(\frac{k}{k-1})(\frac{s_y^2-\sum{s_i^2}}{s_y^2})$$</span> 其中</p>
<ul>
<li><span class="math inline"><em>k</em></span> 表示项目的个数</li>
<li><span
class="math inline"><em>s</em><sub><em>y</em></sub><sup>2</sup></span>
表示观察值的方差</li>
<li><span
class="math inline">∑<em>s</em><sub><em>y</em></sub><sup>2</sup></span>
表示每一个项目的方差的总和</li>
</ul>
<p><strong>4. 评分者信度</strong> 评分者信度（interrater
reliability）是两个评分者对观察结果判断的一致程度的测量。
评分者信度可以使用下面的简单公式计算： <span
class="math display">$$评分者之间的信度 =
\frac{一致的数量}{可能一致的数量}$$</span></p>
<h4 id="效度">效度</h4>
<p>效度（validity），就是表示工具能够测量要测量的内容的性质。有效的测试是测量应该测量的内容。</p>
<h5 id="效度的不同类型">效度的不同类型</h5>
<p>效度有不同的类型，我们介绍最重要也是最常用的三种类型。</p>
<figure>
<img
src="https://raw.githubusercontent.com/toypipi/graph_bed/master/image/20170321/%E6%95%88%E5%BA%A6%E7%9A%84%E4%B8%8D%E5%90%8C%E7%B1%BB%E5%9E%8B.jpg"
alt="效度的不同类型" />
<figcaption aria-hidden="true">效度的不同类型</figcaption>
</figure>
<h5 id="内容效度">内容效度</h5>
<p>内容效度（content
validity）就是测试项目能代表设计测试要测量的总体项目的性质。内容效度常用于成绩测试（例如从一年级的拼写测试到学术能力测试的任何测试）。</p>
<p>建立内容效度。建立内容效度实际上非常容易。所有你需要做的就是确定你的地方合作专家。</p>
<h5 id="准则效度">准则效度</h5>
<p>准则效度（criterion
validity）是评价测试是否反映现在和未来的一组能力。如果准则是发生在现在，我们就讨论同步效度（concurrent
criterion
validity）。如果准则是发生在未来，我们就讨论预测效度（predictive
concurrent
validity）。对于准则效度的应用，不需要同时建立同步效度和预测效度，按照测试目的的需要选择适用的那个就行了。</p>
<h5 id="建构效度">建构效度</h5>
<p>建构效度（construct
validity）是最有趣也是最难建立的效度，因为建构效度是基于测试或测量工具背后的基本的结构或概念的。</p>
<hr />
<p><strong>完！</strong></p>
<p><strong>参考文档：</strong> <a
href="https://zh.wikipedia.org/zh-hans/Help:%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F">数学公式</a>
<a
href="https://www.wikiwand.com/zh/%E9%9B%B6%E5%81%87%E8%AE%BE">零假设</a>
<a
href="https://www.wikiwand.com/zh-hans/%E7%AC%AC%E4%B8%80%E5%9E%8B%E5%8F%8A%E7%AC%AC%E4%BA%8C%E5%9E%8B%E9%8C%AF%E8%AA%A4">第一型及第二型错误</a></p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>统计学</tag>
      </tags>
  </entry>
  <entry>
    <title>关于OpenType 1.8</title>
    <url>/2017/03/10/%E5%85%B3%E4%BA%8EOpenType-1-8/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>今天在检索OpenType
1.8的翻译时，找到了一篇很好的文章，内容详实，引入入胜，一口气看完了，特在此标记一下，方便以后回味。</p>
<p><a
href="http://www.typeisbeautiful.com/2016/09/10968/">参数化设计与字体战争：从
OpenType 1.8 说起</a>来自<a href="http://www.typeisbeautiful.com/">Type
is Beautiful</a>作者<a href="http://weibo.com/u/2200457335">谭
沛然</a></p>
<p>相关链接： <a
href="https://www.wikiwand.com/zh-hans/%E6%8F%92%E5%80%BC">插值</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>OpenType 1.8</tag>
      </tags>
  </entry>
  <entry>
    <title>统计学术语</title>
    <url>/2017/03/21/%E7%BB%9F%E8%AE%A1%E5%AD%A6%E6%9C%AF%E8%AF%AD/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>本文摘自《爱上统计学》，<strong>ISBN：</strong>
9787544268509，版权归其所有，如有侵权，立即删除。</p>
</blockquote>
<p><strong>1.方差分析（Analysis of variance）</strong>
检验两个或更多均值之间的差异。简单方差分析（ANOVA）只有一个独立变量，而析因方差分析检查一个以上独立变量的均值。一元方差分析检验两个以上的群体之间的均值差异。</p>
<p><strong>2.算术平均值（Arithmetic mean）</strong>
集中趋势的一种测量方法，也就是将数据集的所有数值加起来然后除以数值的个数。</p>
<p><strong>3.渐进性（Asymptotic）</strong>
正态曲线的性质，也就是曲线的双尾无限接近但永远不会与<span
class="math inline"><em>x</em></span>轴相交。</p>
<p><strong>4.平均值（Average）</strong> 一个数据集的最有代表性的值。</p>
<p><strong>5.钟形曲线（Bell-shaped curve）</strong>
数据的分布以中均值、中位数和众数为中心是对称，而且双尾具有渐进性。
<span id="more"></span></p>
<p><strong>6.组距（Class interval）</strong>
用于建立频数分布的一组数据的上限和下限。</p>
<p><strong>7.不相关系数（Coefficient of alienation）</strong>
双变量关系中不能解释的方差的大小。</p>
<p><strong>8.决定系数（Coefficient of determination）</strong>
双变量关系中可以解释的方差的大小。</p>
<p><strong>9.非决定系数（Coefficient of non-determination）</strong>
见不相关系数。</p>
<p><strong>10.同步效度（Concurrent validity）</strong>
用于检验测试结果和同期发生的标准的一致程度的效度类型。</p>
<p><strong>11.建构效度（Construct validity）</strong>
用于检验测试反映支持测试的结构的程度的效度类型。</p>
<p><strong>12.相关系数（Correlation coefficient）</strong>
反映两个变量之间关系的数量指标。</p>
<p><strong>13.相关矩阵</strong> 相关系数集。</p>
<p><strong>14.标准变量（Criterion）</strong> 结果变量的另一个名称。</p>
<p><strong>15.准则效度（Criterion validity）</strong>
用于检验测试反映现在（同期）发生的准则或者未来（预测）发生的准则的程度的效度类型。</p>
<p><strong>16.临界值（Critical value）</strong>
拒绝（不接受）零假设必需的值。</p>
<p><strong>17.累计频数分布（Cumulative frequency distribution）</strong>
以累计频数反应每个组距的频数的频数分布。</p>
<p><strong>18.数据（Data）</strong>
对观察值或事件的记录，如考试成绩、数学课中的等级或反应时间。</p>
<p><strong>19.数据点（Data point）</strong> 一个观察值。</p>
<p><strong>20.自由度（Degrees of freedom）</strong>
对不同的统计检验来说是不同的值，近似于实验设计中每个格中的样本规模。</p>
<p><strong>21.依赖变量（Dependent variable）</strong>
回归方程中的结果变量或被估计变量。</p>
<p><strong>22.描述统计（Descriptive statistics）</strong>
描述样本或者总体特征的值。</p>
<p><strong>23.直接相关（Direct correlation）</strong>
正向相关，也就是两个变量的值变化的方向相同。</p>
<p><strong>24.有方向的研究假设（Directional research
hypothesis）</strong> 包含一种不相等陈述的研究假设。</p>
<p><strong>25.效应量（Effect size）</strong> 特定结果规模的测量。</p>
<p><strong>26.预测误差（Error in prediction）</strong> 实际值（<span
class="math inline"><em>Y</em></span>）和估计值（<span
class="math inline"><em>Y</em><sup>′</sup></span>）的差异。</p>
<p><strong>27.估计误差（Error of estimate）</strong> 见预测误差</p>
<p><strong>28.误差值（Error score）</strong>
测试值中随机的部分，也是由于不可信的测试产生的部分。</p>
<p><strong>29.析因方差分析（Factorial analysis of variance）</strong>
一个以上因素或独立变量的方差分析。</p>
<p><strong>30.因子设计（Factorial design）</strong>
一个以上实验（处理）变量的研究设计。</p>
<p><strong>31.频数分布（Frequency distribution）</strong>
说明数值在组距内分布的一个方式。</p>
<p><strong>32.频数多变图（Frequency polygon）</strong>
频数分布的图形表示。</p>
<p><strong>33.直方图（Histogram）</strong> 频数分布的图形表示。</p>
<p><strong>34.假设（Hypothesisi）</strong>
以如果-那么形式表述的变量之间关系的推断。</p>
<p><strong>35.独立变量（Independent variable）</strong>
回归方程中的可以控制的处理变量或估计变量。</p>
<p><strong>36.间接相关（Indirect correlation）</strong>
负相关，也就是两个变量的变化方向相反。</p>
<p><strong>37.推论统计（Inferential statistics）</strong>
用样本结果推论总体的统计工具。</p>
<p><strong>38.交互效应（Interaction effect）</strong>
一个因素的效应受另一个因素的影响而产生的结果。</p>
<p><strong>39.内部一致性信度（Internal consistency
reliability）</strong> 用于检验评估工具以为性质的信度类型。</p>
<p><strong>40.评分者信度（Inter-rater reliability）</strong>
用于检验评分者之间一致性的信度类型。</p>
<p><strong>41.定距测量水平（Interval level of measurement）</strong>
连续数据点之间距离相等的一种测量尺度。</p>
<p><strong>42.峰度（Kurtosis）</strong>
分布的一种特征，也就是曲线的平缓和陡峭程度。</p>
<p><strong>43.高狭峰（Leptokurtic）</strong>
正太曲线的一种性质，也就是定义正太曲线的峰度。</p>
<p><strong>44.最优拟合线（Line of best fit）</strong>
能够最优拟合实际数值并将估计误差最小化的回归线。</p>
<p><strong>45.线性相关（Linear correlation）</strong>
可以用直线最好地表示的相关。</p>
<p><strong>46.主效应（Main effect）</strong>
方差分析中，一个因素或一个独立变量对结果变量具有显著地影响。</p>
<p><strong>47.均值（Mean）</strong>
平均值的一种形式，也就是将所有的观察值加起来之后除以观察值的数量。</p>
<p><strong>48.平均偏差或平均差（Mean deviation）</strong>
所有数值偏离分布均值的偏差的平均值。</p>
<p><strong>49.集中趋势测量（Measures of central tendency）</strong>
也就是均值、中位数和众数</p>
<p><strong>50.中位数（Median）</strong>
数据分布中50%的个案在其之上，50%个案在其之下的数据点。</p>
<p><strong>51.组中点（Midpoint）</strong> 组距的中点。</p>
<p><strong>52.众数（Mode）</strong> 一个数据分布中出现次数最多的数值</p>
<p><strong>53.多元回归（Multiple regression）</strong>
用多个变量估计一个变量的统计工具</p>
<p><strong>54.定类测量水平（Nominal level of measurement）</strong>
只有分类没有次序和大小的测量尺度</p>
<p><strong>55.无方向的研究假设（Non-directional research
hypothesis）</strong> 没有推断方向只断定有差异的假设。</p>
<p><strong>56.非参数统计（Nonparametric statistics）</strong>
分布自由的统计。</p>
<p><strong>57.正太曲线（Normal curve）</strong> 见钟型曲线。</p>
<p><strong>58.零假设（Null hypothesis）</strong>
一组变量相等的陈述。</p>
<p><strong>59.观察值（Observed score）</strong> 记录或观察的值</p>
<p><strong>60.实际值（Obtained value）</strong>
应用统计检验得到的值。</p>
<p><strong>61.肩形图（Ogive）</strong> 累计频数分布的图形表示</p>
<p><strong>62.单尾（侧）检验（One-tailed test）</strong>
有方向的检验</p>
<p><strong>63.一元方差分析（One-way analysis of variance）</strong>
见方差分析</p>
<p><strong>64.定序测量水平（Oridinal level of measurement）</strong>
可以排序的测量尺度</p>
<p><strong>65.奇异值（Outliers）</strong>
数据分布中明显的大于或小于大多数指的数值。准确地说什么是奇异值通常是由研究者主观决定。</p>
<p><strong>66.平行形式信度（Parallel forms reliability）</strong>
检验相同测试的不同形式的一致性的信度类型。</p>
<p><strong>67.参数统计（Parametric statistics）</strong>
通过样本推断总体的统计。</p>
<p><strong>68.皮尔森积距相关系数（Pearson product-moment
correlation）</strong> 见相关系数</p>
<p><strong>69.百分位数（Percentile point）</strong>
数值出现于本身或其下的数据点</p>
<p><strong>70.低阔峰（Platykurtic）</strong>
定义正态曲线的平滑度的一种特性</p>
<p><strong>71.总体（Population）</strong>
所有可能的主体或者相关的个案。</p>
<p><strong>72.事后分析（Post hoc）</strong>
事后分析，是指通过检验确定三个或者更多群体之间差异的来源。</p>
<p><strong>73.预测效度（Predictive validity）</strong>
用于检验测试的结果和未来发生的标准的一致性的效度类型。</p>
<p><strong>74.估计变量（Predictor）</strong> 用于估计结果的变量。</p>
<p><strong>75.极差（Range）</strong>
最大值减去最小值，是对变异性的总的测量。不包含极差是最大值减去最小值。包含极差是最大值减去最小值然后加1。</p>
<p><strong>76.定比测量水平（Ration level of measurement）</strong>
有绝对零值的测量水平。</p>
<p><strong>77.回归方程（Regression equation）</strong>
定义最接近实际数值的点和线的方程。</p>
<p><strong>78.回归线（Regression line）</strong>
以回归方程的值绘制的直线。</p>
<p><strong>79.信度（Reliability）</strong> 测试的一致性。</p>
<p><strong>80.研究假设（Research hypothesis）</strong>
两个变量不相等的陈述。</p>
<p><strong>81.样本（Sample）</strong> 总体的一个子集。</p>
<p><strong>82.抽样误差（Sampling error）</strong>
样本值和总体值之间的差异。</p>
<p><strong>83.测量尺度（Scales of measurement）</strong>
测量结果的不同形式。</p>
<p><strong>84.散点图（Scattergram， or scatterplot）</strong>
配对数据点构成的图。</p>
<p><strong>85.显著水平（Significance level）</strong>
研究者在零假设为真的情况下拒绝零假设承担的风险。</p>
<p><strong>86.简单方差分析（Simple analysis of variance）</strong>
见方差分析。</p>
<p><strong>87.偏态或偏度（Skew，or skewness）</strong>
分布的性质，用于描述特定数值的不成比例的分布。右侧长于左侧意味着在分布的数值较高一端数值出现的次数较少，这是正向偏态分布。右侧短于左侧意味着在分布的数值较高一端数值出现的次数较多，这是负向偏态分布。</p>
<p><strong>88.源表（Source table）</strong>
方差分析中表示方差来源的清单。</p>
<p><strong>89.标准差（Standard deviation）</strong>
偏离于均值的平均值。</p>
<p><strong>90.标准估计误差（Standard error of estimate）</strong>
估计准确性的测量。</p>
<p><strong>91.标准值（Standard score）</strong> 见<span
class="math inline"><em>z</em></span>值</p>
<p><strong>92.统计显著性（Statistical significance）</strong>
见显著水平</p>
<p><strong>93.统计学（Statistics）</strong>
用于组织和解释数据的一系列的工具和技术。</p>
<p><strong>94.再测信度（Test-retest reliability）</strong>
检验不同时期测试一致性的信度类型。</p>
<p><strong>95.检验统计值（Test statistic value）</strong> 见实际值。</p>
<p><strong>96.真实值（True score）</strong>
反映实际能力和行为的观察值中不可观察的部分。</p>
<p><strong>97.双尾（侧）检验（Two-tailed test）</strong>
无法向假设也就是差异方向不重要的假设的检验。</p>
<p><strong>98.第<span class="math inline">Ⅰ</span>类错误（Type <span
class="math inline">Ⅰ</span> error）</strong>
零假设为真的情况下拒绝零假设的概率或可能性。</p>
<p><strong>99.第<span class="math inline">Ⅱ</span>类错误（Type <span
class="math inline">Ⅱ</span> error）</strong>
零假设为真的情况下接受零假设的概率或可能性。</p>
<p><strong>100.无偏估计（Unbiased estimate）</strong>
总体参数的保守估计。</p>
<p><strong>101.效度（validity）</strong>
测试能够测试要测试的内容的性质。</p>
<p><strong>102.变异性（Variability）</strong>
数据集离散或散布的数量。</p>
<p><strong>103.方差（Variance）</strong>
标准差的平方，是数据分布的离散型或散布的另一个量数。</p>
<p><strong>104.<span
class="math inline"><em>Y</em><sup>′</sup></span>（<span
class="math inline"><em>Y</em><sup>′</sup></span> or prime）</strong>
<span class="math inline"><em>Y</em></span>值的估计值。</p>
<p><strong>105.<span class="math inline"><em>z</em></span>值（<span
class="math inline"><em>z</em></span> score）</strong>
依据原始数据分布的均值和标准差来调整的原始数值。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>统计学</tag>
        <tag>术语</tag>
      </tags>
  </entry>
  <entry>
    <title>常用数学符号读法大全</title>
    <url>/2017/05/02/%E5%B8%B8%E7%94%A8%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7%E8%AF%BB%E6%B3%95%E5%A4%A7%E5%85%A8/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>最近在阅读数据挖掘相关书籍的过程中，发现很多数学公式都忘记怎么读了，特此记录一下。
<span id="more"></span></p>
<table style="width:100%;">
<colgroup>
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 16%" />
<col style="width: 20%" />
<col style="width: 13%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr>
<th>序号</th>
<th>大写</th>
<th>小写</th>
<th>英文注音</th>
<th>国际音标注</th>
<th>中文注音</th>
<th>意义</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>Α</td>
<td>α</td>
<td>alpha</td>
<td>a:lf</td>
<td>阿尔法</td>
<td>角度；系数</td>
</tr>
<tr>
<td>2</td>
<td>Β</td>
<td>β</td>
<td>beta</td>
<td>bet</td>
<td>贝塔</td>
<td>磁通系数；角度；系数</td>
</tr>
<tr>
<td>3</td>
<td>Γ</td>
<td>γ</td>
<td>gamma</td>
<td>ga:m</td>
<td>伽马</td>
<td>电导系数（小写）</td>
</tr>
<tr>
<td>4</td>
<td>Δ</td>
<td>δ</td>
<td>delta</td>
<td>delt</td>
<td>德尔塔</td>
<td>变动；密度；屈光度</td>
</tr>
<tr>
<td>5</td>
<td>Ε</td>
<td>ε</td>
<td>epsilon</td>
<td>ep<code>silon | 伊普西龙 | 对数之基数 | | 6 | Ζ | ζ | zeta | zat | 截塔 | 系数；方位角；阻抗；相对粘度；子序数 | | 7 | Η | η | eta | eit | 艾塔 | 磁滞系数；效率（小写） | | 8 | Θ | θ | thet | θit | 西塔 | 温度；相位角 | | 9 | Ι | ι | iot | aiot | 约塔 | 微小，一点儿 | | 10 | Κ | κ | kappa | kap | 卡帕 | 介质常数 | | 11 | Λ | λ | lambda | lambd | 兰布达 | 波长（小写）；体积 | | 12 | Μ | μ | mu | mju | 缪 | 磁导系数；微（千分之一）；放大因数（小写） | | 13 | Ν | ν | nu | nju | 纽 | 磁阻系数 | | 14 | Ξ | ξ | xi | ksi | 克西 | 　 | | 15 | Ο | ο | omicron | omik</code>ron</td>
<td>奥密克戎</td>
<td>　</td>
</tr>
<tr>
<td>16</td>
<td>Π</td>
<td>π</td>
<td>pi</td>
<td>pai</td>
<td>派</td>
<td>圆周率=圆周÷直径=3.1416</td>
</tr>
<tr>
<td>17</td>
<td>Ρ</td>
<td>ρ</td>
<td>rho</td>
<td>rou</td>
<td>肉</td>
<td>电阻系数（小写）</td>
</tr>
<tr>
<td>18</td>
<td>Σ</td>
<td>σ</td>
<td>sigma</td>
<td><code>sigma | 西格马 | 总和（大写），表面密度；跨导（小写） | | 19 | Τ | τ | tau | tau | 套 | 时间常数 | | 20 | Υ | υ | upsilon | jup</code>silon</td>
<td>宇普西龙</td>
<td>位移</td>
</tr>
<tr>
<td>21</td>
<td>Φ</td>
<td>φ</td>
<td>phi</td>
<td>fai</td>
<td>佛爱</td>
<td>磁通；角</td>
</tr>
<tr>
<td>22</td>
<td>Χ</td>
<td>χ</td>
<td>chi</td>
<td>phai</td>
<td>西</td>
<td>　</td>
</tr>
<tr>
<td>23</td>
<td>Ψ</td>
<td>ψ</td>
<td>psi</td>
<td>psai</td>
<td>普西</td>
<td>角速；介质电通量（静电力线）；角</td>
</tr>
<tr>
<td>24</td>
<td>Ω</td>
<td>ω</td>
<td>omega</td>
<td>o`miga</td>
<td>欧米伽</td>
<td>欧姆（大写）；角速（小写）；</td>
</tr>
</tbody>
</table>
<p><strong>参考文档：</strong> <a
href="https://blogs.oracle.com/yydzero/entry/%E6%95%B0%E5%AD%A6%E7%AC%A6%E5%8F%B7%E5%8F%8A%E5%85%B6%E5%8F%91%E9%9F%B3">数学符号及其发音</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>数学符号发音</tag>
      </tags>
  </entry>
  <entry>
    <title>《深入浅出数据分析》读书笔记</title>
    <url>/2017/03/22/%E3%80%8A%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>学习<a
href="https://book.douban.com/subject/5257905/">《深入浅出数据分析》</a>，为了加深记忆，边读边做笔记。如有侵权，立即删除。</p>
</blockquote>
<h3 id="数据分析引言分解数据">数据分析引言：分解数据</h3>
<h4 id="数据分析就是仔细推敲证据">数据分析就是仔细推敲证据</h4>
<p>所有优秀的分析师，无论专长及目标如何，都会在工作过程中按顺序执行下面这个<strong>固定基本流程</strong>，同时通过经验数据来仔细推敲各种问题。
<img src="/2017/03/22/%E3%80%8A%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/1.png" class=""></p>
<span id="more"></span>
<h5 id="确定问题">确定问题</h5>
<p><strong>未明确</strong>确定自己的问题或目标就进行数据分析就如同未定下目的地就上路旅行一样。</p>
<p>客户将帮助你确定问题，多向客户问问题。不断地问“是多少”，使你的各种目标和确信观点得到量化。</p>
<h5 id="把问题和数据分解为更小的组块">把问题和数据分解为更小的组块</h5>
<p><strong>将大问题划分为小问题</strong>
你需要将问题划分为可管理、可解决的组块。你面对的问题常常含糊不清，例如：
<img src="/2017/03/22/%E3%80%8A%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BA%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/2.png" class=""></p>
<p><strong>将数据分解为更小的组块</strong>
如果你拿到的是汇总情况，你就会想知道哪些因子对你至关重要。如果你拿到的是原始数据表，你就会想对这些因子进行汇总，让数据更有用。</p>
<h3 id="实验检验你的理论">实验：检验你的理论</h3>
<h4 id="务必使用比较法">务必使用比较法</h4>
<p>统计与分析最基本的原理之一就是比较法，它指出，数据只有通过相互比较才会有意义。</p>
<h3 id="最优化寻找最大值">最优化：寻找最大值</h3>
<h4 id="借助目标函数发现目标">借助目标函数发现目标</h4>
<p>目标函数： <span
class="math display"><em>c</em><sub>1</sub><em>x</em><sub>1</sub> + <em>c</em><sub>2</sub><em>x</em><sub>2</sub> = <em>P</em></span>
其中：</p>
<ul>
<li>每个<span class="math inline"><em>c</em></span>
表示一个约束条件</li>
<li>每个<span class="math inline"><em>x</em></span>
表示一个决策变量</li>
<li><span class="math inline"><em>P</em></span>
是你的目标，即期望的最大化对象</li>
</ul>
<h3 id="数据图形化图形让你更精明">数据图形化：图形让你更精明</h3>
<h4 id="使用散点图探索原因">使用散点图探索原因</h4>
<p>散点图是<strong>探索性数据分析</strong>的奇妙工具，统计学家用这个术语描述在一组数据中寻找一些假设条件进行测试的活动。
分析师喜欢用散点图发现因果关系，即一个变量影响另一个变量的关系。通常用散点图的<span
class="math inline"><em>X</em></span>轴代表自变量（我们假想为原因的变量），用<span
class="math inline"><em>Y</em></span>轴代表应变量（我们假想为结果的变量）。</p>
<h3 id="假设检验假设并非如此">假设检验：假设并非如此</h3>
<h4
id="变量之间可以正相关也可以负相关">变量之间可以正相关，也可以负相关</h4>
<p>观察数据变量有一个好办法，问一问“这边变量是<strong>正相关</strong>还是<strong>负相关</strong>”，若一种变量增大意味着另一种变量也增大，则为正相关；若一种变量增大意味着另一种变量减小，则为负相关。</p>
<h4 id="假设检验的核心是证伪">假设检验的核心是证伪</h4>
<p>请勿试图选出最合理的假设，只需<strong>剔除无法证实的假设</strong>——这就是假设检验的基础：<strong>证伪</strong>。
选出看上去最可信的第一个假设的做法称为<strong>满意法</strong>。满意法的<strong>严重问题</strong>是，当人们在未对其他假设进行透彻分析的情况下选取某种假设时，往往会坚持这个假设，即使反面证据堆积如山，也往往视而不见。证伪法则让人们对各种假设<strong>感觉更敏锐</strong>，从而防止掉入认知陷阱。
进行假设检验时，要使用证伪法，回避满意法。</p>
<h3 id="主观概率信念数字化">主观概率：信念数字化</h3>
<h4 id="主观概率体现专家信念">主观概率体现专家信念</h4>
<p>如果用一个数字形式的概率来表示自己对某事的确认程度，利用的就是<strong>主观概率</strong>。
主观概率是根据规律进行分析的巧妙方法，尤其是在预测孤立事件却缺乏从前在相同条件下发生过的事件的可靠数据的情况下。</p>
<h3 id="直方图数字的形状">直方图：数字的形状</h3>
<h4 id="将数据加载到-r-程序">将数据加载到 R 程序</h4>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">source<span class="punctuation">(</span><span class="string">&quot;http://www.headfirstlabs.com/books/hfda/hfda.R&quot;</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>查看下载内容中的
Employees<strong>数据框架</strong>，输入<code>employees</code>并回车。
在 R 中输入下面这条指令，生成直方图：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">hist<span class="punctuation">(</span>employees<span class="operator">$</span>received<span class="punctuation">,</span>breaks <span class="operator">=</span> <span class="number">50</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>查看指定数据范围的标准偏差和汇总统计值</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">sd<span class="punctuation">(</span>employees<span class="operator">$</span>received<span class="punctuation">)</span></span><br><span class="line">summary<span class="punctuation">(</span>employees<span class="operator">$</span>received<span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>针对不同的数据分组计算直方图：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">hist<span class="punctuation">(</span>employees<span class="operator">$</span>received<span class="punctuation">[</span>employees<span class="operator">$</span>year<span class="operator">==</span><span class="number">2007</span><span class="punctuation">]</span><span class="punctuation">,</span>breaks <span class="operator">=</span> <span class="number">50</span><span class="punctuation">)</span></span><br><span class="line">hist<span class="punctuation">(</span>employees<span class="operator">$</span>received<span class="punctuation">[</span>employees<span class="operator">$</span>year<span class="operator">==</span><span class="number">2008</span><span class="punctuation">]</span><span class="punctuation">,</span>breaks <span class="operator">=</span> <span class="number">50</span><span class="punctuation">)</span></span><br><span class="line">hist<span class="punctuation">(</span>employees<span class="operator">$</span>received<span class="punctuation">[</span>employees<span class="operator">$</span>gender<span class="operator">==</span><span class="string">&quot;F&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span>breaks <span class="operator">=</span> <span class="number">50</span><span class="punctuation">)</span></span><br><span class="line">hist<span class="punctuation">(</span>employees<span class="operator">$</span>received<span class="punctuation">[</span>employees<span class="operator">$</span>gender<span class="operator">==</span><span class="string">&quot;M&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span>breaks <span class="operator">=</span> <span class="number">50</span><span class="punctuation">)</span></span><br><span class="line">hist<span class="punctuation">(</span>employees<span class="operator">$</span>received<span class="punctuation">[</span>employees<span class="operator">$</span>negotiated<span class="operator">==</span><span class="literal">FALSE</span><span class="punctuation">]</span><span class="punctuation">,</span>breaks <span class="operator">=</span> <span class="number">50</span><span class="punctuation">)</span></span><br><span class="line">hist<span class="punctuation">(</span>employees<span class="operator">$</span>received<span class="punctuation">[</span>employees<span class="operator">$</span>negotiated<span class="operator">==</span><span class="literal">TRUE</span><span class="punctuation">]</span><span class="punctuation">,</span>breaks <span class="operator">=</span> <span class="number">50</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<h3 id="回归预测">回归：预测</h3>
<p>在 R
中运行这些指令，生成一张<strong>散点图</strong>，体现出<strong>要求加薪</strong>和<strong>实际加薪</strong>的情况。</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">employees <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&quot;http://www.headfirstlabs.com/books/hfda/hfda_ch10_employees.csv&quot;</span><span class="punctuation">,</span>header<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line">head<span class="punctuation">(</span>employees<span class="punctuation">,</span>n<span class="operator">=</span><span class="number">30</span><span class="punctuation">)</span></span><br><span class="line">plot<span class="punctuation">(</span>employees<span class="operator">$</span>requested<span class="punctuation">[</span>employees<span class="operator">$</span>negotiated<span class="operator">==</span><span class="literal">TRUE</span><span class="punctuation">]</span><span class="punctuation">,</span>employees<span class="operator">$</span>received<span class="punctuation">[</span>employees<span class="operator">$</span>negotiated<span class="operator">==</span><span class="literal">TRUE</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>使用 R 计算加薪数据的相关系数<span
class="math inline"><em>r</em></span>。</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">cor<span class="punctuation">(</span>employees<span class="operator">$</span>requested<span class="punctuation">[</span>employees<span class="operator">$</span>negotiated<span class="operator">==</span><span class="literal">TRUE</span><span class="punctuation">]</span><span class="punctuation">,</span>employees<span class="operator">$</span>received<span class="punctuation">[</span>employees<span class="operator">$</span>negotiated<span class="operator">==</span><span class="literal">TRUE</span><span class="punctuation">]</span><span class="punctuation">)</span></span><br></pre></td></tr></table></figure>
<p>使用 R 创建自己的线性回归方程。</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">myLm <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>received<span class="punctuation">[</span>negotiated<span class="operator">==</span><span class="literal">TRUE</span><span class="punctuation">]</span><span class="operator">~</span>requested<span class="punctuation">[</span>negotiated<span class="operator">==</span><span class="literal">TRUE</span><span class="punctuation">]</span><span class="punctuation">,</span>data<span class="operator">=</span>employees<span class="punctuation">)</span></span><br><span class="line">myLm<span class="operator">$</span>coefficients</span><br></pre></td></tr></table></figure>
<h3 id="合理误差">合理误差</h3>
<h4
id="机会误差实际结果与模型预测结果之间的偏差">机会误差=实际结果与模型预测结果之间的偏差</h4>
<p>实际结果与预测结果之间的偏差叫做<strong>机会误差</strong>。在统计学中，机会误差又称为<strong>残差</strong>，对残差的分析是优秀的统计模型的核心。</p>
<h4 id="用均方根误差定量表示残差分布">用均方根误差定量表示残差分布</h4>
<p>使用 R 计算均方根误差：</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 加载最新数据</span></span><br><span class="line">employees <span class="operator">&lt;-</span> read.csv<span class="punctuation">(</span><span class="string">&quot;http://www.headfirstlabs.com/books/hfda/hfda_ch10_employees.csv&quot;</span><span class="punctuation">,</span>header<span class="operator">=</span><span class="literal">TRUE</span><span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 线性模型对象</span></span><br><span class="line">myLm <span class="operator">&lt;-</span> lm<span class="punctuation">(</span>received<span class="punctuation">[</span>negotiated<span class="operator">==</span><span class="literal">TRUE</span><span class="punctuation">]</span><span class="operator">~</span>requested<span class="punctuation">[</span>negotiated<span class="operator">==</span><span class="literal">TRUE</span><span class="punctuation">]</span><span class="punctuation">,</span>data<span class="operator">=</span>employees<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># R对模型的汇总</span></span><br><span class="line">summary<span class="punctuation">(</span>myLm<span class="punctuation">)</span></span><br><span class="line"><span class="comment"># 查看均方根误差</span></span><br><span class="line">summary<span class="punctuation">(</span>myLm<span class="punctuation">)</span><span class="operator">$</span>sigma</span><br></pre></td></tr></table></figure>
<h3 id="整理数据">整理数据</h3>
<h4 id="整理数据的一般步骤">整理数据的一般步骤</h4>
<p>1.保存原始数据。 2.直观显示最终数据集。 3.识别数据中重复出现的模式。
4.整理和重新构建。 5.使用经过处理的数据。</p>
<hr />
<p><strong>完！</strong></p>
<p><strong>参考文档：</strong> <a
href="http://jingyan.baidu.com/article/59a015e343a664f795886544.html">如何用
excel 求解器 solver 求出最优化解</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>数据分析</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL常用命令</title>
    <url>/2017/03/28/MySQL%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h4 id="创建用户">创建用户</h4>
<p>创建MySQL用户有两种方式： 1. 通过使用创建用户语句，如
<code>CREATE USER</code> 或
<code>GRANT</code>。首选方式，应为这种方式更加简洁而且更不容易出错。 2.
通过使用 <code>INSERT, UPDATE, DELETE</code> 修改MySQL授权表。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> <span class="string">&#x27;monty&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;some_pass&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h4 id="删除用户">删除用户</h4>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> <span class="string">&#x27;username&#x27;</span>@<span class="string">&#x27;host&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h4
id="创建一个只允许从本地登录的超级用户jack并允许将权限赋予别的用户密码为jack.">创建一个只允许从本地登录的超级用户jack，并允许将权限赋予别的用户，密码为：jack.</h4>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> jack@<span class="string">&#x27;localhost&#x27;</span> IDENTIFIED <span class="keyword">BY</span> &quot;jack&quot; <span class="keyword">WITH</span> <span class="keyword">GRANT</span> OPTION;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h4 id="授予用户权限">授予用户权限</h4>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">GRANT</span> <span class="keyword">SELECT</span>,<span class="keyword">INSERT</span>,<span class="keyword">UPDATE</span>,<span class="keyword">DELETE</span>,<span class="keyword">CREATE</span>,<span class="keyword">DROP</span>,<span class="keyword">ALTER</span> <span class="keyword">ON</span> test.<span class="operator">*</span> <span class="keyword">TO</span> testuser@&quot;%&quot;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>常用命令</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>惊魂记</title>
    <url>/2017/04/27/%E6%83%8A%E9%AD%82%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>文档的标题是《惊魂记》，其实有点夸张了，不过也确实让我吓了一跳。今天在内网电脑编辑项目立项单，在保存的时候弹出了一个窗口，大致扫了一眼是说文档权限不兼容之类的就没管，直接点了确定，然后突然发现桌面上这个文件竟然没有了！！！难道我花了昨天一天和今天上午的心血就要这样付诸东流了吗/(ㄒoㄒ)/<sub></sub></p>
<p>不行，我不能就这样放弃。首先我跑到回收站里去找，没有！我又跑到浏览器的下载文件里面去找，没有！！我又跑到常用文件夹中去找，还是没有！！！就在这时，我突然灵光一闪，然后打开Word，在最近使用的文档里面发现了这样一个奇怪的名字“<sub>WRL0004.tmp”，打开一看，果然是我辛苦编辑的文件啊！啊啊啊啊，太高兴了有木有/(ㄒoㄒ)/</sub>~</p>
<p>通过这件事告诉我一个道理： 1. 重要文档不要放在桌面。 2.
做事不能急躁，弹出窗口内容要仔细查看。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>误删除</tag>
        <tag>Microsoft Word</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL中删除重复记录（多个字段）</title>
    <url>/2017/04/22/MySQL%E4%B8%AD%E5%88%A0%E9%99%A4%E9%87%8D%E5%A4%8D%E8%AE%B0%E5%BD%95%EF%BC%88%E5%A4%9A%E4%B8%AA%E5%AD%97%E6%AE%B5%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>今天在将多个分表合并为一个表时，遇到了一个问题。这些分表由业务人员创建，其中一部分未加UNIQUE索引，导致这些表中的部分数据重复，需要删除其中的重复数据。</p>
<p>思路为：首先将数据按照字段A、B、C、D分组（如果A、B、C、D相同就认为数据重复），求出记录大于1的最大id，然后删除这个id的数据。sql语句如下:
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> test <span class="keyword">WHERE</span> id <span class="keyword">IN</span></span><br><span class="line">(<span class="keyword">SELECT</span> id <span class="keyword">FROM</span></span><br><span class="line">(<span class="keyword">SELECT</span>  <span class="built_in">MAX</span>(id) <span class="keyword">AS</span> id,<span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> COUNT <span class="keyword">FROM</span> test <span class="keyword">GROUP</span> <span class="keyword">BY</span> A,B,C,D <span class="keyword">HAVING</span> COUNT <span class="operator">&gt;</span><span class="number">1</span> <span class="keyword">ORDER</span> <span class="keyword">BY</span> COUNT <span class="keyword">DESC</span>) <span class="keyword">AS</span> tab );</span><br></pre></td></tr></table></figure></p>
<p><strong>备注：因为每次只删除重复数据的最大id，所以如果重复数据有多条的情况，需要执行多次delete。</strong></p>
<span id="more"></span>
<p>顺表吐槽一下：业务人员在数据库建表的时候不能只考虑自己程序性能问题和编程方便，而不考虑数据库性能，导致数据库管理员在处理数据时，需要多花很多时间解决业务遗留的问题。所以，在建库建表时业务人员应和数据库管理员共同设计数据库架构。</p>
<p><strong>参考文档：</strong> <a
href="http://395469372.blog.51cto.com/1150982/1789530">Mysql删除重复数据</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>删除重复记录</tag>
        <tag>多个字段</tag>
      </tags>
  </entry>
  <entry>
    <title>Kettle 7 启动报错</title>
    <url>/2017/05/05/Kettle-7-%E5%90%AF%E5%8A%A8%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>今天在运行Kettle 7时报“A Java Exception has
occurred.”错，无法启动。谷狗查之，原来Kettle 7需要JDK
8的运行环境，于是立马升级JDK，问题解决。</p>
<p><strong>参考文档：</strong> <a
href="http://7156680.blog.51cto.com/7146680/1902210">Kettle 7启动
Spoon.bat 时报错“A Java Exception has occurred.”的解决方法</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Kettle 7</tag>
        <tag>启动异常</tag>
      </tags>
  </entry>
  <entry>
    <title>数据分析技巧和方法</title>
    <url>/2017/04/28/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%8A%80%E5%B7%A7%E5%92%8C%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h3 id="一数据分析必须遵循的原则">一、数据分析必须遵循的原则</h3>
<p>1.数据分析是为了验证假设的问题，提供必要的数据验证。
2.数据分析是为了挖掘更多的问题，并找到深层次的原因。
3.不能为了做数据分析而做数据分析。</p>
<h3 id="二数据分析的步骤">二、数据分析的步骤</h3>
<p>数据分析有极广泛的应用范围。典型的数据分析可能包含以下三个步骤：</p>
<p>1.探索性数据分析，当数据刚取得时，可能杂乱无章，看不出规律，通过作图、造表、用各种形式的方程拟合，计算某些特征量等手段探索规律性的可能形式，即往什么方向和用何种方式去寻找和揭示隐含在数据中的规律性。
2.模型选定分析，在探索性分析的基础上提出一类或几类可能的模型，然后通过进一步的分析从中挑选一定的模型。
3.推断分析，通常使用数理统计方法对所定模型或估计的可靠程度和精确程度做出推断。
<span id="more"></span></p>
<h3 id="三数据分析过程实施">三、数据分析过程实施</h3>
<p>数据分析过程的主要活动由识别信息需求、收集数据、分析数据、评价并改进数据分析的有效性组成。</p>
<p><strong>1.识别信息需求</strong>
识别信息需求是确保数据分析过程有效性的首要条件，可以为收集数据、分析数据提供清晰的目标。识别信息需求是管理者的职责。管理者应根据决策和过程控制的需求，提出对信息的需求。就过程控制而言，管理者应识别需求要利用哪些信息支持评审过程输入、过程输出、资源配置的合理性，过程活动的优化方案和过程异常变异的发现。</p>
<p><strong>2.收集数据</strong>
有目的的收集数据，是确保数据分析过程有效的基础。组织需要对收集数据的内容、渠道、方法进行策划。策划时应考虑：</p>
<p>①将识别的需求转化为具体的要求，如评价供方时，需要收集的数据可能包括其过程能力、测量系统不确定度等相关数据；
②明确由谁在何时何处，通过何种渠道和方法收集数据； ③记录表应便于应用；
④采取有效措施，防止数据丢失和虚假数据对系统的干扰。</p>
<p><strong>3.分析数据</strong>
分析数据是将收集的数据通过加工、整理和分析、使其转化为信息，通常用方法有：
老七种工具，即排列图、因果图、分层法、调查法、散布图、直方图、控制图；
新七种工具，即关联图、系统图、矩阵图、KJ法、计划评审技术、PDPC法、矩阵数据图；</p>
<p><strong>4.数据分析过程的改进</strong>
数据分析是质量管理体系的基础。组织的管理者应在适当时，通过对以下问题的分析，评估其有效性：</p>
<p>①提供决策的信息是否充分、可信，是否存在因信息不足、失准、滞后而导致决策失误的问题；
②信息对持续改进质量管理体系、过程、产品所发挥的作用是否与期望值一致，是否在产品实现过程中有效运用数据分析；
③收集数据的目的是否明确，收集的数据是否真实和充分，信息渠道是否畅通；
④数据分析的方法是否合理，是否将风险控制在可接受的范围；
⑤数据分析所需资源是否得到保障。</p>
<p>其实，数据分析/数据挖掘是基础，是解决问题的一种手段，关键还是要了解行业的业务问题，以及营销方法，这才是让数据成为信息，继而成为情报的关键。</p>
<h3 id="四如何在ppt中表现">四、如何在ppt中表现</h3>
<p>1.调差研究阶段：首先要收集数据，分析数据，挖掘数据。
2.图表分析阶段：分析、挖掘的结果，要做成专业的图表来说明，呈现。
3.文档制作阶段：分析都做好了，就要写成分析报告文档，PPT或word。
4.交流演示阶段：文档写好了，就要汇报演讲了。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>技巧</tag>
        <tag>方法</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS 7 编译安装Mysql 5.7</title>
    <url>/2017/05/05/CentOS-7-%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85Mysql-5-7/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h3 id="安装所需依赖包">1.安装所需依赖包</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum -y install gcc gcc-c++ ncurses ncurses-devel cmake bison bison-devel</span><br></pre></td></tr></table></figure>
<h3 id="下载源码包">2.下载源码包</h3>
<p>可以去<a
href="https://dev.mysql.com/downloads/mysql/">官网</a>下载，也可以从<a
href="http://pan.baidu.com/s/1i4PjkQ5">百度网盘</a> ，密码：7u29，下载。
<strong>注意：</strong> mysql 5.7 需要boost 1.59
及以上版本，可以在下载MySQL源码包时选择以包含boost版本。</p>
<h3 id="新建mysql用户及用户组">3.新建mysql用户及用户组</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">groupadd -r mysql</span><br><span class="line">useradd -r -g mysql mysql</span><br></pre></td></tr></table></figure>
<h3 id="新建mysql数据库数据文件目录">4.新建MySQL数据库数据文件目录</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mkdir -p /home/mysql/data</span><br><span class="line">mkdir -p /home/mysql/logs</span><br><span class="line">mkdir -p /home/mysql/temp</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h3 id="预编译">5.预编译</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cmake  \</span><br><span class="line">-DCMAKE_INSTALL_PREFIX=/usr/local/mysql \</span><br><span class="line">-DMYSQL_DATADIR=/home/mysql/data \</span><br><span class="line">-DMYSQL_UNIX_ADDR=/usr/local/mysql/mysql.sock \</span><br><span class="line">-DWITH_BOOST=./bootst/boost_1_59_0 \</span><br><span class="line">-DSYSCONFDIR=/etc \</span><br><span class="line">-DWITH_INNOBASE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_PARTITION_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_FEDERATED_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_BLACKHOLE_STORAGE_ENGINE=1 \</span><br><span class="line">-DWITH_MYISAM_STORAGE_ENGINE=1 \</span><br><span class="line">-DENABLED_LOCAL_INFILE=1 \</span><br><span class="line">-DENABLE_DTRACE=0 \</span><br><span class="line">-DDEFAULT_CHARSET=utf8 \</span><br><span class="line">-DDEFAULT_COLLATION=utf8_general_ci \</span><br><span class="line">-DWITH_EMBEDDED_SERVER=1</span><br></pre></td></tr></table></figure>
<h3 id="编译安装">6.编译安装</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">make</span><br><span class="line">make install</span><br><span class="line">make clean</span><br></pre></td></tr></table></figure>
<h3 id="设置开机自启动">7.设置开机自启动</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cp /usr/local/mysql/support-files/mysql.server /etc/init.d/mysqld</span><br><span class="line">chmod +x /etc/init.d/mysqld</span><br><span class="line">chkconfig --add mysqld</span><br><span class="line">chkconfig mysqld on</span><br></pre></td></tr></table></figure>
<h3 id="修改mysql的可执行目录">8.修改MySQL的可执行目录</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">chown -Rf mysql:mysql /usr/local/mysql</span><br><span class="line">chown -Rf mysql:mysql /home/mysql</span><br></pre></td></tr></table></figure>
<h3 id="修改mysql配置文件">9.修改MySQL配置文件</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/my.cnf</span><br><span class="line"></span><br><span class="line">#修改以下内容</span><br><span class="line">[mysqld]</span><br><span class="line">character-set-server = utf8</span><br><span class="line">collation-server = utf8_general_ci</span><br><span class="line"></span><br><span class="line">skip-external-locking</span><br><span class="line">skip-name-resolve</span><br><span class="line"></span><br><span class="line">user = mysql</span><br><span class="line">port = 3306</span><br><span class="line"></span><br><span class="line">basedir = /usr/local/mysql</span><br><span class="line">datadir = /home/mysql/data</span><br><span class="line">tmpdir = /home/mysql/temp</span><br><span class="line"># server_id = .....</span><br><span class="line">socket = /usr/local/mysql/mysql.sock</span><br><span class="line">log-error = /home/mysql/logs/mysql_error.log</span><br><span class="line">pid-file = /home/mysql/data/mysql.pid</span><br><span class="line"></span><br><span class="line">open_files_limit = 10240</span><br><span class="line"></span><br><span class="line">back_log = 600</span><br><span class="line">max_connections=500</span><br><span class="line">max_connect_errors = 6000</span><br><span class="line">wait_timeout=605800</span><br><span class="line"></span><br><span class="line">#open_tables = 600</span><br><span class="line">#table_cache = 650</span><br><span class="line">#opened_tables = 630</span><br><span class="line"></span><br><span class="line">max_allowed_packet = 32M</span><br><span class="line"></span><br><span class="line">sort_buffer_size = 4M</span><br><span class="line">join_buffer_size = 4M</span><br><span class="line">thread_cache_size = 300</span><br><span class="line">query_cache_type = 1</span><br><span class="line">query_cache_size = 256M</span><br><span class="line">query_cache_limit = 2M</span><br><span class="line">query_cache_min_res_unit = 16k</span><br><span class="line"></span><br><span class="line">tmp_table_size = 256M</span><br><span class="line">max_heap_table_size = 256M</span><br><span class="line"></span><br><span class="line">key_buffer_size = 256M</span><br><span class="line">read_buffer_size = 1M</span><br><span class="line">read_rnd_buffer_size = 16M</span><br><span class="line">bulk_insert_buffer_size = 64M</span><br><span class="line"></span><br><span class="line">lower_case_table_names=1</span><br><span class="line"></span><br><span class="line">default-storage-engine = INNODB</span><br><span class="line"></span><br><span class="line">innodb_buffer_pool_size = 1G</span><br><span class="line">innodb_log_buffer_size = 32M</span><br><span class="line">innodb_log_file_size = 128M</span><br><span class="line">innodb_flush_method = O_DIRECT</span><br><span class="line"></span><br><span class="line">#####################</span><br><span class="line">long_query_time= 2</span><br><span class="line">slow-query-log = on</span><br><span class="line">slow-query-log-file = /home/mysql/logs/mysql-slow.log</span><br><span class="line"></span><br><span class="line">[mysqldump]</span><br><span class="line">quick</span><br><span class="line">max_allowed_packet = 32M</span><br><span class="line"></span><br><span class="line">[mysqld_safe]</span><br><span class="line">log-error=/var/log/mysqld.log</span><br><span class="line">pid-file=/var/run/mysqld/mysqld.pid</span><br></pre></td></tr></table></figure>
<h3 id="添加环境变量">10.添加环境变量</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vi /etc/profile</span><br><span class="line"></span><br><span class="line">#末尾添加以下内容</span><br><span class="line">#mysql env</span><br><span class="line">export PATH=$PATH:/usr/local/mysql/bin:/usr/local/mysql/lib</span><br><span class="line"></span><br><span class="line">source /etc/profile</span><br></pre></td></tr></table></figure>
<h3 id="初始化数据库">11.初始化数据库</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql_install_db --user=mysql --basedir=/usr/local/mysql --datadir=/home/mysql/data</span><br></pre></td></tr></table></figure>
<h3 id="启动数据库">12.启动数据库</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systemctl start mysqld</span><br><span class="line">systemctl status mysqld</span><br></pre></td></tr></table></figure>
<h3 id="设置mysql用户root密码">13.设置MySQL用户root密码</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#首次登陆时输入以下命令后敲回车可以直接进入数据库</span><br><span class="line">mysql -u root -p</span><br><span class="line">#输入以下命令修改root用户密码</span><br><span class="line">ALTER USER &#x27;root&#x27;@‘localhost’ IDENTIFIED BY &#x27;xxxxxxxx&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong> MySQL
5.7版本增加了很多安全性的更新，如果密码等级设置为MEDIUM级别，那么用户密码需要：密码的最小长度默认为8，至少包含一个大写字母、一个小写字母、一个数字和一个特殊字符。</p>
<h3
id="添加一个可以远程访问的普通用户">14.添加一个可以远程访问的普通用户</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create USER &#x27;test&#x27;@&#x27;%&#x27; IDENTIFIED BY &#x27;########&#x27;;</span><br><span class="line">FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong>
添加了数据库用户后还是无法远程访问的话，需要检查CentOS 7防火墙是否关闭：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">check firewalld.service</span><br><span class="line">systemctl stop firewalld.service</span><br></pre></td></tr></table></figure></p>
<p><strong>参考文档：</strong> <a
href="https://my.oschina.net/u/1429136/blog/738772">在CentOS7上编译安装MySQL
5.7.14步骤详解</a> <a
href="http://blog.csdn.net/yanglinjingshu/article/details/51136101">CentOS
7 编译安装mysql 5.7</a> <a
href="http://www.awaimai.com/1705.html">MySQL5.7修改默认root密码</a> <a
href="http://www.centoscn.com/CentOS/config/2015/0701/5768.html">CentOS7
防火墙关闭</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>CentOS 7</tag>
        <tag>MySQL 5.7</tag>
      </tags>
  </entry>
  <entry>
    <title>通过做笔记掌握零秒思考</title>
    <url>/2017/05/08/%E9%80%9A%E8%BF%87%E5%81%9A%E7%AC%94%E8%AE%B0%E6%8E%8C%E6%8F%A1%E9%9B%B6%E7%A7%92%E6%80%9D%E8%80%83/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>具体的做法是：将一张A4纸横放于面前，每张纸写一个主题，1页写4至6行，每行20至30字，写每张纸所用的时间要控制在1分钟以内，每天写10页。也就是说，每天要用10分钟的时间来做笔记。如下图中的“笔记1”。</p>
<img src="/2017/05/08/%E9%80%9A%E8%BF%87%E5%81%9A%E7%AC%94%E8%AE%B0%E6%8E%8C%E6%8F%A1%E9%9B%B6%E7%A7%92%E6%80%9D%E8%80%83/1.jpg" class="">
<span id="more"></span>
<p>做笔记的要点：
想到的事，不论是什么，不要犹豫，一想到就立刻写下来。</p>
<p>做笔记的好处： - 可以理清头绪 - 可以变得自信积极 - 可以变得心平气和 -
可以快速成长</p>
<p><strong>参考文档</strong> <a
href="https://book.douban.com/subject/26260187/">《零秒思考》</a></p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>零秒思考</tag>
      </tags>
  </entry>
  <entry>
    <title>《深入浅出SQL》读书笔记</title>
    <url>/2017/05/05/%E3%80%8A%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BASQL%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>学习<a
href="https://book.douban.com/subject/3069630/">《深入浅出SQL》</a>，为了加深记忆，边读边做笔记。如有侵权，立即删除。</p>
</blockquote>
<h2 id="数据和表保存所有东西的地方">1.数据和表：保存所有东西的地方</h2>
<h3 id="什么是数据库">什么是数据库</h3>
<p>数据库是保存表和其他相关SQL结构的容器。 ### 数据库包含关联数据
数据库中所有的表应该能以某种方式相互关联。
<strong>列</strong>是存储在表中的一列数据。行是一组能够描述某个事物的列的集合。列和行构成了表。
<span id="more"></span> 创建数据库和表 <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE gregs_list;</span><br><span class="line">USE gregs_list;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> my_contacts</span><br><span class="line">(</span><br><span class="line">last_name <span class="type">VARBINARY</span>(<span class="number">30</span>),</span><br><span class="line">first_name <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">email <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">gender <span class="type">CHAR</span>(<span class="number">1</span>),</span><br><span class="line">birthday <span class="type">DATE</span>,</span><br><span class="line">profession <span class="type">VARCHAR</span>(<span class="number">50</span>),</span><br><span class="line">location <span class="type">VARBINARY</span>(<span class="number">50</span>),</span><br><span class="line">status <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">interests <span class="type">VARBINARY</span>(<span class="number">100</span>),</span><br><span class="line">seeking <span class="type">VARCHAR</span>(<span class="number">100</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>检查创建的数据库表 <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DESC</span> my_contacts;</span><br></pre></td></tr></table></figure></p>
<p>删除已经创建的表 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">DROP TABLE my_contacts;</span><br></pre></td></tr></table></figure></p>
<p><strong>NULL</strong>是未定义的值。它不等于零，也不等于空值。</p>
<h2
id="select语句取得精美包装里的数据">2.SELECT语句：取得精美包装里的数据</h2>
<h3 id="单引号是特殊字符">单引号是特殊字符</h3>
<p>在试着插入包含单引号的VARCHAR、CHAR、BLOB数据时，必须对RDBMS说明，这些数据值中的单引号并非表示文本的结束，而是文本的一部分，应该保留在行中。在单引号字符的前面加上反斜线就能达到说明的效果。</p>
<h2 id="delete和update改变是件好事">3.DELETE和UPDATE：改变是件好事</h2>
<p>使用DELETE语句需要注意，当不加WHERE条件时，将删除表中的所有行。
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> your_table;</span><br></pre></td></tr></table></figure>
除非你非常确定WHERE子句只会删除你打算删除的行，否则都应该用SELECT确认情况。这是一个确保不会意外删除所需数据的安全方式，而且也有助于选出所有要删除的记录。
## 4.聪明的设计：为什么要规范化 ## 5.ALTER：改写历史 ##
6.SELECT进阶：以新视角看你的数据 ## 7.多张表的数据库设计：扩展你的表 ##
8.联接与多张表的操作：不能单独存在吗？ ## 9.子查询：查询中的查询 ##
10.外联接、自联接与联合：新策略 ##
11.约束、视图与事务：人多手杂，数据库受不了 ##
12.安全性：保护你的资产</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>深入浅出</tag>
        <tag>SQL</tag>
      </tags>
  </entry>
  <entry>
    <title>升级服务器libc-2.12.so</title>
    <url>/2017/06/20/%E5%8D%87%E7%BA%A7%E6%9C%8D%E5%8A%A1%E5%99%A8libc-2-12-so/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>今天在服务器桌面环境中安装smartgit时，提示<strong>/lib64/libc.so.6:
version `GLIBC_2.14’ not
found</strong>，后来通过上网检索，将libc-2.12.so升级为libc-2.14.so后问题解决，但是后来又看了几篇博客，文中介绍到:
<details class="note "><summary><p>class_name</p>
</summary>
<p>glibc是gnu发布的libc库，即c运行库，glibc是linux系统中最底层的api，几乎其它任何运行库都会依赖于glibc。glibc除了封装linux操作系统所提供的系统服务外，它本身也提供了许多其它一些必要功能服务的实现。</p>
<p>很多linux的基本命令，比如cp, rm,
ll,ln等，都得依赖于它，如果操作错误或者升级失败会导致系统命令不能使用，严重的造成系统退出后无法重新进入，所以操作时候需要慎重。</p>

</details></p>
<span id="more"></span>
<p>看后真是心有余悸，自己在配置系统的时候一点危机意识都没有，对待服务器和自己的测试系统一样，没有端正态度，特写此文引以为戒！！</p>
<p><strong>参考文档：</strong> <a
href="https://my.oschina.net/zhangxu0512/blog/262275">解决
/lib64/libc.so.6: version
<code>GLIBC_2.14' not found 的问题](http://stuart.blog.51cto.com/728677/1840205) [/lib64/libc.so.6: version</code>GLIBC_2.14’
not found问题</a> <a
href="http://www.jiagoumi.com/work/811.html">Centos6.5
升级glibc解决“libc.so.6: version GLIBC_2.14 not found”报错问题</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>libc-2.12.so</tag>
        <tag>libc.so.6</tag>
      </tags>
  </entry>
  <entry>
    <title>SecureCRT配色方案</title>
    <url>/2017/05/15/SecureCRT%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h3 id="一配色后的效果图">一、配色后的效果图</h3>
<img src="/2017/05/15/SecureCRT%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88/1.png" class="">
<span id="more"></span>
<h3 id="二设置背景颜色">二、设置背景颜色</h3>
<p>1、选项（Options）==》会话选项（Sessions
options）==》终端（Terminal）==》仿真（Emulation）。</p>
<img src="/2017/05/15/SecureCRT%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88/2.png" class="">
<p>2、在 终端（T） 下拉列表中选择 Linux，勾选 ANSI 颜色（A）。</p>
<img src="/2017/05/15/SecureCRT%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88/3.png" class="">
<p>3、选项（Options）==》全局选项（Global
options）==》终端（Terminal）==》外观（Apperance）==》ANSI 颜色（ANSI
Color）。</p>
<img src="/2017/05/15/SecureCRT%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88/4.png" class="">
<p>4、点击黑色的那项, 修改为下面的颜色比较舒服，颜色是：E, S, L =
128，240，25。</p>
<img src="/2017/05/15/SecureCRT%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88/5.png" class="">
<h3
id="三设置字体目录压缩文件颜色">三、设置字体、目录、压缩文件颜色</h3>
<p>1、点击序号 3, 修改为下面的颜色：E, S, L = 124，20，132。</p>
<p>2、点击序号 4, 修改为下面的颜色：E, S, L = 160，240，180。</p>
<p>3、点击序号 5, 修改为下面的颜色：E, S, L = 40，240，60。</p>
<img src="/2017/05/15/SecureCRT%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88/6.png" class="">
<p><strong>Note：</strong>如果修改后发现显示颜色没有改变，需要同时修改下面
Bold colors 的颜色设置。</p>
<h3 id="四设置字体">四、设置字体</h3>
<p>选项（Options）==》全局选项（Global
options）==》常规（General）==》默认会话（Default
session）==》编辑默认设置（Edit
default）==》外观（Appearance）==》字体（Font）。</p>
<img src="/2017/05/15/SecureCRT%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88/7.png" class="">
<img src="/2017/05/15/SecureCRT%E9%85%8D%E8%89%B2%E6%96%B9%E6%A1%88/8.png" class="">
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>SecureCRT</tag>
        <tag>配色</tag>
      </tags>
  </entry>
  <entry>
    <title>maven知识点</title>
    <url>/2017/05/17/maven%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>学习慕课网<a
href="http://www.imooc.com/learn/443">项目管理利器——maven</a>总结的知识点。</p>
<img src="/2017/05/17/maven%E7%9F%A5%E8%AF%86%E7%82%B9/1.png" class="">
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>maven</tag>
      </tags>
  </entry>
  <entry>
    <title>人生最大的财富就是身体健康</title>
    <url>/2017/05/22/%E4%BA%BA%E7%94%9F%E6%9C%80%E5%A4%A7%E7%9A%84%E8%B4%A2%E5%AF%8C%E5%B0%B1%E6%98%AF%E8%BA%AB%E4%BD%93%E5%81%A5%E5%BA%B7/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>感冒连续一周，不但没有好的迹象，反而更加严重了。于是，周日去了趟医院，本身想要输液的，结果皮试过敏，只能吃药，医生给开了消炎药，吃过药后喉咙好多了，头也不疼了，可以正常思考了。</p>
<p>每次去医院，都是人满为患，各种大病小病，这时候往往会感慨，人生最大的财富莫过于身体健康！生病了，不仅身体难受，还得做各种检查，吃各种药，严重的甚至还要手术开刀，花钱受罪。有些人甚至患上糖尿病、肾病等终生都难以治愈的疾病。此时，再想想自己，虽然不是百万富翁，但是身体健康，却还常常抱怨这个也没有，那个也想要。真是一点都不知足。往往在生病时会下定决心从今往后好好锻炼身体。但是等感冒好了，坚持不了一个月，就又变懒了，回到家不是看电视就是看手机。</p>
<p>谨以此文提示今后那个偷懒的我，不要忘记自己当初下的决心。</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>知足</tag>
        <tag>健康</tag>
      </tags>
  </entry>
  <entry>
    <title>《使用PDI构建开源ETL解决方案》读书笔记</title>
    <url>/2017/05/11/%E3%80%8A%E4%BD%BF%E7%94%A8PDI%E6%9E%84%E5%BB%BA%E5%BC%80%E6%BA%90ETL%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p><a href="https://book.douban.com/subject/25866405/">《Pentaho Kettle
解决方案：使用 PDI 构建开源 ETL 解决方案》</a>
的读书笔记。如有侵权，立即删除。</p>
</blockquote>
<h3 id="第-4-章-etl-示例解决方案sakila">第 4 章 ETL
示例解决方案——Sakila</h3>
<h4 id="sakila-数据库下载">4.1 Sakila 数据库下载</h4>
<p>可以在<a
href="https://dev.mysql.com/doc/sakila/en/sakila-installation.html">sakila-installation</a>下载并安装
Sakila 数据库（<strong>注意：</strong>
这里下载的数据库版本和书中使用的版本不一致））。</p>
<span id="more"></span>
<p>使用 MySQL Workbench 查看 Sakila 数据库的模型关系图。MySQL Workbench
查看 ER 图可以参考<a
href="https://toypipi.github.io/2016/12/30/MySQL-Workbench%E7%94%9F%E6%88%90ER%E5%9B%BE/">这里</a>。
<img src="/2017/05/11/%E3%80%8A%E4%BD%BF%E7%94%A8PDI%E6%9E%84%E5%BB%BA%E5%BC%80%E6%BA%90ETL%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/1.png" class=""></p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>Kettle</tag>
        <tag>pentaho</tag>
        <tag>ETL</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux LVM 扩容</title>
    <url>/2017/08/17/Linux-LVM-%E6%89%A9%E5%AE%B9/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h4 id="创建一块新的分区">创建一块新的分区</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. fdisk /dev/sda</span><br><span class="line">p    # 打印当前分区</span><br><span class="line">n    # 新建分区</span><br><span class="line">p    # 新建主分区</span><br><span class="line">3    # 分区号，因为前面只建了两个分区</span><br><span class="line">回车  # 使用提供的默认开始磁柱和结束磁柱</span><br><span class="line">t    # 分区类型8e表示LVM分区</span><br><span class="line">8e</span><br><span class="line">w    # 写入分区表</span><br><span class="line"></span><br><span class="line">2. partprobe # 重读分区表，不用重启电脑（PS：我使用这个命令没成功，还是需要重启电脑）</span><br><span class="line"></span><br><span class="line">3. mkfs -t ext4 /dev/sda3 # 格式化新分区</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h4 id="创建pv扩容vglv">创建PV，扩容VG、LV</h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. pvcreate /dev/sda3 # 创建PV</span><br><span class="line"></span><br><span class="line">2. vgdisplay # 查看当前已经存在的VG信息</span><br><span class="line"></span><br><span class="line">3. vgextend vg_s100 /dev/sda3</span><br><span class="line"></span><br><span class="line">4. lvdisplay # 查看已经存在的LV信息</span><br><span class="line"></span><br><span class="line">5. lvextend -L +80G /dev/vg_s100/lv_root</span><br><span class="line"></span><br><span class="line">6. resize2fs /dev/vg_s100/lv_root</span><br><span class="line"></span><br><span class="line">7. df -h # 查看挂载情况，LVM磁盘已经扩容</span><br></pre></td></tr></table></figure>
<p><strong>参考文档：</strong> <a
href="http://www.cnblogs.com/gaojun/archive/2012/08/22/2650229.html">Linux
LVM硬盘管理及LVM扩容</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>LVM</tag>
        <tag>扩容</tag>
      </tags>
  </entry>
  <entry>
    <title>oh-my-zsh中文乱码</title>
    <url>/2017/07/04/oh-my-zsh%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>使用oh-my-zsh过程中遇到了中文乱码问题，经过上网查询，多数答案都是修改<code>~/.zshrc</code>文件，增如下内容：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export LC_ALL=en.UTF-8</span><br><span class="line">export LANG=en_US.UTF-8</span><br></pre></td></tr></table></figure> 然后： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source ~/.zshrc</span><br></pre></td></tr></table></figure>
可是我更改了之后依然是乱码，使用<code>locale</code>命令报如下错误：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">locale:Cannot set LC-ALL to default locale:No such file or directory</span><br></pre></td></tr></table></figure></p>
<span id="more"></span>
<p>突然想到前几日<a
href="https://toypipi.github.io/2017/06/20/%E5%8D%87%E7%BA%A7%E6%9C%8D%E5%8A%A1%E5%99%A8libc-2-12-so/">升级了CentOS
6.5的libc</a>，莫不是这个原因导致的？果断切换回libc-2.12.so，再次执行<code>locale</code>命令，没有报错，而且zsh也能正常显示中文了。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>中文乱码</tag>
        <tag>oh-my-zsh</tag>
      </tags>
  </entry>
  <entry>
    <title>Windows Server 2012 R2 安装补丁KB2999226提示此更新不适合用于计算机</title>
    <url>/2017/07/15/Windows-Server-2012-R2-%E5%AE%89%E8%A3%85%E8%A1%A5%E4%B8%81KB2999226%E6%8F%90%E7%A4%BA%E6%AD%A4%E6%9B%B4%E6%96%B0%E4%B8%8D%E9%80%82%E5%90%88%E7%94%A8%E4%BA%8E%E8%AE%A1%E7%AE%97%E6%9C%BA/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>近期在内网服务器上安装 MySQL Workbench 时，遇到了一个小问题。</p>
<p>由于 MySQL Workbench 官网上明确说明安装此软件需要<a
href="https://www.microsoft.com/en-us/download/details.aspx?id=30653">“Microsoft
.NET Framework 4.5”</a>和<a
href="https://www.microsoft.com/en-us/download/details.aspx?id=48145">“Visual
C++ Redistributable for Visual Studio 2015”</a>。</p>
<img src="/2017/07/15/Windows-Server-2012-R2-%E5%AE%89%E8%A3%85%E8%A1%A5%E4%B8%81KB2999226%E6%8F%90%E7%A4%BA%E6%AD%A4%E6%9B%B4%E6%96%B0%E4%B8%8D%E9%80%82%E5%90%88%E7%94%A8%E4%BA%8E%E8%AE%A1%E7%AE%97%E6%9C%BA/1.png" class="">
<p>该服务器操作系统是 Windows Server 2012 R2，已经自带了.NET Framework
4.5，所以只需要安装 Visual Studio 2015 就行了。</p>
<span id="more"></span>
<p>于是从官网下载 Visual Studio 2015
安装包，点击安装时总是提示安装失败，查看系统日志发现缺失 KB2999226
补丁，导致安装失败。</p>
<p>马上去下载与系统对应的 KB2999226
补丁，安装该补丁时又提示此更新不适合用于计算机的错误，明明下载的是与操作系统对应的版本呐！</p>
<p>后来上网查询，发现要是安装此补丁，需要先安装另外一个补丁
KB2919355，这个补丁有点大，快 800M
了，计算机中心的运维人员说下载不了，我只能晚上回家用自己电脑下载再拷贝进来。</p>
<p>今天早晨先安装了 KB2919355 补丁，然后再次安装 KB2999226
补丁，成功！安装 Visual Studio 2015，成功！安装 MySQL
Workbench，成功！</p>
<p>虽然 MySQL Workbench 可以运行了，但是首次启动的时候提示，该软件不支持
Windows Server 2012 R2
操作系统，用还是可以的，但是可能会出问题，目前来看可以连接数据库，Dashboard
等也可以显示系统运行状态，先用着吧，等出现问题再说！</p>
<p>话说内外网隔离有时候真的会让效率变得好低啊！！！</p>
<p><strong>参考文档：</strong> <a
href="https://answers.microsoft.com/zh-hans/windows/forum/windows8_1-update/windows%E6%9B%B4%E6%96%B0kb2999226%E8%A1%A5/ea2b65f7-efd6-490b-bce7-8f5521e6b5e8?tab=question&amp;status=AllReplies&amp;status=AllReplies#tabs">windows
更新 KB2999226 补丁时显示此更新不适合用于计算机的原因及解决方案</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Windows Server 2012 R2</tag>
        <tag>KB2999226</tag>
        <tag>KB2919335</tag>
      </tags>
  </entry>
  <entry>
    <title>解决Git中文文件名显示乱码</title>
    <url>/2017/09/09/%E8%A7%A3%E5%86%B3Git%E4%B8%AD%E6%96%87%E6%96%87%E4%BB%B6%E5%90%8D%E6%98%BE%E7%A4%BA%E4%B9%B1%E7%A0%81/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>使用 <code>git status</code> 显示中文文件名乱码：</p>
<img src="/2017/09/09/%E8%A7%A3%E5%86%B3Git%E4%B8%AD%E6%96%87%E6%96%87%E4%BB%B6%E5%90%8D%E6%98%BE%E7%A4%BA%E4%B9%B1%E7%A0%81/1.png" class="">
<p>解决办法，在 Git Bash 中执行：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#不对0x80以上的字符进行quote，解决git status/commit时中文文件名乱码</span><br><span class="line">git config --global core.quotepath false</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>再次执行 <code>git status</code> ，中文名已经可以正常显示：</p>
<img src="/2017/09/09/%E8%A7%A3%E5%86%B3Git%E4%B8%AD%E6%96%87%E6%96%87%E4%BB%B6%E5%90%8D%E6%98%BE%E7%A4%BA%E4%B9%B1%E7%A0%81/2.png" class="">
<p><strong>参考文档：</strong> <a
href="http://xstarcd.github.io/wiki/shell/git_chinese.html">Git
中文显示问题解决</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>中文乱码</tag>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title>北京云平台服务器故障排查过程</title>
    <url>/2017/08/30/%E5%8C%97%E4%BA%AC%E4%BA%91%E5%B9%B3%E5%8F%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%95%85%E9%9A%9C%E6%8E%92%E6%9F%A5%E8%BF%87%E7%A8%8B/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>由于台风影响，导致计算机中心服务器大规模断电，之前部署的云平台服务器重启后服务不可用。根据之前他们留下的文档，依次启动各个服务。启动
MySQL 时，遇到了如下问题： <blockquote><p>“Another MySQL daemon already running with the same unix socket”</p>
</blockquote> <strong>主要原因：</strong>
Linux 操作系统异常重启后，MySQL 有一个 mysql.sock
文件记录实例的运行状态，因为非正常关机，导致该文件继续存在，MySQL
在启动时会检查该文件，发现已经存在，那么就抛出此错误。</p>
<p><strong>解决办法：</strong> 删除 mysql.sock 文件或者改名，重启 MySQL
服务后恢复正常。 <span id="more"></span></p>
<p>zabbix server 启动报无法连接 MySQL 错误，查看 zabbix 配置文件，发现
zabbix 使用的是本机的 MySQL 数据库，使用 <code>mysql start</code>
命令启动数据库，报错 <blockquote><p>error: ‘Can’t connect to local MySQL server through
socket’/var/run/mysqld/mysqld.sock’’</p>
</blockquote> 后来使用
<code>mysqld_safe --skip-grant-tables &amp;</code> 成功启动数据库。</p>
<p><strong>参考文档：</strong> * <a
href="http://www.cnblogs.com/xusweeter/p/6833396.html">MySQL故障处理一例_Another
MySQL daemon already running with the same unix socket</a><br />
* <a
href="https://stackoverflow.com/questions/11990708/error-cant-connect-to-local-mysql-server-through-socket-var-run-mysqld-mysq">error:
‘Can’t connect to local MySQL server through
socket’/var/run/mysqld/mysqld.sock’ (2)’</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>服务器</tag>
        <tag>故障</tag>
      </tags>
  </entry>
  <entry>
    <title>Git remote repository</title>
    <url>/2017/09/01/Git-remote-repository/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>A remote repository is a repository that’s just like the one you’re
using but it’s just stored at a different location. To manage a remote
repository, use the git remote command:
远程仓库与你使用的本地仓库差不多，只不过远程仓库存储在另一个地方，如 <a
href="https://github.com/">GitHub</a>，<a
href="http://git.oschina.net/">码云</a>
等。可以使用以下命令管理管理远程仓库。 <blockquote><p>$ git remote</p>
</blockquote></p>
<ul>
<li>It’s possible to have links to multiple different remote
repositories. 可以添加多个不同的远程仓库。</li>
<li>A shortname is the name that’s used to refer to a remote
repository’s location. Typically the location is a URL, but it could be
a file path on the same computer.
短命名用于指向远程仓库的地址。该地址通常为远程仓库的URL，或者是你电脑上的文件路径。</li>
<li>git remote add is used to add a connection to a new remote
repository. git remote add 命令用于添加一个新的远程仓库的连接。</li>
<li>git remote -v is used to see the details about a connection to a
remote. git remote -v 命令用于查看远程仓库的详细信息。</li>
</ul>
<span id="more"></span>
<p><strong>参考文档：</strong> <a
href="https://classroom.udacity.com/courses/ud456/lessons/edde9226-f71c-4a81-a858-4c83e4c7b664/concepts/27f11e0c-50d8-47d5-bf18-ac2eed717386">GitHub
&amp; Collaboration</a> <a
href="https://git-scm.com/docs/git-remote">the git remote
command</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>远程仓库</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS 6.5 配置 Git 工作空间</title>
    <url>/2017/09/27/CentOS-6-5-%E9%85%8D%E7%BD%AE-git-%E5%B7%A5%E4%BD%9C%E7%A9%BA%E9%97%B4/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ul>
<li>将 <a href="git-completion.bash">git-completion.bash</a> 保存在你的
root 目录中。</li>
<li>将 <a href="git-prompt.sh">git-prompt.sh</a> 保存在你的 root
中。</li>
<li>修改 .bash_profile 文件，添加如下内容。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Enable tab completion</span></span><br><span class="line">source ~/git-completion.bash</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">colors!</span></span><br><span class="line">green=&quot;\[\033[0;32m\]&quot;</span><br><span class="line">blue=&quot;\[\033[0;34m\]&quot;</span><br><span class="line">purple=&quot;\[\033[0;35m\]&quot;</span><br><span class="line">reset=&quot;\[\033[0m\]&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Change <span class="built_in">command</span> prompt</span></span><br><span class="line">source ~/git-prompt.sh</span><br><span class="line"></span><br><span class="line">export GIT_PS1_SHOWDIRTYSTATE=1</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">&#x27;\u&#x27;</span> adds the name of the current user to the prompt</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">&#x27;\$(__git_ps1)&#x27;</span> adds git-related stuff</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">&#x27;\W&#x27;</span> adds the name of the current directory</span></span><br><span class="line">export PS1=&quot;$purple\u$green\$(__git_ps1)$blue \W $ $reset&quot;</span><br></pre></td></tr></table></figure>
<ul>
<li>Done !</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Git</tag>
        <tag>工作空间</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo 内建标签</title>
    <url>/2017/10/12/Hexo-%E5%86%85%E5%BB%BA%E6%A0%87%E7%AD%BE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h2 id="文本居中的引用">文本居中的引用</h2>
<h3 id="使用方式">使用方式</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 其中 class=&quot;blockquote-center&quot; 是必须的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">blockquote</span> <span class="attr">class</span>=<span class="string">&quot;blockquote-center&quot;</span>&gt;</span>blah blah blah<span class="tag">&lt;/<span class="name">blockquote</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 标签 方式，要求版本在0.4.5或以上 --&gt;</span></span><br><span class="line">&#123;% centerquote %&#125;blah blah blah&#123;% endcenterquote %&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 标签别名 --&gt;</span></span><br><span class="line">&#123;% cq %&#125; blah blah blah &#123;% endcq %&#125;</span><br></pre></td></tr></table></figure>
<h3 id="效果示例">效果示例</h3>
<blockquote class="blockquote-center">
人的一切痛苦，本质上都是对自己的无能的愤怒。
</blockquote>
<span id="more"></span>
<h2 id="突破容器宽度限制的图片">突破容器宽度限制的图片</h2>
<h3 id="使用方式-1">使用方式</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- HTML方式: 直接在 Markdown 文件中编写 HTML 来调用 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 其中 class=&quot;full-image&quot; 是必须的 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;/image-url&quot;</span> <span class="attr">class</span>=<span class="string">&quot;full-image&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 标签 方式，要求版本在0.4.5或以上 --&gt;</span></span><br><span class="line">&#123;% fullimage /image-url, alt, title %&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 别名 --&gt;</span></span><br><span class="line">&#123;% fi /full-image.jpg, alt, title %&#125;</span><br></pre></td></tr></table></figure>
<h3 id="效果示例-1">效果示例</h3>
<p><img src="http://notes.iissnan.com/uploads/next-documentations-reload/brand-new.png" class="full-image"  /></p>
<h2 id="bootstrap-callout">Bootstrap Callout</h2>
<h3 id="使用方式-2">使用方式</h3>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% note class_name %&#125; Content (md partial supported) &#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<p>其中，class_name 可以是以下列表中的一个值： - default - primary -
success - info - warning - danger</p>
<h3 id="效果示例-2">效果示例</h3>
<details class="note "><summary><p>class_name</p>
</summary>
<p>note class_name</p>

</details>
<div class="note default"><p>note default</p>
</div>
<div class="note primary"><p>note primary</p>
</div>
<div class="note success"><p>note success</p>
</div>
<div class="note info"><p>note info</p>
</div>
<div class="note warning"><p>note warning</p>
</div>
<div class="note danger"><p>note danger</p>
</div>
<p><strong>参考文档：</strong> <a
href="http://theme-next.iissnan.com/tag-plugins.html">内置标签</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>内建标签</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 环境变量作用及其加载顺序</title>
    <url>/2017/10/12/Linux-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%8F%8A%E5%85%B6%E5%8A%A0%E8%BD%BD%E9%A1%BA%E5%BA%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>最近在在 Linux 服务器上总是遇到已经配置了 JAVA 环境变量，却还是提示
“command not found”，于是特意查了下 Linux
配置环境变量的几个文件的加载顺序。</p>
<blockquote>
<p><strong>/etc/profile -&gt; (~/.bash_profile | ~/.bash_login |
~/.profile) -&gt; ~/.bashrc -&gt; /etc/bashrc -&gt;
~/.bash_logout</strong></p>
</blockquote>
<p>其中，几个文件的作用如下：</p>
<p><strong>系统级：</strong>
1./etc/environment:是系统在登录时读取的第一个文件，该文件设置的是整个系统的环境，只要启动系统就会读取该文件，用于为所有进程设置环境变量。系统使用此文件时并不是执行此文件中的命令，而是根据而是根据KEY=VALUE模式的代码，对KEY赋值以VALUE，因此文件中如果要定义PATH环境变量，只需加入一行形如
PATH=$PATH:/xxx/bin的代码即可。</p>
<p>2./etc/profile:此文件是系统登录时执行的第二个文件。
为系统的每个用户设置环境信息，当用户第一次登录时，该文件被执行。并从/etc/profile.d目录的配置文件中搜集shell的设置。（/etc/profile可以用于设定针对全系统所有用户的环境变量，环境变量周期是永久性）。</p>
<p>3./etc/bashrc:是针对所有用户的bash初始化文件，在此中设定的环境变量将应用于所有用户的shell中，此文件会在用户每次打开shell时执行一次。（即每次新开一个终端，都会执行/etc/bashrc）。
<span id="more"></span></p>
<p><strong>用户级（这些文件处于家目录下）：</strong>
1.~/.profile:对应当前登录用户的profile文件，用于定制当前用户的个人工作环境(变量是永久性)，每个用户都可使用该文件输入专用于自己使用的shell信息,当用户登录时,该文件仅仅执行一次!默认情况下,他设置一些环境变量,执行用户的.bashrc文件。<strong>这里是推荐放置个人设置的地方。</strong></p>
<p>2.~/.bashrc:该文件包含专用于你的bash
shell的bash信息，当登录时以及每次打开新的shell时，该文件被读取。(~/.bashrc只针对当前用户，变量的生命周期是永久的)。<strong>不推荐放到这儿，因为每开一个shell，这个文件会读取一次，效率肯定有影响。</strong></p>
<p>3.~/.bash_profile or
<sub>./bash_login:</sub>/.bash_profile是交互式login 方式进入 bash
运行的，~/.bashrc 是交互式 non-login 方式进入 bash
运行的通常二者设置大致相同，所以通常前者会调用后者。每个用户都可使用该文件输入专用于自己使用的shell信息，当用户登录时，该文件仅仅执行一次。默认情况下，他设置一些环境变量，执行用户的.bashrc文件。（如果~/目录下没有.bash_profile则新建立一个）<strong>这里是推荐放置个人设置的地方</strong>。当一个shell关闭时，在bash_profile中定义的系统变量则会失效。因此，每打开一个新的shell时都要运行一次source
bash_profile.而且针对当前用户。</p>
<p>4.~/.pam_environment:用户级的环境变量设置文件，没有做测试，不知道管不管用。</p>
<p>5.~/.bash_logout:当每次退出系统（退出bash
shell）时，执行该文件。另外,/etc/profile中设定的变量(全局)的可以作用于任何用户,而~/.bashrc等中设定的变量(局部)只能继承
/etc/profile中的变量,他们是”父子”关系。</p>
<p><strong>参考文档：</strong> <a
href="http://blog.csdn.net/u010533843/article/details/54986646">Linux
常用环境变量及作用和环境变量文件的详细介绍及其加载执行顺序</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Linux 环境变量</tag>
      </tags>
  </entry>
  <entry>
    <title>win7 批处理启用禁用网络连接</title>
    <url>/2017/11/08/win7-%E6%89%B9%E5%A4%84%E7%90%86%E5%90%AF%E7%94%A8%E7%A6%81%E7%94%A8%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>如果 WIN7 有两张网卡，而且需要连接不同的网络 IP
地址时，可以编写一个批处理脚本，当需要切换 IP
的时候，直接点击对应的脚本，就可以实现快速切换，避免每次输入 IP
地址、子网掩码和网关等信息。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">netsh interface set interface name=&quot;本地连接&quot; admin=ENABLED</span><br><span class="line">netsh interface set interface name=&quot;本地连接 2&quot; admin=DISABLED</span><br></pre></td></tr></table></figure> 将以上脚本保存为一个后缀为
.bat 的文件，如 NetSwitch.bat ，需要切换的时候直接双击执行就可以了。
另付上通过批处理脚本修改 IP 地址、子网掩码和网关的命令：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">netsh interface ip set address name=&quot;本地连接&quot; source=&quot;static&quot; addr=&quot;192.168.1.110&quot; mask=&quot;255.255.255.0&quot; gateway=&quot;192.168.1.1&quot; gwmetric=&quot;1&quot;</span><br><span class="line">netsh interface ip set dns name=&quot;本地连接&quot; source=static addr=&quot;119.29.29.29&quot;</span><br><span class="line">netsh interface ip set dns name=&quot;本地连接&quot; source=static addr=&quot;182.254.116.116&quot;</span><br></pre></td></tr></table></figure></p>
<p><strong>参考文档：</strong> <a
href="http://www.mamicode.com/info-detail-247745.html">win7如何通过netsh命令禁用启用本地连接</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>win7</tag>
        <tag>批处理</tag>
        <tag>禁用本地连接</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo 博客迁移问题记录</title>
    <url>/2017/10/12/Hexo-%E5%8D%9A%E5%AE%A2%E8%BF%81%E7%A7%BB%E9%97%AE%E9%A2%98%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>记录 Hexo 从 Win7 迁移到 CentOS 6.5 过程中遇到的问题。 CentOS 6.5
可以直接通过 yum 源安装 nodejs, 具体过程参照<a
href="https://nodejs.org/en/download/package-manager/#enterprise-linux-and-fedora">官方文档</a>。</p>
<p>1.在已经删除的目录中执行 <code>npm install -g hexo</code>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root hexo $ npm install -g hexo</span><br><span class="line">path.js:1184</span><br><span class="line">          cwd = process.cwd();</span><br><span class="line">                        ^</span><br><span class="line"></span><br><span class="line">Error: ENOENT: no such file or directory, uv_cwd</span><br><span class="line">    at Object.resolve (path.js:1184:25)</span><br><span class="line">    at Function.Module._resolveLookupPaths (module.js:419:17)</span><br><span class="line">    at Function.Module._resolveFilename (module.js:522:22)</span><br><span class="line">    at Function.Module._load (module.js:476:23)</span><br><span class="line">    at Module.require (module.js:568:17)</span><br><span class="line">    at require (internal/module.js:11:18)</span><br><span class="line">    at /usr/lib/node_modules/npm/bin/npm-cli.js:19:21</span><br><span class="line">    at Object.&lt;anonymous&gt; (/usr/lib/node_modules/npm/bin/npm-cli.js:92:3)</span><br><span class="line">    at Module._compile (module.js:624:30)</span><br><span class="line">    at Object.Module._extensions..js (module.js:635:10)</span><br></pre></td></tr></table></figure> <a
href="https://stackoverflow.com/questions/19936850/nodejs-error-node-js810-var-cwd-process-cwd">解决办法</a>
<span id="more"></span> 2.安装 hexo 报错 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root hexo $ npm install -g hexo-cli</span><br><span class="line">/usr/bin/hexo -&gt; /usr/lib/node_modules/hexo-cli/bin/hexo</span><br><span class="line"></span><br><span class="line">&gt; dtrace-provider@0.8.5 install /usr/lib/node_modules/hexo-cli/node_modules/dtrace-provider</span><br><span class="line">&gt; node scripts/install.js</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; hexo-util@0.6.1 postinstall /usr/lib/node_modules/hexo-cli/node_modules/hexo-util</span><br><span class="line">&gt; npm run build:highlight</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&gt; hexo-util@0.6.1 build:highlight /usr/lib/node_modules/hexo-cli/node_modules/hexo-util</span><br><span class="line">&gt; node scripts/build_highlight_alias.js &gt; highlight_alias.json</span><br><span class="line"></span><br><span class="line">sh: highlight_alias.json: Permission denied</span><br><span class="line">npm ERR! code ELIFECYCLE</span><br><span class="line">npm ERR! errno 1</span><br><span class="line">npm ERR! hexo-util@0.6.1 build:highlight: `node scripts/build_highlight_alias.js &gt; highlight_alias.json`</span><br><span class="line">npm ERR! Exit status 1</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! Failed at the hexo-util@0.6.1 build:highlight script.</span><br><span class="line">npm ERR! This is probably not a problem with npm. There is likely additional logging output above.</span><br><span class="line"></span><br><span class="line">┌───────────────────────────────────────────────────┐</span><br><span class="line">│              npm update check failed              │</span><br><span class="line">│        Try running with sudo or get access        │</span><br><span class="line">│       to the local update config store via        │</span><br><span class="line">│ sudo chown -R $USER:$(id -gn $USER) /root/.config │</span><br><span class="line">└───────────────────────────────────────────────────┘</span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.2 (node_modules/hexo-cli/node_modules/fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.2: wanted &#123;&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;&#125; (current: &#123;&quot;os&quot;:&quot;linux&quot;,&quot;arch&quot;:&quot;x64&quot;&#125;)</span><br><span class="line"></span><br><span class="line">npm ERR! code ELIFECYCLE</span><br><span class="line">npm ERR! errno 1</span><br><span class="line">npm ERR! hexo-util@0.6.1 postinstall: `npm run build:highlight`</span><br><span class="line">npm ERR! Exit status 1</span><br><span class="line">npm ERR!</span><br><span class="line">npm ERR! Failed at the hexo-util@0.6.1 postinstall script.</span><br><span class="line">npm ERR! This is probably not a problem with npm. There is likely additional logging output above.</span><br><span class="line"></span><br><span class="line">npm ERR! A complete log of this run can be found in:</span><br><span class="line">npm ERR!     /root/.npm/_logs/2017-10-12T06_48_32_607Z-debug.log</span><br><span class="line"></span><br></pre></td></tr></table></figure> 解决办法： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm config set user 0</span><br><span class="line">npm config set unsafe-perm true</span><br></pre></td></tr></table></figure>
3.只替换 hexo 和主题的配置文件报错 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Unhandled rejection TypeError: path.substring is not a function</span><br><span class="line">    at Object.urlForHelper (/usr/local/hexo/MyBlog/node_modules/hexo/lib/plugins/helper/url_for.js:9:31)</span><br><span class="line">    at wrapper (/usr/local/hexo/MyBlog/node_modules/lodash/lodash.js:4968:19)</span><br><span class="line">    at Object.eval [as tpl] (eval at precompile (/usr/local/hexo/MyBlog/node_modules/swig/lib/swig.js:498:13), &lt;anonymous&gt;:125:119)</span><br><span class="line">    at compiled (/usr/local/hexo/MyBlog/node_modules/swig/lib/swig.js:619:18)</span><br><span class="line">    at Object.eval [as tpl] (eval at precompile (/usr/local/hexo/MyBlog/node_modules/swig/lib/swig.js:498:13), &lt;anonymous&gt;:320:125)</span><br><span class="line">    at compiled (/usr/local/hexo/MyBlog/node_modules/swig/lib/swig.js:619:18)</span><br><span class="line">    at Theme._View.View._compiled (/usr/local/hexo/MyBlog/node_modules/hexo/lib/theme/view.js:127:30)</span><br><span class="line">    at Theme._View.View.View.render (/usr/local/hexo/MyBlog/node_modules/hexo/lib/theme/view.js:29:15)</span><br><span class="line">    at /usr/local/hexo/MyBlog/node_modules/hexo/lib/hexo/index.js:390:25</span><br><span class="line">    at tryCatcher (/usr/local/hexo/MyBlog/node_modules/bluebird/js/release/util.js:16:23)</span><br><span class="line">    at /usr/local/hexo/MyBlog/node_modules/bluebird/js/release/method.js:15:34</span><br><span class="line">    at RouteStream._read (/usr/local/hexo/MyBlog/node_modules/hexo/lib/hexo/router.js:134:3)</span><br><span class="line">    at RouteStream.Readable.read (_stream_readable.js:443:10)</span><br><span class="line">    at resume_ (_stream_readable.js:823:12)</span><br><span class="line">    at _combinedTickCallback (internal/process/next_tick.js:138:11)</span><br><span class="line">    at process._tickCallback (internal/process/next_tick.js:180:9)</span><br><span class="line"></span><br></pre></td></tr></table></figure> 解决办法：直接将 win7
next 目录替换 Linux next目录。</p>
<p><strong>参考文档：</strong> <a
href="http://www.cnblogs.com/jiangzilong/p/6438748.html">linux
系统下使用hexo搭建个人博客</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>博客迁移</tag>
      </tags>
  </entry>
  <entry>
    <title>Highstock 横坐标日期显示说明</title>
    <url>/2017/11/01/Highstock-%E6%A8%AA%E5%9D%90%E6%A0%87%E6%97%A5%E6%9C%9F%E6%98%BE%E7%A4%BA%E8%AF%B4%E6%98%8E/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在使用 Highstock
制图时，后端将数据库中存储的日期直接转换为毫秒值发送到前端，但是前端根据接收到的数据显示出现了异常，本来查询到的是一天的数据，但是横坐标的日期却显示了两天的时间。
经过检索，发现后端发送给前端的数据需要转化为 UTC
格式下的毫秒值才不会出现错位。</p>
<p>java下取utc下的毫秒值： <figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Date</span> <span class="variable">date</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"><span class="type">DateFormat</span> <span class="variable">df</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd&quot;</span>);</span><br><span class="line">date = df.parse(<span class="string">&quot;2017-11-02&quot;</span>);</span><br><span class="line"><span class="type">Calendar</span> <span class="variable">cal</span> <span class="operator">=</span> Calendar.getInstance(TimeZone.getDefault());<span class="comment">//TimeZone.getDefault()获取主机的默认 TimeZone，即时区偏移量。</span></span><br><span class="line">cal.setTime(date);</span><br><span class="line">list.add(date.getTime()+cal.getTimeZone().getRawOffset());<span class="comment">//cal.getTimeZone().getRawOffset()是相对utc的偏移量</span></span><br><span class="line"><span class="comment">//date.getTime()+cal.getTimeZone().getRawOffset()就是2012-11-26对应的utc下的毫秒值非UTC格式毫秒</span></span><br></pre></td></tr></table></figure> <strong>参考文档：</strong> <a
href="http://www.cnblogs.com/onetwo/p/6050829.html">关于highstock横坐标的一些的一些说明(1)使用UTC时间</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Highstock</tag>
        <tag>日期</tag>
        <tag>UTC</tag>
      </tags>
  </entry>
  <entry>
    <title>Highcharts plotOptions 设置无效问题</title>
    <url>/2017/11/23/Highcharts-plotOptions-%E8%AE%BE%E7%BD%AE%E6%97%A0%E6%95%88%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>今天在柱形图上添加数字标签时，总是不能生效。绘图插件使用的是
Highcharts 。后来突然想到之前引入的是Highmaps js 文件，而不是 Highcharts
js 文件。 <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script <span class="attr">th</span>:src=<span class="string">&quot;@&#123;/js/highcharts/highmaps.js&#125;&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure> 抱着试试看的心态，我将 Highcharts js 文件引入到
html 页面中， <figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script <span class="attr">th</span>:src=<span class="string">&quot;@&#123;/js/highcharts/highcharts.js&#125;&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">th:src</span>=<span class="string">&quot;@&#123;/js/highcharts/highmaps.js&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure> 刷新页面发现还是不行，然后我又将 Highmaps js
文件屏蔽掉，这下就可以了。难道是两个文件相互干扰了。 <span id="more"></span>
于是到 Highcharts 官网，找到了这个说明： <div class="note danger"><p>同 Highcharts 使用方法一样，Highmaps 只需要一个 highmaps.js
文件即可运行。 如果是结合 Highcharts 一起使用，则是引入 map.js
即可。</p>
</div></p>
<p><strong>参考文档：</strong> <a
href="https://www.hcharts.cn/docs/highmaps-started">开始使用
Highmaps</a> <a
href="https://www.hcharts.cn/docs/start-download">Highcharts + Highstock
+ Highmaps 混合使用</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Highcharts</tag>
        <tag>plotOptions</tag>
        <tag>无效</tag>
      </tags>
  </entry>
  <entry>
    <title>解决Bootstrap导航切换DataTables表头不对齐</title>
    <url>/2017/11/22/%E8%A7%A3%E5%86%B3Bootstrap%E5%AF%BC%E8%88%AA%E5%88%87%E6%8D%A2DataTables%E8%A1%A8%E5%A4%B4%E4%B8%8D%E5%AF%B9%E9%BD%90/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>使用 Ajax 从后台获取数据后，分别将最大、最小和平均值显示在三个 tab
中。表格插件使用的是
DataTables。初始化表格以后，只有当前激活的表格可以正常显示，点击 tab
切换页面中的表格表头与内容不对齐。</p>
<img src="/2017/11/22/%E8%A7%A3%E5%86%B3Bootstrap%E5%AF%BC%E8%88%AA%E5%88%87%E6%8D%A2DataTables%E8%A1%A8%E5%A4%B4%E4%B8%8D%E5%AF%B9%E9%BD%90/1.png" class="">
<p>图 1.当前激活的 tab 表格显示正常</p>
<span id="more"></span>
<img src="/2017/11/22/%E8%A7%A3%E5%86%B3Bootstrap%E5%AF%BC%E8%88%AA%E5%88%87%E6%8D%A2DataTables%E8%A1%A8%E5%A4%B4%E4%B8%8D%E5%AF%B9%E9%BD%90/2.png" class="">
<p>图 2.点击激活的 tab 表格显示异常</p>
<p>经过检索后找到了解决办法。如果是使用 Bootstrap 或者 zui 插件(zui
需要引入 Bootstrap js 文件)，可以在控制表格的 js
文件中添加如下代码：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&#x27;a[data-toggle=&quot;tab&quot;]&#x27;</span>).<span class="title function_">on</span>(<span class="string">&quot;shown.bs.tab&quot;</span>, <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">  $.fn.<span class="property">dataTable</span>.<span class="title function_">tables</span>(&#123; <span class="attr">visible</span>: <span class="literal">true</span>, <span class="attr">api</span>: <span class="literal">true</span> &#125;).<span class="property">columns</span>.<span class="title function_">adjust</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<img src="/2017/11/22/%E8%A7%A3%E5%86%B3Bootstrap%E5%AF%BC%E8%88%AA%E5%88%87%E6%8D%A2DataTables%E8%A1%A8%E5%A4%B4%E4%B8%8D%E5%AF%B9%E9%BD%90/3.png" class="">
<p>图 3.点击激活的 tab 表格也可以正常显示了</p>
<p><strong>参考文档：</strong> <a
href="https://datatables.net/examples/api/tabs_and_scrolling.html">Scrolling
and Bootstrap tabs</a> <a
href="https://github.com/ssy341/datatables-cn/issues/9">datatables 采用
bootstrap 的 tab 方式，表头会缩在一起，为什么？</a> <a
href="http://www.runoob.com/bootstrap/bootstrap-tab-plugin.html">Bootstrap
标签页（Tab）插件</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Bootstrap</tag>
        <tag>tab</tag>
        <tag>DataTables</tag>
        <tag>表头</tag>
      </tags>
  </entry>
  <entry>
    <title>Highcharts 曲线自定义最大值、最小值标签</title>
    <url>/2017/12/28/Highcharts-%E6%9B%B2%E7%BA%BF%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9C%80%E5%A4%A7%E5%80%BC%E3%80%81%E6%9C%80%E5%B0%8F%E5%80%BC%E6%A0%87%E7%AD%BE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>主要通过 Renderer 添加文字标签。 <span id="more"></span></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    $(<span class="string">&#x27;#container&#x27;</span>).<span class="title function_">highcharts</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: &#123;</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;Highcharts custom label&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">xAxis</span>: &#123;</span><br><span class="line">            <span class="attr">categories</span>: [<span class="string">&#x27;Jan&#x27;</span>, <span class="string">&#x27;Feb&#x27;</span>, <span class="string">&#x27;Mar&#x27;</span>, <span class="string">&#x27;Apr&#x27;</span>, <span class="string">&#x27;May&#x27;</span>, <span class="string">&#x27;Jun&#x27;</span>, <span class="string">&#x27;Jul&#x27;</span>, <span class="string">&#x27;Aug&#x27;</span>, <span class="string">&#x27;Sep&#x27;</span>, <span class="string">&#x27;Oct&#x27;</span>, <span class="string">&#x27;Nov&#x27;</span>, <span class="string">&#x27;Dec&#x27;</span>]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [&#123;</span><br><span class="line">            <span class="attr">data</span>: [<span class="number">29.9</span>, <span class="number">71.5</span>, <span class="number">106.4</span>, <span class="number">129.2</span>, <span class="number">144.0</span>, <span class="number">176.0</span>, <span class="number">135.6</span>, <span class="number">148.5</span>, <span class="number">216.4</span>, <span class="number">194.1</span>, <span class="number">95.6</span>, <span class="number">54.4</span>]</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, <span class="keyword">function</span> (<span class="params">chart</span>) &#123; <span class="comment">// on complete</span></span><br><span class="line">        <span class="keyword">var</span> min = <span class="number">1000</span>,</span><br><span class="line">            max = <span class="number">0</span>,</span><br><span class="line">            pointsToShow = [<span class="number">0</span>, <span class="number">0</span>],</span><br><span class="line">            points = chart.<span class="property">series</span>[<span class="number">0</span>].<span class="property">points</span>;</span><br><span class="line">        <span class="title class_">Highcharts</span>.<span class="title function_">each</span>(points, <span class="keyword">function</span>(<span class="params">p</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span>(p.<span class="property">y</span>&gt;max) &#123;</span><br><span class="line">                pointsToShow[<span class="number">0</span>] = p.<span class="property">index</span>;</span><br><span class="line">                max = p.<span class="property">y</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(p.<span class="property">y</span>&lt;min) &#123;</span><br><span class="line">                pointsToShow[<span class="number">1</span>] = p.<span class="property">index</span>;</span><br><span class="line">                min = p.<span class="property">y</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="title function_">render</span>(chart, points[pointsToShow[<span class="number">0</span>]], <span class="string">&#x27;Max&#x27;</span>);</span><br><span class="line">        <span class="title function_">render</span>(chart, points[pointsToShow[<span class="number">1</span>]], <span class="string">&#x27;Min&#x27;</span>);</span><br><span class="line">        <span class="comment">//var point = chart.series[0].points[8];</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">render</span>(<span class="params">chart, point, text</span>) &#123;</span><br><span class="line">        chart.<span class="property">renderer</span>.<span class="title function_">label</span>(text + <span class="string">&#x27;: &#x27;</span> + point.<span class="property">y</span>,  point.<span class="property">plotX</span> + chart.<span class="property">plotLeft</span> -<span class="number">20</span> , point.<span class="property">plotY</span> + chart.<span class="property">plotTop</span> - <span class="number">45</span>, <span class="string">&#x27;callout&#x27;</span>, point.<span class="property">plotX</span> + chart.<span class="property">plotLeft</span>, point.<span class="property">plotY</span> + chart.<span class="property">plotTop</span>)</span><br><span class="line">            .<span class="title function_">css</span>(&#123;</span><br><span class="line">            <span class="attr">color</span>: <span class="string">&#x27;#FFFFFF&#x27;</span>,</span><br><span class="line">            <span class="attr">align</span>: <span class="string">&#x27;center&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">            .<span class="title function_">attr</span>(&#123;</span><br><span class="line">            <span class="attr">fill</span>: <span class="string">&#x27;rgba(0, 0, 0, 0.75)&#x27;</span>,</span><br><span class="line">            <span class="attr">padding</span>: <span class="number">8</span>,</span><br><span class="line">            <span class="attr">r</span>: <span class="number">5</span>,</span><br><span class="line">            <span class="attr">zIndex</span>: <span class="number">6</span></span><br><span class="line">        &#125;)</span><br><span class="line">            .<span class="title function_">add</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>参考文档：</strong> <a
href="https://code.hcharts.cn/hcharts.cn/hhhhov">绘制自定义标签</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>标签</tag>
        <tag>Highcharts</tag>
        <tag>最大值</tag>
        <tag>最小值</tag>
      </tags>
  </entry>
  <entry>
    <title>Highcharts 在新的图表里显示选中的曲线范围</title>
    <url>/2018/01/03/Highcharts-%E5%9C%A8%E6%96%B0%E7%9A%84%E5%9B%BE%E8%A1%A8%E9%87%8C%E6%98%BE%E7%A4%BA%E9%80%89%E4%B8%AD%E7%9A%84%E6%9B%B2%E7%BA%BF%E8%8C%83%E5%9B%B4/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>总结一下实现方式，两张图表共用一个 chart
图表配置，在图表1中根据选中区域设置 X 轴最大、最小值，图表2同步更新。
<span id="more"></span></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> chart = <span class="literal">null</span>;</span><br><span class="line">    <span class="comment">// create the chart</span></span><br><span class="line">    $(<span class="string">&#x27;#container&#x27;</span>).<span class="title function_">highcharts</span>(&#123;</span><br><span class="line">        <span class="attr">chart</span>: &#123;</span><br><span class="line">            <span class="attr">events</span>: &#123;</span><br><span class="line">                <span class="attr">selection</span>: <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">                    <span class="keyword">var</span> min = event.<span class="property">xAxis</span>[<span class="number">0</span>].<span class="property">min</span>;</span><br><span class="line">                    <span class="keyword">var</span> max = event.<span class="property">xAxis</span>[<span class="number">0</span>].<span class="property">max</span>;</span><br><span class="line">                    chart.<span class="property">xAxis</span>[<span class="number">0</span>].<span class="title function_">setExtremes</span>(<span class="title class_">Math</span>.<span class="title function_">ceil</span>(min), <span class="title class_">Math</span>.<span class="title function_">ceil</span>(max));</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">zoomType</span>: <span class="string">&#x27;x&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">title</span>: &#123;</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;Chart selection demo&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">subtitle</span>: &#123;</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;Click and drag the plot area to draw a selection&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;column&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: [<span class="number">29.9</span>, <span class="number">71.5</span>, <span class="number">106.4</span>, <span class="number">129.2</span>, <span class="number">144.0</span>, <span class="number">176.0</span>, <span class="number">135.6</span>, <span class="number">148.5</span>, <span class="number">216.4</span>, <span class="number">194.1</span>, <span class="number">95.6</span>, <span class="number">54.4</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">data</span>: [<span class="number">29.9</span>, <span class="number">71.5</span>, <span class="number">106.4</span>, <span class="number">129.2</span>, <span class="number">144.0</span>, <span class="number">176.0</span>, <span class="number">135.6</span>, <span class="number">148.5</span>, <span class="number">216.4</span>, <span class="number">194.1</span>, <span class="number">95.6</span>, <span class="number">54.4</span>].<span class="title function_">reverse</span>()</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;);</span><br><span class="line">    $(<span class="string">&#x27;#min-chart&#x27;</span>).<span class="title function_">highcharts</span>(&#123;</span><br><span class="line">        <span class="attr">title</span>: &#123;</span><br><span class="line">            <span class="attr">text</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">series</span>: [&#123;</span><br><span class="line">            <span class="attr">type</span>: <span class="string">&#x27;column&#x27;</span>,</span><br><span class="line">            <span class="attr">data</span>: [<span class="number">29.9</span>, <span class="number">71.5</span>, <span class="number">106.4</span>, <span class="number">129.2</span>, <span class="number">144.0</span>, <span class="number">176.0</span>, <span class="number">135.6</span>, <span class="number">148.5</span>, <span class="number">216.4</span>, <span class="number">194.1</span>, <span class="number">95.6</span>, <span class="number">54.4</span>]</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">data</span>: [<span class="number">29.9</span>, <span class="number">71.5</span>, <span class="number">106.4</span>, <span class="number">129.2</span>, <span class="number">144.0</span>, <span class="number">176.0</span>, <span class="number">135.6</span>, <span class="number">148.5</span>, <span class="number">216.4</span>, <span class="number">194.1</span>, <span class="number">95.6</span>, <span class="number">54.4</span>].<span class="title function_">reverse</span>()</span><br><span class="line">        &#125;]</span><br><span class="line">    &#125;, <span class="keyword">function</span>(<span class="params">c</span>) &#123;</span><br><span class="line">        chart = c;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>参考文档：</strong> <a
href="https://code.hcharts.cn/hcharts.cn/hhhG8o">图表缩放</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Highcharts</tag>
        <tag>曲线范围</tag>
      </tags>
  </entry>
  <entry>
    <title>2018 新年计划</title>
    <url>/2018/01/02/2018-%E6%96%B0%E5%B9%B4%E8%AE%A1%E5%88%92/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>新的一年开始啦！按照惯例，每年的这个时候都要给自己制定一个新年计划，回顾去年的计划，发现很多都没有完成，总结起来有以下几个原因：
<div class="note default"><p>1.计划写的太笼统，没有细化到可以执行的步骤。
2.目标写的太高，实际无法完成。
3.计划写的太多，没有时间和精力去完成。</p>
</div></p>
<p>综合以上几点，今年在制定计划时一定要规避这几个问题，并且每月检查实际完成情况，力争今年可以保质保量的完成目标。
<span id="more"></span> 2018新年计划如下： <div class="note success"><p>1.每周至少五天背单词，每天复习加学习新词数量至少达到20个。
2.每周至少五天学习或翻译 Hightcharts 官方文档。 3.每周至少五天学习
Tableau 软件的使用和数据分析相关知识。 4.今年的阅读量达到 50
本书，包括专业书和其他类型的书。</p>
</div></p>
<p>继续努力！</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>新年计划</tag>
      </tags>
  </entry>
  <entry>
    <title>2018 读书计划</title>
    <url>/2018/01/02/2018-%E8%AF%BB%E4%B9%A6%E8%AE%A1%E5%88%92/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<style>
table th:nth-of-type(2) {
    width: 75px;
}
table th:nth-of-type(3) {
    width: 120px;
}
table th:nth-of-type(4) {
    width: 60px;
}
</style>
<p>2018年计划读50本书，类型不限，但是专业书至少包含 5
本。先挖好坑，以后每读完一本就来填一个坑。</p>
<span id="more"></span>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th>书名</th>
<th>作者</th>
<th>ISBN</th>
<th>评分</th>
</tr>
</thead>
<tbody>
<tr>
<td><a
href="https://book.douban.com/subject/26602392/">1.《你今天真好看》</a></td>
<td>[美]莉兹·克里莫</td>
<td>9787201094359</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25775445/">2.《睡不着》</a></td>
<td>Tango</td>
<td>9787508643304</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26758080/">3.《父与子》</a></td>
<td>[德]卜劳恩</td>
<td>9787533944438</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/24696830/">4.《犯罪心理档案1》</a></td>
<td>刚雪印</td>
<td>9787514315462</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25801173/">5.《犯罪心理档案2》</a></td>
<td>刚雪印</td>
<td>9787514317985</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26276866/">6.《犯罪心理档案3》</a></td>
<td>刚雪印</td>
<td>9787514328332</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/27060992/">7.《犯罪心理档案4》</a></td>
<td>刚雪印</td>
<td>9787540480523</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26677127/">8.《怪诞行为学3：非理性的你》</a></td>
<td>[美]丹·艾瑞里/ 威廉·赫斐利</td>
<td>9787508656502</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/27003014/">9.《半小时漫画中国史》</a></td>
<td>二混子</td>
<td>9787539999883</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/24736805/">10.《我所有的朋友都死了》</a></td>
<td>艾弗里·蒙森/乔里·约翰</td>
<td>9787508640488</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26802130/">11.《南烟斋笔录·如梦令》</a></td>
<td>左小翎/壳小杀</td>
<td>9787550277229</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26710254/">12.《憋说话，吻我》</a></td>
<td>[俄]兰迪诗 Landysh</td>
<td>9787538751512</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/7001106/">13.《时间管理》</a></td>
<td>吉姆·兰德尔</td>
<td>9787313076571</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/27055389/">14.《第一本哲学漫画书 :
尼采的哲学思想》</a></td>
<td>吴瑞君</td>
<td>9787559600905</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/27017273/">15.《嘘，夜晚才刚刚开始》</a></td>
<td>蓝妖兔子京</td>
<td>9787505739130</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26755503/">16.《我可以咬一口吗》</a></td>
<td>[美]莉兹·克里莫</td>
<td>9787201102177</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26840504/">17.《人人都有妄想症》</a></td>
<td>[美] 弗兰·克劳斯</td>
<td>9787508665016</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26924424/">18.《喜欢我也没关系》</a></td>
<td>王XX</td>
<td>9787222155145</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/4118392/">19.《一园青菜成了精》</a></td>
<td>熊亮</td>
<td>9787505610071</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/4118388/">20.《什么猫都有用》</a></td>
<td>熊亮</td>
<td>9787505610064</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26958782/">21.《白日梦星球》</a></td>
<td>Eno</td>
<td>9787550291218</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25977301/">22.《我只是对人生过敏》</a></td>
<td>[俄]兰迪诗</td>
<td>9787508647555</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/7001105/">23.《毅力》</a></td>
<td>吉姆·兰德尔</td>
<td>9787313077219</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30222627/">24.《9步学会萌漫画》</a></td>
<td>漫画家小明</td>
<td>9787505737150</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26789264/">25.《极简生活：简而美地活》</a></td>
<td>[日]有川真由美</td>
<td>9787539992716</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/23008813/">26.《高性能MySQL》</a></td>
<td>施瓦茨 / 扎伊采夫 / 特卡琴科</td>
<td>9787121198854</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/4953695/">27.《拆掉思维里的墙》</a></td>
<td>古典</td>
<td>9787806638866</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26797183/">28.《喵呜，原来你是这种汪》</a></td>
<td>[美]雷扎.法拉兹曼</td>
<td>9787201103624</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/5345682/">29.《Maven实战》</a></td>
<td>许晓斌</td>
<td>9787111321545</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26752847/">30.《整理情绪的力量》</a></td>
<td>[日]有川真由美</td>
<td>9787545911015</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/27079107/">31.《我和吉米和艾迪》</a></td>
<td>[美] 金瑞</td>
<td>9787201121192</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26949123/">32.《守夜者》</a></td>
<td>秦明</td>
<td>9787550020603</td>
<td>★★☆☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/1140457/">33.《敏捷软件开发》</a></td>
<td>[美] Robert C·Martin</td>
<td></td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26276409/">34.《带着鲑鱼去旅行》</a></td>
<td>[意] 翁贝托·埃科</td>
<td>9787508647227</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26793722/">35.《力哥说理财》</a></td>
<td>邢力</td>
<td>9787115420923</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/20441871/">36.《为什么不能把所有东西买回家》</a></td>
<td>蔡朝阳</td>
<td>9787549529353</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30170225/">37.《巴别塔之犬》</a></td>
<td>[美]卡罗琳·帕克丝特</td>
<td>9787544292252</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26864984/">38.《金色梦乡》</a></td>
<td>[日] 伊坂幸太郎</td>
<td>9787544285025</td>
<td>★★★★★</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25799686/">39.《无证之罪》</a></td>
<td>紫金陈</td>
<td></td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/21458711/">40.《阅读是最浪漫的教养》</a></td>
<td>李伟文 / 双胞胎AB宝</td>
<td>9787538569544</td>
<td>★★☆☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30278792/">41.《守夜者2》</a></td>
<td>秦明</td>
<td>9787559425072</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26417643/">42.《歪笑小说》</a></td>
<td>[日] 东野圭吾</td>
<td>9787544278225</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/27037149/">43.《造彩虹的人》</a></td>
<td>[日] 东野圭吾</td>
<td>9787530216859</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26877752/">44.《恶意》</a></td>
<td>[日] 东野圭吾</td>
<td>9787544285148</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/1023045/">45.《我们仨》</a></td>
<td>杨绛</td>
<td>9787108018809</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26906797/">46.《圣女的救济》</a></td>
<td>[日] 东野圭吾</td>
<td>9787544285643</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26639966/">47.《新参者》</a></td>
<td>[日] 东野圭吾</td>
<td>9787544281102</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30395975/">48.《《读者》最受欢迎的文章集萃之致敬青春》</a></td>
<td>读者杂志社编</td>
<td>9787546805931</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30115996/">49.《HBase不睡觉书》</a></td>
<td>杨曦</td>
<td>9787302490555</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26278687/">50.《皮囊》</a></td>
<td>蔡崇达</td>
<td>9787201088945</td>
<td>★★★★☆</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>读书</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL MyISAM 引擎压缩表</title>
    <url>/2018/01/10/MySQL-MyISAM-%E5%BC%95%E6%93%8E%E5%8E%8B%E7%BC%A9%E8%A1%A8/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>可以使用 <em>myisampack</em> 对 MyISAM
表进行压缩。压缩表是不能进行修改的（除非先将压缩表解除压缩，修改数据，然后再次压缩）。压缩表可以极大地减少磁盘空间占用，因此也可以减少磁盘
I/O ，从而提升查询性能。压缩表也支持索引，但索引也是只读的。</p>
<h2 id="压缩表">压缩表</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">myisampack /home/mysql/data/test2/slave_status_20171108.MYI</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ul>
<li>压缩前 <img src="/2018/01/10/MySQL-MyISAM-%E5%BC%95%E6%93%8E%E5%8E%8B%E7%BC%A9%E8%A1%A8/1.png" class=""></li>
<li>压缩后 <img src="/2018/01/10/MySQL-MyISAM-%E5%BC%95%E6%93%8E%E5%8E%8B%E7%BC%A9%E8%A1%A8/2.png" class=""></li>
<li>压缩率 <img src="/2018/01/10/MySQL-MyISAM-%E5%BC%95%E6%93%8E%E5%8E%8B%E7%BC%A9%E8%A1%A8/3.png" class=""></li>
</ul>
<h2 id="检查索引">检查索引</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">myisamchk -rq /home/mysql/data/test2/slave_status_20171108.MYI</span><br></pre></td></tr></table></figure>
<h2 id="解压缩">解压缩</h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">myisamchk  /home/mysql/data/test2/slave_status_20171108.MYI</span><br></pre></td></tr></table></figure>
<p><strong>参考文档</strong> <a
href="https://book.douban.com/subject/23008813/">高性能 MySQL</a> <a
href="https://www.phpsong.com/1051.html">mysql myisam 引擎压缩表</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>MyISAM</tag>
        <tag>压缩表</tag>
      </tags>
  </entry>
  <entry>
    <title>Highcharts 字符串、时间日期、数字格式化</title>
    <url>/2018/01/05/Highcharts-%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%81%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E3%80%81%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E5%8C%96/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>格式化字符串是包含了变量的标签模板。具体的使用实例是在
xAxis.labels.format、tooltip.pointFormat 及 legend.labelFormat.
变量是格式化中用大括号包括的字符，例如 “The point value at {point.x} is
{point.y}”.</p>
<span id="more"></span>
<h2 id="字符串格式化">字符串格式化</h2>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  $(<span class="string">&quot;#container&quot;</span>).<span class="title function_">highcharts</span>(&#123;</span><br><span class="line">    <span class="attr">chart</span>: &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;column&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">title</span>: &#123;</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&quot;月平均降雨量&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">subtitle</span>: &#123;</span><br><span class="line">      <span class="attr">text</span>: <span class="string">&quot;数据来源: WorldClimate.com&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">xAxis</span>: &#123;</span><br><span class="line">      <span class="attr">categories</span>: [</span><br><span class="line">        <span class="string">&quot;一月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;二月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;三月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;四月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;五月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;六月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;七月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;八月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;九月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;十月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;十一月&quot;</span>,</span><br><span class="line">        <span class="string">&quot;十二月&quot;</span>,</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">crosshair</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">yAxis</span>: &#123;</span><br><span class="line">      <span class="attr">min</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">title</span>: &#123;</span><br><span class="line">        <span class="attr">text</span>: <span class="string">&quot;降雨量 (mm)&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">tooltip</span>: &#123;</span><br><span class="line">      <span class="attr">headerFormat</span>: <span class="string">&#x27;&lt;span style=&quot;font-size:10px&quot;&gt;&#123;point.key&#125;&lt;/span&gt;&lt;table&gt;&#x27;</span>,</span><br><span class="line">      <span class="attr">pointFormat</span>:</span><br><span class="line">        <span class="string">&#x27;&lt;tr&gt;&lt;td style=&quot;color:&#123;series.color&#125;;padding:0&quot;&gt;&#123;series.name&#125;: &lt;/td&gt;&#x27;</span> +</span><br><span class="line">        <span class="string">&#x27;&lt;td style=&quot;padding:0&quot;&gt;&lt;b&gt;&#123;point.y:.1f&#125; mm&lt;/b&gt;&lt;/td&gt;&lt;/tr&gt;&#x27;</span>,</span><br><span class="line">      <span class="attr">footerFormat</span>: <span class="string">&quot;&lt;/table&gt;&quot;</span>,</span><br><span class="line">      <span class="attr">shared</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">useHTML</span>: <span class="literal">true</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">plotOptions</span>: &#123;</span><br><span class="line">      <span class="attr">column</span>: &#123;</span><br><span class="line">        <span class="attr">borderWidth</span>: <span class="number">0</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">series</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;东京&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: [</span><br><span class="line">          <span class="number">49.9</span>, <span class="number">71.5</span>, <span class="number">106.4</span>, <span class="number">129.2</span>, <span class="number">144.0</span>, <span class="number">176.0</span>, <span class="number">135.6</span>, <span class="number">148.5</span>, <span class="number">216.4</span>, <span class="number">194.1</span>,</span><br><span class="line">          <span class="number">95.6</span>, <span class="number">54.4</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;纽约&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: [</span><br><span class="line">          <span class="number">83.6</span>, <span class="number">78.8</span>, <span class="number">98.5</span>, <span class="number">93.4</span>, <span class="number">106.0</span>, <span class="number">84.5</span>, <span class="number">105.0</span>, <span class="number">104.3</span>, <span class="number">91.2</span>, <span class="number">83.5</span>, <span class="number">106.6</span>,</span><br><span class="line">          <span class="number">92.3</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;伦敦&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: [</span><br><span class="line">          <span class="number">48.9</span>, <span class="number">38.8</span>, <span class="number">39.3</span>, <span class="number">41.4</span>, <span class="number">47.0</span>, <span class="number">48.3</span>, <span class="number">59.0</span>, <span class="number">59.6</span>, <span class="number">52.4</span>, <span class="number">65.2</span>, <span class="number">59.3</span>, <span class="number">51.2</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;柏林&quot;</span>,</span><br><span class="line">        <span class="attr">data</span>: [</span><br><span class="line">          <span class="number">42.4</span>, <span class="number">33.2</span>, <span class="number">34.5</span>, <span class="number">39.7</span>, <span class="number">52.6</span>, <span class="number">75.5</span>, <span class="number">57.4</span>, <span class="number">60.4</span>, <span class="number">47.6</span>, <span class="number">39.1</span>, <span class="number">46.8</span>, <span class="number">51.1</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="时间日期格式化">时间日期格式化</h2>
<h3 id="构造函数">构造函数：</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Highcharts.dateFormat(String format, [Number time], [Boolean capitalize])</span><br></pre></td></tr></table></figure>
<p>参数列表： <div class="note default"><p>String format 格式化字符串，下面详细说明 Number time
需要格式化的时间戳，可选参数，留空则取当前时间 Boolean capitalize
返回结果是否大写（例如英文时间表示中的 Sunday, January
等），可选参数</p>
</div></p>
<p>返回值类型：String</p>
<h3 id="format-格式化字符说明">format 格式化字符说明</h3>
<img src="/2018/01/05/Highcharts-%E5%AD%97%E7%AC%A6%E4%B8%B2%E3%80%81%E6%97%B6%E9%97%B4%E6%97%A5%E6%9C%9F%E3%80%81%E6%95%B0%E5%AD%97%E6%A0%BC%E5%BC%8F%E5%8C%96/1.jpg" class="">
<h3 id="举个栗子">举个栗子</h3>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$(<span class="string">&quot;#container&quot;</span>).<span class="title function_">highcharts</span>(&#123;</span><br><span class="line">  <span class="attr">tooltip</span>: &#123;</span><br><span class="line">    <span class="attr">pointFormat</span>: <span class="string">&quot;Value: &#123;point.y:,.1f&#125; mm&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">xAxis</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;datetime&quot;</span>,</span><br><span class="line">    <span class="attr">labels</span>: &#123;</span><br><span class="line">      <span class="attr">format</span>: <span class="string">&quot;&#123;value:%Y-%m-%d&#125;&quot;</span>,</span><br><span class="line">      <span class="attr">rotation</span>: <span class="number">45</span>,</span><br><span class="line">      <span class="attr">align</span>: <span class="string">&quot;left&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">series</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">data</span>: [</span><br><span class="line">        <span class="number">1029.9</span>, <span class="number">1071.5</span>, <span class="number">1106.4</span>, <span class="number">1129.2</span>, <span class="number">1144.0</span>, <span class="number">1176.0</span>, <span class="number">1135.6</span>, <span class="number">1148.5</span>, <span class="number">1216.4</span>,</span><br><span class="line">        <span class="number">1194.1</span>, <span class="number">1095.6</span>, <span class="number">1054.4</span>,</span><br><span class="line">      ],</span><br><span class="line">      <span class="attr">pointStart</span>: <span class="title class_">Date</span>.<span class="title function_">UTC</span>(<span class="number">2013</span>, <span class="number">0</span>, <span class="number">1</span>),</span><br><span class="line">      <span class="attr">pointInterval</span>: <span class="number">24</span> * <span class="number">36e5</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="数字格式化">数字格式化</h2>
<h3 id="构造函数-1">构造函数</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Highcharts.numberFormat (Number number, [Number decimals], [String decimalPoint], [String thousandsSep])</span><br></pre></td></tr></table></figure>
<p>参数列表: <div class="note default"><p>number 需要格式化的数字 decimals
小数保留位数，最后一位是四舍五入，默认为 0（可选参数） decimalPoint
小数点符，默认是“.”（可选参数） thousandsSep 千位符，默认是“,”
（可选参数）</p>
</div></p>
<p>返回值类型：String</p>
<h3 id="举个栗子-1">举个栗子</h3>
<p>对于数字 12223.8723 <div class="note info"><p>Highcharts.numberFormat(12223.87) = 12,224 （默认精度是 0）
Highcharts.numberFormat(12223.87, 2) = 12223.87 （保留两位小数）
Highcharts.numberFormat(12223.87, 2, “,”, ” “) = 12 223,87
（小数点用“,”，千分符用“ ”） Highcharts.numberFormat(12223.87, 2,”.”,
““) = 12223.87 （不显示千分符）</p>
</div></p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Highcharts</span>.<span class="title function_">setOptions</span>(&#123;</span><br><span class="line">  <span class="attr">lang</span>: &#123;</span><br><span class="line">    <span class="attr">decimalPoint</span>: <span class="string">&quot;,&quot;</span>,</span><br><span class="line">    <span class="attr">thousandsSep</span>: <span class="string">&quot; &quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> chart = <span class="keyword">new</span> <span class="title class_">Highcharts</span>.<span class="title class_">Chart</span>(&#123;</span><br><span class="line">  <span class="attr">chart</span>: &#123;</span><br><span class="line">    <span class="attr">renderTo</span>: <span class="string">&quot;container&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">xAxis</span>: &#123;</span><br><span class="line">    <span class="attr">categories</span>: [</span><br><span class="line">      <span class="string">&quot;Jan&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Feb&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Mar&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Apr&quot;</span>,</span><br><span class="line">      <span class="string">&quot;May&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Jun&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Jul&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Aug&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Sep&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Oct&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Nov&quot;</span>,</span><br><span class="line">      <span class="string">&quot;Dec&quot;</span>,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">tooltip</span>: &#123;</span><br><span class="line">    <span class="attr">pointFormat</span>: <span class="string">&quot;Value: &#123;point.y:,.1f&#125; mm&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">series</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">data</span>: [</span><br><span class="line">        <span class="number">1029.9</span>, <span class="number">1071.5</span>, <span class="number">1106.4</span>, <span class="number">1129.2</span>, <span class="number">1144.0</span>, <span class="number">1176.0</span>, <span class="number">1135.6</span>, <span class="number">1148.5</span>, <span class="number">1216.4</span>,</span><br><span class="line">        <span class="number">1194.1</span>, <span class="number">1095.6</span>, <span class="number">1054.4</span>,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><strong>参考文档：</strong> <a
href="https://www.hcharts.cn/docs/basic-labels-string-formatting">标签及字符串格式化
| Highcharts 使用教程</a> <a
href="https://bbs.hcharts.cn/article-124-1.html">Highcharts
时间格式化函数</a> <a
href="https://bbs.hcharts.cn/article-54-1.html">数字格式化函数：Highcharts.numberFormat()</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Highcharts</tag>
        <tag>格式化</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL 转换表引擎的三种方式</title>
    <url>/2018/01/10/MySQL-%E8%BD%AC%E6%8D%A2%E8%A1%A8%E5%BC%95%E6%93%8E%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h2 id="alter-table">ALTER TABLE</h2>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span>  mytable ENGINE <span class="operator">=</span> InnoDB;</span><br></pre></td></tr></table></figure>
<p>缺点：执行时间很长。</p>
<h2 id="导出与导入">导出与导入</h2>
<p>使用 <em>mysqldump</em>
工具将数据导出到文件，然后修改文件中创建表的引擎，同时注意修改表名，删除
DROP TABLE 语句，再导入数据库。 <span id="more"></span> ## 创建与查询（CREATE 和
SELECT） <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> innodb_table <span class="keyword">LIKE</span> myasim_table;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> innodb_table ENGINE<span class="operator">=</span>InnoDB;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> innodb_table <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> myisam_table;</span><br></pre></td></tr></table></figure> 如果数据量大的话，则可以考虑分批处理。
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> innodb_table <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> myisam_table <span class="keyword">WHERE</span> id <span class="keyword">BETWEEN</span> x <span class="keyword">AND</span> y;</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure></p>
<p><strong>转载</strong> <a
href="https://book.douban.com/subject/23008813/">高性能MySQL</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>表引擎</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL 配置文件</title>
    <url>/2018/03/19/MySQL-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>使用 Percona Tools 在线工具生成的配置文件。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Generated by Percona Configuration Wizard (http://tools.percona.com/) version REL5-20120208</span><br><span class="line"># Configuration name server generated for 275688469@qq.com at 2018-03-06 03:18:19</span><br><span class="line"></span><br><span class="line">[mysql]</span><br><span class="line"></span><br><span class="line"># CLIENT #</span><br><span class="line">port                           = 3306</span><br><span class="line">socket                         = /var/lib/mysql/mysql.sock</span><br><span class="line"></span><br><span class="line">[mysqld]</span><br><span class="line"></span><br><span class="line"># GENERAL #</span><br><span class="line">user                           = mysql</span><br><span class="line">default-storage-engine         = InnoDB</span><br><span class="line">socket                         = /var/lib/mysql/mysql.sock</span><br><span class="line">pid-file                       = /var/lib/mysql/mysql.pid</span><br><span class="line"></span><br><span class="line"># MyISAM #</span><br><span class="line">key-buffer-size                = 32M</span><br><span class="line">myisam-recover-options         = FORCE,BACKUP</span><br><span class="line"></span><br><span class="line"># SAFETY #</span><br><span class="line">max-allowed-packet             = 16M</span><br><span class="line">max-connect-errors             = 1000000</span><br><span class="line">skip-name-resolve</span><br><span class="line"></span><br><span class="line"># DATA STORAGE #</span><br><span class="line">datadir                        = /var/lib/mysql/</span><br><span class="line"></span><br><span class="line"># BINARY LOGGING #</span><br><span class="line">log-bin                        = /var/lib/mysql/mysql-bin</span><br><span class="line">expire-logs-days               = 14</span><br><span class="line">sync-binlog                    = 1</span><br><span class="line"></span><br><span class="line"># CACHES AND LIMITS #</span><br><span class="line">tmp-table-size                 = 32M</span><br><span class="line">max-heap-table-size            = 32M</span><br><span class="line">query-cache-type               = 0</span><br><span class="line">query-cache-size               = 0</span><br><span class="line">max-connections                = 500</span><br><span class="line">thread-cache-size              = 50</span><br><span class="line">open-files-limit               = 65535</span><br><span class="line">table-definition-cache         = 1024</span><br><span class="line">table-open-cache               = 2048</span><br><span class="line"></span><br><span class="line"># INNODB #</span><br><span class="line">innodb-flush-method            = O_DIRECT</span><br><span class="line">innodb-log-files-in-group      = 2</span><br><span class="line">innodb-log-file-size           = 512M</span><br><span class="line">innodb-flush-log-at-trx-commit = 1</span><br><span class="line">innodb-file-per-table          = 1</span><br><span class="line">innodb-buffer-pool-size        = 54G</span><br><span class="line"></span><br><span class="line"># LOGGING #</span><br><span class="line">log-error                      = /var/lib/mysql/mysql-error.log</span><br><span class="line">log-queries-not-using-indexes  = 1</span><br><span class="line">slow-query-log                 = 1</span><br><span class="line">slow-query-log-file            = /var/lib/mysql/mysql-slow.log</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>my.cnf</tag>
        <tag>配置文件</tag>
      </tags>
  </entry>
  <entry>
    <title>Linux 配置免密码登录</title>
    <url>/2018/03/20/Linux-%E9%85%8D%E7%BD%AE%E5%85%8D%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ol type="1">
<li>使用 <code>ssh-keygen -t rsa</code> 生成公钥，一路敲回车。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure></li>
<li>将生成的公钥发送到远程主机上 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh-copy-id -i ~/.ssh/id_rsa.pub 192.168.1.135</span><br></pre></td></tr></table></figure></li>
<li>成功 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh root@192.168.1.135</span><br></pre></td></tr></table></figure></li>
</ol>
<p><strong>注意</strong> 如果希望 ssh 公钥生效需满足至少下面两个条件：
1. ssh 目录的权限必须是700 2. ssh/authorized_keys 文件权限必须是600</p>
<span id="more"></span>
<p><strong>参考文档</strong> <a
href="https://www.cnblogs.com/yixue2017/p/7559970.html">Linux下实现免密码登录(超详细)</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>免密码登录</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL TIMESTAMP 的坑</title>
    <url>/2018/01/16/MySQL-TIMESTAMP-%E7%9A%84%E5%9D%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<img src="/2018/01/16/MySQL-TIMESTAMP-%E7%9A%84%E5%9D%91/1.png" class="">
<p>上图为 SQLYog 点击改变表后的视图，其中 update_time 的类型为 timestamp
，默认值为 CURRENT_TIMESTAMP, CURRENT_TIMESTAMP
想必大家都知道，如果在插入数据时没有给 update_time
赋值，会默认使用系统当前时间。</p>
<span id="more"></span>
<img src="/2018/01/16/MySQL-TIMESTAMP-%E7%9A%84%E5%9D%91/2.png" class="">
<p>上图是用 MySQL 执行 <code>show create table weather</code>
后的结果。我们发现 update_time 除了有默认值 CURRENT_TIMESTAMP ，还有一个
ON UPDATE CURRENT_TIMESTAMP 字段，这表示当更新表中数据时，如果没有给
update_time 赋值，会默认使用系统当前时间更新该字段的值。</p>
<p>今天在更新一张天气表时，没有注意到 update_time 还有 ON UPDATE
CURRENT_TIMESTAMP 默认值，导致表中数据 update_time
误更新，原来保存的数据全都废了。</p>
<p>经验教训： <div class="note danger"><p>更新数据时要先备份，以防万一； 仔细查看表结构，同时多注意 MySQL
日期时间类型。</p>
</div></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>TIMESTAMP</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS 6 安装 PERCONA XTRABACKUP</title>
    <url>/2018/03/21/CentOS6-%E5%AE%89%E8%A3%85-PERCONA-XTRABACKUP/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>CentOS 6 安装 PERCONA XTRABACKUP MySQL 备份工具。 1. 首先去 <a
href="https://www.percona.com/downloads/XtraBackup/LATEST/">PERCONA</a>
下载并解压安装包。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tar -xvf Percona-XtraBackup-2.4.9-ra467167cdd4-el7-x86_64-bundle.tar</span><br></pre></td></tr></table></figure></p>
<ol start="2" type="1">
<li><p>下载并安装 <code>libev.so.4</code> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wget ftp://rpmfind.net/linux/atrpms/el6-x86_64/atrpms/stable/libev-4.04-2.el6.x86_64.rpm</span><br><span class="line">rpm -ivh libev-4.04-2.el6.x86_64.rpm</span><br></pre></td></tr></table></figure></p></li>
<li><p>下载并安装 <code>perl-DBD-MySQL</code> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install  perl-DBD-MySQL</span><br></pre></td></tr></table></figure></p></li>
<li><p>安装 XTRABACKUP <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rpm -ivh percona-xtrabackup-24-2.4.9-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure></p></li>
<li><p>Done! <span id="more"></span></p></li>
</ol>
<p><strong>NOTICE</strong> CentOS 7 安装 XTRABACKUP 还需要安装 perl
相关依赖包。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum install -y perl-Digest-MD5</span><br></pre></td></tr></table></figure></p>
<p><strong>参考文档</strong> <a
href="http://www.laozuo.org/11514.html">解决安装XtraBackup出现”libev.so.4()(64bit)
is needed”问题</a> <a
href="http://blog.csdn.net/evils798/article/details/51433073">解决
libev.so.4()(64bit) is needed by
percona-xtrabackup-2.3.4-1.el6.x86_64案例</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XTRABACKUP</tag>
        <tag>备份</tag>
      </tags>
  </entry>
  <entry>
    <title>Percona XtraBackup 文档翻译</title>
    <url>/2018/03/22/Percona-XtraBackup-%E6%96%87%E6%A1%A3%E7%BF%BB%E8%AF%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<div class="note danger"><p>Percona XtraBackup 文档翻译已经迁移到 <a
href="https://toypipi.gitbook.io/percona-xtrabackup-2-4-9/">gitbook</a>，本博客后续将不再更新<sub></sub>~</p>
</div>
<p>翻译 Percona XtraBackup 官方文档，原文<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/index.html">在这</a>。以下为翻译内容：</p>
<p>Percona XtraBackup 是一款基于 MySQL
服务器的开源热备份实用程序，在备份过程中不会锁定数据库。</p>
<p>它可以备份 MySQL 5.1（在Percona XtraBackup 2.1 中已经删除了对 InnoDB
5.1 的内置支持），5.5 , 5.6 和 5.7 服务器上的 InnoDB，XtraDB 和 MyISAM
表的数据，以及带有 XtraDB 的 Percona
服务器。有关其许多高级功能（包括功能比较）的高级概述，请参阅 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/intro.html">Percona
XtraBackup</a>。</p>
<p>无论是 24x7 高负载的服务器还是低事务量的环境，Percona XtraBackup
旨在使备份成为无缝过程，而不会中断生产环境中服务器的性能。<a
href="https://www.percona.com/services/support/mysql-support">支持商业合同</a>。
<span id="more"></span> # 介绍</p>
<h2 id="关于-percona-xtrabackup"><a
href="https://toypipi.github.io/2018/03/23/%E5%85%B3%E4%BA%8E-Percona-XtraBackup/">关于
Percona XtraBackup</a></h2>
<h2 id="percona-xtrabackup-如何工作"><a
href="https://toypipi.github.io/2018/03/23/Percona-XtraBackup-%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C/">Percona
XtraBackup 如何工作</a></h2>
<h1 id="安装">安装</h1>
<h2 id="安装percona-xtrabackup-2.4"><a
href="https://toypipi.github.io/2018/03/24/%E5%AE%89%E8%A3%85Percona-XtraBackup-2-4/">安装Percona
XtraBackup 2.4</a></h2>
<h2 id="从存储库安装-percona-xtrabackup">从存储库安装 Percona
XtraBackup</h2>
<h2 id="从源码编译和安装">从源码编译和安装</h2>
<h1 id="必要条件">必要条件</h1>
<h2 id="连接和权限"><a
href="https://toypipi.github.io/2018/03/27/%E8%BF%9E%E6%8E%A5%E5%92%8C%E6%9D%83%E9%99%90/">连接和权限</a></h2>
<h2 id="配置-xtrabackup"><a
href="https://toypipi.github.io/2018/03/28/%E9%85%8D%E7%BD%AE-xtrabackup/">配置
xtrabackup</a></h2>
<h1 id="备份方案">备份方案</h1>
<h2 id="备份周期---完整备份"><a
href="https://toypipi.github.io/2018/03/28/%E5%A4%87%E4%BB%BD%E5%91%A8%E6%9C%9F-%E5%AE%8C%E6%95%B4%E5%A4%87%E4%BB%BD/">备份周期
- 完整备份</a></h2>
<h2 id="增量备份"><a
href="https://toypipi.github.io/2018/03/30/%E5%A2%9E%E9%87%8F%E5%A4%87%E4%BB%BD/">增量备份</a></h2>
<h2 id="压缩备份"><a
href="https://toypipi.github.io/2018/03/31/%E5%8E%8B%E7%BC%A9%E5%A4%87%E4%BB%BD/">压缩备份</a></h2>
<h2 id="加密备份"><a
href="https://toypipi.github.io/2018/04/02/%E5%8A%A0%E5%AF%86%E5%A4%87%E4%BB%BD/">加密备份</a></h2>
<h1 id="用户手册">用户手册</h1>
<h2 id="percona-xtrabackup-用户手册"><a
href="https://toypipi.github.io/2018/04/03/Percona-XtraBackup-%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C/">Percona
XtraBackup 用户手册</a></h2>
<h1 id="高级功能">高级功能</h1>
<h2 id="节流备份">节流备份</h2>
<h2 id="无锁二进制日志信息">无锁二进制日志信息</h2>
<h2 id="加密的-innodb-表空间备份">加密的 InnoDB 表空间备份</h2>
<h1 id="教程方法入门指南">教程，方法，入门指南</h1>
<h2 id="xtrabackup-的用法">xtrabackup 的用法</h2>
<h2 id="innobackupex-的用法">innobackupex 的用法</h2>
<h2 id="入门指南">入门指南</h2>
<h2 id="辅助指南">辅助指南</h2>
<h1 id="参考">参考</h1>
<h2 id="xtrabackup-选项参考">xtrabackup 选项参考</h2>
<h2 id="innobackupex-选项参考">innobackupex 选项参考</h2>
<h2 id="xbcloud-二进制文件">xbcloud 二进制文件</h2>
<h2 id="xbcrypt-二进制文件">xbcrypt 二进制文件</h2>
<h2 id="xbstream-二进制文件">xbstream 二进制文件</h2>
<h2 id="已知的问题和限制">已知的问题和限制</h2>
<h2 id="常问问题">常问问题</h2>
<h2 id="percona-xtrabackup-发行说明">Percona XtraBackup 发行说明</h2>
<h2 id="词汇表">词汇表</h2>
<h2 id="由-percona-xtrabackup-创建的文件索引">由 Percona XtraBackup
创建的文件索引</h2>
<h2 id="商标政策">商标政策</h2>
<h1 id="索引和附录">索引和附录</h1>
<h2 id="索引">索引</h2>
<h2 id="搜索页面">搜索页面</h2>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>翻译</tag>
        <tag>XtraBackup</tag>
        <tag>文档</tag>
      </tags>
  </entry>
  <entry>
    <title>Percona XtraBackup 如何工作</title>
    <url>/2018/03/23/Percona-XtraBackup-%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>Percona XtraBackup 基于 InnoDB 的崩溃恢复功能。它复制你的 InnoDB
数据文件时，会导致内部不一致的数据;但是它会对文件执行崩溃恢复，以使其再次成为一个一致的可用数据库。</p>
<p>这是可行的，因为 InnoDB 维护一个重做日志，也称为事务日志。它包含对
InnoDB 数据的每个变更的记录。当 InnoDB
启动时，它会检查数据文件和事务日志，并执行两个步骤。它将已提交的事务日志条目应用于数据文件，并对任何修改了数据但未提交的事务执行撤销操作。</p>
<p>Percona XtraBackup
通过在启动时记住日志序列号（LSN）来工作，然后复制数据文件。这需要一些时间来完成，所以如果文件正在改变，那么它们会在不同的时间点反映数据库的状态。与此同时，Percona
XtraBackup 运行一个后台进程，用于监视事务日志文件，并从中复制更改。
Percona XtraBackup
需要不断做到这一点，因为事务日志是以循环方式写入的，并且可以在一段时间后重新使用。
Percona XtraBackup
自启动以后，每次对数据文件的更改都需要事务日志记录。</p>
<p>Percona XtraBackup 将使用<a
href="https://www.percona.com/doc/percona-server/5.6/management/backup_locks.html">备份锁</a>作为
<code>FLUSH TABLES WITH READ LOCK</code> 的轻量级替代产品。此功能在
Percona Server 5.6+ 中可用。 Percona XtraBackup 自动使用它来复制非
InnoDB 数据，以避免阻止修改 InnoDB
表的DML查询。当服务器支持备份锁时，xtrabackup 将首先复制 InnoDB
数据，运行 <code>LOCK TABLES FOR BACKUP</code> 并复制 MyISAM 表和 .frm
文件。一旦完成，文件的备份将开始。它将备份
.frm，.MRG，.MYD，.MYI，.TRG，.TRN，.ARM，.ARZ，.CSM，.CSV，.par 和 .opt
文件。 <span id="more"></span></p>
<div class="note danger"><p>注意 仅在 MyISAM 和其他非 InnoDB 表上进行锁定，并且只有在 Percona
XtraBackup 完成备份所有 InnoDB / XtraDB 数据和日志后才执行锁定。 Percona
XtraBackup 将使用备份锁作为 <code>FLUSH TABLES WITH READ LOCK</code>
的轻量级替代产品。此功能在 Percona Server 5.6+ 中可用。 Percona
XtraBackup 自动使用它来复制非 InnoDB 数据，以避免阻止修改 InnoDB 表的
DML 查询。</p>
</div>
<p>之后，<strong>xtrabackup</strong> 将使用
<code>LOCK BINLOG FOR BACKUP</code> 来阻止所有可能更改二进制日志位置或
<code>SHOW MASTER</code> 或 <code>SLAVE STATUS</code>打印的
<code>Exec_Master_Log_Pos</code> 或
<code>Exec_Gtid_Set</code>（即对应主库二进制日志坐标的当前复制从库上的SQL线程状态）的操作。然后
<strong>xtrabackup</strong> 将完成复制 REDO
日志文件并获取二进制日志坐标。完成此操作后，<strong>xtrabackup</strong>
将解锁二进制日志和表。</p>
<p>最后，二进制日志位置将打印到
<code>STDERR</code>，如果一切正常，<strong>xtrabackup</strong>
将退出并返回0。</p>
<p>请注意，<strong>xtrabackup</strong> 的 <code>STDERR</code>
不会写入任何文件。您必须将其重定向到一个文件，例如
<code>xtrabackup OPTIONS 2&gt; backupout.log</code>。</p>
<p>它还将在备份目录中创建以下文件。</p>
<p>在准备阶段，Percona XtraBackup
使用复制的事务日志文件对复制的数据文件执行崩溃恢复。完成此操作后，数据库已准备好进行恢复和使用。</p>
<p>备份的 MyISAM 和 InnoDB
表最终将保持一致，因为在准备（恢复）过程之后，InnoDB
的数据将前滚到备份完成的位置，而不会回滚到备份开始的位置。此时间点与
<code>FLUSH TABLES WITH READ LOCK</code> 相匹配，因此 MyISAM
数据和准备好的 InnoDB 数据保持同步。</p>
<p><strong>xtrabackup</strong> 和 <strong>innobackupex</strong>
工具都提供了前面解释中没有提到的许多功能。每个工具的功能都在手册中进一步详细解释。简而言之，这些工具允许您通过复制数据文件，复制日志文件和将日志应用于数据的各种组合来执行如流式备份和增量式备份的各种备份。</p>
<h1 id="恢复备份">恢复备份</h1>
<p>要使用 <strong>xtrabackup</strong> 恢复备份，可以使用
<code>xtrabackup --copy-back</code> 或
<code>xtrabackup --move-back</code> 选项。</p>
<p><strong>xtrabackup</strong> 将从 my.cnf 读取变量 datadir,
innodb_data_home_dir , innodb_data_file_path , innodb_log_group_home_dir
并检查目录是否存在。</p>
<p>它将首先复制MyISAM表，索引等（.frm , .MRG , .MYD , .MYI , .TRG , .TRN
, .ARM , .ARZ , .CSM , .CSV , par 和 .opt 文件），然后复制 InnoDB
表和索引，最后是日志文件。它将在复制时保留文件的属性，备份文件将由创建备份的用户拥有，因此，在启动数据库服务器之前你可能需要将文件的所有者更改为
mysql 。</p>
<p>或者，您还可以使用 <code>xtrabackup --move-back</code> 用于恢复备份。
该选项与 <code>xtrabackup --copy-back</code>
类似，唯一的区别在于它不是复制文件而是将它们移动到目标位置。
由于此选项删除备份文件，因此必须谨慎使用。
当没有足够的可用磁盘空间来容纳数据文件及其备份副本时，这很有用。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>关于 Percona XtraBackup</title>
    <url>/2018/03/23/%E5%85%B3%E4%BA%8E-Percona-XtraBackup/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>Percona XtraBackup 是全球唯一的开源免费MySQL热备软件，可为 InnoDB 和
XtraDB 数据库执行无锁定备份。借助 Percona
XtraBackup，您可以获得以下好处：</p>
<ul>
<li>完成快速可靠的备份</li>
<li>备份期间不间断的事务处理</li>
<li>节省磁盘空间和网络带宽</li>
<li>自动备份验证</li>
<li>由于更快的恢复时间从而使服务器正常运行时间更长</li>
</ul>
<p>Percona XtraBackup 为所有版本的 Percona Server，MySQL 和 MariaDB 进行
MySQL 热备份。它可以执行流式，压缩和增量 MySQL 备份。</p>
<p>Percona XtraBackup 可与 MySQL，MariaDB 和 Percona Server
配合使用。它支持 InnoDB，XtraDB 和 HailDB
存储引擎的完全无锁定备份。此外，它还可以通过在备份结束时暂停写入来备份以下存储引擎：MyISAM，<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/glossary.html#term-mrg">Merge</a>
和 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/glossary.html#term-arm">Archive</a>，包括分区表，触发器和数据库选项。</p>
<p>Percona 的企业级商业 <a
href="https://www.percona.com/services/support/mysql-support">MySQL
支持</a>合同包括对 Percona XtraBackup
的支持。我们建议对关键的生产部署提供支持。 <span id="more"></span><br />
# MySQL备份工具功能比较</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>功能</th>
<th>Percona XtraBackup</th>
<th>MySQL Enterprise backup</th>
</tr>
</thead>
<tbody>
<tr>
<td>许可</td>
<td>GPL</td>
<td>专有</td>
</tr>
<tr>
<td>价格</td>
<td>免费</td>
<td>订阅费用为5000美元/服务器</td>
</tr>
<tr>
<td>流和加密格式</td>
<td>开源</td>
<td>专有</td>
</tr>
<tr>
<td>支持的 MySQL 类型</td>
<td>MySQL，Percona Server，MariaDB，Percona XtraDB 集群，MariaDB Galera
集群</td>
<td>MySQL</td>
</tr>
<tr>
<td>支持的操作系统</td>
<td>Linux</td>
<td>Linux，Solaris，Windows，OSX，FreeBSD</td>
</tr>
<tr>
<td>锁定 InnoDB 备份[1]</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>锁定 MyISAM 备份</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>增量备份</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>完全压缩的备份</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>增量压缩备份</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>快速增量备份[2]</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>Percona Server 的增量备份与归档日志功能</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>仅限 REDO 日志的增量备份</td>
<td></td>
<td>是</td>
</tr>
<tr>
<td>备份锁定[8]</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>加密备份</td>
<td>是</td>
<td>是[3]</td>
</tr>
<tr>
<td>流式备份</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>并行本地备份</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>并行压缩</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>并行加密</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>并行使用日志</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>并行复制</td>
<td></td>
<td>是</td>
</tr>
<tr>
<td>部分备份</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>个别分区的部分备份</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>节流[4]</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>备份映像验证</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>时间点恢复支持</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>安全的从库备份</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>紧凑备份[5]</td>
<td>是</td>
<td>　</td>
</tr>
<tr>
<td>缓冲池状态备份</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>个别表导出</td>
<td>是</td>
<td>是[6]</td>
</tr>
<tr>
<td>个别分区导出</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>将表恢复到不同的数据库[7]</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>数据和索引文件统计</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>InnoDB 二级索引碎片整理</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>rsync 支持最大限度地缩短锁定时间</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>改进的 FTWRL 处理</td>
<td>是</td>
<td></td>
</tr>
<tr>
<td>备份历史记录表</td>
<td>是</td>
<td>是</td>
</tr>
<tr>
<td>备份进程表</td>
<td></td>
<td>是</td>
</tr>
<tr>
<td>离线备份</td>
<td></td>
<td>是</td>
</tr>
<tr>
<td>备份到磁带媒体管理器</td>
<td></td>
<td>是</td>
</tr>
<tr>
<td>云备份支持</td>
<td></td>
<td>Amazon S3</td>
</tr>
<tr>
<td>用于备份/恢复的外部图形用户界面</td>
<td>Zmanda Recovery Manager for MySQL</td>
<td>MySQL Workbench，MySQL Enterprise Monitor</td>
</tr>
</tbody>
</table>
<h1 id="percona-xtrabackup-有哪些功能">Percona XtraBackup
有哪些功能？</h1>
<p>以下是 Percona XtraBackup 功能的简短列表。查看文档获取更多内容。</p>
<ul>
<li>在不暂停数据库的情况下创建 InnoDB 热备份</li>
<li>进行 MySQL 的增量备份</li>
<li>将压缩的 MySQL 备份传输到另一台服务器</li>
<li>在 MySQL 服务器之间在线移动表格</li>
<li>轻松创建新的 MySQL 复制从库</li>
<li>在不增加服务器负载的情况下备份 MySQL</li>
</ul>
<h2 id="脚注">脚注</h2>
<p>[1]在复制非 InnoDB 数据时，InnoDB 表仍处于锁定状态。
[2]支持快速增量备份的 Percona Server 需启用 XtraDB 更改页面跟踪功能。
[3] Percona XtraBackup 支持任何形式的加密备份。 MySQL Enterprise Backup
只支持单文件加密备份。 [4] Percona XtraBackup
根据每秒IO操作的数量执行调节。 MySQL Enterprise Backup
支持操作之间的可配置休眠时间。 [5] Percona XtraBackup
跳过二级索引页面，并在紧凑备份准备好时重新创建它们。 MySQL Enterprise
Backup 跳过未使用的页面，并在准备阶段重新插入。 [6]无论 InnoDB
版本如何，Percona XtraBackup 甚至可以从完整备份中导出单个表。 MySQL
Enterprise Backup 仅在执行部分备份时使用 InnoDB 5.6 可传输表空间。
[7]使用 Percona XtraBackup 导出的表可导入 Percona Server 5.1,5.5 或 5.6+
或 MySQL 5.6+。使用 MySQL Enterprise Backup 创建的可移动表空间只能导入到
Percona Server 5.6+，MySQL 5.6+ 或 MariaDB 10.0+。 [8]备份锁是 Percona
Server 5.6+ 中的 <code>FLUSH TABLES WITH READ LOCK</code>
的轻量级替代品。 Percona XtraBackup 自动使用它们来复制非 InnoDB
数据，以避免锁定修改 InnoDB 表的 DML 查询。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>安装 Percona XtraBackup 2.4</title>
    <url>/2018/03/24/%E5%AE%89%E8%A3%85Percona-XtraBackup-2-4/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>此页面提供有关如何安装 Percona XtraBackup
的信息。以下选项可供选择：</p>
<ul>
<li><a
href="https://toypipi.github.io/2018/03/26/%E4%BB%8E%E5%AD%98%E5%82%A8%E5%BA%93%E5%AE%89%E8%A3%85-Percona-XtraBackup/">从存储库安装
Percona XtraBackup</a> （推荐）</li>
<li>从已下载的 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/installation/yum_repo.html#standalone-rpm">rpm</a>
或 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/installation/apt_repo.html#standalone-deb">apt</a>
软件包安装 Percona XtraBackup</li>
<li><a
href="https://toypipi.github.io/2018/03/26/%E4%BB%8E%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%92%8C%E5%AE%89%E8%A3%85/">从源代码编译和安装</a></li>
</ul>
<p>在安装之前，您可能需要阅读 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/release-notes.html">Percona
XtraBackup 的发布说明</a>。 <span id="more"></span> # 从存储库安装 Percona
XtraBackup</p>
<p>Percona 为 Percona Server，Percona XtraBackup 和 Percona Toolkit
等软件提供 <strong>yum</strong>（用于 Red Hat，CentOS 和 Amazon Linux
AMI 的 RPM 软件包）和 <strong>apt</strong>（用于 Ubuntu 和 Debian 的
.deb
软件包）存储库。这使得通过操作系统的软件包管理器安装和更新软件及其依赖关系变得很容易。这是推荐的安装方式。</p>
<p>以下指南介绍了使用官方 Percona 存储库的 .deb 和 .rpm
软件包的安装过程。</p>
<ul>
<li><a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/installation/apt_repo.html">在
Debian 和 Ubuntu 上安装 Percona XtraBackup</a></li>
<li><a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/installation/yum_repo.html">在
Red Hat Enterprise Linux 和 CentOS 上安装 Percona XtraBackup</a></li>
</ul>
<h1 id="从源代码编译和安装">从源代码编译和安装</h1>
<p>Percona XtraBackup 是开源的，其代码托管在 <a
href="https://github.com/percona/percona-xtrabackup">Github</a>
。以下指导描述了源代码的编译和安装过程。</p>
<ul>
<li><a
href="https://toypipi.github.io/2018/03/26/%E4%BB%8E%E6%BA%90%E7%A0%81%E7%BC%96%E8%AF%91%E5%92%8C%E5%AE%89%E8%A3%85/">从源代码编译和安装</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>备份周期 - 完整备份</title>
    <url>/2018/03/28/%E5%A4%87%E4%BB%BD%E5%91%A8%E6%9C%9F-%E5%AE%8C%E6%95%B4%E5%A4%87%E4%BB%BD/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="创建备份">创建备份</h1>
<p>要创建备份，请使用 <code>xtrabackup --backup</code> 选项运行
<strong>xtrabackup</strong> 。您还需要使用
<code>xtrabackup --target-dir</code> 选项指定备份文件存储的目录，如果
InnoDB
数据或日志文件未存储在同一目录中，则还需要指定他们的位置。如果备份的目标目录不存在，
<strong>xtrabackup</strong> 会创建它。如果目录确实存在并且为空，则
<strong>xtrabackup</strong> 将成功运行。 如果目录不为空，
<strong>xtrabackup</strong>
不会覆盖现有的文件，它会执行失败，并报操作系统错误码17，<code>file exists</code>
。</p>
<p>要开始备份请运行：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">$ xtrabackup <span class="comment">--backup --target-dir=/data/backups/</span></span><br></pre></td></tr></table></figure>
<p>这会将备份存储在 <code>/data/backups/</code>
目录中。如果您指定的是相对路径，则目标目录将与您当前目录有关。</p>
<p>在备份过程中，您应会看到大量输出显示正在复制的数据文件，以及日志文件线程反复扫描日志文件并从中复制日志文件。下面是一个例子，它显示了在后台扫描日志的日志线程以及在
<code>ibdata1</code> 文件上工作的文件复制线程： <span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">160906 10:19:17 Finished backing up non-InnoDB tables and files</span><br><span class="line">160906 10:19:17 Executing FLUSH NO_WRITE_TO_BINLOG ENGINE LOGS...</span><br><span class="line">xtrabackup: The latest check point (for incremental): &#x27;62988944&#x27;</span><br><span class="line">xtrabackup: Stopping log copying thread.</span><br><span class="line">.160906 10:19:18 &gt;&gt; log scanned up to (137343534)</span><br><span class="line">160906 10:19:18 Executing UNLOCK TABLES</span><br><span class="line">160906 10:19:18 All tables unlocked</span><br><span class="line">160906 10:19:18 Backup created in directory &#x27;/data/backups/&#x27;</span><br><span class="line">160906 10:19:18 [00] Writing backup-my.cnf</span><br><span class="line">160906 10:19:18 [00]        ...done</span><br><span class="line">160906 10:19:18 [00] Writing xtrabackup_info</span><br><span class="line">160906 10:19:18 [00]        ...done</span><br><span class="line">xtrabackup: Transaction log of lsn (26970807) to (137343534) was copied.</span><br><span class="line">160906 10:19:18 completed OK!</span><br></pre></td></tr></table></figure></p>
<p>备份的最后您应会看到以下内容，其中 <code>&lt;LSN&gt;</code>
的值为与您系统有关的数字：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xtrabackup: Transaction log of lsn (&lt;SLN&gt;) to (&lt;LSN&gt;) was copied.</span><br></pre></td></tr></table></figure>
<div class="note default"><p>注意
日志复制线程每秒检查一次事务日志，查看是否有任何需要复制的新日志记录，但是日志复制线程可能无法跟上写入的大量事务日志，并且当日志记录在被读取之前被覆盖时将会遇到错误。</p>
</div>
<p>备份完成后，目标目录将包含以下文件，假设您有一个 InnoDB 表
<code>test.tbl1</code>，并且您使用了 MySQL 的
<code>innodb_file_per_table</code> 选项：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ ls -lh /data/backups/</span><br><span class="line">total 182M</span><br><span class="line">drwx------  7 root root 4.0K Sep  6 10:19 .</span><br><span class="line">drwxrwxrwt 11 root root 4.0K Sep  6 11:05 ..</span><br><span class="line">-rw-r-----  1 root root  387 Sep  6 10:19 backup-my.cnf</span><br><span class="line">-rw-r-----  1 root root  76M Sep  6 10:19 ibdata1</span><br><span class="line">drwx------  2 root root 4.0K Sep  6 10:19 mysql</span><br><span class="line">drwx------  2 root root 4.0K Sep  6 10:19 performance_schema</span><br><span class="line">drwx------  2 root root 4.0K Sep  6 10:19 sbtest</span><br><span class="line">drwx------  2 root root 4.0K Sep  6 10:19 test</span><br><span class="line">drwx------  2 root root 4.0K Sep  6 10:19 world2</span><br><span class="line">-rw-r-----  1 root root  116 Sep  6 10:19 xtrabackup_checkpoints</span><br><span class="line">-rw-r-----  1 root root  433 Sep  6 10:19 xtrabackup_info</span><br><span class="line">-rw-r-----  1 root root 106M Sep  6 10:19 xtrabackup_logfile</span><br></pre></td></tr></table></figure>
<p>备份可能需要很长时间，时间长短具体取决于数据库的大小。随时取消备份是安全的，因为备份不会修改数据库。</p>
<p>下一步是让备份文件为恢复做好准备。</p>
<h1 id="准备备份">准备备份</h1>
<p>在使用 <code>xtrabackup --backup</code>
选项进行备份后，首先需要准备它以恢复备份。数据文件在准备好之前不是时间点一致的，因为它们在程序运行的不同时间被复制，并且在复制时它们可能已被更改。如果您尝试使用这些数据文件启动
InnoDB ，它将检测到损坏并自行崩溃，以防止您在损坏的数据上运行。
<code>xtrabackup --prepare</code>
步骤使文件在某个瞬间完美一致，因此您可以在其上运行 InnoDB。</p>
<p>您可以在任何机器上运行准备操作;它不需要位于开始备份的服务器或您想要恢复的服务器上。您可以将备份复制到通用服务器并在那里进行准备。</p>
<div class="note default"><p>注意 您可以使用较新的 Percona XtraBackup 版本准备一个由较旧的 Percona
XtraBackup
版本创建的备份，但是反之则不行。在不支持的服务器版本上准备备份应该使用支持该服务器版本的最新
Percona XtraBackup 版本完成。例如，如果使用由 Percona XtraBackup 1.6
创建的 MySQL 5.0 备份，则不支持使用 Percona XtraBackup 2.3
准备备份，因为在 Percona XtraBackup 2.1 中删除了对 MySQL 5.0
的支持。相反，应该使用 2.0 系列中的最新版本。</p>
</div>
<p>在准备操作期间，<strong>xtrabackup</strong> 启动一种内嵌的修改的
InnoDB （与之链接的库）。这些修改对于禁用 InnoDB
的标准安全检查是必要的，例如报告日志文件大小不正确，这些文件不适合用于备份。这些修改仅适用于
<strong>xtrabackup</strong> 二进制文件;您不需要修改后的 InnoDB
就可以使用 <strong>xtrabackup</strong> 进行备份。</p>
<p>准备步骤通过 “内嵌的 InnoDB”
使用复制的日志文件对复制的数据文件执行崩溃恢复。<code>prepare</code>
步骤使用起来非常简单：只需使用 <code>xtrabackup --prepare</code>
选项运行
<strong>xtrabackup</strong>，并告诉它要准备哪个目录，例如，准备刚才执行的备份：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --prepare --target-dir=/data/backups/</span><br></pre></td></tr></table></figure>
<p>完成后，您应会看到
<code>InnoDB shutdown</code>，并显示如下信息，<code>LSN</code>
的值同样取决于您的系统： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InnoDB: Shutdown completed; log sequence number 137345046</span><br><span class="line">160906 11:21:01 completed OK!</span><br></pre></td></tr></table></figure></p>
<p>以下所有准备工作都不会更改已经准备好的数据文件，您将会看到输出显示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xtrabackup: This target seems to be already prepared.</span><br><span class="line">xtrabackup: notice: xtrabackup_logfile was already used to &#x27;--prepare&#x27;.</span><br></pre></td></tr></table></figure>
<p>建议不要在准备备份时中断 xtrabackup
进程，因为它可能会导致数据文件损坏，并且备份将变得不可用。如果准备过程中断，则不保证备份的有效性。</p>
<div class="note default"><p>注意 如果您打算将备份作为进一步增量备份的基础，则应在准备备份时使用
<code>xtrabackup --apply-log-only</code>
选项，否则将无法对其应用增量备份。有关更多详细信息，请参阅准备<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/backup_scenarios/incremental_backup.html#incremental-backup">增量备份</a>的文档。</p>
</div>
<h1 id="恢复备份">恢复备份</h1>
<div class="note danger"><p>警告 备份在恢复之前需要做好准备。</p>
</div>
<p>为了方便使用 <strong>xtrabackup</strong> 有一个
<code>xtrabackup --copy-back</code> 选项，它将备份复制到服务器的
<code>datadir</code> 目录： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --copy-back --target-dir=/data/backups/</span><br></pre></td></tr></table></figure></p>
<p>如果您不想保存备份，则可以使用 <code>xtrabackup --move-back</code>
选项，它将备份的数据移动到 <code>datadir</code> 目录。</p>
<p>如果您不想使用上述任何选项，则可以另外使用 <strong>rsync</strong> 或
<strong>cp</strong> 来恢复文件。 <div class="note default"><p>注意 恢复备份前， <code>datadir</code>
目录必须为空。另外需要注意的是，在执行恢复之前需要关闭 MySQL
服务器。您无法将备份还原到正在运行的 mysqld 实例的<code>datadir</code>
目录（导入部分备份时除外）。</p>
</div></p>
<p>可用于恢复备份的 <strong>rsync</strong> 命令示例如下所示：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ rsync -avrP /data/backup/ /var/lib/mysql/</span><br></pre></td></tr></table></figure></p>
<p>您应该检查还原的文件是否具有正确的所有权和许可权。</p>
<p>由于文件的属性将被保留，在大多数情况下，备份将由创建备份的用户拥有，因此您需要在启动数据库服务器之前将文件的所有权更改为
<code>mysql</code>： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ chown -R mysql:mysql /var/lib/mysql</span><br></pre></td></tr></table></figure></p>
<p>数据现在已恢复，您可以启动服务器了。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>Redis 常用命令</title>
    <url>/2018/03/27/Redis-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>找到 Redis 安装目录，进入 src 文件夹下，使用 <code>./redis-cli</code>
进入到 Redis 命令行交互界面。</p>
<h3 id="是否启动">是否启动</h3>
<p>检查 Redis 是否启动，如果返回 <code>PONG</code> 则表明 Redis 已经启动
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;ping</span><br></pre></td></tr></table></figure></p>
<h3 id="获取所有配置项">获取所有配置项</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;config get *</span><br></pre></td></tr></table></figure>
<p>Redis支持五种数据类型：string（字符串），hash（哈希），list（列表），set（集合）及
zset(sorted set：有序集合)。 <span id="more"></span> ### String 操作
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;set foo bar</span><br><span class="line">127.0.0.1:6379&gt;get foo</span><br></pre></td></tr></table></figure></p>
<h3 id="hash-操作">Hash 操作</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hmset student xiaoming &quot;16&quot; xiaohong &quot;28&quot;</span><br><span class="line">127.0.0.1:6379&gt;hget student xiaoming</span><br></pre></td></tr></table></figure>
<h3 id="list-操作">List 操作</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;lpush fruit apple</span><br><span class="line">127.0.0.1:6379&gt;lpush fruit orange</span><br><span class="line">127.0.0.1:6379&gt;lpush fruit banana</span><br><span class="line">127.0.0.1:6379&gt;lrange fruit 0 10</span><br></pre></td></tr></table></figure>
<h3 id="set">Set</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;sadd color yellow</span><br><span class="line">127.0.0.1:6379&gt;sadd color blue</span><br><span class="line">127.0.0.1:6379&gt;sadd color red</span><br><span class="line">127.0.0.1:6379&gt;smembers color</span><br></pre></td></tr></table></figure>
<h3 id="zsetsorted-set">zset(sorted set)</h3>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;zadd animal 0 cat</span><br><span class="line">127.0.0.1:6379&gt;zadd animal 0 dog</span><br><span class="line">127.0.0.1:6379&gt;zadd animal 0 duck</span><br><span class="line">127.0.0.1:6379&gt;zrange animal 0 100</span><br></pre></td></tr></table></figure>
<h3 id="redis-keys-命令">Redis keys 命令</h3>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>del key</td>
<td>key 存在时删除 key</td>
<td><code>127.0.0.1:6379&gt;del aaa</code></td>
</tr>
<tr>
<td>dump key</td>
<td>序列化给定 key ，并返回被序列化的值</td>
<td><code>127.0.0.1:6379&gt;dump color</code></td>
</tr>
<tr>
<td>exists key</td>
<td>检查给定 key 是否存在</td>
<td><code>127.0.0.1:6379&gt;exists color</code></td>
</tr>
<tr>
<td>expire key</td>
<td>为给定 key 设置过期时间</td>
<td><code>127.0.0.1:6379&gt;expire color</code></td>
</tr>
<tr>
<td>expireat key</td>
<td>EXPIREAT 的作用和 EXPIRE 类似，都用于为 key 设置过期时间。 不同在于
EXPIREAT 命令接受的时间参数是 UNIX 时间戳(unix timestamp)</td>
<td></td>
</tr>
<tr>
<td>pexpire key</td>
<td>设置 key 的过期时间以毫秒计</td>
<td></td>
</tr>
<tr>
<td>pexpireat key</td>
<td>设置 key 过期时间的时间戳(unix timestamp) 以毫秒计</td>
<td></td>
</tr>
<tr>
<td>keys pattern</td>
<td>查找所有符合给定模式( pattern)的 key</td>
<td><code>keys color*</code></td>
</tr>
<tr>
<td>move key db</td>
<td>将当前数据库的 key 移动到给定的数据库 db 当中</td>
<td></td>
</tr>
<tr>
<td>persist key</td>
<td>移除 key 的过期时间</td>
<td><code>persist fruit</code></td>
</tr>
<tr>
<td>pttl key</td>
<td>以毫秒为单位返回 key 的剩余的过期时间</td>
<td><code>pttl fruit</code></td>
</tr>
<tr>
<td>ttl key</td>
<td>以秒为单位，返回给定 key 的剩余生存时间</td>
<td><code>ttl color</code></td>
</tr>
<tr>
<td>randomkey</td>
<td>从当前数据库中随机返回一个 key</td>
<td><code>randomkey</code></td>
</tr>
<tr>
<td>rename key newkey</td>
<td>修改 key 的名称</td>
<td><code>rename fruit fruits</code></td>
</tr>
<tr>
<td>type key</td>
<td>返回 key 所储存的值的类型</td>
<td><code>type fruit</code></td>
</tr>
</tbody>
</table>
<h3 id="字符串的更多操作命令">字符串的更多操作命令</h3>
<h4 id="getrange-key-start-end">getrange key start end</h4>
<p>返回 key 中字符串值的子字符 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;set mykey &quot;This is my test key&quot;</span><br><span class="line">127.0.0.1:6379&gt;getrange mykey 0 3</span><br><span class="line">127.0.0.1:6379&gt;getrange mykey 0 -1</span><br></pre></td></tr></table></figure></p>
<h4 id="getset-key-value">getset key value</h4>
<p>将给定 key 的值设为 value ，并返回 key 的旧值(old value)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;getset mykey &quot;hahaha,i am new&quot;</span><br></pre></td></tr></table></figure></p>
<h4 id="getbit-key-offset">getbit key offset</h4>
<p>对 key 所储存的字符串值，获取指定偏移量上的位(bit)</p>
<h4 id="mget-key1-key2">mget key1 [key2…]</h4>
<p>获取所有(一个或多个)给定 key 的值 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;set key1 &quot;hello&quot;</span><br><span class="line">127.0.0.1:6379&gt;set key2 &quot;world&quot;</span><br><span class="line">127.0.0.1:6379&gt;mget key1 key2</span><br></pre></td></tr></table></figure></p>
<h4 id="setbit-key-offset-value">setbit key offset value</h4>
<p>对 key 所储存的字符串值，设置或清除指定偏移量上的位(bit)</p>
<h4 id="setex-key-seconds-value">setex key seconds value</h4>
<p>将值 value 关联到 key ，并将 key 的过期时间设为 seconds (以秒为单位)
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;setex mykey 60 redis</span><br></pre></td></tr></table></figure></p>
<h4 id="setnx-key-value">setnx key value</h4>
<p>只有在 key 不存在时设置 key 的值 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;setnx job &quot;manager&quot;</span><br></pre></td></tr></table></figure></p>
<h4 id="setrange-key-offset-value">setrange key offset value</h4>
<p>用 value 参数覆写给定 key 所储存的字符串值，从偏移量 offset 开始
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;set mykey1 &quot;hello world&quot;</span><br><span class="line">127.0.0.1:6379&gt;setrange mykey1 6 &quot;redis&quot;</span><br></pre></td></tr></table></figure></p>
<h4 id="strlen-key">strlen key</h4>
<p>返回 key 所储存的字符串值的长度 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;strlen mykey</span><br></pre></td></tr></table></figure></p>
<h4 id="mset-key-value-key-value">mset key value [key value…]</h4>
<p>同时设置一个或多个 key-value 对 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;mset key1 &quot;cat&quot; key2 &quot;bear&quot; key3 &quot;panda&quot;</span><br></pre></td></tr></table></figure></p>
<h4 id="msetnx-key-value-key-value">msetnx key value [key value…]</h4>
<p>同时设置一个或多个 key-value 对，当且仅当所有给定 key 都不存在
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;msetnx rmdbs &quot;MySQL&quot; nosql &quot;MongoDB&quot; key-value-store &quot;redis&quot;</span><br><span class="line">127.0.0.1:6379&gt;mget rmdbs nosql key-value-store</span><br></pre></td></tr></table></figure></p>
<h4 id="psetex-key-milliseconds-value">psetex key milliseconds
value</h4>
<p>这个命令和 SETEX 命令相似，但它以毫秒为单位设置 key
的生存时间，而不是像 SETEX 命令那样，以秒为单位。</p>
<h4 id="incr-key">incr key</h4>
<p>将 key 中储存的数字值增一。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;set page_view 20</span><br><span class="line">127.0.0.1:6379&gt;incr page_view</span><br></pre></td></tr></table></figure></p>
<h4 id="incrby-key-increment">incrby key increment</h4>
<p>将 key 所储存的值加上给定的增量值（increment） 。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;incrby page_view 10</span><br></pre></td></tr></table></figure></p>
<h4 id="incrbyfloat-key-increment">incrbyfloat key increment</h4>
<p>将 key 所储存的值加上给定的浮点增量值（increment） 。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;incrbyfloat page_view 0.1</span><br></pre></td></tr></table></figure></p>
<h4 id="decr-key">decr key</h4>
<p>将 key 中储存的数字值减一。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;set failure_times 10</span><br><span class="line">127.0.0.1:6379&gt;decr failure_times</span><br></pre></td></tr></table></figure></p>
<h4 id="decrby-key-decrement">decrby key decrement</h4>
<p>key 所储存的值减去给定的减量值（decrement） 。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;decrby failure_times 2</span><br></pre></td></tr></table></figure></p>
<h4 id="append-key-value">append key value</h4>
<p>如果 key 已经存在并且是一个字符串， APPEND 命令将 指定value 追加到改
key 原来的值（value）的末尾。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;append myphone &quot;iphone&quot;</span><br><span class="line">127.0.0.1:6379&gt;append myphone &quot; 6 plus&quot;</span><br></pre></td></tr></table></figure></p>
<h3 id="redis-哈希hash">Redis 哈希（Hash）</h3>
<p>Redis hash 是一个 string 类型的 field 和 value 的映射表，hash
特别适合用于存储对象。</p>
<h4 id="hdel-key-field1-field2">hdel key field1 [field2]</h4>
<p>删除一个或多个哈希表字段 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hset fruit name &quot;apple&quot; price &quot;5.8&quot;</span><br><span class="line">127.0.0.1:6379&gt;hdel fruit price</span><br></pre></td></tr></table></figure></p>
<h4 id="hexists-key-field">hexists key field</h4>
<p>查看哈希表 key 中，指定的字段是否存在。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hexists fruit price</span><br></pre></td></tr></table></figure></p>
<h4 id="hget-key-field">hget key field</h4>
<p>获取存储在哈希表中指定字段的值。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hget fruit price</span><br></pre></td></tr></table></figure></p>
<h4 id="hgetall-key">hgetall key</h4>
<p>获取在哈希表中指定 key 的所有字段和值 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hgetall fruit</span><br></pre></td></tr></table></figure></p>
<h4 id="hincrby-key-field-increment">hincrby key field increment</h4>
<p>为哈希表 key 中的指定字段的整数值加上增量 increment 。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hset myhash field 5</span><br><span class="line">127.0.0.1:6379&gt;hincrby myhash field 1</span><br></pre></td></tr></table></figure></p>
<h4 id="hincrbyfloat-key-field-increment">hincrbyfloat key field
increment</h4>
<p>为哈希表 key 中的指定字段的浮点数值加上增量 increment 。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hincrbyfloat fruit price 0.6</span><br></pre></td></tr></table></figure></p>
<h4 id="hkeys-key">hkeys key</h4>
<p>获取所有哈希表中的字段 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hkeys fruit</span><br></pre></td></tr></table></figure></p>
<h4 id="hlen-key">hlen key</h4>
<p>获取哈希表中字段的数量 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hlen fruit</span><br></pre></td></tr></table></figure></p>
<h4 id="hmget-key-field1-field2">hmget key field1 [field2]</h4>
<p>获取所有给定字段的值 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hmget fruit name price</span><br></pre></td></tr></table></figure></p>
<h4 id="hmset-key-field1-value1-field2-value2">hmset key field1 value1
[field2 value2]</h4>
<p>同时将多个 field-value (域-值)对设置到哈希表 key 中。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hmset fruit number 11 size big</span><br></pre></td></tr></table></figure></p>
<h4 id="hset-key-field-value">hset key field value</h4>
<p>将哈希表 key 中的字段 field 的值设为 value 。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hset fruit size small</span><br></pre></td></tr></table></figure></p>
<h4 id="hsetnx-key-frild-value">hsetnx key frild value</h4>
<p>只有在字段 field 不存在时，设置哈希表字段的值。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hsetnx fruit size middle</span><br></pre></td></tr></table></figure></p>
<h4 id="hvals-key">hvals key</h4>
<p>获取哈希表中所有值 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;hvals fruit</span><br></pre></td></tr></table></figure></p>
<h4 id="hscan-key-cursor-match-pattern-count-count">hscan key cursor
[MATCH pattern] [COUNT count]</h4>
<p>迭代哈希表中的键值对。</p>
<h3 id="redis-列表list">Redis 列表(List)</h3>
<p>Redis 列表是简单的字符串列表，按照插入顺序排序。允许重复。 #### blpop
key1 [key2] timeout 移出并获取列表的第一个元素，
如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;blpop mylist 10</span><br></pre></td></tr></table></figure></p>
<h4 id="brpop-key1-key2-timeout">brpop key1 [key2] timeout</h4>
<p>移出并获取列表的最后一个元素，
如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;brpop mylist 10</span><br></pre></td></tr></table></figure></p>
<h4 id="brpoplpush-source-destination-timeout">brpoplpush source
destination timeout</h4>
<p>从列表中弹出一个值，将弹出的元素插入到另外一个列表中并返回它；
如果列表没有元素会阻塞列表直到等待超时或发现可弹出元素为止。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;brpoplpush mylist reciver 10</span><br></pre></td></tr></table></figure></p>
<h4 id="lindex-key-index">lindex key index</h4>
<p>通过索引获取列表中的元素 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;lindex reciver 0</span><br></pre></td></tr></table></figure></p>
<h4 id="linsert-key-beforeafter-pivot-value">linsert key before|after
pivot value</h4>
<p>在列表的元素前或者后插入元素 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;rpush mylist &quot;World&quot;</span><br><span class="line">127.0.0.1:6379&gt;linsert mylist before &quot;World&quot; &quot;Hello&quot;</span><br></pre></td></tr></table></figure></p>
<h4 id="llen-key">llen key</h4>
<p>获取列表长度 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;llen mylist</span><br></pre></td></tr></table></figure></p>
<h4 id="lpop-key">lpop key</h4>
<p>移出并获取列表的第一个元素 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;lpop mylist</span><br></pre></td></tr></table></figure></p>
<h4 id="lpush-key-value1-value2">lpush key value1 [value2]</h4>
<p>将一个或多个值插入到列表头部 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;lpush mylist &quot;this&quot;</span><br><span class="line">127.0.0.1:6379&gt;lpush mylist &quot;that&quot;</span><br></pre></td></tr></table></figure></p>
<h4 id="lpushx-key-value">lpushx key value</h4>
<p>将一个值插入到已存在的列表头部 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;lpushx mylist &quot;foo&quot;</span><br></pre></td></tr></table></figure></p>
<h4 id="lrange-key-start-stop">lrange key start stop</h4>
<p>获取列表指定范围内的元素 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;lrange mylist 0 -1</span><br></pre></td></tr></table></figure></p>
<h4 id="lrem-key-count-value">lrem key count value</h4>
<p>移除列表元素 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;lrem mylist 0 foo</span><br></pre></td></tr></table></figure></p>
<h4 id="lset-key-index-value">lset key index value</h4>
<p>通过索引设置列表元素的值 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;lset mylist 0 &quot;foo&quot;</span><br></pre></td></tr></table></figure></p>
<h4 id="ltrim-key-start-stop">ltrim key start stop</h4>
<p>对一个列表进行修剪(trim)，就是说，让列表只保留指定区间内的元素，不在指定区间之内的元素都将被删除。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;ltrim mylist 1 -1</span><br></pre></td></tr></table></figure></p>
<h4 id="rpop-key">rpop key</h4>
<p>移除并获取列表最后一个元素 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;rpop mylist</span><br></pre></td></tr></table></figure></p>
<h4 id="rpoplpush-source-destination">rpoplpush source destination</h4>
<p>移除列表的最后一个元素，并将该元素添加到另一个列表并返回
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;rpoplpush mylist list1</span><br></pre></td></tr></table></figure></p>
<h4 id="rpush-key-value1-value2">rpush key value1 [value2]</h4>
<p>在列表中添加一个或多个值 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;rpush mylist &quot;hello&quot; &quot;hey&quot; &quot;world&quot;</span><br></pre></td></tr></table></figure></p>
<h4 id="rpushx-key-value">rpushx key value</h4>
<p>为已存在的列表添加值 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;rpushx mylist &quot;hahahaha&quot;</span><br></pre></td></tr></table></figure></p>
<h3 id="redis-集合set">Redis 集合(Set)</h3>
<h4 id="section"></h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure>
<h4 id="section-1"></h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure>
<h4 id="section-2"></h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure>
<h4 id="section-3"></h4>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">127.0.0.1:6379&gt;</span><br><span class="line">127.0.0.1:6379&gt;</span><br></pre></td></tr></table></figure>
<p><strong>参考文档：</strong> <a
href="http://www.runoob.com/redis/redis-tutorial.html">Redis
教程</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Redis</tag>
      </tags>
  </entry>
  <entry>
    <title>压缩备份</title>
    <url>/2018/03/31/%E5%8E%8B%E7%BC%A9%E5%A4%87%E4%BB%BD/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>Percona XtraBackup 实现了对压缩备份的支持。它可以使用 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/glossary.html#term-xbstream">xbstream</a>
压缩、解压缩本地备份或流式备份。</p>
<h1 id="创建压缩备份">创建压缩备份</h1>
<p>为了进行压缩备份，您需要使用 <code>xtrabackup --compress</code>
选项：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --backup --compress --target-dir=/data/compressed/</span><br></pre></td></tr></table></figure>
<p>如果您想加快压缩速度，可以使用并行压缩，可以使用
<code>xtrabackup --compress-threads</code>
选项启用并行压缩。以下示例将使用四个线程进行压缩：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --backup --compress --compress-threads=4 \</span><br><span class="line">--target-dir=/data/compressed/</span><br></pre></td></tr></table></figure>
<p>输出看起来像这样 <span id="more"></span> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">170223 13:00:38 [01] Compressing ./test/sbtest1.frm to /tmp/compressed/test/sbtest1.frm.qp</span><br><span class="line">170223 13:00:38 [01]        ...done</span><br><span class="line">170223 13:00:38 [01] Compressing ./test/sbtest2.frm to /tmp/compressed/test/sbtest2.frm.qp</span><br><span class="line">170223 13:00:38 [01]        ...done</span><br><span class="line">...</span><br><span class="line">170223 13:00:39 [00] Compressing xtrabackup_info</span><br><span class="line">170223 13:00:39 [00]        ...done</span><br><span class="line">xtrabackup: Transaction log of lsn (9291934) to (9291934) was copied.</span><br><span class="line">170223 13:00:39 completed OK!</span><br></pre></td></tr></table></figure></p>
<h1 id="准备备份">准备备份</h1>
<p>在准备备份之前，您需要解压所有文件。 Percona XtraBackup 提供
<code>xtrabackup --decompress</code> 选项，可用于解压备份。</p>
<div class="note default"><p>注意 在继续操作之前，您需要确保已安装 <a
href="http://www.quicklz.com/">qpress</a>。它可以从 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/installation.html#installing-from-binaries">Percona软件仓库</a>获得</p>
</div>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --decompress --target-dir=/data/compressed/</span><br></pre></td></tr></table></figure>
<div class="note default"><p>注意 <code>xtrabackup --parallel</code> 可与
<code>xtrabackup --decompress</code>
选项一起使用,可同时解压缩多个文件。</p>
</div>
<p>Percona XtraBackup 不会自动删除压缩文件。你可以使用
<code>xtrabackup --remove-original</code>
选项清理备份目录。即使它们未被删除，如果使用了
<code>xtrabackup --copy-back</code> 或
<code>xtrabackup --move-back</code>，这些文件也不会被复制或移动到
<code>datadir</code>。</p>
<p>当文件解压后，可以使用 <code>xtrabackup --prepare</code>
选项准备备份：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --prepare --target-dir=/data/compressed/</span><br></pre></td></tr></table></figure>
<p>你应该检查确认信息：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InnoDB: Starting shutdown...</span><br><span class="line">InnoDB: Shutdown completed; log sequence number 9293846</span><br><span class="line">170223 13:39:31 completed OK!</span><br></pre></td></tr></table></figure>
<p>现在 <code>/data/compressed/</code>
中的文件已准备好供服务器使用了。</p>
<h1 id="恢复备份">恢复备份</h1>
<p><strong>xtrabackup</strong> 有一个
<code>xtrabackup --copy-back</code> 选项，它执行将备份还原到服务器的
<code>datadir</code> 目录中：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --copy-back --target-dir=/data/backups/</span><br></pre></td></tr></table></figure>
<p>它会将所有与数据相关的文件复制回服务器的 <code>datadir</code>
目录中，<code>datadir</code> 的位置由服务器的 <code>my.cnf</code>
配置文件决定。您应该检查输出的最后一行以获取成功消息：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">170223 13:49:13 completed OK!</span><br></pre></td></tr></table></figure>
<p>复制数据后应检查文件权限。你可能需要用类似的方法来调整它们：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ chown -R mysql:mysql /var/lib/mysql</span><br></pre></td></tr></table></figure>
<p>现在 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/glossary.html#term-datadir">datadir</a>
包含还原的数据。您现在可以启动服务器了。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>增量备份</title>
    <url>/2018/03/30/%E5%A2%9E%E9%87%8F%E5%A4%87%E4%BB%BD/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p><strong>xtrabackup</strong> 和 <strong>innobackupex</strong>
工具都支持增量备份，这意味着它们可以仅复制自上次备份以来发生更改的数据。</p>
<p>您可以在每次完整备份之间执行多次增量备份，因此您可以这样设置备份过程，例如每周一次完整备份和每天增量备份，或者每天完整备份和每小时增量备份。</p>
<p>增量备份的工作原理是每个 InnoDB 页都包含日志序列号既 LSN。 LSN
是整个数据库的系统版本号。每个页的 LSN 显示了它最近的变化。</p>
<p>增量备份复制那些 LSN 比之前增量备份或完全备份的 LSN
更新的所有页面。有两种算法用于查找要复制的这类页面的集合。第一种算法可用于所有服务器类型和版本，它通过读取所有数据页直接检查页面
LSN。 第二种方法适用于 Percona Server 它启用服务器上<a
href="https://www.percona.com/doc/percona-server/5.6/management/changed_page_tracking.html">更改页面跟踪</a>功能，该功能会在页面被更改时记录下来。这些信息将被写入一个紧凑的单独的所谓的位图文件中。
<strong>xtrabackup</strong>
二进制文件将使用该文件只读取增量备份所需的数据页面，这潜在地节省了很多读取请求。如果<strong>xtrabackup</strong>
程序找到了位图文件，则默认启用后一种算法。即使位图数据可用，也可以指定<code>xtrabackup --incremental-force-scan</code>
来读取所有页面。 <span id="more"></span>
增量备份实际上不会将数据文件与先前备份的数据文件进行比较。实际上，如果您知道
LSN，则可以使用 <code>xtrabackup --incremental-lsn</code>
执行增量备份，而无需拥有以前的备份。增量备份只需读取页面并将其 LSN
与最后一个备份的 LSN
进行比较。但是，您仍需要完整备份才能恢复增量更改;如果没有完整的备份作为基础，增量备份将毫无用处。</p>
<h1 id="创建增量备份">创建增量备份</h1>
<p>要进行增量备份，请照例先开始进行完整备份。
<strong>xtrabackup</strong> 程序将名为
<code>xtrabackup_checkpoints</code>
的文件写入备份的目标目录。该文件包含一行内容显示
<code>to_lsn</code>，这是备份结束时数据库的
LSN。使用以下命令创建完整备份：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --backup --target-dir=/data/backups/base</span><br></pre></td></tr></table></figure>
<p>如果您查看 <code>xtrabackup_checkpoints</code>
文件，您应该看到以下类似的内容，具体取决于您的 LSN 号：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">backup_type = full-backuped</span><br><span class="line">from_lsn = 0</span><br><span class="line">to_lsn = 1626007</span><br><span class="line">last_lsn = 1626007</span><br><span class="line">compact = 0</span><br><span class="line">recover_binlog_info = 1</span><br></pre></td></tr></table></figure>
<p>现在您已经完成了一个完整备份，您可以在它上面进行增量备份。使用以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --backup --target-dir=/data/backups/inc1 \</span><br><span class="line">--incremental-basedir=/data/backups/base</span><br></pre></td></tr></table></figure>
<p><code>/data/backups/inc1/</code> 目录现在应该包含增量文件，例如
<code>ibdata1.delta</code> 和
<code>test/table1.ibd.delta</code>。这些文件代表了自 LSN 1626007
以来所做的更改。如果检查此目录中的 <code>xtrabackup_checkpoints</code>
文件，则应该看到与以下内容类似的内容：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">backup_type = incremental</span><br><span class="line">from_lsn = 1626007</span><br><span class="line">to_lsn = 4124244</span><br><span class="line">last_lsn = 4124244</span><br><span class="line">compact = 0</span><br><span class="line">recover_binlog_info = 1</span><br></pre></td></tr></table></figure>
<p><code>from_lsn</code> 是备份的起始
LSN，对于增量备份，它必须与先前基本备份的
<code>to_lsn</code>（如果它是最后一个检查点的话）相同。</p>
<p>现在可以将此目录用作另一个增量备份的基础：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --backup --target-dir=/data/backups/inc2 \</span><br><span class="line">--incremental-basedir=/data/backups/inc1</span><br></pre></td></tr></table></figure>
<p>该文件夹同样包含 <code>xtrabackup_checkpoints</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">backup_type = incremental</span><br><span class="line">from_lsn = 4124244</span><br><span class="line">to_lsn = 6938371</span><br><span class="line">last_lsn = 7110572</span><br><span class="line">compact = 0</span><br><span class="line">recover_binlog_info = 1</span><br></pre></td></tr></table></figure>
<div class="note default"><p>注意 在这种情况下，您可以看到 <code>to_lsn</code> （上次检查点
LSN）和 <code>last_lsn</code> （上次复制的
LSN）之间存在差异，这意味着备份过程中服务器上存在一些操作流量。</p>
</div>
<h1 id="准备增量备份">准备增量备份</h1>
<p>增量备份的 <code>xtrabackup --prepare</code>
步骤与完整备份的步骤不同。在完整备份中，执行两种类型的操作以使数据库保持一致：从日志文件中针对数据文件重演已提交的事务，并回滚未提交的事务。在准备增量备份时，您必须跳过未提交事务的回滚，因为备份时未提交的事务可能正在进行，并且很可能会在下一次增量备份中提交。您应该使用
<code>xtrabackup --apply-log-only</code> 选项来阻止回滚阶段。</p>
<div class="note danger"><p>警告 如果您不使用 <code>xtrabackup --apply-log-only</code>
选项来阻止回滚阶段，那么您的增量备份将毫无用处。事务回滚后，也不能应用进一步的增量备份。</p>
</div>
<p>从创建完整备份开始，您就可以准备它，然后将增量差异应用于该备份。回想一下，您有以下备份：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/data/backups/base</span><br><span class="line">/data/backups/inc1</span><br><span class="line">/data/backups/inc2</span><br></pre></td></tr></table></figure>
<p>要准备基础备份，您需要照例运行 <code>xtrabackup --prepare</code>
，但要阻止回滚阶段：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --prepare --apply-log-only --target-dir=/data/backups/base</span><br></pre></td></tr></table></figure>
<p>输出应该与下面的文本结束：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InnoDB: Shutdown completed; log sequence number 1626007</span><br><span class="line">161011 12:41:04 completed OK!</span><br></pre></td></tr></table></figure>
<p>日志序列号应该与您之前看到的基础备份的 <code>to_lsn</code> 匹配。</p>
<div class="note default"><p>注意
即使回滚阶段已被跳过，此备份实际上仍然可以安全地恢复到现在的状态。如果你恢复并启动
MySQL，InnoDB
会检测到回滚阶段没有执行，并且它会在后台执行，就像它为崩溃恢复启动时做的那样。它会通知您数据库未正常关闭。</p>
</div>
<p>要将第一次增量备份应用到完全备份，请运行以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --prepare --apply-log-only --target-dir=/data/backups/base \</span><br><span class="line">--incremental-dir=/data/backups/inc1</span><br></pre></td></tr></table></figure>
<p>这会将增量文件应用于 <code>/data/backups/base</code>
中，这会将它们向前滚到增量备份的时间。然后像往常一样将重做日志应用于结果。最终数据位于
<code>/data/backups/base</code>
目录中，不在增量目录中。您应该看到类似于以下内容的输出：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">incremental backup from 1626007 is enabled.</span><br><span class="line">xtrabackup: cd to /data/backups/base</span><br><span class="line">xtrabackup: This target seems to be already prepared with --apply-log-only.</span><br><span class="line">xtrabackup: xtrabackup_logfile detected: size=2097152, start_lsn=(4124244)</span><br><span class="line">...</span><br><span class="line">xtrabackup: page size for /tmp/backups/inc1/ibdata1.delta is 16384 bytes</span><br><span class="line">Applying /tmp/backups/inc1/ibdata1.delta to ./ibdata1...</span><br><span class="line">...</span><br><span class="line">161011 12:45:56 completed OK!</span><br></pre></td></tr></table></figure>
<p>同样，LSN 应该与您在早期检查第一次增量备份时看到的一致。如果您从
<code>/data/backups/base</code>
恢复文件，则应该在第一次增量备份时看到数据库的状态。</p>
<p>准备第二次增量备份是一个类似的过程：对（已修改的）基础备份应用增量文件，并且及时将数据前滚到第二次增量备份的位置：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --prepare --target-dir=/data/backups/base \</span><br><span class="line">--incremental-dir=/data/backups/inc2</span><br></pre></td></tr></table></figure>
<div class="note default"><p>注意 合并除最后一个之外的所有增量备份时，都应使用
<code>xtrabackup --apply-log-only</code>。这就是为什么上一行不包含
<code>xtrabackup --apply-log-only</code> 选项。即使在最后一步使用了
<code>xtrabackup --apply-log-only</code>
，备份仍然是一致的，但在这种情况下，服务器将执行回滚阶段。</p>
</div>
<p>一旦像完整备份那样准备好增量备份，它们就可以以完整备份那样的方式恢复。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>git 别名配置</title>
    <url>/2018/04/02/git-%E5%88%AB%E5%90%8D%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>记录我自己配置的 git 别名。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">root ~ $ cat .gitconfig</span><br><span class="line">[user]</span><br><span class="line">	name = toypipi</span><br><span class="line">	email = 275688469@qq.com</span><br><span class="line">[credential]</span><br><span class="line">	helper = store</span><br><span class="line">[i18n]</span><br><span class="line">	commitencoding = utf-8</span><br><span class="line">	logoutputencoidng = utf-8</span><br><span class="line">	encoding = utf-8</span><br><span class="line">[core]</span><br><span class="line">	autocrlf = input</span><br><span class="line">[alias]</span><br><span class="line">	lg = log --color --graph --pretty=format:&#x27;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#x27; --abbrev-commit</span><br><span class="line">	ci = commit</span><br><span class="line">	st = status</span><br><span class="line">	pl = pull</span><br><span class="line">	ph = push</span><br><span class="line"></span><br></pre></td></tr></table></figure> <span id="more"></span></p>
<p><strong>参考文档：</strong> <a
href="https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000/001375234012342f90be1fc4d81446c967bbdc19e7c03d3000">配置别名</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>别名</tag>
      </tags>
  </entry>
  <entry>
    <title>连接和权限</title>
    <url>/2018/03/27/%E8%BF%9E%E6%8E%A5%E5%92%8C%E6%9D%83%E9%99%90/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>Percona XtraBackup
需要能够连接到数据库服务器，并在创建备份、某些场景下进行准备以及恢复时需要在服务器和<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/glossary.html#term-datadir">数据目录</a>上执行操作。为此，必须满足其执行操作时的权限和许可要求。</p>
<p>权限是指允许在数据库服务器中执行操作的系统用户。<strong>它们设置在数据库服务器上，仅适用于数据库服务器中的用户</strong>。</p>
<p>许可是允许用户在系统上执行操作的权限，例如读取、写入某个目录或启动、停止系统服务。<strong>它们设置在系统级别，仅适用于系统用户</strong>。</p>
<p>无论使用 <strong>xtrabackup</strong> 还是
<strong>innobackupex</strong>
，都有两个参与者：用户调用程序既系统用户，用户在数据库服务器中执行操作既数据库用户。请注意，这两个用户的作用域是不同的，尽管他们可能有相同的用户名。</p>
<p>在本文档中，<strong>innobackupex</strong> 和
<strong>xtrabackup</strong>
的所有调用都假定系统用户已经具有适当的权限，并且除了要执行的操作选项外，您还提供了用于连接数据库服务器的相关选项，并且数据库用户具有足够的权限。
<span id="more"></span> # 连接到服务器</p>
<p>用于连接服务器的数据库用户及其密码由 <code>xtrabackup --user</code>
和 <code>xtrabackup --password</code> 选项指定： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --user=DVADER --password=14MY0URF4TH3R --backup \</span><br><span class="line">  --target-dir=/data/bkps/</span><br><span class="line">$ innobackupex --user=DBUSER --password=SECRET /path/to/backup/dir/</span><br><span class="line">$ innobackupex --user=LUKE --password=US3TH3F0RC3 --stream=tar ./ | bzip2 -</span><br></pre></td></tr></table></figure></p>
<p>如果您不使用 <code>xtrabackup --user</code> 选项，Percona XtraBackup
将假定数据库用户名为正在执行备份的系统用户名。</p>
<h1 id="其他连接选项">其他连接选项</h1>
<p>根据您的系统环境，您可能需要指定一个或多个以下选项才能连接到服务器：</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>-port</td>
<td>使用 TCP/IP 连接到数据库服务器时使用的端口。</td>
</tr>
<tr>
<td>-socket</td>
<td>连接到本地数据库时使用的套接字。</td>
</tr>
<tr>
<td>-host</td>
<td>使用 TCP/IP 连接到数据库服务器时使用的主机。</td>
</tr>
</tbody>
</table>
<p>这些选项不加改变地传递给 mysql 子进程，详情参见
<code>mysql --help</code> 。</p>
<div class="note default"><p>注意 在多服务器实例的情况下，必须指定正确的连接参数（port, socket,
host）以便 <strong>xtrabackup</strong> 与正确的服务器通信。</p>
</div>
<h1 id="需要的许可和权限">需要的许可和权限</h1>
<p>一旦连接到服务器，为了执行备份，您需要在服务器的 <code>datadir</code>
中具有文件系统级别的 <code>READ</code>，<code>WRITE</code> 和
<code>EXECUTE</code> 权限。</p>
<p>数据库用户需要在要备份的表和数据库上具有以下权限：</p>
<ul>
<li><code>RELOAD</code> 和 <code>LOCK TABLES</code>（除非指定了
<code>--no-lock</code> 选项），为了在开始复制文件之前，使用
<code>FLUSH TABLES WITH READ LOCK</code> 和
<code>FLUSH ENGINE LOGS</code>，当使用 <a
href="https://www.percona.com/doc/percona-server/5.6/management/backup_locks.html">Backup
Locks</a> 时 <code>LOCK TABLES FOR BACKUP</code> 和
<code>LOCK BINLOG FOR BACKUP</code> 需要此权限，</li>
<li><code>REPLICATION CLIENT</code>为了获得二进制日志的位置，</li>
<li><code>CREATE TABLESPACE</code> 为了导入数据表（请参阅 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/innobackupex/restoring_individual_tables_ibk.html#imp-exp-ibk">恢复个别数据表</a>），</li>
<li><code>PROCESS</code> 为了运行
<code>SHOW ENGINE INNODB STATUS</code>（这是必需的），并且可以选择查看服务器上正在运行的所有线程（请参阅
<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/innobackupex/improved_ftwrl.html#improved-ftwrl">改进的
FLUSH TABLES WITH READ LOCK 处理</a>），</li>
<li><code>SUPER</code> 为了在复制环境中启动或停止从属线程，使用用于<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/xtrabackup_bin/incremental_backups.html#xb-incremental">增量备份</a>的<a
href="https://www.percona.com/doc/percona-server/5.6/management/changed_page_tracking.html">XtraDB
改变页面跟踪</a> 和<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/innobackupex/improved_ftwrl.html#improved-ftwrl">改进的
FLUSH TABLES WITH READ LOCK 处理</a>，</li>
<li><code>CREATE</code> 权限为了创建
<code>PERCONA_SCHEMA.xtrabackup_history</code> 数据库和表，</li>
<li><code>INSERT</code> 权限，以便将历史记录添加到
<code>PERCONA_SCHEMA.xtrabackup_history</code> 表中，</li>
<li><code>SELECT</code> 权限以便使用
<code>innobackupex --incremental-history-name</code> 或
<code>innobackupex --incremental-history-uuid</code>
，以便该功能查找<code>PERCONA_SCHEMA.xtrabackup_history</code> 表中的
<code>innodb_to_lsn</code> 值。</li>
</ul>
<p>在<a
href="https://toypipi.github.io/2018/03/23/Percona-XtraBackup-%E5%A6%82%E4%BD%95%E5%B7%A5%E4%BD%9C/">Percona
XtraBackup 如何工作</a>中可以找到何时使用它们的解释。</p>
<p>使用完整备份所需的最小权限创建数据库用户的SQL示例为：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE USER &#x27;bkpuser&#x27;@&#x27;localhost&#x27; IDENTIFIED BY &#x27;s3cret&#x27;;</span><br><span class="line">mysql&gt; GRANT RELOAD, LOCK TABLES, PROCESS, REPLICATION CLIENT ON *.* TO</span><br><span class="line">       &#x27;bkpuser&#x27;@&#x27;localhost&#x27;;</span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br></pre></td></tr></table></figure></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>配置 xtrabackup</title>
    <url>/2018/03/28/%E9%85%8D%E7%BD%AE-xtrabackup/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>所有 <strong>xtrabackup</strong>
配置都是通过选项完成的，这些选项的行为与标准 MySQL
程序选项完全相同：它们可以在命令行或通过诸如 <code>/etc/my.cnf</code>
的文件中指定。</p>
<p><strong>xtrabackup</strong> 以 [mysqld] 和 [xtrabackup]
的顺序从任意配置文件中读取配置选项。因此它可以从现有的 MySQL
安装中读取已经配置的选项，例如 datadi r或一些 InnoDB
选项。如果您想要覆盖这些内容，只需在 [xtrabackup]
部分中指定它们，因为它稍后被读取，所以优先级更高。</p>
<p>如果你不想这么做，你也可以不用在 my.cnf
中添加任何配置。您可以简单地在命令行上指定选项。通常，您可能会发现在
my.cnf 文件中的 [xtrabackup] 使用 target_dir
选项来指定默认备份目录会很方便，例如： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[xtrabackup]</span><br><span class="line">target_dir = /data/backups/mysql/</span><br></pre></td></tr></table></figure> <span id="more"></span>
本手册假定您没有任何基于文件的 <strong>xtrabackup</strong>
配置，因此它将始终显示使用的命令行选项。有关所有配置选项的详细信息，请参阅<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/xtrabackup_bin/xbk_option_reference.html#xbk-option-reference">选项和变量参考</a>。</p>
<p><strong>xtrabackup</strong> 不支持 my.cnf 文件中与 mysqld
服务器二进制文件完全相同的语法。由于历史原因，mysqld 服务器程序允许带有
<code>--set-variable=&lt;variable&gt;=&lt;value&gt;</code>
语法的参数，<strong>xtrabackup</strong> 不支持这种配置。如果你的 my.cnf
文件中有这样的配置指令，你应该用 <code>--variable=value</code>
语法重写它们。</p>
<h1 id="系统配置和nfs卷">系统配置和NFS卷</h1>
<p><strong>xtrabackup</strong>
工具在大多数系统上不需要特殊配置。但是，调用 <code>fsync()</code>
时，<code>xtrabackup --target-dir</code>
指定的存储必须正常运行。特别地，我们注意到，不使用 <code>sync</code>
选项挂载的 NFS 卷可能不会真正地同步数据。因此，如果您将数据备份到使用
async 选项安装的 NFS
卷，然后尝试从另一个也安装该卷的服务器准备备份，则数据可能看起来已损坏。您可以使用
<code>sync mount</code> 选项来避免此问题。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>Percona XtraBackup 用户手册</title>
    <url>/2018/04/03/Percona-XtraBackup-%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>Percona XtraBackup 包含以下工具组：</p>
<p><a href="">innobackupex</a> <strong>innobackupex</strong> 是
<strong>xtrabackup</strong> 的符号链接。 <strong>innobackupex</strong>
仍支持 2.2
版本的所有功能和语法，但现在已被弃用，并将在下一个主要版本中删除。</p>
<p><a href="">xtrabackup</a> 它是一个编译的 C
二进制文件，它提供了备份整个包含 MyISAM，InnoDB 和 XtraDB 表的 MySQL
数据库实例的功能。</p>
<p><a href="">xbcrypt</a> 用于加密和解密备份文件的实用程序。</p>
<p><a href="">xbstream</a> 用于从 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/glossary.html#term-xbstream">xbstream</a>
格式流式存储和提取文件的实用程序。</p>
<p><a href="">xbcloud</a> 用于从云中下载或上传 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/glossary.html#term-xbstream">xbstream</a>
存档的全部或部分内容的实用程序。 <span id="more"></span> Percona XtraBackup 2.3
发布后，建议使用 xtrabackup 脚本的方式备份。
有关脚本选项的更多信息可以在<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/xtrabackup_bin/xtrabackup_binary.html">如何使用
xtrabackup 中找到</a>。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>加密备份</title>
    <url>/2018/04/02/%E5%8A%A0%E5%AF%86%E5%A4%87%E4%BB%BD/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>Percona XtraBackup 已经实现了对加密备份的支持。它可用于使用
<code>xbstream</code> 选项加密、解密本地备份或流式备份（不支持流式 tar
备份），以便为备份添加另一层保护。加密是通过 <code>libgcrypt</code>
库完成的。</p>
<p>#创建加密备份</p>
<p>要创建一个加密备份，需要指定以下选项（选项
<code>xtrabackup --encrypt-key</code> 和
<code>xtrabackup --encrypt-key-file</code>
是互斥的，即只需要提供其中的一个就行）：</p>
<ul>
<li><code>--encrypt=ALGORITHM</code> -
目前支持的算法有：<code>AES128</code>，<code>AES192</code> 和
<code>AES256</code></li>
<li><code>--encrypt-key=ENCRYPTION_KEY</code> -
使用适当长度的加密密钥。不建议在通过命令行访问机器的情况下使用此选项，因为该密钥在执行过程中会被打印输出。</li>
<li><code>--encrypt-key-file=KEYFILE</code> -
可从中读取适当长度的原始密钥的文件的名称。该文件必须是一个简单的二进制（或文本）文件，其中准确存储了需要使用的密钥。</li>
</ul>
<p><code>xtrabackup --encrypt-key</code>
选项和<code>xtrabackup --encrypt-key-file</code>
选项均可用于指定加密密钥。加密密钥可以使用如下命令生成：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ openssl rand -base64 24</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>该命令的输出示例如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GCHFLrDFVx6UAsRb88uLVbAVWbK+Yzfs</span><br></pre></td></tr></table></figure>
<p>该值稍后可以用作加密密钥</p>
<h1 id="使用---encrypt-key-选项">使用 <code>--encrypt-key</code>
选项</h1>
<p>使用 <code>xtrabackup --encrypt-key</code> 的 xtrabackup
命令示例应如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --backup --target-dir=/data/backups --encrypt=AES256 \</span><br><span class="line">--encrypt-key=&quot;GCHFLrDFVx6UAsRb88uLVbAVWbK+Yzfs&quot;</span><br></pre></td></tr></table></figure>
<h1 id="使用---encrypt-key-file-选项">使用
<code>--encrypt-key-file</code> 选项</h1>
<p>使用 <code>xtrabackup --encrypt-key-file</code> 的 xtrabackup
命令示例应如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --backup --target-dir=/data/backups/ --encrypt=AES256 \</span><br><span class="line">--encrypt-key-file=/data/backups/keyfile</span><br></pre></td></tr></table></figure>
<div class="note default"><p>注意 在某些情况下，使用不同的文本编辑器生成 <code>KEYFILE</code>
，文本文件可能包含
CRLF，这将导致密钥大小增大，从而使其无效。建议使用如下方法创建密钥文件：<code>echo -n "GCHFLrDFVx6UAsRb88uLVbAVWbK+Yzfs" &gt; /data/backups/keyfile</code></p>
</div>
<h1 id="优化加密过程">优化加密过程</h1>
<p>有两个可用于加速加密过程的加密备份选项。分别是
<code>xtrabackup --encrypt-threads</code> 和
<code>xtrabackup --encrypt-chunk-size</code>。通过使用
<code>xtrabackup --encrypt-threads</code>
选项，可以指定多个线程用于并行加密。选项
<code>xtrabackup --encrypt-chunk-size</code>
可用于指定每个加密线程的加密缓冲区的大小（以字节为单位）（默认值为64K）。</p>
<h1 id="解密加密备份">解密加密备份</h1>
<p>Percona XtraBackup 已经实现了用于解密备份的解密选项
<code>xtrabackup --decrypt</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --decrypt=AES256 --encrypt-key=&quot;GCHFLrDFVx6UAsRb88uLVbAVWbK+Yzfs&quot;\</span><br><span class="line">--target-dir=/data/backups/</span><br></pre></td></tr></table></figure>
<p>Percona XtraBackup
不会自动删除加密文件。为了清理备份目录，用户应该自行删除
<code>*.xbcrypt</code> 文件。在 Percona XtraBackup 2.4.6 中，您可以使用
<code>xtrabackup --remove-original</code>
选项在解密后删除加密文件。要在解密文件后删除文件，您应该运行：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --decrypt=AES256 --encrypt-key=&quot;GCHFLrDFVx6UAsRb88uLVbAVWbK+Yzfs&quot;\</span><br><span class="line">--target-dir=/data/backups/ --remove-original</span><br></pre></td></tr></table></figure>
<div class="note default"><p>注意 <code>xtrabackup --parallel</code> 可与
<code>xtrabackup --decrypt</code> 选项一起使用，同时解密多个文件。</p>
</div>
<p>当文件已经被解密时，可以准备备份了。</p>
<h1 id="准备加密备份">准备加密备份</h1>
<p>备份解密后，可以使用 <code>xtrabackup --prepare</code>
选项以与标准完整备份相同的方式进行准备：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --prepare --target-dir=/data/backups/</span><br></pre></td></tr></table></figure>
<h1 id="恢复加密的备份">恢复加密的备份</h1>
<p><strong>xtrabackup</strong> 有一个
<code>xtrabackup --copy-back</code> 选项，可用于将备份还原到服务器的
<code>datadir</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --copy-back --target-dir=/data/backups/</span><br></pre></td></tr></table></figure>
<p>它会将所有与数据相关的文件复制到服务器的
<code>datadir</code>，需要复制的文件由服务器的 <code>my.cnf</code>
配置文件决定。您应该检查输出的最后一行以获取成功消息：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">170214 12:37:01 completed OK!</span><br></pre></td></tr></table></figure>
<h1 id="其他阅读">其他阅读</h1>
<ul>
<li><a
href="https://www.gnupg.org/documentation/manuals/gcrypt/">Libgcrypt
参考手册</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>XtraBackup 二进制程序</title>
    <url>/2018/04/04/XtraBackup-%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%A8%8B%E5%BA%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p><strong>xtrabackup</strong> 二进制程序是一个已经编译好的，链接到
InnoDB 库和标准 MySQL 客户端库的 C 程序。 InnoDB
库提供了将日志文件应用于数据文件所需的功能，MySQL
客户端库提供了命令行选项解析，配置文件解析等，以使
<strong>xtrabackup</strong> 二进制具有 MySQL 客户端类似的外观。</p>
<p>该工具以 <code>--backup</code> 或 <code>--prepare</code>
模式运行，分别对应于它执行的两个主要功能。这些函数有几种不同的变体来完成不同的任务，并且有两种不常用的模式
<code>--stats</code> 和 <code>--print-param</code>。</p>
<h1 id="其他类型的备份">其他类型的备份</h1>
<h2 id="增量备份">增量备份</h2>
<p><strong>xtrabackup</strong> 和 <strong>innobackupex</strong>
工具都支持增量备份，这意味着它可以只复制自上次完全备份以来更改过的数据。您可以在每个完全备份之间执行多次增量备份，因此您可以设置这样的备份过程，例如每周一次完全备份和每天增量备份，或每天完全备份和每小时增量备份。</p>
<span id="more"></span>
<p>增量备份基于每个 InnoDB 页面（通常大小为 16kb）都包含日志序列号或 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/glossary.html#term-lsn">LSN</a>
而工作。 LSN 是整个数据库的系统版本号。每个页面的 LSN
显示了最近的数据变化。增量备份复制那些 LSN 比先前增量或完全备份的 LSN
更新的每个页面。有两种算法用于查找要复制的这类页面的集合。第一种可用于所有服务器类型和版本，通过读取所有数据页直接检查页面
LSN。 第二种方法仅适用于 Percona Server，Percona Server
通过启用服务器上更改页面跟踪功能，该功能会记录更改的页面。这些信息将被写入一个紧凑的单独的所谓的位图文件中。
<strong>xtrabackup</strong>
二进制程序将使用该文件读取增量备份所需的数据页面，这会节省很多读取请求。如果
<strong>xtrabackup</strong>
二进制程序找到位图文件，则默认启用后一种算法。即使位图文件可用，也可以指定
<code>--incremental-force-scan</code> 来读取所有页面。</p>
<p>增量备份实际上不会将数据文件与先前备份的数据文件进行比较。实际上，如果您知道
LSN，则可以使用 <code>--incremental-lsn</code>
执行增量备份，而无需使用以前的备份。增量备份只需读取页面并将其 LSN
与最后一个备份的 LSN
进行比较。但是，您仍需要完整备份才能恢复增量备份;如果没有完整的备份作为基础，增量备份将毫无用处。</p>
<h3 id="创建增量备份">创建增量备份</h3>
<p>要进行增量备份，照例先进行完整备份。 <strong>xtrabackup</strong>
二进制程序将名为 <code>xtrabackup_checkpoints</code>
的文件写入备份的目标目录中。该文件包含一行显示<code>to_lsn</code>，这是备份结束时数据库的
LSN。使用以下命令创建完整备份：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xtrabackup --backup --target-dir=/data/backups/base --datadir=/var/lib/mysql/</span><br></pre></td></tr></table></figure>
<p>如果您想要一个可用的完整备份，请使用
<strong>innobackupex</strong>，因为 xtrabackup
本身不会复制表定义，触发器或其他任何不是 .ibd 的文件。</p>
<p>如果您查看 <code>xtrabackup_checkpoints</code>
文件，您应该看到以下类似的内容：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">backup_type = full-backuped</span><br><span class="line">from_lsn = 0</span><br><span class="line">to_lsn = 1291135</span><br></pre></td></tr></table></figure>
<p>现在您已经完成了一个完整备份，您可以根据它进行增量备份。使用如下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xtrabackup --backup --target-dir=/data/backups/inc1 \</span><br><span class="line">--incremental-basedir=/data/backups/base --datadir=/var/lib/mysql/</span><br></pre></td></tr></table></figure>
<p><code>/data/backups/inc1/</code> 目录现在应该包含增量文件，例如
<code>ibdata1.delta</code> 和
<code>test/table1.ibd.delta</code>。这些表示自 <code>LSN 1291135</code>
以来数据库所做的更改。如果检查此目录中的
<code>xtrabackup_checkpoints</code> 文件，您应该看到以下类似内容：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">backup_type = incremental</span><br><span class="line">from_lsn = 1291135</span><br><span class="line">to_lsn = 1291340</span><br></pre></td></tr></table></figure>
<p>含义是不言而喻的。现在可以将此目录用作另一个增量备份的基础：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xtrabackup --backup --target-dir=/data/backups/inc2 \</span><br><span class="line">--incremental-basedir=/data/backups/inc1 --datadir=/var/lib/mysql/</span><br></pre></td></tr></table></figure>
<h3 id="准备增量备份">准备增量备份</h3>
<p>增量备份的 <code>--prepare</code>
步骤与完全备份的步骤不同。在完全备份中，执行两种类型的操作来使数据库保持一致：在数据文件上应用日志文件中已提交的事务，并回滚未提交的事务。在准备增量备份时，您必须跳过未提交事务的回滚，因为备份时未提交的事务可能正在进行，并且很可能会在下一次增量备份中提交。您应该使用<code>--apply-log-only</code>
选项来防止回滚阶段。</p>
<p><strong>如果您不使用 <code>--apply-log-only</code>
选项来阻止回滚阶段，那么您的增量备份将毫无用处。</strong>
事务回滚后，也不能对其进行进一步的增量备份。</p>
<p>从创建完整备份开始准备，然后将增量差异应用于该备份。回想一下，您有以下三个备份：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/data/backups/base</span><br><span class="line">/data/backups/inc1</span><br><span class="line">/data/backups/inc2</span><br></pre></td></tr></table></figure>
<p>要准备完全备份，您需要像往常一样运行
<code>--prepare</code>，但要防止回滚阶段：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xtrabackup --prepare --apply-log-only --target-dir=/data/backups/base</span><br></pre></td></tr></table></figure>
<p>输出应该类似于下面的文本：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">101107 20:49:43  InnoDB: Shutdown completed; log sequence number 1291135</span><br></pre></td></tr></table></figure>
<p>日志序列号应该与您之前看到的基础备份的 <code>to_lsn</code> 一样。</p>
<p>即使回滚阶段已被跳过，此备份实际上仍然可以安全地恢复到现在的状态。如果您恢复并启动
MySQL，InnoDB
会检测到回滚阶段没有执行，并且会在后台执行它，就像在启动时通常用于崩溃恢复一样。它会通知您数据库未正常关闭。</p>
<p>要将第一次增量备份应用于完整备份，您应该使用以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xtrabackup --prepare --apply-log-only --target-dir=/data/backups/base \</span><br><span class="line">--incremental-dir=/data/backups/inc1</span><br></pre></td></tr></table></figure>
<p>这会将增量文件应用于 <code>/data/backups/base</code>
中的文件，这些文件会将它们及时前滚到增量备份的时间。然后像照例将重做日志应用于结果。最终数据位于/
<code>/data/backups/base</code>
中，不在增量目录中。您应该看到如下的输出：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">incremental backup from 1291135 is enabled.</span><br><span class="line">xtrabackup: cd to /data/backups/base/</span><br><span class="line">xtrabackup: This target seems to be already prepared.</span><br><span class="line">xtrabackup: xtrabackup_logfile detected: size=2097152, start_lsn=(1291340)</span><br><span class="line">Applying /data/backups/inc1/ibdata1.delta ...</span><br><span class="line">Applying /data/backups/inc1/test/table1.ibd.delta ...</span><br><span class="line">.... snip</span><br><span class="line">101107 20:56:30  InnoDB: Shutdown completed; log sequence number 1291340</span><br></pre></td></tr></table></figure>
<p>再说一次，LSN 应该与先前检查第一次增量备份时看到的一致。如果您从
<code>/data/backups/base</code>
恢复文件，则应该可以看到第一次增量备份时的数据库状态。</p>
<p>准备第二次增量备份是一个类似的过程：对（已修改的）基础备份应用增量，并且及时将数据前滚到第二次增量备份时的状态：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xtrabackup --prepare --target-dir=/data/backups/base \</span><br><span class="line">--incremental-dir=/data/backups/inc2</span><br></pre></td></tr></table></figure>
<div class="note default"><p>注意 合并除最后一个之外的所有增量备份时，都应该使用
<code>--apply-log-only</code>。这就是上一行不包含
<code>--apply-log-only</code> 选项的原因。即使在最后一步使用了
<code>--apply-log-only</code>
，备份仍然是一致的，但在这种情况下，服务器将执行回滚阶段。</p>
</div>
<p>当您已将所需增量应用于基本备份时, 如果想避免收到关于 InnoDB
未正常关闭的通知。那么，可以再次运行 <code>--prepare</code>
而不禁用回滚阶段。</p>
<h2 id="部分备份">部分备份</h2>
<p>当启用 <code>innodb_file_per_table</code>
选项时，<strong>xtrabackup</strong>
支持部分备份。有三种方法可以创建部分备份：使用正则表达式匹配表名，提供一个包含表明列表的文件或提供一个包含数据库和表名列表的文件。</p>
<div class="note danger"><p>警告 如果在备份过程中删除了任何匹配到的或已经列出的表，则
<strong>xtrabackup</strong> 将会执行失败。</p>
</div>
<p>为了达到演示本手册内容的目的，我们假设有一个名为 <code>test</code>
的数据库，其中包含名为 <code>t1</code> 和 <code>t2</code> 的表。</p>
<h3 id="使用---tables-选项">使用 <code>--tables</code> 选项</h3>
<p>第一种备份方法是使用 <code>--tables</code>
选项。该选项的值是一个正则表达式，它以
<code>databasename.tablename</code>
的形式与完全限定的表名（包括数据库名称）相匹配。</p>
<p>仅备份 <code>test</code> 数据库中的表，可以使用以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --backup --datadir=/var/lib/mysql --target-dir=/data/backups/ \</span><br><span class="line">--tables=&quot;^test[.].*&quot;</span><br></pre></td></tr></table></figure>
<p>仅备份 <code>test.t1</code> 表，可以使用以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --backup --datadir=/var/lib/mysql --target-dir=/data/backups/ \</span><br><span class="line">--tables=&quot;^test[.]t1&quot;</span><br></pre></td></tr></table></figure>
<h3 id="使用---tables-file-选项">使用 <code>--tables-file</code>
选项</h3>
<p><code>--tables-file</code>
选项指定一个文件，该文件可以包含多张表名，文件中每行写入一张表名。只有在该文件中列出的表才会被备份。表名需要完全匹配，区分大小写，不能使用模式或正则表达式匹配。表名必须是完全限定的，采用
<code>databasename.tablename</code> 的格式。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ echo &quot;mydatabase.mytable&quot; &gt; /tmp/tables.txt</span><br><span class="line">$ xtrabackup --backup --tables-file=/tmp/tables.txt</span><br></pre></td></tr></table></figure>
<h3 id="使用---databases-和---databases-file-选项">使用
<code>--databases</code> 和 <code>--databases-file</code> 选项</h3>
<p><code>--databases</code> 选项指定用空格分隔的数据库和表名列表，以
<code>databasename[.tablename]</code> 的形式。
<code>--databases-file</code>
选项指定一个包含上述格式的多张数据库和表文件，该文件中每行包含一张要备份的表名。只有列出的数据库和表将被备份。表名需要完全匹配，区分大小写，不能使用模式或正则表达式匹配。</p>
<h3 id="准备备份">准备备份</h3>
<p>在部分备份上使用 <code>--prepare</code>
选项时，会看到有关表不存在的警告。这是因为这些表存在于
<code>InnoDB</code> 内的数据字典中，但相应的 <code>.ibd</code>
文件不存在。这些表没有被复制到备份目录中。当您恢复备份并启动
<code>InnoDB</code>
时，这些表将从数据字典中删除，不再存在，并且不会有任何错误或警告打印到日志文件中。</p>
<p>在准备阶段您将看到的错误消息的示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InnoDB: Reading tablespace information from the .ibd files...</span><br><span class="line">101107 22:31:30  InnoDB: Error: table &#x27;test1/t&#x27;</span><br><span class="line">InnoDB: in InnoDB data dictionary has tablespace id 6,</span><br><span class="line">InnoDB: but tablespace with that id or name does not exist. It will be removed from data dictionary.</span><br></pre></td></tr></table></figure>
<h2 id="紧凑备份">紧凑备份</h2>
<p>在进行 InnoDB
表的备份时，可以省略二级索引页面。这将使备份更加紧凑，占用更少的磁盘空间。这样做的缺点是准备备份的过程需要更长的时间，因为需要重新创建这些二级索引。备份大小的差异取决于二级索引的大小。</p>
<p>例如，以下分别为不使用和使用 <code>--compact</code>
选项的完整备份大小：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#backup size without --compact</span><br><span class="line">2.0G  xb_backup</span><br><span class="line"></span><br><span class="line">#backup size taken with --compact option</span><br><span class="line">1.4G  xb_compact_backup</span><br></pre></td></tr></table></figure>
<div class="note default"><p>注意 系统表空间不支持紧凑备份，因此为了能够正确运行备份程序，应该启用
<code>innodb-file-per-table</code> 选项。</p>
</div>
<p>此功能在 <em>Percona XtraBackup 2.1</em> 中引入。</p>
<h3 id="创建紧凑备份">创建紧凑备份</h3>
<p>要创建紧凑备份 innobackupex 启动时需要使用 <code>--compact</code>
选项：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --backup --compact --target-dir=/data/backups</span><br></pre></td></tr></table></figure>
<p>这将在 <code>/data/backups</code> 目录中创建一个紧凑备份。</p>
<p>如果您检查 <code>target-dir</code> 文件夹中的
<code>xtrabackup-checkpoints</code> 文件，您应该看到如下所示的内容：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">backup_type = full-backuped</span><br><span class="line">from_lsn = 0</span><br><span class="line">to_lsn = 2888984349</span><br><span class="line">last_lsn = 2888984349</span><br><span class="line">compact = 1</span><br></pre></td></tr></table></figure>
<p>当未使用 <code>--compact</code> 时，<code>compact</code> 的值将为
0。通过这种方式，很容易检查备份是否包含辅助索引页。</p>
<h3 id="准备紧凑备份">准备紧凑备份</h3>
<p>准备紧凑备份需要重建索引。为了准备备份，应该使用一个新选项
<code>--rebuild-indexes</code>：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --prepare --rebuild-indexes /data/backups/</span><br></pre></td></tr></table></figure>
<p>除了标准 <strong>innobackupex</strong>
输出之外，输出还应包含重建索引的信息，如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[01] Checking if there are indexes to rebuild in table sakila/city (space id: 9)</span><br><span class="line">[01]   Found index idx_fk_country_id</span><br><span class="line">[01]   Rebuilding 1 index(es).</span><br><span class="line">[01] Checking if there are indexes to rebuild in table sakila/country (space id: 10)</span><br><span class="line">[01] Checking if there are indexes to rebuild in table sakila/customer (space id: 11)</span><br><span class="line">[01]   Found index idx_fk_store_id</span><br><span class="line">[01]   Found index idx_fk_address_id</span><br><span class="line">[01]   Found index idx_last_name</span><br><span class="line">[01]   Rebuilding 3 index(es).</span><br></pre></td></tr></table></figure>
<p>此外，您还可以使用 <code>--rebuild-threads</code>
选项在重建索引时使用多线程，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --prepare --rebuild-indexes --rebuild-threads=16 /data/backups/</span><br></pre></td></tr></table></figure>
<p>在这种情况下，<em>Percona XtraBackup</em> 将一次为一张表创建 16
个工作线程，每个线程同时为一张表重建索引。它还会显示每条消息的线程
ID</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Starting 16 threads to rebuild indexes.</span><br><span class="line"></span><br><span class="line">[09] Checking if there are indexes to rebuild in table sakila/city (space id: 9)</span><br><span class="line">[09]   Found index idx_fk_country_id</span><br><span class="line">[10] Checking if there are indexes to rebuild in table sakila/country (space id: 10)</span><br><span class="line">[11] Checking if there are indexes to rebuild in table sakila/customer (space id: 11)</span><br><span class="line">[11]   Found index idx_fk_store_id</span><br><span class="line">[11]   Found index idx_fk_address_id</span><br><span class="line">[11]   Found index idx_last_name</span><br><span class="line">[11]   Rebuilding 3 index(es).</span><br></pre></td></tr></table></figure>
<p>由于 <em>Percona XtraBackup</em>
在将增量备份应用于紧凑完整备份时没有任何提示信息，因此不论以后是否会应用更多的增量备份，每次将增量备份应用于完整备份时，都需要用户显示指定重建索引。在每次增量备份合并时无条件地重建索引不是一种好的选择，因为这是一项非常昂贵的操作。</p>
<h3 id="恢复紧凑备份">恢复紧凑备份</h3>
<p><strong>xtrabackup</strong>
二进制程序没有提供任何恢复备份的功能。这是由用户来做的。您可以使用
<strong>rsync</strong> 或 <strong>cp</strong>
来恢复文件。您应该检查恢复的文件是否具有正确的所有权和许可权。</p>
<h3 id="其他阅读">其他阅读</h3>
<p><a
href="https://www.percona.com/blog/2013/01/29/feature-preview-compact-backups-in-percona-xtrabackup/">功能预览：Percona
XtraBackup 中的紧凑备份</a></p>
<h1 id="高级功能">高级功能</h1>
<h2 id="节流备份">节流备份</h2>
<p>尽管 xtrabackup
不会阻止数据库操作，但任何备份都可以将负载添加到正在备份的系统中。
在没有太多备用 I/O 容量的系统上，调节 xtrabackup
读取和写入数据的速率可能会有所帮助。 您可以使用 <code>--throttle</code>
选项执行此操作，该选将项限制每秒的 I/O 操作数为 1 MB。</p>
<p>下图显示了当 <code>--throttle = 1</code> 时节流备份是如何工作的。</p>
<img src="/2018/04/04/XtraBackup-%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%A8%8B%E5%BA%8F/1.png" class="">
<p>在 <code>--backup</code> 模式下，此选项限制 xtrabackup
每秒执行的读写操作对的数量。 如果您正在创建增量备份，则限制的是每秒读 IO
操作的次数。</p>
<p>默认情况下，不存在限制，并且 xtrabackup 尽可能快地读取和写入数据。
如果您对 I/O
操作的限制设置过于严格，备份可能会变得非常缓慢，以致于它永远无法跟上
InnoDB 写事务日志的速度，因此备份可能永远无法完成。</p>
<h2 id="使用-xtrabackup-编写脚本备份">使用 xtrabackup 编写脚本备份</h2>
<p><strong>xtrabackup</strong>
工具具有若干功能，以便脚本在执行相关任务时对其进行控制。 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/innobackupex/innobackupex_script.html">innobackupex
脚本</a>就是一个例子，但是也很容易用您自己的命令行脚本来控制
<strong>xtrabackup</strong>。</p>
<h3 id="复制后暂停">复制后暂停</h3>
<p>在备份模式下，xtrabackup
通常会使用后台线程复制日志文件，使用前台线程复制数据文件，最后停止日志复制线程并结束。如果使用
<code>--suspend-at-end</code> 选项，xtrabackup
将不会停止日志线程并结束，而是继续复制日志文件，并在名为
<code>xtrabackup_suspended</code>
的目标目录中创建一个文件。只要该文件存在，xtrabackup
就会继续观察日志文件并将其复制到目标目录中的
<code>xtrabackup_logfile</code>
中。当该文件被移除时，<strong>xtrabackup</strong>
将完成复制日志文件并退出。</p>
<p>此功能对于协调 InnoDB
数据备份与其他操作非常有用。也许最明显的作用就是复制表定义（<code>.frm</code>
文件），以便可以恢复备份。您可以在后台启动
<strong>xtrabackup</strong>，等待创建 <code>xtrabackup_suspended</code>
文件，然后复制完成备份所需的任何其他文件。这正是
<code>innobackupex</code> 工具所做的（它也复制 MyISAM
数据和其他文件）。</p>
<h3 id="生成元数据">生成元数据</h3>
<p>备份包含恢复备份所需的所有信息是一个好主意。
<strong>xtrabackup</strong> 工具可以打印出需要恢复数据和日志文件的
<code>my.cnf</code> 文件的内容。如果添加 <code>--print-param</code>
选项，它将打印出如下所示的内容：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#  ThisMySQL options file was generated by XtraBackup.</span><br><span class="line">[mysqld]</span><br><span class="line">datadir = /data/mysql/</span><br><span class="line">innodb_data_home_dir = /data/innodb/</span><br><span class="line">innodb_data_file_path = ibdata1:10M:autoextend</span><br><span class="line">innodb_log_group_home_dir = /data/innodb-logs/</span><br></pre></td></tr></table></figure>
<p>您可以将此输出重定向到备份目标目录中的文件当中。</p>
<h3 id="一致的备份源目录">一致的备份源目录</h3>
<p>可能存在缺省文件或其他因素导致 <strong>xtrabackup</strong>
不是从您预期的位置备份数据。为了防止这种情况发生，可以使用
<code>--print-param</code> 来询问将从何处复制数据。您可以使用输出来确保
<strong>xtrabackup</strong> 和您的脚本使用相同的数据集。</p>
<h3 id="日志流">日志流</h3>
<p>您可以指定 <strong>xtrabackup</strong>
省略复制数据文件，并简单地将日志文件流式传输到其标准输出，而不是使用
<code>--log-stream</code> 。这会自动添加 <code>--suspend-at-end</code>
选项。然后，您的脚本可以通过将日志文件传输到 SSH 连接并使用
<strong>rsync</strong> 或 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/xbstream/xbstream.html">xbstream
二进制程序</a>等工具将数据文件复制到另一台服务器来执行流式传输远程备份等任务。</p>
<h2 id="分析表统计信息">分析表统计信息</h2>
<p><strong>xtrabackup</strong> 程序可以在只读模式下分析 InnoDB
数据文件以提供统计信息。 要做到这一点，您应该使用 <code>--stats</code>
选项。 您可以将它与 <code>--tables</code>
选项结合使用，以限制要检查的文件。 它也适用于 <code>--use-memory</code>
选项。</p>
<p>您可以在正在运行的服务器上执行分析，但是由于分析过程中数据发生更改而可能导致出现错误。
或者，您也可以分析数据库的备份副本。
无论哪种方式，要使用统计功能，您需要一个包含正确大小的日志文件的数据库的干净副本，因此您需要执行两次
<code>--prepare</code> 才能在备份数据库上使用此功能。</p>
<p>在备份数据库上运行的结果可能如下所示：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;INDEX STATISTICS&gt;</span><br><span class="line">  table: test/table1, index: PRIMARY, space id: 12, root page 3</span><br><span class="line">  estimated statistics in dictionary:</span><br><span class="line">    key vals: 25265338, leaf pages 497839, size pages 498304</span><br><span class="line">  real statistics:</span><br><span class="line">     level 2 pages: pages=1, data=5395 bytes, data/pages=32%</span><br><span class="line">     level 1 pages: pages=415, data=6471907 bytes, data/pages=95%</span><br><span class="line">        leaf pages: recs=25958413, pages=497839, data=7492026403 bytes, data/pages=91%</span><br></pre></td></tr></table></figure>
<p>这可以解释如下：</p>
<ul>
<li>第一行仅显示了表格和索引名称及其内部标识符。如果您看到名为
<code>GEN_CLUST_INDEX</code>
的索引，即表的聚簇索引，它是自动创建的，因为您没有明确创建
<code>PRIMARY KEY</code> 。</li>
<li>字典信息中的估计统计信息类似于通过 InnoDB 内部的
<code>ANALYZE TABLE</code>
收集的数据，这些数据被存储为估计的基数统计信息，并传递给查询优化器。</li>
<li>真正的统计信息是扫描数据页和计算有关索引的确切信息的结果。</li>
<li><code>The level &lt;X&gt; pages</code>
：该输出表示该行对应索引树中的那个级别的页面的信息。越大的
<code>&lt;X&gt;</code> 离叶子页越远，它们是叶子页 0
级。第一行是根页面。</li>
<li><code>leaf pages</code>
输出显示叶子页的信息。这是表格数据的存储位置。</li>
<li><code>external pages</code>
：输出（上面未显示）显示保存那些其值太长而不适合存储于行本身的大型外部页面，如
<code>BLOB</code> 和 <code>TEXT</code> 类型值。</li>
<li><code>recs</code> 是叶子页中记录（行）的实际数量。</li>
<li><code>pages</code> 是页数。</li>
<li><code>data</code> 是页面中数据的总大小（以字节为单位）。</li>
<li><code>data/pages</code> 计算方法为 (<code>data</code> /
(<code>pages</code> _ <code>PAGE_SIZE</code>)) _
100%。由于为页眉和页脚预留了空间，所以它永远不会达到 100％。</li>
</ul>
<p>更详细的示例将作为 MySQL 性能博客文章<a
href="https://www.percona.com/blog/2009/09/14/statistics-of-innodb-tables-and-indexes-available-in-xtrabackup/">发布</a>。</p>
<h3 id="格式化输出脚本">格式化输出脚本</h3>
<p>以下脚本可用于汇总和制表统计信息的输出：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tabulate-xtrabackup-stats.pl</span><br><span class="line"></span><br><span class="line">#!/usr/bin/env perl</span><br><span class="line">use strict;</span><br><span class="line">use warnings FATAL =&gt; &#x27;all&#x27;;</span><br><span class="line">my $script_version = &quot;0.1&quot;;</span><br><span class="line"></span><br><span class="line">my $PG_SIZE = 16_384; # InnoDB defaults to 16k pages, change if needed.</span><br><span class="line">my ($cur_idx, $cur_tbl);</span><br><span class="line">my (%idx_stats, %tbl_stats);</span><br><span class="line">my ($max_tbl_len, $max_idx_len) = (0, 0);</span><br><span class="line">while ( my $line = &lt;&gt; ) &#123;</span><br><span class="line">   if ( my ($t, $i) = $line =~ m/table: (.*), index: (.*), space id:/ ) &#123;</span><br><span class="line">      $t =~ s!/!.!;</span><br><span class="line">      $cur_tbl = $t;</span><br><span class="line">      $cur_idx = $i;</span><br><span class="line">      if ( length($i) &gt; $max_idx_len ) &#123;</span><br><span class="line">         $max_idx_len = length($i);</span><br><span class="line">      &#125;</span><br><span class="line">      if ( length($t) &gt; $max_tbl_len ) &#123;</span><br><span class="line">         $max_tbl_len = length($t);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   elsif ( my ($kv, $lp, $sp) = $line =~ m/key vals: (\d+), \D*(\d+), \D*(\d+)/ ) &#123;</span><br><span class="line">      @&#123;$idx_stats&#123;$cur_tbl&#125;-&gt;&#123;$cur_idx&#125;&#125;&#123;qw(est_kv est_lp est_sp)&#125; = ($kv, $lp, $sp);</span><br><span class="line">      $tbl_stats&#123;$cur_tbl&#125;-&gt;&#123;est_kv&#125; += $kv;</span><br><span class="line">      $tbl_stats&#123;$cur_tbl&#125;-&gt;&#123;est_lp&#125; += $lp;</span><br><span class="line">      $tbl_stats&#123;$cur_tbl&#125;-&gt;&#123;est_sp&#125; += $sp;</span><br><span class="line">   &#125;</span><br><span class="line">   elsif ( my ($l, $pages, $bytes) = $line =~ m/(?:level (\d+)|leaf) pages:.*pages=(\d+), data=(\d+) bytes/ ) &#123;</span><br><span class="line">      $l ||= 0;</span><br><span class="line">      $idx_stats&#123;$cur_tbl&#125;-&gt;&#123;$cur_idx&#125;-&gt;&#123;real_pages&#125; += $pages;</span><br><span class="line">      $idx_stats&#123;$cur_tbl&#125;-&gt;&#123;$cur_idx&#125;-&gt;&#123;real_bytes&#125; += $bytes;</span><br><span class="line">      $tbl_stats&#123;$cur_tbl&#125;-&gt;&#123;real_pages&#125; += $pages;</span><br><span class="line">      $tbl_stats&#123;$cur_tbl&#125;-&gt;&#123;real_bytes&#125; += $bytes;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">my $hdr_fmt = &quot;%$&#123;max_tbl_len&#125;s %$&#123;max_idx_len&#125;s %9s %10s %10s\n&quot;;</span><br><span class="line">my @headers = qw(TABLE INDEX TOT_PAGES FREE_PAGES PCT_FULL);</span><br><span class="line">printf $hdr_fmt, @headers;</span><br><span class="line"></span><br><span class="line">my $row_fmt = &quot;%$&#123;max_tbl_len&#125;s %$&#123;max_idx_len&#125;s %9d %10d %9.1f%%\n&quot;;</span><br><span class="line">foreach my $t ( sort keys %tbl_stats ) &#123;</span><br><span class="line">   my $tbl = $tbl_stats&#123;$t&#125;;</span><br><span class="line">   printf $row_fmt, $t, &quot;&quot;, $tbl-&gt;&#123;est_sp&#125;, $tbl-&gt;&#123;est_sp&#125; - $tbl-&gt;&#123;real_pages&#125;,</span><br><span class="line">      $tbl-&gt;&#123;real_bytes&#125; / ($tbl-&gt;&#123;real_pages&#125; * $PG_SIZE) * 100;</span><br><span class="line">   foreach my $i ( sort keys %&#123;$idx_stats&#123;$t&#125;&#125; ) &#123;</span><br><span class="line">      my $idx = $idx_stats&#123;$t&#125;-&gt;&#123;$i&#125;;</span><br><span class="line">      printf $row_fmt, $t, $i, $idx-&gt;&#123;est_sp&#125;, $idx-&gt;&#123;est_sp&#125; - $idx-&gt;&#123;real_pages&#125;,</span><br><span class="line">         $idx-&gt;&#123;real_bytes&#125; / ($idx-&gt;&#123;real_pages&#125; * $PG_SIZE) * 100;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例脚本输出">示例脚本输出</h3>
<p>以上提到的博客文章中显示的示例运行上述 Perl
脚本时，输出将显示如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">          TABLE           INDEX TOT_PAGES FREE_PAGES   PCT_FULL</span><br><span class="line">art.link_out104                    832383      38561      86.8%</span><br><span class="line">art.link_out104         PRIMARY    498304         49      91.9%</span><br><span class="line">art.link_out104       domain_id     49600       6230      76.9%</span><br><span class="line">art.link_out104     domain_id_2     26495       3339      89.1%</span><br><span class="line">art.link_out104 from_message_id     28160        142      96.3%</span><br><span class="line">art.link_out104    from_site_id     38848       4874      79.4%</span><br><span class="line">art.link_out104   revert_domain    153984      19276      71.4%</span><br><span class="line">art.link_out104    site_message     36992       4651      83.4%</span><br></pre></td></tr></table></figure>
<p>这些列分别是表、索引、该索引中的页面总数，数据未实际占用的页数，以实际数据页面总大小的百分比表示的实际数据的字节数。
上述输出中的第一行（ <code>INDEX</code> 列为空）是整个表格的摘要。</p>
<h2 id="使用二进制日志">使用二进制日志</h2>
<p><strong>xtrabackup</strong> 程序集成了 <em>InnoDB</em>
在其事务日志中存储的有关已提交事务的相应二进制日志位置的信息。
这使它能够打印出备份文件对应的二进制日志位置，因此您可以使用它来设置新的从库复制或执行时间点恢复。</p>
<h3 id="查找二进制日志位置">查找二进制日志位置</h3>
<p>准备备份完成后，您可以找到该备份对应的二进制日志位置。
<strong>xtrabackup</strong> 可以使用 <code>--prepare</code> ,
<strong>innobackupex</strong> 可以使用 <code>--apply-log</code> 。
如果备份文件来自于启用了二进制日志记录的服务器，则
<strong>xtrabackup</strong> 将在目标目录中创建一个名为
<code>xtrabackup_binlog_info</code> 的文件。
该文件包含二进制日志文件的名称和准备备份所对应的二进制日志中确切点的位置。</p>
<p>在准备阶段，您还会看到类似于以下内容的输出：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">InnoDB: Last MySQL binlog file position 0 3252710, file name ./mysql-bin.000001</span><br><span class="line">... snip ...</span><br><span class="line">[notice (again)]</span><br><span class="line">  If you use binary log and don&#x27;t use any hack of group commit,</span><br><span class="line">  the binary log position seems to be:</span><br><span class="line">InnoDB: Last MySQL binlog file position 0 3252710, file name ./mysql-bin.000001</span><br></pre></td></tr></table></figure>
<p>该输出也可以在 <code>xtrabackup_binlog_pos_innodb</code>
文件中找到，但只有在使用 <em>XtraDB</em> 或 <em>InnoDB</em>
作为存储引擎时才是正确的。</p>
<p>如果使用其他存储引擎（例如 <em>MyISAM</em>），则应使用
<code>xtrabackup_binlog_info</code> 文件检索位置。</p>
<p>上文提到的 <code>hack of group commit</code> 是指在 <em>Percona</em>
服务器中早期实现的模拟组提交。</p>
<h3 id="时间点恢复">时间点恢复</h3>
<p>要从 <code>xtrabackup</code>
备份执行时间点恢复，应首先准备并恢复备份，然后从
<code>xtrabackup_binlog_info</code>
文件中显示的二进制日志位置重演二进制日志。</p>
<p>更详细的过程参见<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/innobackupex/pit_recovery_ibk.html">这里</a>（使用
<strong>innobackupex</strong>）。</p>
<h3 id="设置新的从库复制">设置新的从库复制</h3>
<p>要设置新的从库复制，您应该首先准备好备份，并将其恢复到新从库复制的数据目录中。然后在您的
<code>CHANGE MASTER TO</code> 命令中，使用
<code>xtrabackup_binlog_info</code>
文件中显示的二进制日志文件名和位置开始复制。</p>
<p>更详细的步骤在<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/howtos/setting_up_replication.html">如何通过
Percona XtraBackup 轻松 6 步设置复制从库</a>。</p>
<h2 id="恢复单表">恢复单表</h2>
<p>在 5.6 之前的服务器版本中，即使使用
<code>innodb_file_per_table</code>，也不可能通过复制文件在服务器之间复制表。
但是，使用 <em>Percona XtraBackup</em>，您可以从任何 <em>InnoDB</em>
数据库中导出单张表，然后将它们导入到 <em>Percona Server</em> 的
<em>XtraDB</em> 或 <em>MySQL 5.6</em> 中。 （导出库不一定是
<em>XtraDB</em> 或 <em>MySQL 5.6</em>
，但是导入库必须是。）这只适用于单独的 <code>.ibd</code>
文件，并且不能导出不包含在其自己的 <code>.ibd</code> 文件中的表。</p>
<p>我们来看看如何导出和导入下表：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE TABLE export_test (</span><br><span class="line">  a int(11) DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=latin1;</span><br></pre></td></tr></table></figure>
<div class="note default"><p>注意 如果您运行的是早于 <code>5.5.10-20.1</code> 的 <em>Percona
Server</em> 版本，则应该使用变量 <code>innodb_expand_import</code>
而不是 <code>innodb_import_table_from_xtrabackup</code> 。</p>
</div>
<h3 id="导出表格">导出表格</h3>
<p>这张表应该是在 <code>innodb_file_per_table</code>
模式下创建的，所以像 <code>xtrabackup --backup</code>
一样进行备份后，<code>.ibd</code> 文件应该存在于目标目录中：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ find /data/backups/mysql/ -name export_test.*</span><br><span class="line">/data/backups/mysql/test/export_test.ibd</span><br></pre></td></tr></table></figure>
<p>准备备份时，将额外的参数 <code>xtrabackup --export</code>
添加到命令中。 这里是一个例子：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ xtrabackup --prepare --export --target-dir=/data/backups/mysql/</span><br></pre></td></tr></table></figure>
<div class="note default"><p>注意 如果你想恢复<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/advanced/encrypted_innodb_tablespace_backups.html#encrypted-innodb-tablespace-backups">加密的
InnoDB 表空间表</a>，你还需要指定密钥文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xtrabackup --prepare --export --target-dir=/tmp/table \</span><br><span class="line">--keyring-file-data=/var/lib/mysql-keyring/keyring</span><br></pre></td></tr></table></figure>
</div>
<p>现在你应该在目标目录中看到一个 <code>.exp</code> 文件：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ find /data/backups/mysql/ -name export_test.*</span><br><span class="line">/data/backups/mysql/test/export_test.exp</span><br><span class="line">/data/backups/mysql/test/export_test.ibd</span><br><span class="line">/data/backups/mysql/test/export_test.cfg</span><br></pre></td></tr></table></figure>
<p>将表导入运行 <em>XtraDB</em> 的 <em>Percona 服务器</em> 或 <em>MySQL
5.7</em> 需要以上三个文件。在服务器使用 <a
href="https://dev.mysql.com/doc/refman/5.7/en/innodb-tablespace-encryption.html"><code>InnoDB Tablespace Encryption</code></a>
的情况下，将会列出用于加密表的附加的 <code>.cfg</code> 文件。</p>
<div class="note default"><p>注意 <em>MySQL</em> 使用包含特殊格式的 <em>InnoDB</em> 字典转储的
<code>.cfg</code> 文件。这种格式与 <em>XtraDB</em> 中用于相同目的的
<code>.exp</code> 不同。严格地说，将表空间导入到 <em>MySQL 5.7</em> 或
<em>Percona Server 5.7</em> 中时不需要 <code>.cfg</code>
文件。即使是来自其他数据库版本的表空间也会成功导入，但如果相应的
<code>.cfg</code> 文件存在于同一目录中，<em>InnoDB</em>
将执行模式验证。</p>
</div>
<h3 id="导入表格">导入表格</h3>
<p>在使用 <code>XtraDB</code> 引擎和启用
<code>innodb_import_table_from_xtrabackup</code> 选项的 <em>Percona
Server</em> 的目标服务器，或者 <em>MySQL 5.6</em>
上，创建一张具有相同结构的表，然后执行以下步骤：</p>
<ul>
<li>执行 <code>ALTER TABLE test.export_test DISCARD TABLESPACE</code>;
如果看到以下消息，则必须启用 <code>innodb_file_per_table</code>
并再次创建该表：<code>ERROR 1030 (HY000): Got error -1 from storage engine</code></li>
<li>将导出的文件复制到目标服务器的数据目录的 <code>test/</code>
子目录</li>
<li>执行
<code>ALTER TABLE test.export_test IMPORT TABLESPACE</code>;</li>
</ul>
<p>该表现在应该已被导入，你应该能够从中执行 <code>SELECT</code>
语句并查看导入的数据。</p>
<div class="note default"><p>注意 除非在导入的表上运行 <code>ANALYZE TABLE</code>
，导入的表空间的持久性统计信息将为空。因为它们存储在系统表
<code>mysql.innodb_table_stats</code> 和
<code>mysql.innodb_index_stats</code>
中，并且在导入期间它们不会被服务器更新，所以它们是空的。这是由于上游错误
<a href="https://bugs.mysql.com/bug.php?id=72368">#72368</a>。</p>
</div>
<h2 id="lru-转储备份">LRU 转储备份</h2>
<p>此功能通过在数据库重启后从 <code>ib_lru_dump</code>
文件恢复缓冲池状态来减少预热时间。 <em>Percona XtraBackup</em> 会查找
<code>ib_lru_dump</code> 并自动备份它。</p>
<img src="/2018/04/04/XtraBackup-%E4%BA%8C%E8%BF%9B%E5%88%B6%E7%A8%8B%E5%BA%8F/2.png" class="">
<p>如果在 <code>my.cnf</code>
文件中设置了启用缓冲区恢复选项，则备份恢复后缓冲池将处于预热好的状态。
要启用它，请在 Percona Server 5.5 中设置变量
<code>innodb_buffer_pool_restore_at_startup =1</code> 或在 Percona
Server 5.1 中设置 <code>innodb_auto_lru_dump =1</code>。</p>
<h1 id="实现">实现</h1>
<h2 id="实现细节">实现细节</h2>
<p>该页面包含 <strong>xtrabackup</strong>
工具操作的内部实现原理的解释。</p>
<h3 id="文件权限">文件权限</h3>
<p><strong>xtrabackup</strong>
以读写模式打开源数据文件，虽然它并不修改源文件。这意味着您必须以拥有写入权限的用户运行
<strong>xtrabackup</strong> 。以读写模式打开文件的原因是
<strong>xtrabackup</strong> 使用嵌入式 <em>InnoDB</em>
库打开和读取文件， <em>InnoDB</em>
以读写模式打开它们，因为它通常假定它将写入数据。</p>
<h3 id="调整-os-缓冲区">调整 OS 缓冲区</h3>
<p>由于 <strong>xtrabackup</strong>
从文件系统读取大量数据，因此它会尽可能使用
<code>posix_fadvise()</code>，以指示操作系统不要尝试缓存从磁盘读取的块。如果没有这个提示，操作系统会假设
<strong>xtrabackup</strong>
很可能需要它们而缓存块，但事实并非如此。缓存这些大文件会给操作系统的虚拟内存造成压力，并导致其他进程（如数据库）被换出。
<strong>xtrabackup</strong>
工具在源文件和目标文件上使用以下提示来避免这种情况：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">posix_fadvise(file, 0, 0, POSIX_FADV_DONTNEED)</span><br></pre></td></tr></table></figure>
<p>另外， <strong>xtrabackup</strong>
要求操作系统对源文件执行更积极的预读优化：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">posix_fadvise(file, 0, 0, POSIX_FADV_SEQUENTIAL)</span><br></pre></td></tr></table></figure>
<h3 id="复制数据文件">复制数据文件</h3>
<p>将数据文件复制到目标目录时， <strong>xtrabackup</strong>
一次读取和写入 1MB 数据。这是不可配置的。在复制日志文件时，
<strong>xtrabackup</strong> 每次读取和写入 512
个字节。这也无法配置，并且与 InnoDB 的复制行为相匹配（<em>Percona
Server</em> 中存在解决方法，因为它可以选择调整 <em>XtraDB</em> 的
<code>innodb_log_block_size</code>，在这种情况下，<em>Percona
XtraBackup</em> 将相应调整）。</p>
<p>从文件中读取数据后， <strong>xtrabackup</strong> 每次迭代 1MB
缓冲页，并使用 InnoDB 的 <code>buf_page_is_corrupted()</code>
函数检查每个页面上的页面损坏情况。如果页面已损坏，则每页重新读取并重试
10 次。它跳过对双写缓冲区的检查。</p>
<h2 id="xtrabackup-退出码">xtrabackup 退出码</h2>
<p>在没有错误发生时， <strong>xtrabackup</strong> 将在备份完成后以成功值
0 退出。 如果在备份过程中发生错误，则退出值为 1 。</p>
<p>在某些情况下，由于 <em>MySQL</em>
库包含的命令行选项代码，退出值可能不是 0 或 1 。
例如，未知的命令行选项会导致退出代码为 255。</p>
<h1 id="参考">参考</h1>
<h2 id="xtrabackup-选项参考">xtrabackup 选项参考</h2>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>innobackupex 的用法</title>
    <url>/2018/04/17/innobackupex-%E7%9A%84%E7%94%A8%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1
id="制作本地完整备份创建准备和还原">制作本地完整备份（创建，准备和还原）</h1>
<h2 id="创建备份">创建备份</h2>
<p>这是最简单的用例。 它将所有的 <em>MySQL</em> 数据复制到指定的目录中。
以下是如何备份 <code>my.cnf</code> 中指定的 <code>datadir</code>
中的所有数据库。 它会将备份置于 <code>/data/backups/</code>
由时间标记的子目录中，在本例中为
<code>/data/backups/2010-03-13_02-42-44</code>， <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex /data/backups</span><br></pre></td></tr></table></figure>
备份过程中有很多输出，但你需要确保在备份结束时看到以下内容。
如果你没有看到这个输出，那么表示你的备份失败： &gt; 100313 02:43:07
innobackupex: completed OK!</p>
<span id="more"></span>
<h2 id="准备备份">准备备份</h2>
<p>要准备备份，请使用 <code>--apply-log</code>
选项并指定备份的时间戳子目录。 为了加快应用日志的过程，我们推荐使用
<code>--use-memory</code> 选项： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --use-memory=4G --apply-log /data/backups/2010-03-13_02-42-44/</span><br></pre></td></tr></table></figure> 您应该检查确认消息： &gt;
100313 02:51:02 innobackupex: completed OK!</p>
<p>现在，位于 <code>/data/backups/2010-03-13_02-42-44</code>
的文件已经准备好可以使用了。</p>
<h2 id="还原备份">还原备份</h2>
<p>要还原刚才准备好的备份，首先需要停止数据库服务器，然后使用
<strong>innobackupex</strong> 函数 <code>--copy-back</code>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">innobackupex --copy-back /data/backups/2010-03-13_02-42-44/</span><br><span class="line">## Use chmod to correct the permissions, if necessary!</span><br></pre></td></tr></table></figure> 这将会把数据拷贝回你在 <code>my.cnf</code> 文件中定义的
<code>datadir</code> 目录中。</p>
<div class="note default"><p>注意 <code>datadir</code> 目录必须为空; 目录不为空时，<em>Percona
XtraBackup</em> <code>innobackupex --copy-back</code>
选项不会复制现有文件，除非指定了
<code>innobackupex --force-non-empty-directories</code> 选项。
另外需要注意的是，在执行恢复之前需要关闭 <em>MySQL</em> 服务器。
您无法将备份还原到一个正在运行的 mysqld 实例的 <code>datadir</code>
目录（导入部分备份时除外）。</p>
</div>
<p>确认信息： &gt; 100313 02:58:44 innobackupex: completed OK!</p>
<p>您应该在复制数据后检查文件权限。 您可能需要使用类似的方法调整它们：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ chown -R mysql:mysql /var/lib/mysql</span><br></pre></td></tr></table></figure></p>
<p>现在 <code>datadir</code> 目录已经包含还原后的数据。
您可以启动服务器了。</p>
<h1 id="制作流式备份">制作流式备份</h1>
<p>流式备份将备份以 tar 格式发送到 <code>STDOUT</code>
，而不是将其复制到第一个参数指定的目录中。 您可以将输出传送到
<strong>gzip</strong>，或通过网络传送到另一台服务器。</p>
<p>要提取生成的tar文件，<strong>必须</strong>使用 <code>-i</code>
选项，例如 <code>tar -ixvf backup.tar</code>。 <div class="note danger"><p>警告 请记住使用 <code>-i</code> 选项来提取备份的 tar 文件。
有关更多信息，请参阅<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/innobackupex/streaming_backups_innobackupex.html">流式备份和压缩备份</a>。</p>
</div></p>
<p>以下是使用 <code>tar</code> 选项进行流式处理的一些示例：</p>
<ul>
<li><p>将流式备份传输到名为 ‘backup.tar’ 的 tar 归档文件中<br />
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --stream=tar ./ &gt; backup.tar</span><br></pre></td></tr></table></figure></p></li>
<li><p>同上，压缩备份文件 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --stream=tar ./ | gzip - &gt; backup.tar.gz</span><br></pre></td></tr></table></figure></p></li>
<li><p>加密备份文件 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --stream=tar . | gzip - | openssl des3 -salt -k &quot;password&quot; &gt; backup.tar.gz.des3</span><br></pre></td></tr></table></figure></p></li>
<li><p>将备份文件传输到另一台服务器而不是保存在本地
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --stream=tar ./ | ssh user@desthost &quot;cat - &gt; /data/backups/backup.tar&quot;</span><br></pre></td></tr></table></figure></p></li>
<li><p>用 “netcat” 实现上述功能 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## 在目标主机上执行:</span><br><span class="line">$ nc -l 9999 | cat - &gt; /data/backups/backup.tar</span><br><span class="line">## 在源主机上执行:</span><br><span class="line">$ innobackupex --stream=tar ./ | nc desthost 9999</span><br></pre></td></tr></table></figure></p></li>
<li><p>一条指令执行上述功能 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ ssh user@desthost &quot;( nc -l 9999 &gt; /data/backups/backup.tar &amp; )&quot; \</span><br><span class="line">&amp;&amp; innobackupex --stream=tar ./  |  nc desthost 9999</span><br></pre></td></tr></table></figure></p></li>
<li><p>将吞吐量限制为 10MB 每秒。 这需要 ‘pv’ 工具; 你可以在<a
href="http://www.ivarch.com/programs/quickref/pv.shtml">官方站点</a>找到它或者从分发包安装它（<code>apt-get install pv</code>）
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --stream=tar ./ | pv -q -L10m \</span><br><span class="line">| ssh user@desthost &quot;cat - &gt; /data/backups/backup.tar&quot;</span><br></pre></td></tr></table></figure></p></li>
<li><p>在流式备份过程中检查校验和 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">## On the destination host:</span><br><span class="line">$ nc -l 9999 | tee &gt;(sha1sum &gt; destination_checksum) &gt; /data/backups/backup.tar</span><br><span class="line">## On the source host:</span><br><span class="line">$ innobackupex --stream=tar ./ | tee &gt;(sha1sum &gt; source_checksum) | nc desthost 9999</span><br><span class="line">## compare the checksums</span><br><span class="line">## On the source host:</span><br><span class="line">$ cat source_checksum</span><br><span class="line">65e4f916a49c1f216e0887ce54cf59bf3934dbad  -</span><br><span class="line">## On the destination host:</span><br><span class="line">$ destination_checksum</span><br><span class="line">65e4f916a49c1f216e0887ce54cf59bf3934dbad  -</span><br></pre></td></tr></table></figure></p></li>
</ul>
<p>使用 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/glossary.html#term-xbstream">xbstream</a>
选项进行流式处理的示例：</p>
<ul>
<li><p>将流式备份传输到名为 ‘backup.tar’ 的 tar 归档文件中<br />
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">innobackupex --stream=xbstream ./ &gt; backup.xbstream</span><br></pre></td></tr></table></figure></p></li>
<li><p>同上，压缩备份文件 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">innobackupex --stream=xbstream --compress ./ &gt; backup.xbstream</span><br></pre></td></tr></table></figure></p></li>
<li><p>解压缩备份文件到当前目录 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xbstream -x &lt;  backup.xbstream</span><br></pre></td></tr></table></figure></p></li>
<li><p>压缩备份文件然后直接传输到另一台服务器并解压缩
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">innobackupex --compress --stream=xbstream ./ | ssh user@otherhost &quot;xbstream -x&quot;</span><br></pre></td></tr></table></figure></p></li>
<li><p>并行复制备份的并行压缩 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">innobackupex --compress --compress-threads=8 --stream=xbstream --parallel=4 ./ &gt; backup.xbstream</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h1 id="制作增量备份">制作增量备份</h1>
<p>每次增量备份都需要从一个完整备份开始，我们将之称为
<em>基础备份</em>。 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">innobackupex --user=USER --password=PASSWORD /path/to/backup/dir/</span><br></pre></td></tr></table></figure></p>
<p>请注意，完整备份将位于 <code>/path/to/backup/dir/</code>（例如
<code>/path/to/backup/dir/2011-12-24_23-01-00/</code>
中）的时间戳子目录中。</p>
<p>假设变量 <code>$FULLBACKUP</code> 表示
<code>/path/to/backup/dir/2011-5-23_23-01-18</code>
，让我们在一小时后执行增量备份： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">innobackupex --incremental /path/to/inc/dir \</span><br><span class="line">  --incremental-basedir=$FULLBACKUP --user=USER --password=PASSWORD</span><br></pre></td></tr></table></figure></p>
<p>现在，增量备份将位于
<code>/path/to/inc/dir/2011-12-25_00-01-00/</code> 中。我们将之称为
<code>$INCREMENTALBACKUP=2011-5-23_23-50-10</code>。</p>
<p>准备增量备份与准备完整备份稍稍有些不同。</p>
<p>首先，你必须在每个备份上重放已提交的事务， <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">innobackupex --apply-log --redo-only $FULLBACKUP \</span><br><span class="line"> --use-memory=1G --user=USER --password=PASSWORD</span><br></pre></td></tr></table></figure></p>
<p>201/5000 <code>--use-memory</code> 选项不是必需的，（如果提供的 RAM
数量可用）的话使用它可以加速进程。</p>
<p>如果一切正常，您应该看到类似于以下的输出： &gt; 111225 01:10:12
InnoDB: Shutdown completed; log sequence number 91514213</p>
<p>现在，通过发出以下命令将增量备份应用于基础备份： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">innobackupex --apply-log --redo-only $FULLBACKUP</span><br><span class="line"> --incremental-dir=$INCREMENTALBACKUP</span><br><span class="line"> --use-memory=1G --user=DVADER --password=D4RKS1D3</span><br></pre></td></tr></table></figure> 注意
<code>$INCREMENTALBACKUP</code> 的使用。</p>
<p><em>最终数据将位于基础备份目录中</em>，而不是增量备份目录中。在本例中，位于
<code>/path/to/backup/dir/2011-12-24_23-01-00</code> 或
<code>$FULLBACKUP</code> 中。</p>
<p>如果您想要应用更多增量备份，请重复此步骤。
按照备份完成的时间顺序执行此操作非常重要。</p>
<p>您可以检查每个备份目录下的文件 xtrabackup_checkpoints。</p>
<p>它们应该如下所示:(在基础备份中） &gt; backup_type =
full-backuped<br />
&gt; from_lsn = 0<br />
&gt; to_lsn = 1291135</p>
<p>在增量备份中： &gt; backup_type = incremental<br />
&gt; from_lsn = 1291135<br />
&gt; to_lsn = 1291340</p>
<p>其中，<code>to_lsn</code> 编号一定与下一次备份的
<code>from_lsn</code> 一致。</p>
<p>将所有备份放在一起后，您可以再次准备完整备份（此时的完整备份是基础备份和增量备份的集合）以回滚未提交的事务：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">innobackupex-1.5.1 --apply-log $FULLBACKUP --use-memory=1G \</span><br><span class="line">  --user=$USERNAME --password=$PASSWORD</span><br></pre></td></tr></table></figure></p>
<p>现在，您的备份可以在恢复后立即使用。
这个准备步骤是可选的，如果你没有执行这个步骤，数据库服务器将假设数据库发生了崩溃，并开始回滚未提交的事务（这将会产生一些本可以避免的停机时间）。</p>
<h1 id="制作压缩备份">制作压缩备份</h1>
<p>为了制作一个压缩备份，您需要使用 <code>--compress</code> 选项。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --compress /data/backup</span><br></pre></td></tr></table></figure></p>
<p>如果您想加速压缩，那么可以使用并行压缩，可以使用
<code>--compress-threads=#</code> 选项启用并行压缩。
以下示例将使用四个线程进行压缩： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --compress --compress-threads=4 /data/backup</span><br></pre></td></tr></table></figure></p>
<p>输出类似于以下内容 &gt; …<br />
&gt; [01] Compressing ./imdb/comp_cast_type.ibd to
/data/backup/2013-08-01_11-24-04/./imdb/comp_cast_type.ibd.qp<br />
&gt; [01] …done<br />
&gt; [01] Compressing ./imdb/aka_name.ibd to
/data/backup/2013-08-01_11-24-04/./imdb/aka_name.ibd.qp<br />
&gt; [01] …done<br />
&gt; …<br />
&gt; 130801 11:50:24 innobackupex: completed OK</p>
<h2 id="准备备份-1">准备备份</h2>
<p>在准备备份之前，您需要使用 <a
href="http://www.quicklz.com/">qpress</a> 解压缩所有文件（可从 <a
href="https://www.percona.com/doc/percona-xtrabackup/2.1/installation.html#using-percona-software-repositories">Percona
软件库</a>)中获取）。 您可以使用以下内容来解压缩所有文件：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ for bf in `find . -iname &quot;*\.qp&quot;`; do qpress -d $bf $(dirname $bf) &amp;&amp; rm $bf; done</span><br></pre></td></tr></table></figure></p>
<p>在 <em>Percona XtraBackup</em> 2.1.4 中新增了
<code>innobackupex --decompress</code> 选项，可用于解压备份：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --decompress /data/backup/2013-08-01_11-24-04/</span><br></pre></td></tr></table></figure></p>
<div class="note default"><p>注意 为了成功使用 <code>innobackupex --decompress</code>
选项，需要安装 qpress 二进制文件并包含在路径当中。
<code>innobackupex --parallel</code> 可以和
<code>innobackupex --decompress</code>
选项一起使用同时解压缩多个文件。</p>
</div>
<p>一旦文件解压完成后，您可以使用 <code>--apply-log</code> 准备备份。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --apply-log /data/backup/2013-08-01_11-24-04/</span><br></pre></td></tr></table></figure></p>
<p>您需要检查备份完成信息： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">130802 02:51:02  innobackupex: completed OK!</span><br></pre></td></tr></table></figure></p>
<p>现在，位于 <code>/data/backups/2013-08-01_11-24-0</code>
目录中的文件已经可以被数据库使用了。</p>
<div class="note default"><p>注意 <em>Percona XtraBackup</em>
不会自动删除压缩文件。为了清理备份目录，用户需要手动删除
<code>*.qp</code> 文件。</p>
</div>
<h2 id="还原备份-1">还原备份</h2>
<p>一旦备份准备完成，您可以使用 <code>--copy-back</code> 选项还原备份。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --copy-back /data/backups/2013-08-01_11-24-04/</span><br></pre></td></tr></table></figure></p>
<p>这将会把准备好的数据拷贝回您在 <code>my.cnf</code> 文件中定义的
<code>datadir</code> 目录中。</p>
<p>还原后输出确认信息。 &gt; 130802 02:58:44 innobackupex: completed
OK!</p>
<p>您需要在文件拷贝回数据目录中后检查文件的所有权。您可能需要一下命令调整文件的所有权。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ chown -R mysql:mysql /var/lib/mysql</span><br></pre></td></tr></table></figure></p>
<p>现在 <code>datadir</code>
目录中包含还原后的数据。您可以启动数据库了。</p>
<h1 id="备份和还原单个分区">备份和还原单个分区</h1>
<p><em>Percona XtraBackup</em> 具有<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/innobackupex/partial_backups_innobackupex.html">部分备份</a>功能，这意味着您可以备份单个分区，因为从存储引擎的角度来看，分区是具有特殊格式名称的常规表。此功能的唯一要求是在服务器中启用
<code>innodb_file_per_table</code> 选项。</p>
<p>使用这种备份只有一个警告：您无法将准备好的备份复制回数据目录。应通过导入表来恢复部分备份，而不是使用传统的
<code>--copy-back</code>
选项。尽管在某些情况下可以通过复制文件来完成恢复，但这在很多情况下可能会导致数据库不一致，因此建议不要这样做。</p>
<h2 id="创建备份-1">创建备份</h2>
<p>有三种方式可以指定备份整个数据的哪一部分：正则表达式（<code>--include</code>），在文件中枚举需要备份的表（<code>--tables-file</code>）或提供数据库列表（<code>--databases</code>）。
在这个例子中 <code>--include</code> 选项将被使用。</p>
<p>提供给此选项的正则表达式将与表的完全限定表名（包括数据库名）匹配，以
<code>databasename.tablename</code> 的形式。</p>
<p>例如，以下命令将从数据库 <code>imdb</code> 中备份 <code>name</code>
表的 <code>p4</code> 分区： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --include=&#x27;^imdb[.]name#P#p4&#x27; /mnt/backup/</span><br></pre></td></tr></table></figure></p>
<p>这将创建一个包含 <code>innobackupex</code>
创建的常用文件的时间戳目录，但只有与表相关的数据文件才会被创建。</p>
<p>innobackupex的输出将列出跳过的表格</p>
<blockquote>
<p>… [01] Skipping ./imdb/person_info.ibd [01] Skipping
./imdb/name#P#p5.ibd [01] Skipping ./imdb/name#P#p6.ibd …
imdb.person_info.frm is skipped because it does not match
^imdb[.]name#P#p4. imdb.title.frm is skipped because it does not match
^imdb[.]name#P#p4. imdb.company_type.frm is skipped because it does not
match ^imdb[.]name#P#p4. …</p>
</blockquote>
<p>请注意，此选项将传递给
<code>xtrabackup --tables</code>，并且与每个数据库的每张表匹配，即使没有匹配到，每个数据库的目录也将被创建。</p>
<h2 id="准备备份-2">准备备份</h2>
<p>准备部分备份，该过程类似于<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/innobackupex/restoring_individual_tables_ibk.html">恢复单个表</a>：应用日志并使用
<code>--export</code> 选项： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ innobackupex --apply-log --export /mnt/backup/2012-08-28_10-29-09</span><br></pre></td></tr></table></figure></p>
<p>您可能会在输出中看到关于表不存在的的警告。 这是因为基于
<em>InnoDB</em> 的引擎将其数据字典存储在除 <code>.frm</code>
文件之外的表空间文件中。 <strong>innobackupex</strong> 将使用
<strong>xtrabackup</strong>
从数据字典中删除缺少的表（指那些未在部分备份中选择的表），以避免将来出现警告或错误：</p>
<blockquote>
<p>InnoDB: in InnoDB data dictionary has tablespace id 51, InnoDB: but
tablespace with that id or name does not exist. It will be removed from
data dictionary. 120828 10:25:28 InnoDB: Waiting for the background
threads to start 120828 10:25:29 Percona XtraDB (http://www.percona.com)
1.1.8-20.1 started; log sequence number 10098323731 xtrabackup: export
option is specified. xtrabackup: export metadata of table
‘imdb/name#P#p4’ to file <code>./imdb/name#P#p4.exp</code> (1 indexes)
xtrabackup: name=PRIMARY, id.low=73, page=3</p>
</blockquote>
<p>您还应该看到为部分备份中包含的每张表导入（<code>.exp</code>
文件）所需的创建文件的通知： &gt; xtrabackup: export option is
specified. &gt; xtrabackup: export metadata of table ‘imdb/name#P#p4’ to
file <code>./imdb/name#P#p4.exp</code> (1 indexes) &gt; xtrabackup:
name=PRIMARY, id.low=73, page=3</p>
<p>请注意，您可以将 <code>--export</code> 选项和
<code>--apply-log</code> 用于已经准备好的备份，以创建 <code>.exp</code>
文件。</p>
<p>最后，检查输出中的确认消息： &gt; 120828 19:25:38 innobackupex:
completed OK!</p>
<h2 id="从备份文件还原表">从备份文件还原表</h2>
<p>应通过将部分备份中的表<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/innobackupex/restoring_individual_tables_ibk.html">导入服务器</a>来完成还原。</p>
<div class="note default"><p>注意 改进的表/分区导入仅在 <em>Percona Server</em> 和 <em>MySQL
5.6</em> 中可用，这意味着也可以导入从不同服务器备份的分区。 对于早于
<em>MySQL 5.6</em>
的版本，只能从该服务器导入分区，并且还有另外一些重要限制。
在进行备份和导入分区之间不应该发出 DROP/CREATE/TRUNCATE/ALTER TABLE
命令。</p>
</div>
<p>第一步是创建要恢复数据的新表 <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE `name_p4` (</span><br><span class="line">`id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">`name` text NOT NULL,</span><br><span class="line">`imdb_index` varchar(12) DEFAULT NULL,</span><br><span class="line">`imdb_id` int(11) DEFAULT NULL,</span><br><span class="line">`name_pcode_cf` varchar(5) DEFAULT NULL,</span><br><span class="line">`name_pcode_nf` varchar(5) DEFAULT NULL,</span><br><span class="line">`surname_pcode` varchar(5) DEFAULT NULL,</span><br><span class="line">PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=2812744 DEFAULT CHARSET=utf8</span><br></pre></td></tr></table></figure></p>
<p>要从备份文件中还原数据，需要丢弃该表的表空间： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt;  ALTER TABLE name_p4 DISCARD TABLESPACE;</span><br></pre></td></tr></table></figure></p>
<p>接下来需要将 <code>.exp</code> 和 <em>ibd</em> 文件从备份目录中拷贝到
<em>MySQL</em> 数据目录中： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ cp /mnt/backup/2012-08-28_10-29-09/imdb/name#P#p4.exp /var/lib/mysql/imdb/name_p4.exp</span><br><span class="line">$ cp /mnt/backup/2012-08-28_10-29-09/imdb/name#P#p4.ibd /var/lib/mysql/imdb/name_p4.ibd</span><br></pre></td></tr></table></figure></p>
<div class="note default"><p>注意 确保复制的文件可以被运行 <em>MySQL</em> 数据库的用户读取。</p>
</div>
<p>如果您运行的是 <code>Percona Server</code>,请确保
<em>innodb_import_table_from_xtrabackup</em> 变量已经启用。
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SET GLOBAL innodb_import_table_from_xtrabackup=1;</span><br></pre></td></tr></table></figure></p>
<p>最后一步是导入表空间： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt;  ALTER TABLE name_p4 IMPORT TABLESPACE;</span><br></pre></td></tr></table></figure></p>
<h2 id="在版本-5.6-中还原备份">在版本 5.6 中还原备份</h2>
<p>服务器版本高于 5.5
的问题在于没有服务器支持导入单个分区或分区表的所有分区，因此分区只能作为独立表导入。
在 <em>MySQL</em> 和 <em>Percona Server</em> 5.6 中，可以使用
<code>ALTER TABLE ... EXCHANGE PARTITION</code>
命令将单个表变为单个分区。</p>
<div class="note default"><p>注意 在 <em>Percona Server</em> 5.6 中，变量
<code>innodb_import_table_from_xtrabackup</code> 已被删除，以支持
<em>MySQL</em> <a
href="https://dev.mysql.com/doc/refman/5.6/en/tablespace-copying.html">可传输表空间</a>实现。</p>
</div>
<p>导入整个分区表时，首先将所有（子）分区导入为独立表：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE `name_p4` (</span><br><span class="line">`id` int(11) NOT NULL AUTO_INCREMENT,</span><br><span class="line">`name` text NOT NULL,</span><br><span class="line">`imdb_index` varchar(12) DEFAULT NULL,</span><br><span class="line">`imdb_id` int(11) DEFAULT NULL,</span><br><span class="line">`name_pcode_cf` varchar(5) DEFAULT NULL,</span><br><span class="line">`name_pcode_nf` varchar(5) DEFAULT NULL,</span><br><span class="line">`surname_pcode` varchar(5) DEFAULT NULL,</span><br><span class="line">PRIMARY KEY (`id`)</span><br><span class="line">) ENGINE=InnoDB AUTO_INCREMENT=2812744 DEFAULT CHARSET=utf8</span><br></pre></td></tr></table></figure></p>
<p>要从备份文件中还原数据，需要丢弃该表的表空间： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt;  ALTER TABLE name_p4 DISCARD TABLESPACE;</span><br></pre></td></tr></table></figure></p>
<p>接下来需要将 <code>.cfg</code> 和 <em>ibd</em> 文件从备份目录中拷贝到
<em>MySQL</em> 数据目录中： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ cp /mnt/backup/2013-07-18_10-29-09/imdb/name#P#p4.cfg /var/lib/mysql/imdb/name_p4.cfg</span><br><span class="line">$ cp /mnt/backup/2013-07-18_10-29-09/imdb/name#P#p4.ibd /var/lib/mysql/imdb/name_p4.ibd</span><br></pre></td></tr></table></figure></p>
<p>最后一步是导入表空间： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt;  ALTER TABLE name_p4 IMPORT TABLESPACE;</span><br></pre></td></tr></table></figure></p>
<p>现在我们可以使用与导入的表完全相同的模式创建空分区表：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE name2 LIKE name;</span><br></pre></td></tr></table></figure></p>
<p>然后将新创建的表中的空分区与对应于先前步骤中已导出/导入的分区的单独表交换
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE name2 EXCHANGE PARTITION p4 WITH TABLE name_p4;</span><br></pre></td></tr></table></figure></p>
<p>必须满足<a
href="https://dev.mysql.com/doc/refman/5.6/en/partitioning-management-exchange.html">这些条件</a>才能使此操作成功。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>innobackupex</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL 运行状态 extended-status 详解</title>
    <url>/2018/04/11/MySQL-%E8%BF%90%E8%A1%8C%E7%8A%B6%E6%80%81-extended-status-%E8%AF%A6%E8%A7%A3/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>使用以下命令查看 MySQL 详细运行状态： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mysqladmin -u root -p extended-status</span><br></pre></td></tr></table></figure></p>
<p>不同版本的 MySQL 输出的参数个数不同。以下为从 MySQL 5.7
版本官方文档截取的输出，各个参数的详细解释见下，中文含义后续用到哪个再去翻译吧。
<div class="note info"><p>TIP 以下表格内容是从 MySQL 官网复制过来的，但是官网复制的是 html
，使用 <a href="https://tool.lu/markdown/">html 转 markdown</a>
在线工具转换为 markdown，但是转换后的文本是这样的 <strong>| <a
href="server-status-variables.html#statvar_Aborted_clients"><code>Aborted_clients</code></a>
| integer | <code>GLOBAL</code> |</strong>
，有些不需要的字符，这时候可以使用 IDEA
编辑器的查找/替换功能，使用正则表达式匹配不需要的字符，然后替换为空字符就可以了。其中，替换小括号和里面内容的正则表达式语法如下
<code>[\(（][^\)）]+[\)）]</code></p>
</div></p>
<span id="more"></span>
<style>
table th:nth-of-type(2) {
    width: 60px;
}
table th:nth-of-type(3) {
    width: 130px;
}
</style>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>参数名</th>
<th>参数类型</th>
<th>作用域</th>
</tr>
</thead>
<tbody>
<tr>
<td>Aborted_clients</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Aborted_connects</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Audit_log_current_size</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Audit_log_event_max_drop_size</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Audit_log_events</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Audit_log_events_filtered</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Audit_log_events_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Audit_log_events_written</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Audit_log_total_size</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Audit_log_write_waits</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Binlog_cache_disk_use</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Binlog_cache_use</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Binlog_stmt_cache_disk_use</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Binlog_stmt_cache_use</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Bytes_received</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Bytes_sent</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_admin_commands</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_alter_db</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_alter_db_upgrade</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_alter_event</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_alter_function</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_alter_procedure</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_alter_server</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_alter_table</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_alter_tablespace</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_alter_user</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_analyze</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_assign_to_keycache</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_begin</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_binlog</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_call_procedure</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_change_db</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_change_master</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_change_repl_filter</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_check</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_checksum</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_commit</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_create_db</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_create_event</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_create_function</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_create_index</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_create_procedure</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_create_server</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_create_table</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_create_trigger</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_create_udf</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_create_user</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_create_view</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_dealloc_sql</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_delete</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_delete_multi</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_do</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_drop_db</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_drop_event</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_drop_function</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_drop_index</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_drop_procedure</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_drop_server</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_drop_table</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_drop_trigger</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_drop_user</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_drop_view</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_empty_query</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_execute_sql</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_explain_other</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_flush</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_get_diagnostics</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_grant</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_group_replication_start</td>
<td></td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Com_group_replication_stop</td>
<td></td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Com_ha_close</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_ha_open</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_ha_read</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_help</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_insert</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_insert_select</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_install_plugin</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_kill</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_load</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_lock_tables</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_optimize</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_preload_keys</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_prepare_sql</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_purge</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_purge_before_date</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_release_savepoint</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_rename_table</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_rename_user</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_repair</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_replace</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_replace_select</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_reset</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_resignal</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_revoke</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_revoke_all</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_rollback</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_rollback_to_savepoint</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_savepoint</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_select</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_set_option</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_authors</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_binlog_events</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_binlogs</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_charsets</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_collations</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_contributors</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_create_db</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_create_event</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_create_func</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_create_proc</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_create_table</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_create_trigger</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_create_user</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_databases</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_engine_logs</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_engine_mutex</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_engine_status</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_errors</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_events</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_fields</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_function_code</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_function_status</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_grants</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_keys</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_master_status</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_ndb_status</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_new_master</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_open_tables</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_plugins</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_privileges</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_procedure_code</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_procedure_status</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_processlist</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_profile</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_profiles</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_relaylog_events</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_slave_hosts</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_slave_status</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_slave_status_nonblocking</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_status</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_storage_engines</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_table_status</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_tables</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_triggers</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_variables</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_show_warnings</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_shutdown</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_signal</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_slave_start</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_slave_stop</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_stmt_close</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_stmt_execute</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_stmt_fetch</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_stmt_prepare</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_stmt_reprepare</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_stmt_reset</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_stmt_send_long_data</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_truncate</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_uninstall_plugin</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_unlock_tables</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_update</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_update_multi</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_xa_commit</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_xa_end</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_xa_prepare</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_xa_recover</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_xa_rollback</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Com_xa_start</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Compression</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Connection_control_delay_generated</td>
<td></td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Connection_errors_accept</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Connection_errors_internal</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Connection_errors_max_connections</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Connection_errors_peer_address</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Connection_errors_select</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Connection_errors_tcpwrap</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Connections</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Created_tmp_disk_tables</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Created_tmp_files</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Created_tmp_tables</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Delayed_errors</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Delayed_insert_threads</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Delayed_writes</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Firewall_access_denied</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Firewall_access_granted</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Firewall_cached_entries</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Flush_commands</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Handler_commit</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_delete</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_discover</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_external_lock</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_mrr_init</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_prepare</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_read_first</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_read_key</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_read_last</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_read_next</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_read_prev</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_read_rnd</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_read_rnd_next</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_rollback</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_savepoint</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_savepoint_rollback</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_update</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Handler_write</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Innodb_available_undo_logs</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_bytes_data</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_bytes_dirty</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_dump_status</td>
<td>string</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_load_status</td>
<td>string</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_pages_data</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_pages_dirty</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_pages_flushed</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_pages_free</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_pages_latched</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_pages_misc</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_pages_total</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_read_ahead</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_read_ahead_evicted</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_read_ahead_rnd</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_read_requests</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_reads</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_resize_status</td>
<td>string</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_wait_free</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_buffer_pool_write_requests</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_data_fsyncs</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_data_pending_fsyncs</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_data_pending_reads</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_data_pending_writes</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_data_read</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_data_reads</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_data_writes</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_data_written</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_dblwr_pages_written</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_dblwr_writes</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_have_atomic_builtins</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_log_waits</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_log_write_requests</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_log_writes</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_num_open_files</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_os_log_fsyncs</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_os_log_pending_fsyncs</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_os_log_pending_writes</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_os_log_written</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_page_size</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_pages_created</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_pages_read</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_pages_written</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_row_lock_current_waits</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_row_lock_time</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_row_lock_time_avg</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_row_lock_time_max</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_row_lock_waits</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_rows_deleted</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_rows_inserted</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_rows_read</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_rows_updated</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Innodb_truncated_status_writes</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Key_blocks_not_flushed</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Key_blocks_unused</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Key_blocks_used</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Key_read_requests</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Key_reads</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Key_write_requests</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Key_writes</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Last_query_cost</td>
<td>numeric</td>
<td>SESSION</td>
</tr>
<tr>
<td>Last_query_partial_plans</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Locked_connects</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Max_execution_time_exceeded</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Max_execution_time_set</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Max_execution_time_set_failed</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Max_statement_time_exceeded</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Max_statement_time_set</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Max_statement_time_set_failed</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Max_used_connections</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Max_used_connections_time</td>
<td>datetime</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>mecab_charset</td>
<td>string</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_aborted_clients</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_address</td>
<td>string</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_bytes_received</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_bytes_sent</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_connection_accept_errors</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_connection_errors</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_connections_accepted</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_connections_closed</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_connections_rejected</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_crud_create_view</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_crud_delete</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_crud_drop_view</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_crud_find</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_crud_insert</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_crud_modify_view</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_crud_update</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_errors_sent</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_errors_unknown_message_type</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_expect_close</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_expect_open</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_init_error</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_notice_other_sent</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_notice_warning_sent</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_port</td>
<td>string</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_rows_sent</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_sessions</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_sessions_accepted</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_sessions_closed</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_sessions_fatal_error</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_sessions_killed</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_sessions_rejected</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_socket</td>
<td>string</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_ssl_accept_renegotiates</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_ssl_accepts</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_ssl_active</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_ssl_cipher</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_ssl_cipher_list</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_ssl_ctx_verify_depth</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_ssl_ctx_verify_mode</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_ssl_finished_accepts</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_ssl_server_not_after</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_ssl_server_not_before</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_ssl_verify_depth</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_ssl_verify_mode</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_ssl_version</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_create_collection</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_create_collection_index</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_disable_notices</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_drop_collection</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_drop_collection_index</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_enable_notices</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_ensure_collection</td>
<td>string</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_execute_mysqlx</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_execute_sql</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_execute_xplugin</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_kill_client</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_list_clients</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_list_notices</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_list_objects</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_stmt_ping</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Mysqlx_worker_threads</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Mysqlx_worker_threads_active</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_bytes_received_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_bytes_received_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_bytes_received_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_bytes_sent_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_bytes_sent_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_event_bytes_count_injector</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_event_data_count_injector</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_event_nondata_count_injector</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_pk_op_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_pk_op_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_pk_op_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_pruned_scan_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_pruned_scan_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_range_scan_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_read_row_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_read_row_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_scan_batch_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_table_scan_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_table_scan_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_trans_abort_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_trans_abort_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_trans_abort_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_trans_close_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_trans_close_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_trans_close_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_trans_commit_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_trans_commit_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_trans_commit_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_trans_local_read_row_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_trans_start_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_trans_start_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_trans_start_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_uk_op_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_uk_op_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_wait_exec_complete_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_wait_exec_complete_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_wait_exec_complete_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_wait_meta_request_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_wait_meta_request_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_wait_nanos_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_wait_nanos_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_wait_nanos_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_wait_scan_result_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_api_wait_scan_result_count_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_api_wait_scan_result_count_slave</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_cluster_node_id</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ndb_config_from_host</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ndb_config_from_port</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ndb_conflict_fn_epoch_trans</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_conflict_fn_max</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_conflict_fn_old</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_conflict_trans_detect_iter_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_conflict_trans_row_reject_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_last_commit_epoch_server</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_last_commit_epoch_session</td>
<td>integer</td>
<td>SESSION</td>
</tr>
<tr>
<td>Ndb_cluster_node_id</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_number_of_data_nodes</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_pushed_queries_defined</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_pushed_queries_executed</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ndb_scan_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Not_flushed_delayed_rows</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ongoing_anonymous_gtid_violating_transaction_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ongoing_anonymous_transaction_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ongoing_automatic_gtid_violating_transaction_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Open_files</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Open_streams</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Open_table_definitions</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Open_tables</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Opened_files</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Opened_table_definitions</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Opened_tables</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Performance_schema_accounts_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_cond_classes_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_cond_instances_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_digest_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_file_classes_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_file_handles_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_file_instances_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_hosts_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_index_stat_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_locker_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_memory_classes_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_metadata_lock_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_mutex_classes_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_mutex_instances_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_nested_statement_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_prepared_statements_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_program_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_rwlock_classes_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_rwlock_instances_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_session_connect_attrs_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_socket_classes_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_socket_instances_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_stage_classes_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_statement_classes_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_table_handles_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_table_instances_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_table_lock_stat_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_thread_classes_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_thread_instances_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Performance_schema_users_lost</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Prepared_stmt_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Qcache_free_blocks</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Qcache_free_memory</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Qcache_hits</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Qcache_inserts</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Qcache_lowmem_prunes</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Qcache_not_cached</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Qcache_queries_in_cache</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Qcache_total_blocks</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Queries</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Questions</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Rewriter_number_loaded_rules</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rewriter_number_reloads</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rewriter_number_rewritten_queries</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rewriter_reload_error</td>
<td>boolean</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_clients</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_net_avg_wait_time</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_net_wait_time</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_net_waits</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_no_times</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_no_tx</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_status</td>
<td>boolean</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_timefunc_failures</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_tx_avg_wait_time</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_tx_wait_time</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_tx_waits</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_wait_pos_backtraverse</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_wait_sessions</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_master_yes_tx</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rpl_semi_sync_slave_status</td>
<td>boolean</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Rsa_public_key</td>
<td>string</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Select_full_join</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Select_full_range_join</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Select_range</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Select_range_check</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Select_scan</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Slave_heartbeat_period</td>
<td>numeric</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Slave_last_heartbeat</td>
<td></td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Slave_open_temp_tables</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Slave_received_heartbeats</td>
<td></td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Slave_retried_transactions</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Slave_rows_last_search_algorithm_used</td>
<td>string</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Slave_running</td>
<td>boolean</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Slow_launch_threads</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Slow_queries</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Sort_merge_passes</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Sort_range</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Sort_rows</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Sort_scan</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ssl_accept_renegotiates</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_accepts</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_callback_cache_hits</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_cipher</td>
<td>string</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ssl_cipher_list</td>
<td>string</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ssl_client_connects</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_connect_renegotiates</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_ctx_verify_depth</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_ctx_verify_mode</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_default_timeout</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ssl_finished_accepts</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_finished_connects</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_server_not_after</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ssl_server_not_before</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ssl_session_cache_hits</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_session_cache_misses</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_session_cache_mode</td>
<td>string</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_session_cache_overflows</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_session_cache_size</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_session_cache_timeouts</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_sessions_reused</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ssl_used_session_cache_entries</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Ssl_verify_depth</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ssl_verify_mode</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Ssl_version</td>
<td>string</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Table_locks_immediate</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Table_locks_waited</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Table_open_cache_hits</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Table_open_cache_misses</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Table_open_cache_overflows</td>
<td>integer</td>
<td>GLOBAL/SESSION</td>
</tr>
<tr>
<td>Tc_log_max_pages_used</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Tc_log_page_size</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Tc_log_page_waits</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Threads_cached</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Threads_connected</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Threads_created</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Threads_running</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Uptime</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>Uptime_since_flush_status</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>validate_password_dictionary_file_last_parsed</td>
<td>datetime</td>
<td>GLOBAL</td>
</tr>
<tr>
<td>validate_password_dictionary_file_words_count</td>
<td>integer</td>
<td>GLOBAL</td>
</tr>
</tbody>
</table>
<p><strong>参考文档：</strong> <a
href="https://dev.mysql.com/doc/refman/5.7/en/server-status-variables.html">5.1.7
Server Status Variables</a> <a
href="https://blog.csdn.net/maxsky/article/details/54666998">Markdown
表格之调整宽度技巧</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>extended-status</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL 中批量创建表</title>
    <url>/2018/05/17/MySQL%E4%B8%AD%E6%89%B9%E9%87%8F%E5%88%9B%E5%BB%BA%E8%A1%A8/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>当需要在 MySQL 数据库中创建表名类似于
<code>log_20180101</code>、<code>log_20180102</code>
这样基于日期的数据表时，可以使用下面的存储过程一次创建一个月的数据表：
<span id="more"></span></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">delimiter <span class="operator">/</span><span class="operator">/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">procedure</span> create_table()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> i <span class="type">INT</span>;</span><br><span class="line"><span class="keyword">DECLARE</span> table_name <span class="type">VARCHAR</span>(<span class="number">200</span>); </span><br><span class="line"><span class="keyword">DECLARE</span> table_pre <span class="type">VARCHAR</span>(<span class="number">200</span>); </span><br><span class="line"><span class="keyword">DECLARE</span> sql_text <span class="type">VARCHAR</span>(<span class="number">10000</span>); </span><br><span class="line"><span class="keyword">SET</span> i<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">SET</span> table_name<span class="operator">=</span><span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="keyword">SET</span> table_pre<span class="operator">=</span><span class="string">&#x27;log_201801&#x27;</span>;</span><br><span class="line"><span class="keyword">SET</span> sql_text<span class="operator">=</span><span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">while i<span class="operator">&lt;</span><span class="number">32</span> do</span><br><span class="line"></span><br><span class="line">IF i<span class="operator">&lt;</span><span class="number">10</span> <span class="keyword">THEN</span> <span class="keyword">SET</span> table_name<span class="operator">=</span>CONCAT(table_pre,&quot;0&quot;,i);</span><br><span class="line"><span class="keyword">ELSE</span> <span class="keyword">SET</span> table_name<span class="operator">=</span>CONCAT(table_pre,i);</span><br><span class="line"><span class="keyword">END</span> IF;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> sql_text<span class="operator">=</span>CONCAT(<span class="string">&#x27;CREATE TABLE &#x27;</span>, table_name, <span class="string">&#x27;(</span></span><br><span class="line"><span class="string">  `ID` int(11) NOT NULL AUTO_INCREMENT,</span></span><br><span class="line"><span class="string">  `event_name` varchar(32) NOT NULL,</span></span><br><span class="line"><span class="string">  `Log_Time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,</span></span><br><span class="line"><span class="string">  PRIMARY KEY (`ID`)</span></span><br><span class="line"><span class="string">) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=utf8&#x27;</span> );</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@sql_text</span><span class="operator">=</span>sql_text;</span><br><span class="line"><span class="keyword">PREPARE</span> stmt <span class="keyword">FROM</span> <span class="variable">@sql_text</span>;</span><br><span class="line"><span class="keyword">EXECUTE</span> stmt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> i<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span> while;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="keyword">call</span> create_table();</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">procedure</span> create_table;</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span></span><br></pre></td></tr></table></figure>
<p>也可以创建一个存储过程，然后通过事件调度每天 00:00:00 执行：
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span>  <span class="keyword">PROCEDURE</span> `create_log_table`()</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">set</span> <span class="variable">@sqlstr</span><span class="operator">=</span>CONCAT(<span class="string">&#x27;CREATE TABLE IF NOT EXISTS `log_&#x27;</span>,DATE_FORMAT(NOW(),<span class="string">&#x27;%Y%m%d&#x27;</span>),<span class="string">&#x27;` (</span></span><br><span class="line"><span class="string">		`id` int(10) AUTO_INCREMENT NOT NULL,`Gboard_UUID` varchar(32) NOT NULL,`Channel` varchar(4) NOT NULL,		</span></span><br><span class="line"><span class="string">        `event_name` varchar(32) NOT NULL,</span></span><br><span class="line"><span class="string">        `Log_Time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,</span></span><br><span class="line"><span class="string">		PRIMARY KEY (`id`)</span></span><br><span class="line"><span class="string">		)ENGINE=MyISAM DEFAULT CHARSET=utf8;&#x27;</span>);</span><br><span class="line">  <span class="keyword">PREPARE</span> create_stmt <span class="keyword">from</span> <span class="variable">@sqlstr</span>;</span><br><span class="line">  <span class="keyword">EXECUTE</span> create_stmt;</span><br><span class="line"></span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure> 事件 <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> EVENT `create_log_daily` <span class="keyword">ON</span> SCHEDULE <span class="keyword">EVERY</span> <span class="number">1</span> <span class="keyword">DAY</span> STARTS <span class="string">&#x27;2018-01-01 00:00:00&#x27;</span> <span class="keyword">ON</span> COMPLETION PRESERVE ENABLE DO <span class="keyword">CALL</span> create_log_table()</span><br></pre></td></tr></table></figure></p>
<p><strong>参考文档：</strong> <a
href="https://my.oschina.net/wddqing/blog/298384">批量建立MySQL表</a> <a
href="https://blog.csdn.net/fangfengzhen115/article/details/46987107">Mysql存储过程_一次性建立多张表</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>批量</tag>
        <tag>建表</tag>
      </tags>
  </entry>
  <entry>
    <title>入门指南和用法</title>
    <url>/2018/04/17/%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97%E5%92%8C%E7%94%A8%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="innobackupex-的用法"><a
href="https://toypipi.github.io/2018/04/17/innobackupex-%E7%9A%84%E7%94%A8%E6%B3%95/"><strong>innobackupex</strong>
的用法</a></h1>
<ul>
<li>制作本地完整备份（创建，准备和还原）</li>
<li>制作流式备份</li>
<li>制作增量备份</li>
<li>制作压缩备份</li>
<li>备份和还原单个分区</li>
</ul>
<h1 id="xtrabackup-的用法"><strong>xtrabackup</strong> 的用法</h1>
<ul>
<li>制作完整备份</li>
<li>制作增量备份</li>
<li>还原备份 <span id="more"></span></li>
</ul>
<h1 id="入门指南">入门指南</h1>
<ul>
<li>如何使用 Percona XtraBackup 轻松 6 步设置用于复制的从库</li>
<li>使用复制和 pt-checksum 验证备份</li>
<li>如何创建一个新的（或修复一个坏的）基于 GTID 的从库</li>
</ul>
<h1 id="辅助指导">辅助指导</h1>
<ul>
<li>允许服务器通过 TCP/IP 进行通信</li>
<li>用户的特权和权限</li>
<li>安装和配置 SSH 服务器</li>
</ul>
<h1 id="本节中的假设">本节中的假设</h1>
<p>大多数情况下，上下文将使用法或教程更容易理解。为了保证以上内容，此处将给出本节中出现的假设，名称以及“其他事物”的列表。他们将在每个用法或教程的开头指定，以使它能被更快读取和更易实用。</p>
<p><code>HOST</code> 基于 MySQL
安装，配置和运行的服务器系统。我们将假设关于这个系统的以下内容：</p>
<ul>
<li>MySQL 服务器能够<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/howtos/enabling_tcp.html">通过标准的
TCP/IP 端口与其他应用进行通信</a>;</li>
<li>安装并配置了 SSH 服务 - 如果不是，请参阅<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/howtos/ssh_server.html">此处</a>;</li>
<li>您在系统中拥有适当<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/howtos/permissions.html">权限</a>的用户帐户</li>
<li>你有一个 MySQL 用户帐户，该账户具有适当的 <a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/using_xtrabackup/privileges.html#privileges">Connection
和 Privileges 权限</a>。</li>
</ul>
<p><code>USER</code> 操作系统中具有 shell
访问权限和执行任务的适当权限的用户帐户。检查他们的指南在<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/howtos/permissions.html">这里</a>。</p>
<p><code>DB-USER</code>
数据库服务器中具有适当任务权限的用户帐户。检查他们的指南在<a
href="https://www.percona.com/doc/percona-xtrabackup/LATEST/howtos/permissions.html">这里</a>。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>XtraBackup</tag>
      </tags>
  </entry>
  <entry>
    <title>MariaDB 中开启 TokuDB</title>
    <url>/2018/05/17/MariaDB%E4%B8%AD%E5%BC%80%E5%90%AFTokuDB/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p><strong>参考文档：</strong> <a
href="https://mariadb.com/kb/en/library/enabling-tokudb/">Enabling
TokuDB</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>MariaDB</tag>
        <tag>TokuDB</tag>
      </tags>
  </entry>
  <entry>
    <title>Python 爬取豆瓣图书评论</title>
    <url>/2018/05/31/Python-%E7%88%AC%E5%8F%96%E8%B1%86%E7%93%A3%E5%9B%BE%E4%B9%A6%E8%AF%84%E8%AE%BA/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>代码来自中国大学慕课 <a
href="https://www.icourse163.org/learn/NJU-1001571005?tid=1002097008#/learn/announce">用
Python 玩转数据</a>。添加了详细的注释，修改了计算平均分的循环条件。
<div class="note danger"><p><code>time.sleep(5)</code> 一定要加，不然会被豆瓣检测到异常流量而屏蔽
get 请求。</p>
</div> <span id="more"></span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests,re,time</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">count = <span class="number">0</span> <span class="comment"># 爬取 50 条评论循环</span></span><br><span class="line">i = <span class="number">0</span> <span class="comment"># 控制评论页数</span></span><br><span class="line"><span class="built_in">sum</span> = <span class="number">0</span> <span class="comment"># 50 条评论分数总和</span></span><br><span class="line">count_s = <span class="number">0</span> <span class="comment"># 爬取 50 条评论分数循环</span></span><br><span class="line"><span class="keyword">while</span>(count &lt; <span class="number">50</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        r = requests.get(<span class="string">&#x27;https://book.douban.com/subject/27599965/comments/hot?p=&#x27;</span> + <span class="built_in">str</span>(i+<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">except</span> Exception <span class="keyword">as</span> err:</span><br><span class="line">        <span class="built_in">print</span>(err)</span><br><span class="line">        <span class="keyword">break</span> </span><br><span class="line">    soup = BeautifulSoup(r.text,<span class="string">&#x27;lxml&#x27;</span>) <span class="comment"># html 解析</span></span><br><span class="line">    comments=soup.find_all(<span class="string">&#x27;p&#x27;</span>,<span class="string">&#x27;comment-content&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> comments:</span><br><span class="line">        count = count + <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> count &gt; <span class="number">50</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="built_in">print</span>(count,item.string) <span class="comment"># 打印输出每条评论</span></span><br><span class="line">    pattern = re.<span class="built_in">compile</span>(<span class="string">&#x27;&lt;span class=&quot;user-stars allstar(.*?) rating&quot;&#x27;</span>) <span class="comment"># 构建获取分数的正则表达式</span></span><br><span class="line">    p = re.findall(pattern, r.text)</span><br><span class="line">    <span class="keyword">for</span> star <span class="keyword">in</span> p:    </span><br><span class="line">        count_s = count_s + <span class="number">1</span></span><br><span class="line">        <span class="built_in">sum</span> += <span class="built_in">int</span>(star)</span><br><span class="line">    time.sleep(<span class="number">5</span>) <span class="comment"># delay request from douban&#x27;s robots.txt</span></span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;count: %d&quot;</span>%count)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;count_s: %d&quot;</span>%count_s)</span><br><span class="line"><span class="keyword">if</span> count == <span class="number">51</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="built_in">sum</span>/count_s)</span><br></pre></td></tr></table></figure>
<p><strong>参考文档：</strong> <a
href="https://www.icourse163.org/learn/NJU-1001571005?tid=1002097008#/learn/content?type=detail&amp;id=1002858587&amp;cid=1003258763">用
Python 玩转数据</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>解决 hexo next 主题不显示 hypercomments 评论</title>
    <url>/2018/03/27/%E8%A7%A3%E5%86%B3hexo-next-%E4%B8%BB%E9%A2%98%E4%B8%8D%E6%98%BE%E7%A4%BA-hypercomments-%E8%AF%84%E8%AE%BA/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>hexo next 使用 hypercomments 很简单，只需要在主题配置文件中的
<code>hypercomments_id:</code> 填上自己在 hypercomments 注册站点后生成的
ID
号即可。我要说的是我按照这个方法填写以后却总是没有显示评论窗口，重新安装主题以后还是不行。
后来登录 hypercomments 官网，在设置 -&gt; General -&gt; Website name
栏中，发现我的站点名多了一个 “/” ，删掉它就可以正常显示了。</p>
<img src="/2018/03/27/%E8%A7%A3%E5%86%B3hexo-next-%E4%B8%BB%E9%A2%98%E4%B8%8D%E6%98%BE%E7%A4%BA-hypercomments-%E8%AF%84%E8%AE%BA/1.png" class="">
<p>注意： <div class="note info"><p>在更新 hexo
主题时一定要先备份原来的主题，不然辛辛苦苦配置的各种效果一不小心就全没了。。。
备份以后如果发现新主题不满意，还可以马上切换回原来的主题。</p>
</div></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hypercommetns</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Python 爬取道指成分股数据</title>
    <url>/2018/05/31/Python-%E7%88%AC%E5%8F%96%E9%81%93%E6%8C%87%E6%88%90%E5%88%86%E8%82%A1%E6%95%B0%E6%8D%AE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>代码来自中国大学慕课 <a
href="https://www.icourse163.org/learn/NJU-1001571005?tid=1002097008#/learn/announce">用
Python 玩转数据</a>。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">retrieve_dji_list</span>():</span><br><span class="line">    r = requests.get(<span class="string">&#x27;http://money.cnn.com/data/dow30/&#x27;</span>)</span><br><span class="line">    search_pattern = re.<span class="built_in">compile</span>(<span class="string">&#x27;class=&quot;wsod_symbol&quot;&gt;(.*)&lt;\/a&gt;.*&lt;span.*&quot;&gt;(.*?)&lt;\/span&gt;.*\n.*class=&quot;wsod_stream&quot;&gt;(.*)&lt;\/span&gt;&#x27;</span>)</span><br><span class="line">    dji_list_in_text = re.findall(search_pattern, r.text)</span><br><span class="line">    <span class="keyword">return</span> dji_list_in_text</span><br><span class="line"></span><br><span class="line">dji_list = retrieve_dji_list()</span><br><span class="line"><span class="built_in">print</span>(dji_list)</span><br></pre></td></tr></table></figure>
<p><strong>参考文档：</strong> <a
href="https://www.icourse163.org/learn/NJU-1001571005?tid=1002097008#/learn/content?type=detail&amp;id=1002858587&amp;cid=1003258763">用
Python 玩转数据</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>排序算法图示</title>
    <url>/2018/06/30/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%9B%BE%E7%A4%BA/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h3 id="冒泡排序">冒泡排序</h3>
<img src="/2018/06/30/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E5%9B%BE%E7%A4%BA/1.gif" class="">
<p><strong>参考文档：</strong> <a
href="http://www.cnblogs.com/eniac12/p/5329396.html">常用排序算法总结(一)</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>排序算法</tag>
      </tags>
  </entry>
  <entry>
    <title>mooc 学习记录</title>
    <url>/2018/07/12/mooc-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>记录一下学习的 mooc 课程。</p>
<span id="more"></span>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>课程名</th>
<th>大学</th>
<th>教师</th>
</tr>
</thead>
<tbody>
<tr>
<td><a
href="https://www.icourse163.org/learn/XJTU-46016?tid=1002764003#/learn/announce">1.《大学计算机》</a></td>
<td>西安交通大学</td>
<td>吴宁、崔舒宁</td>
</tr>
<tr>
<td><a
href="https://www.icourse163.org/learn/BIT-268001?tid=1002788003#/learn/announce">2.《Python语言程序设计》</a></td>
<td>北京理工大学</td>
<td>嵩天、黄天羽、礼欣</td>
</tr>
<tr>
<td><a
href="https://www.coursera.org/learn/uva-darden-getting-started-agile/home/welcome">3.《Getting
Started: Agile Meets Design Thinking》</a></td>
<td>University of Virginia</td>
<td>Alex Cowan</td>
</tr>
<tr>
<td><a
href="https://www.coursera.org/learn/uva-darden-agile-team-management/home/welcome">4.《Managing
an Agile Team》</a></td>
<td>University of Virginia</td>
<td>Alex Cowan</td>
</tr>
<tr>
<td><a
href="https://www.coursera.org/learn/uva-darden-agile-testing/home/welcome">5.《Testing
with Agile》</a></td>
<td>University of Virginia</td>
<td>Alex Cowan</td>
</tr>
<tr>
<td><a
href="https://www.coursera.org/learn/uva-darden-agile-development-capstone/home/welcome">6.《Agile
Development in Practice (Project-centered Course)》</a></td>
<td>University of Virginia</td>
<td>Alex Cowan</td>
</tr>
<tr>
<td><a
href="https://www.coursera.org/learn/introduction-to-software-product-management/home/welcome">7.《软件产品管理导论》</a></td>
<td>阿尔伯塔大学</td>
<td>Kenny Wong</td>
</tr>
<tr>
<td><a
href="https://www.coursera.org/learn/software-processes-and-agile-practices/home/welcome">8.《Software
Processes and Agile Practices》</a></td>
<td>阿尔伯塔大学</td>
<td>Kenny Wong</td>
</tr>
<tr>
<td><a
href="https://www.coursera.org/learn/client-needs-and-software-requirements/home/welcome">9.《Client
Needs and Software Requirements》</a></td>
<td>阿尔伯塔大学</td>
<td>Kenny Wong</td>
</tr>
<tr>
<td><a
href="https://www.coursera.org/learn/agile-planning-for-software-products/home/welcome">10.《Agile
Planning for Software Products》</a></td>
<td>阿尔伯塔大学</td>
<td>Kenny Wong</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>mooc</tag>
      </tags>
  </entry>
  <entry>
    <title>MariaDB Keepalived 双主热备之踩坑记</title>
    <url>/2018/09/12/MariaDB-Keepalived-%E5%8F%8C%E4%B8%BB%E7%83%AD%E5%A4%87%E4%B9%8B%E9%87%87%E5%9D%91%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>MariaDB 和 Keepalived 使用 yum 安装，在验证 Keepalived
时，关闭一台机器上的 MariaDB ， 总是无法杀死 Keepalived 进程，导致虚拟
ip 无法迁移到另外一台服务器上。单独执行 track_script
里配置的脚本，却可以杀死 Keepalived 进程，怀疑是 track_script
里配置的脚本没有执行，所以一开始我以为是 Keepalived
的配置文件写错了，查阅了多篇博客，反复修改还是不行。后来在 Keepalived
日志文件里发现一些提示 <code>Unknown keyword 'track_script&#123;</code>
。经过检索，发现是配置文件和大括号之间少了一个空格。加上空格后就可以正常运行了。</p>
<p>总结一下： 1.
日志很重要，有些问题从日志里就可以找到答案。其实一开始就发现日志里有这个问题了，但是没有进一步深究，于是浪费了很多时间在其他方面。
2.
当没有解决思路时，可以放一放，不要一味纠结其中。配置文件我也检查了好几遍，发现了其他没有加空格的地方，唯独单单没发现这点，可能当时自己一心急于解决问题，头脑已经混乱了。</p>
<span id="more"></span>
<p>另附 Keepalived 配置单独日志的方法： Keepalived 日志默认存放在
<code>/var/log/messages</code> 中，想要将其单独存放，需在
<code>/etc/sysconfig/keepalived</code> 文件中修改
<code>KEEPALIVED_OPTIONS="-D -d -S 0</code>。并在
<code>/etc/rsyslog.conf</code> 末尾添加
<code>local0.*     /var/log/keepalived.log</code>。</p>
<p><strong>参考文档：</strong> <a
href="https://blog.csdn.net/weiyuefei/article/details/78131509">指定
Keepalived 输出日志文件</a> <a
href="http://blog.51cto.com/dianel/1965803">Keepalived+Nginx
架构详解</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>MariaDB</tag>
        <tag>Keepalived</tag>
        <tag>双主热备</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL server PID file could not be found!</title>
    <url>/2018/07/20/MySQL-server-PID-file-could-not-be-found/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>今天使用测试数据库时发现突然无法连接了，然后登录到服务器上查看 MySQL
进程还在，使用命令 <code>service restart mysql</code> 重启 MySQL
报错:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">MySQL server PID file could not be found!     [FAILED]</span><br><span class="line">Starting MySQL...The server quit without updating PID file (/usr/local/mysql/data/mysql.pid).</span><br></pre></td></tr></table></figure>
<p>经过一番网上查询，有说磁盘满会导致此问题，马上检查了一下，果然
<code>/</code> 目录已经使用了 98% ，删除一些不再使用的程序包后。重启
MySQL 还是同样的问题。</p>
<span id="more"></span>
<p>网上的其他解决方案试了也不行。后来我想要不使用 MySQL
安全模式启动试试看。执行命令 <code>./mysqld_safe</code> 后，检查 MySQL
日志文件 <code>tail -100  /var/log/mysqld.log</code>
，终于发现了问题所在：</p>
<img src="/2018/07/20/MySQL-server-PID-file-could-not-be-found/1.png" class="">
<p>原来是 <code>my.cnf</code>
中有一个参数不支持，注释掉该参数以后，数据库可以正常启动。</p>
<p>问题解决，耶 ヾ(￣ ▽ ￣)Bye~</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>PID</tag>
      </tags>
  </entry>
  <entry>
    <title>CentOS 7.4 安装 CDH 5.15.0</title>
    <url>/2018/09/13/CentOS7-4-%E5%AE%89%E8%A3%85-CDH5-15-0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在网上找到的安装配置教程都是使用 MySQL 作为数据库，在 cloudera
官网上找到一篇<a
href="https://www.cloudera.com/documentation/enterprise/5-15-x/topics/install_cm_mariadb.html">使用
MariaDB 作为数据库的配置</a>文档，mark 一下。</p>
<p>使用 MariaDB 作为数据库安装 CDH 失败，换回 MySQL 5.7 安装成功。</p>
<p><strong>参考文档：</strong> <a
href="https://blog.csdn.net/xiaolong_4_2/article/details/81668847">在centos7离线安装CDH5.15</a>
<a
href="https://blog.csdn.net/u013429010/article/details/81744749">CENTOS
7.5离线安装Cloudera Manager 5和CDH5(5.15.0) 完全教程</a> <a
href="https://segmentfault.com/q/1010000013552053">CM5.14启动HUE Load
Balancer角色失败</a> <a
href="https://blog.csdn.net/yuanhaiwn/article/details/80496316">Hue警告:
必须在 HBase 服务中配置 Thrift Server 角色以使用 Hue HBase Browser
应用程序</a> <a
href="https://community.cloudera.com/t5/Cloudera-Manager-Installation/How-do-i-set-java-heap-size-for-Secondary-Name-Node/td-p/4077">How
do i set java heap size for Secondary Name Node</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>MariaDB</tag>
        <tag>CentOS7.4</tag>
        <tag>CDH5.15.0</tag>
        <tag>hadoop</tag>
      </tags>
  </entry>
  <entry>
    <title>2019 读书计划</title>
    <url>/2019/01/03/2019-%E8%AF%BB%E4%B9%A6%E8%AE%A1%E5%88%92/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<style>
table th:nth-of-type(2) {
    width: 75px;
}
table th:nth-of-type(3) {
    width: 120px;
}
table th:nth-of-type(4) {
    width: 60px;
}
</style>
<p>2018 年初定的阅读计划已经圆满完成。新的一年新的开始，2019 年计划阅读
20 本书。</p>
<p>2020 年 1 月 17 日结束产假回来上班，2019 年的读书计划完成的很好，2020
年要继续加油ヾ(◍°∇°◍)ﾉﾞ <sub></sub> <span id="more"></span></p>
<table>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th>书名</th>
<th>作者</th>
<th>ISBN</th>
<th>评分</th>
</tr>
</thead>
<tbody>
<tr>
<td><a
href="https://book.douban.com/subject/26382433/">1.《无声告白》</a></td>
<td>[美] 伍绮诗</td>
<td>9787539982830</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/26641870/">2.《西尔斯怀孕百科》</a></td>
<td>威廉·西尔斯</td>
<td>9787544278645</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30678919/">3.《数据库系统工程师教程（第3版）》</a></td>
<td>王亚平 主编</td>
<td>9787302481577</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/3682204/">4.《佐藤可士和的超整理术》</a></td>
<td>[日] 佐藤可士和</td>
<td>9787534427909</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/5372422/">5.《末日的愚者》</a></td>
<td>[日] 伊坂幸太郎</td>
<td>9787544715348</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/27614904/">6.《房思琪的初恋乐园》</a></td>
<td>林奕含</td>
<td>9787559614636</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30359352/">7.《为何家会伤人》</a></td>
<td>武志红</td>
<td>9787559613196</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a href="https://book.douban.com/subject/31768413/">8.《怀孕
胎教》</a></td>
<td>滕红</td>
<td>9787538495256</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/1033778/">9.《富爸爸，穷爸爸》</a></td>
<td>（美）罗伯特・T・清崎 / 莎伦・L・莱希特</td>
<td>9787506246743</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30407984/">10.《富人思维》</a></td>
<td>[美]贾森·卡拉卡尼斯</td>
<td>9787508691107</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25798102/">11.《MongoDB权威指南（第2版）》</a></td>
<td>霍多罗夫 (Kristina Chodorow)</td>
<td>9787115341082</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30415402/">12.《断舍离》</a></td>
<td>[日]山下英子</td>
<td>9787540489304</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/3533221/">13.《非暴力沟通》</a></td>
<td>[美] 马歇尔·卢森堡</td>
<td>9787508051000</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/25783654/">14.《如何高效学习》</a></td>
<td>[加拿大] 斯科特·扬</td>
<td>9787111444008</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/4191587/">15.《十一字杀人》</a></td>
<td>[日] 东野圭吾</td>
<td>9787532749522</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30210250/">16.《谁杀了她》</a></td>
<td>(日) 东野圭吾</td>
<td>9787530218181</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30977512/">17.《鲍秀兰谈母乳喂养与辅食添加》</a></td>
<td>鲍秀兰</td>
<td>9787512711983</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30897585/">18.《鲍秀兰谈婴幼儿潜能开发和早期教育》</a></td>
<td>鲍秀兰</td>
<td>9787512711969</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/34800351/">19.《半小时漫画经济学-生活常识篇》</a></td>
<td>陈磊·半小时漫画团队</td>
<td>9787544387873</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/34821264/">20.《半小时漫画经济学2：金融危机篇》</a></td>
<td>陈磊·半小时漫画团队</td>
<td>9787544388672</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/27053574/">21.《遇见你真好》</a></td>
<td>白峻也</td>
<td>9787559404381</td>
<td>★★★☆☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30216327/">22.《第一次照顾新生儿》</a></td>
<td>［英］温迪•格林</td>
<td>9787505741928</td>
<td>★★★★☆</td>
</tr>
<tr>
<td><a
href="https://book.douban.com/subject/30254298/">23.《云边有个小卖部》</a></td>
<td>张嘉佳</td>
<td>9787540487645</td>
<td>★★★★☆</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>读书</tag>
      </tags>
  </entry>
  <entry>
    <title>shell 获取上个月月份的日期值</title>
    <url>/2019/02/26/shell-%E8%8E%B7%E5%8F%96%E4%B8%8A%E4%B8%AA%E6%9C%88%E6%9C%88%E4%BB%BD%E7%9A%84%E6%97%A5%E6%9C%9F%E5%80%BC/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>工作中有这样一个需求，每月一号将生产服务器中的数据备份到数据仓库中。之前是每月一号手动执行备份的命令，现在将其写成
shell 脚本，结合定时任务实现自动化备份。</p>
<div class="note info"><p>以下为生产服务器上的脚本：</p>
</div>
<p>定时任务 <figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">0 9 1 * * /root/transform_data.sh</span><br></pre></td></tr></table></figure> <span id="more"></span> shell 脚本 transform_data.sh.
注意 transform_data.sh 要赋予执行权限， X.X.X.X 为数据仓库的 ip 地址。
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">! /bin/sh</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">此脚本用于将10.3.0.98数据上的水机数据备份到10.2.46.247，结合定时任务执行</span></span><br><span class="line"></span><br><span class="line">nowdate=`date +%Y%m01`  #本月第一天</span><br><span class="line">lastyearmonth=`date -d&quot;$nowdate last month&quot; +%Y%m` #显示年和上月月份值，如：201901</span><br><span class="line">echo &quot;rsync -av /usr/local/mysql/water/slave_status_$lastyearmonth* X.X.X.X:/var/lib/mysql/water_gprs_backup&quot;</span><br></pre></td></tr></table></figure></p>
<p><strong>参考文档：</strong> <a
href="https://blog.csdn.net/xiaowenK/article/details/54019501">在shell脚本中获取上个月最后一天的日期</a>
<a
href="https://cloud.tencent.com/developer/article/1027570">linux下监控某个目录是否被更改</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>shell</tag>
        <tag>月份日期值</tag>
      </tags>
  </entry>
  <entry>
    <title>关系模式的范式</title>
    <url>/2019/03/08/%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%8C%83%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>关系模式的范式思维导图：</p>
<img src="/2019/03/08/%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%BC%8F%E7%9A%84%E8%8C%83%E5%BC%8F/1.png" class="">
<span id="more"></span>
<p><strong>参考文档：</strong> <a
href="https://www.zhihu.com/question/24696366/answer/29189700">如何解释关系数据库的第一第二第三范式？
- 刘慰的回答 - 知乎</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>关系模式</tag>
        <tag>范式</tag>
      </tags>
  </entry>
  <entry>
    <title>关于精益的一些概念</title>
    <url>/2019/02/19/%E5%85%B3%E4%BA%8E%E7%B2%BE%E7%9B%8A%E7%9A%84%E4%B8%80%E4%BA%9B%E6%A6%82%E5%BF%B5/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<div class="note info"><p><strong>Lean</strong> is generally about cutting waste from a process
to focus on value creation.</p>
</div>
<p>
精益通常关注减少过程中的浪费，专注于价值创造。
</p>
<div class="note info"><p><strong>Effectiveness</strong> measures the capability of producing a
desired outcome, while <strong>efficiency</strong> measures to which
extent the lowest amount of resources is used to produce the greatest
amount of outputs.</p>
</div>
<p>有效性衡量产生预期结果的能力，而效率衡量用最低资源量产生最大产出量的程度。
<span id="more"></span></p>
<div class="note info"><p>A baker is <strong>effective</strong> if the cake he makes is tasty.
But a baker is efficient only if he can make the same cake with half as
much flour or half the time than his peers need.</p>
</div>
<p>
如果一个面包师制作的蛋糕好吃，我们就说他是有效的。但只有当他用一半的面粉或者比他的同行用时少一半做出同样的蛋糕时，我们才说他是有效率的。
</p>
<div class="note info"><p>It is essential to understand the difference between the two because
Lean aims to improve <strong>efficiency</strong>, which can free up
resources to then focus on <strong>effectiveness</strong>.</p>
</div>
<p>理解两者之间的区别是很重要的，因为精益的目标是提高效率，这可以释放资源，然后专注于有效性。</p>
<div class="note info"><p>A <strong>customer journey</strong> consists of <strong>all
decision-making steps</strong> that customers follow when purchasing and
using a product or service.</p>
</div>
<p>
客户旅程包括客户在购买和使用产品或服务时遵循的所有决策步骤。
</p>
<div class="note info"><p>When a customer wants to get a mortgage for a house, he will start
looking online at the rates he can get. Then, he will get in touch with
banks to get offers, negotiate, and finally be granted a loan. All
together, these steps make the customer journey.</p>
</div>
<p>当客户希望获得房屋抵押贷款时，他先在网上查看他可以获得的价格。
然后，他将与银行联系以获得报价，进行谈判，最后获得贷款。
这些步骤加起来组成了客户旅程。</p>
<div class="note info"><p><strong>Kaizen</strong> literally means “<strong>change for
better</strong>” or “<strong>continuous improvement</strong>”. In
practice, Kaizen is the approach to test a process improvement idea by
applying it to a process very quickly, adapting as you go, based on the
success of the change. Kaizen is about pushing quick and dirty
solutions, and then improving along the way instead of spending too long
planning a potential improvement.</p>
</div>
<p>
Kaizen 字面意思是“变得更好”或“持续改进”。 在实践中，Kaizen
是一种测试流程改进理念的方法，通过将流程改进的过程非常快速地应用于流程，并根据变更的成功进行调整。
Kaizen
致力于推动快速而恶劣的解决方案，然后一路改进，而不是花太多时间来计划一个可能的改进。
</p>
<div class="note info"><p><strong>Gemba</strong> is the Japanese word referring <strong>to the
place where value is created</strong>. Lean encourages manufacturing
managers to spend time on the factory floor to observe how products are
made in order to come up with actual useful improvements, instead of
staying in their office all day. Similarly, going to the Gemba in
services can mean spending time on-site to observe the interaction
between employee and customer.</p>
</div>
<p>Gemba 是日语单词，指的是创建价值的位置。
精益鼓励制造经理花时间在工厂车间观察产品的制作方法，以便提出实际有用的改进，而不是整天待在他们的办公室。
同样，在服务中使用 Gemba
可能意味着花时间在现场观察员工与客户之间的互动。</p>
<div class="note info"><p><strong>Jidoka</strong> is about <strong>intelligent
automation</strong> using machines to do the work, and humans to detect
errors. If an irregular situation comes up, a worker will stop the
production line, investigate what happened, and then correct the problem
immediately. On top of that, the worker will install counter measures to
ensure the problem never happens again.</p>
</div>
<p>
Jidoka
是关于智能自动化的，使用机器来完成工作，而人类来检测错误。如果出现不正常情况，工人将停止生产线，调查发生了什么，然后立即纠正问题。最重要的是，工人将安装防范措施，以确保问题不会再次发生。
</p>
<div class="note info"><p>A <strong>minimum viable product</strong>, or <strong>MVP</strong>,
is a product with just enough features to gather customer feedback and
help guide the continued development of the product. You can think of it
like the Kaizen of product development.</p>
</div>
<p>最小可行产品，或
MVP，是一种具有足够功能来收集客户反馈并帮助指导产品持续开发的产品。你可以把它想象成产品开发的改善。</p>
<div class="note info"><p>The <strong>value stream mapping</strong>, or <strong>VSM</strong>,
is a method used to identify activities that create value for the
customer when delivering a product or service. The value stream mapping
should cover all of the actions required to make a product, from the
beginning until the very end.</p>
</div>
<p>
价值流映射，或
VSM，是一种用于识别在交付产品或服务时为客户创造价值的活动的方法。价值流映射应该涵盖从开始到结束制作产品所需的所有操作。
</p>
<div class="note info"><p>The <strong>value stream design</strong>, or <strong>VSD</strong>,
builds on the value stream mapping methodology to design a future and
improved state of the value creation process. The value stream design
should address pain points identified in the value stream design, and
strive to eliminate waste.</p>
</div>
<p>价值流设计或 VSD
建立在价值流映射方法的基础上，以设计价值创造过程的未来和改进状态。价值流设计应该解决在价值流设计中确定的痛点，并努力消除浪费。</p>
<div class="note info"><p><strong>Six Sigma</strong> is a set of techniques and tools for
process improvement based on statistical analysis. Six Sigma aims to
reduce the variability of processes to ensure consistent quality.</p>
</div>
<p>
六西格玛是一套基于统计分析的流程改进技术和工具。
六西格玛旨在减少流程的可变性，以确保一致的质量。
</p>
<div class="note info"><p><strong>Just-in-Time</strong> is an approach coming from
manufacturing that aims to decrease inventory and lead time by
synchronizing manufacturing with customer demand. This approach can also
be applied to the production of services.</p>
</div>
<p>无库存制是一种来自制造业的方法，旨在通过制造与客户需求同步来减少库存和交货时间。
这种方法也可以应用于提供的服务。</p>
<p><strong>参考文档：</strong> <a
href="https://www.coursera.org/learn/lean-manufacturing-services/supplement/oIBHU/key-concepts-and-definitions">The
hidden value – Lean in manufacturing and services</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>精益</tag>
      </tags>
  </entry>
  <entry>
    <title>【数据结构】笔记</title>
    <url>/2019/03/28/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>学习浙江大学【数据结构】做的笔记。</p>
<h1 id="第二讲-线性结构">第二讲 线性结构</h1>
<h2 id="线性表及其实现">2.1 线性表及其实现</h2>
<p>多项式表示问题的启示：<br />
1.同一个问题可以有不同的表示（存储）方法
2.有一类共性问题：有序线性序列的组织和管理</p>
<h3
id="线性表linear-list由同类型-数据元素-构成-有序序列-的线性结构">线性表（Linear
List）：由同类型 数据元素 构成 有序序列 的线性结构</h3>
<ul>
<li>表中元素个数称为线性表的 长度</li>
<li>线性表没有元素时，称为 空表</li>
<li>表起始位置称为 表头，表结束位置称为 表尾</li>
</ul>
<span id="more"></span>
<p>线性表的基本操作： - 创建：创建一个空表 -
查找：查找某个元素是否在线性表中 - 插入：在某个位置插入一个元素 -
删除：删除某个位置上的元素</p>
<h3 id="广义表generalized-list">广义表（Generalized List）</h3>
<ul>
<li>广义表是线性表的推广</li>
<li>对于线性表而言，n 个元素都是基本的单元素</li>
<li>广义表中，这些元素不仅可以是单元素也可以是另一个广义表</li>
</ul>
<h3 id="多重链表">多重链表</h3>
<p>多重链表：链表中的节点可能同时隶属于多个链 -
多重链表中节点指针域会有多个，如前面例子包含了 Next 和 SubList
两个指针域 - 但包含两个指针域的链表并不一定是多重链表，比如
双向链表不是多重链表</p>
<p>多重链表有广泛的用途：
基本上如树、图这样相对复杂的数据结构都可以采用多重链表方式实现存储</p>
<h2 id="堆栈">2.2 堆栈</h2>
<h3 id="后缀表达式">后缀表达式</h3>
<p>后缀表达式求值策略：从左向右“扫描”，逐个处理运算数和运算符号</p>
<h3 id="堆栈的抽象数据类型描述">堆栈的抽象数据类型描述</h3>
<p>堆栈（Stack）：具有一定操作约束的线性表，只在一端（栈顶，Top）做插入、删除
- 插入数据：入栈（Push） - 删除数据：出栈（Pop） - 后入先出：Last In
First Out(LIFO)</p>
<h2 id="队列">2.3 队列</h2>
<p>队列（Queue）：具有一定操作约束的线性表。插入和删除操作：只能在一端插入，而在另一端删除。
- 数据插入：入队 - 数据删除：出队 - 先来先服务 - 先进先出：FIFO</p>
<h1 id="第三讲-树上">第三讲 树（上）</h1>
<h2 id="树与树的表示">3.1 树与树的表示</h2>
<p>查找：根据某个给定关键字 K， 从集合 R 中找出关键字 K 相同的记录 -
静态查找：集合中记录是固定的，没有插入和删除操作，只有查找 -
动态查找：集合中记录是动态的，除查找，还可能发生插入和删除</p>
<h3 id="树的一些基本术语">树的一些基本术语</h3>
<ol type="1">
<li>结点的度（Degree）：节点的字树个数</li>
<li>树的度：树的所有节点中最大的度数</li>
<li>叶节点（Leaf）：度为 0 的节点</li>
<li>父节点（Parent）：有子树的节点是其子树的根节点的父节点</li>
<li>子节点（Child）：若 A 结点是 B 结点的父节点，则称 B 结点是 A
结点的子结点；子结点也称孩子结点</li>
<li>兄弟节点（Sibling）：具有同一父节点的各结点彼此是兄弟节点</li>
<li>路径和路径长度：从结点 n<sub>1</sub> 到 n<sub>k</sub>
的路径为一个节点序列
n<sub>1</sub>，n<sub>2</sub>，n<sub>3</sub>，……，n<sub>k</sub>，
n<sub>i</sub> 是 n<sub>i+1</sub>
的父结点。路径所包含边的个数为路径的长度。</li>
<li>祖先节点（Ancestor）：沿树根到某一结点路径上的所有节点都是这个结点的祖先节点。</li>
<li>子孙结点（Descendant）：某一结点的子树中的所有结点是这个结点的子孙。</li>
<li>结点的层次（Level）：规定根节点在 1
层，其它任一节点的层数是其父结点的层数加 1 。</li>
<li>树的深度（Depth）：树种所有结点中的最大层次是这棵树的深度。</li>
</ol>
<h2 id="二叉树及其存储结构">3.2 二叉树及其存储结构</h2>
<p>二叉树 T：一个有穷的结点集合。 - 这个集合可以为空。 -
若不为空，则它是由根结点和称为其左子树 TL 和右字树 TR
的两个不相交的二叉树组成。</p>
<p>二叉树几个重要性质 - 一个二叉树第 i 层的最大结点数为：
2<sup>i-1</sup>，i ≥ 1 - 深度为 k 的二叉树有最大节点总数为：
2<sup>k</sup>-1，k ≥ 1 - 对任何非空二叉树 T ，若 n<sub>0</sub>
表示叶节点个数、 n<sub>2</sub> 是度为 2 的非叶节点个数，那么两者满足关系
n<sub>0</sub> = n<sub>2</sub> + 1 。</p>
<h2 id="二叉树的遍历">3.3 二叉树的遍历</h2>
<h3 id="先序遍历">先序遍历</h3>
<p>遍历过程为： 1.访问根节点 2.先序遍历其左子树 3.先序遍历其右字树</p>
<h3 id="中序遍历">中序遍历</h3>
<p>遍历过程为： 1.中序遍历其左子树 2.访问根节点 3.中序遍历其右字树</p>
<h3 id="后序遍历">后序遍历</h3>
<p>遍历过程为： 1.后序遍历其左子树 2.后序遍历其右字树 3.访问根节点</p>
<p>先序、中序和后序遍历过程：遍历过程中经过节点的路线一样，真是访问各结点的时机不同。</p>
<h1 id="第四讲-树中">第四讲 树（中）</h1>
<h2 id="二叉搜索树">4.1 二叉搜索树</h2>
<p>二叉搜索树（BST, Binary Search
Tree），也称二叉排序树或二叉查找树。</p>
<p>二叉搜索树：一棵二叉树，可以为空：如果不为空，满足以下性质：
1.非空左子树的所有键值小于其根节点的键值。
2.非空右字树的所有键值大于其根节点的键值。
3.左、右字树都是二叉搜索树。</p>
<h1 id="第五讲-树下">第五讲 树（下）</h1>
<h2 id="堆">5.1 堆</h2>
<p>优先队列（Priority
Queue）：特殊的“队列”，取出元素的顺序是依照元素的优先权（关键字）大小，而不是元素进入队列的先后顺序。</p>
<h2 id="哈夫曼树与哈夫曼编码">5.2 哈夫曼树与哈夫曼编码</h2>
<p>哈夫曼树的特点： - 没有度为 1 的结点； - n 个叶子结点的哈夫曼树共有
2n - 1 个结点； -
哈夫曼树的任意非叶节点的左右字树交换后仍是哈夫曼树；</p>
<h1 id="第六讲-图上">第六讲 图（上）</h1>
<h1 id="什么是图">6.1 什么是图</h1>
<p>什么是“图”（Graph） - 表示“多对多”的关系 - 包含： - 一组顶点：通常用
V（Vertex）表示顶点集合 - 一组边：通常用 E（Edge）表示边的集合</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>数据结构</tag>
      </tags>
  </entry>
  <entry>
    <title>《Python 3 网络爬虫开发实战》 学习笔记</title>
    <url>/2019/04/08/Python-3-%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>主要记录学习 《Python 3 网络爬虫开发实战》
一书过程中遇到的问题及解决办法。</p>
<h1 id="win7-安装-pyspider-报错">win7 安装 pyspider 报错</h1>
<p>安装过程没问题，但是运行报错如下图：</p>
<img src="/2019/04/08/Python-3-%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/1.png" class="">
<span id="more"></span>
<p>问题原因：WsgiDAV 发布了版本 pre-release 3.x
导致的，版本太高不兼容，所以把版本降下来就 OK 了 解决办法：运行 python
-m pip install wsgidav==2.4.1<br />
参考链接：<a
href="https://blog.csdn.net/genius_man/article/details/88392912">win
安装 pyspider 遇到的一个问题记录</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>数据库基础知识总结</title>
    <url>/2019/03/29/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="关系数据库的三级结构模式">关系数据库的三级结构模式</h1>
<img src="/2019/03/29/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%93/1.png" class="">
<span id="more"></span>
<h1 id="并行数据库体系结构">并行数据库体系结构</h1>
<p>并行数据库要求尽可能的并行执行所有的数据库操作，从而在整体上提高数据库系统的性能。根据所在的计算机的处理器（Processor）、内存（Memory）及存储设备（Storage）的相互关系，并行数据库可以归纳为三种基本的体系结构（这也是并行计算的三种基本体系结构），即：</p>
<ol type="1">
<li>共享内存结构（Shared-Memory)</li>
<li>共享磁盘结构（Shared-Disk）</li>
<li>无共享资源结构（Shared-Nothing）</li>
</ol>
<h2 id="共享内存shared-memory结构">共享内存（Shared-Memory)结构</h2>
<p>该结构包括多个处理器、一个全局共享的内存（主存储器）和多个磁盘存储，各个处理器通过高速通讯网络（InterconnectionNetwork）与共享内存连接，并均可直接访问系统中的一个、多个或全部的磁盘存储，在系统中，所有的内存和磁盘存储均由多个处理器共享。</p>
<ul>
<li>提供多个数据库服务的处理器通过全局共享内存来交换消息和数据，通讯效率很高，查询内部和查询间的并行性的实现也均不需要额外的开销；</li>
<li>数据库中的数据存储在多个磁盘存储上，并可以为所有处理器访问；</li>
<li>在数据库软件的编制方面与单处理机的情形区别也不大。</li>
</ul>
<p>这种结构由于使用了共享的内存，所有可以基于系统的实际负荷来动态地给系统中的各个处理器分配任务，从而可以很好地实现负荷均衡。</p>
<h2 id="共享磁盘shared-disk结构">共享磁盘（Shared-Disk)结构</h2>
<p>该结构有多个具有独立内存（主存储器）的处理器和多个磁盘存储构成，各个处理器相互之间没有任何直接的信息和数据的交换，多个处理器和磁盘存储由高速通信网络连接，每个处理器都可以读写全部的磁盘存储。</p>
<p>这种结构常用语实现数据库集群，硬件成本低、可扩充性好、可用性强，且可容易地从单处理器系统迁移，还可以容易地在多个处理器之间实现负载均衡。</p>
<h2
id="无共享资源shared-nothing结构">无共享资源（Shared-Nothing）结构</h2>
<p>该结构由多个完全独立的处理节点构成，每个处理节点具有自己独立的处理器、独立的内存（主存储器）和独立的磁盘存储，多个处理节点在处理级由高速通信网络连接，系统中的各个处理器使用自己的内存独立地处理自己的数据。</p>
<p>这种结构中，每一个处理节点就是一个小型的数据库结构，多个节点一起构成整个的分布式的并行数据库系统。由于每个处理器使用自己的资源处理自己的数据，不存在内存和磁盘的争用，提高的整体性能。另外这种结构具有优良的可扩展性——只需增加额外的处理节点，就可以以线性的比例增加系统的处理能力。</p>
<p>这种结构中，由于数据是各个处理器私有的，因此系统中数据的分布就需要特殊的处理，以尽量保证系统中各个节点的负载基本平衡，但在目前的数据库领域，这个数据分布问题已经有比较合理的解决方案。</p>
<p>由于数据是分布在各个处理节点上的，因此，使用这种结构的并行数据库系统，在扩展时不可避免地导致数据再整个系统范围内的重分布（Re-Distribution）问题。</p>
<h1 id="事务调度">事务调度</h1>
<p>事务的执行由 DBMS
进行调度，在执行事务的过程中加入相关锁指令以控制事务满足 ACID
属性。常用的方式是两段锁协议 2PL
，即事务的加锁和解锁分为两个阶段，第一阶段为所增长阶段，只能加锁不能解锁，第二阶段为锁减少阶段，只能解锁不能加锁。</p>
<h1 id="以阶段划分的编译">以阶段划分的编译</h1>
<h2 id="词法分析阶段">词法分析阶段</h2>
<p>是编译过程的第一阶段，其任务是对源程序从前到后（从左到右）逐个字符扫描，从中识别出一个个”单词“符号。
词法分析过程的依据是语言的词法规则，即描述”单词“结构的规则。</p>
<h2 id="语法分析阶段">语法分析阶段</h2>
<p>其任务是在词法分析的基础上，根据语言的语法规则将单词符号序列分解成各类语法单位。
通常语法分析是确定整个输入串是否构成一个语法上正确的程序。
一般来说，通过编译的程序，不存在语法上的错误。</p>
<h2 id="语义分析阶段">语义分析阶段</h2>
<p>其任务主要检查源程序是否包含静态语义错误，并收集类型信息供后面的代码生成阶段使用。
语义分析的一个主要工作是进行类型分析和检查。</p>
<h2 id="中间代码生成">中间代码生成</h2>
<p>其任务是根据语义分析的输出生成中间代码。</p>
<h2 id="目标代码生成">目标代码生成</h2>
<p>是编译器工作的最后一个阶段。其任务是把中间代码变换成特定机器上的绝对指令代码、可重定位的指令代码或汇编指令代码。本阶段与具体机器密切相关。</p>
<h1 id="事务的并发操作">事务的并发操作</h1>
<p>并发操作可能导致：丢失更新、不可重复读、读”脏”数据等问题。</p>
<p>丢失更新是指两个事务 T1 和 T2 读入同一数据并修改， T2
提交的结果破坏了 T1 提交的结果，导致 T1 的修改被丢失。</p>
<p>不可重复读是指事务 T1 读取数据后，事务 T2 执行更新操作，使 T1
无法再现前一次读取结果。</p>
<ul>
<li>事务 T1 ，事务 T2 对其做了修改，事务 T1 再次读。</li>
<li>事务 T1 按一定条件从数据库中读，事务 T2 删除了其中部分记录，当 T1
再次按相同的条件读。</li>
<li>事务 T1 按一定条件从数据库中读，事务 T2 插入了一些记录，当 T1
再次按照相同条件读。</li>
</ul>
<p>读“脏”数据是指事务 T1 修改某一数据并将其写回磁盘，事务 T2
读取同一数据后， T1 由于某种原因被撤销，这时 T1 修改过的数据恢复原值，T2
读到的数据就与数据库中的数据不一致，即 T2 读到了“脏”数据。</p>
<p>为了避免出现并发的几种情况，在标准 SQL 规范中，定义了 4
个事务隔离级别，不同的隔离级别对事务的处理不同。</p>
<ul>
<li>未授权读取：也称为读未提交（Read
Uncommitted），允许脏数据，但不允许更新丢失。如果一个事务已经开始写数据，则另外一个事务则不允许同时进行写操作，但允许其他事务读此行数据，该隔离级别可以通过“排他写锁”实现。</li>
<li>授权读取“也称为读提交（Read
Committed），允许不可重复读，但不允许脏数据。这可以通过”瞬间共享读锁“和”排他写锁“实现。读取数据的事务允许其他事务继续访问该行数据，但是未提交的写事务将会禁止其他事务访问该行。</li>
<li>可重复读取（Repeatable
Read）；禁止不可重复读取和脏读取，但是有时可能出现幻影数据。这可以通过”共享读锁“和”排他写锁
“实现。读取数据的事务将会禁止写事务（但允许读事务），写事务则禁止任何其他事务。</li>
<li>序列化（Serializable）：提供严格的事务隔离。它要求事务序列化执行，事务只能一个接着一个地执行，但不能并发执行。如果仅仅通过”行级锁“是无法实现事务序列化的，必须通过其他机制保证新插入的数据不会被刚执行查询操作的事务访问到。</li>
</ul>
<p>隔离级别越高，越能保证数据的完整性和一致性，但是对并发性能影响也越大。</p>
<h1 id="软件的可移植性portability">软件的可移植性（Portability）</h1>
<p>软件的可移植性是指一个软件从一个环境转移到另一个环境运行的能力有关的一组属性。包括：</p>
<ul>
<li>适应性（Adaptability）是指与软件无需采用有别于为该软件准备的活动或手段就可能适应不同的规定环境有关的软件属性。</li>
<li>可安装性（Installability）是指与应指定环境下安装软件所需的有关软件的属性。</li>
<li>遵循性（一致性，Conformance）是指软件遵循与可移植性有关的标准或约定的软件属性。</li>
<li>可替换性（Replaceability）是指与软件在该软件环境中用来替代指定的其他软件的机会和努力有关的软件属性。为避免可能与互操作性（互用性）的含义相混淆，此处用易替换性而不用兼容性。特定软件的易替换性并不隐含此软件可由所考虑的软件所替代。易替换性可能包含易安装性和适应性这两个属性。</li>
</ul>
<h1 id="二叉排序树">二叉排序树</h1>
<p>二叉排序树或者是一棵空树，或者是具有如下性质的二叉树：</p>
<ul>
<li>若它的左子树非空，则其左子树上所有的关键字均小于根节点的关键字；</li>
<li>若它的右子树非空，则其右子树上所有的关键字均大于根节点的关键字；</li>
<li>左、右子树本身就是两棵二叉排序树。</li>
</ul>
<h1 id="分布式数据库全局概念层">分布式数据库全局概念层</h1>
<p>分布式数据库的全局概念层应具有三种模式描述信息；</p>
<ul>
<li>全局概念模式描述分布式数据库全局数据的逻辑结构，是分布式数据库的全局概念视图。</li>
<li>分片模式描述全局数据逻辑划分的视图，是全局数据的逻辑结构根据某种条件的划分，每一个逻辑划分就是一个片段或分片。</li>
<li>分配模式描述局部逻辑的局部物理结构，是划分后的片段或分片的物理分配视图。</li>
</ul>
<h1 id="进程间同步与互斥">进程间同步与互斥</h1>
<p>在系统中，多个进程竞争同一资源可能会发生死锁，若无外力作用，这些进程将永远不能再向前推进。为此，在操作系统的进程管理中最常用的方法是采用信号量（Semaphore）机制。</p>
<p>信号量是表示资源的实体，是一个与队列有关的整型变量，其值仅能由 P、V
操作改变。 “P” 操作是检测信号量是否为正值，若不是，则阻塞调用进程； “V”
操作是唤醒一个阻塞进程恢复执行。根据用途不同，信号量分为公用信号量和私用信号量。公用信号量用于实现进程间的互斥，初值通常设为
1 ，它所联系的一组并行进程均可对它实施 P、V
操作，私用信号量用于实现进程间的同步，初始值通常设为 0 或 n 。</p>
<h1 id="面向对象的分析ooa">面向对象的分析（OOA)</h1>
<p>面向对象的分析是一种面向对象范型的半形式化描述技术。面向对象的分析包括
3 个步骤：</p>
<ul>
<li>第一步是用例建模。它决定了如何由产品得到各项计算结果，并以用例图和相关场景的方式展现出来。</li>
<li>第二步是类建模，它决定了类及其属性，然后确定类之间的关系和交互。</li>
<li>最后一步是动态建模，它决定了类或每个子类的行为，并以状态图的形式进行表示。</li>
</ul>
<h1 id="音频信号的频率范围">音频信号的频率范围</h1>
<p>人耳能听得到的声音频率范围为 20 ~ 20kHz
。但是根据奈奎斯特定理，如果要保证声音基本不失真， PC
机进行采样时用的频率，应是声音的两倍，计算机对这个声音进行采样用到的频率；范围是：
20 ~ 44.1 KhZ 。</p>
<h1 id="网络规划与设计">网络规划与设计</h1>
<p>以太网交换机根据数据链路层 MAC 地址进行帧交换； 帧中继和 ATM
都是面向连接的通信网，交换机根据预先建立的虚电路标识进行交换。
帧中继的虚电路号是 DLCI ，进行交换的协议数据单元是“帧”；而 ATM
网的虚电路号为 VPI 和 VCI ，进行交换的协议数据单元为“信元”。
三层交换机是指因特网中使用的高档交换机，这种设备把 MAC
交换的高带宽和低延迟优势与网络层分组路由技术结合起来，其工作原理可以概括为：一次路由，多次交换。就是说，当三层交换机第一次收到一个数据包时必须通过路由功能寻找转发端口，同时记住目标
MAC 地址和源 MAC
地址，以及其他相关信息，当再次收到目标地址和源地址相同的帧时就直接进行交换了，不再调用路由功能。所以三层交换机不但具有路由功能，而且比通常的路由器转发得更快。</p>
<h1 id="数据库设计">数据库设计</h1>
<ul>
<li>需求分析阶段的任务是：对现实世界要处理的对象（组织、部门、企业等）进行详细调查，在了解现行系统的概况，确定新系统功能的过程中，确定系统边界、搜集支持系统目标的基础数据及其处理方法。</li>
<li>逻辑设计阶段的任务之一是对关系模式进一步的规范化处理。因为生成的初始关系模式并不能完全符合要求，还有会数据冗余、更新异常存在，这就需要根据规范化理论对关系模式分解之后，消除冗余和更新异常。</li>
</ul>
<p>需求分析阶段完成数据流图和数据字典；概念设计阶段完成 E-R
图设计；逻辑设计阶段完成关系模式设计和视图设计；物理设计确定数据的存储结构，并设计索引，以提高查询效率。</p>
<h1 id="开发模型">开发模型</h1>
<p>瀑布模型将软件生存周期各个活动规定为线性顺序连接的若干阶段的模型，规定了由前至后，相互衔接的固定次序，如同瀑布流水，逐级下落。这种方法是一种理想的现象开发模式，缺乏灵活性，特别是无法解决软件需求不明确或不准确的问题。</p>
<p>原型模型从初始的原型逐步演化成最终软件产品，特别适用于对软件需求缺乏准确认识的去情况。</p>
<p>增量开发是把软件产品作为一系列的增量构建来设计、编码、集成和测试，可以在增量开发过程中逐步理解需求。</p>
<p>螺旋将瀑布模型与快速原型模型结合起来，并且加入两种模型均忽略了的风险分析，适用于复杂的大型软件。</p>
<h1 id="运算器与控制器">运算器与控制器</h1>
<p>寄存器是 CPU 中的一个重要组成部分，它是 CPU
内部的临时存储单元。寄存器既可以用来存放数据和地址，也可以存放控制信息或
CPU 工作时的状态。在 CPU 中增加寄存器的数量，可以使 CPU
把执行程序所需的数据尽可能地放在寄存器件中，从而减少访问内存的次数，提高其运行速度。但是寄存器的数目也不能太多，除了增加成本外，由于寄存器地址编码增加也会增加指令的长度。CPU
中的寄存器通常分为存放数据的寄存器、存放地址的寄存器、存放控制信息的寄存器、存放状态信息的寄存器和其他寄存器等类型。</p>
<p>程序计数器用于存放指令的地址。令当程序顺序执行时，每取出一条指令，PC
内容自动增加一个值，指向下一条要取的指令。当程序出现转移时，则将转移地址送入
PC ，然后由 PC 指向新的程序地址。</p>
<p>程序状态寄存器用于记录运算中产生的的标志信息，典型的标志位为有进位标志、零标志位、符号标志位、溢出标志位、奇偶标志位等。</p>
<p>地址寄存器通常简称为累加器，它是一个通用寄存器。其功能是当运算器的算术逻辑单元执行算术或逻辑运算时，为
ALU
提供一个工作区。例如，在执行一个减法运算前，先将被减数取出放在累加器中，再从内存储器取出减数，然后同累加器的内容相减，所得的结果送回累加器中。累加器在运算过程中暂时存放被操作数和中间运算结果，累加器不能用于长时间地保存一个数据。</p>
<p>指令寄存器：一般用来保存当前正在执行的一条指令。
地址寄存器：一般用来保存当前 CPU
所访问的内存单元的地址，以方便对内存的读写操作。</p>
<h1 id="设计-risc">设计 RISC</h1>
<p>在设计 RISC 时，需要遵循如下一些基本的原则：</p>
<ul>
<li>指令条数少，一般为几十条指令。</li>
<li>寻址方式尽可能少。</li>
<li>采用等长指令，不管功能复杂的指令还是简单的指令，均用同一长度。</li>
<li>设计尽可能多的通用寄存器。</li>
</ul>
<h1 id="风险管理">风险管理</h1>
<p>风险是一种具有负面后果的、人们不希望发生的事件。风险管理是软件项目管理的一项重要任务。在进行风险管理时，根据风险的优先级来确定风险控制策略，而优先级是根据风险暴露来确定的。风险暴露是一种量化风险影响的指标，等于风险影响乘以风险概率。风险影响是当风险发生时造成的损失。风险概率是风险发生的可能性。风险控制是风险管理的一个重要活动。</p>
<h1 id="数据挖掘常用的技术">数据挖掘常用的技术</h1>
<ul>
<li>离群点：在样本空间中，与其他样本点的一般行为或特征不一致的点。</li>
<li>分类：分类分析的内容有分析在此样本情况下能够被分类的程度，并且依据此分析重新分布数据，使得数据更容易被分析，相关技术有多类别分析、主成分分析。</li>
<li>聚类：聚类分析是指将物理或抽象的集合分组成为由类似的对象组成的多个类的分析过程。它是一种重要的人类行为。聚类分析的目标就是在相似的基础上收集数据来分类。聚类与分类的不同在于，聚类所要求划分的类是未知的。分类和聚类的区别：分类要靠学习，聚类要靠启发式搜索。</li>
<li>关联规则：其核心是基于两阶段频繁集思想的递推算法。该关联规则在分类上属于单维、单层及布尔关联规则，典型的算法是
Aprior 算法。Aprior
算法将发现关联规则的过程分为两个步骤：第一步通过迭代，检索出事务数据库中所有频繁项集，即支持度不低于用户设定的阈值的项集；第二步利用频繁项集构造出满足用户最小信任度的规则。其中，挖掘或识别出所有频繁项集是该算法的核心，占整个计算量的大部分。</li>
</ul>
<h1 id="电子邮件协议">电子邮件协议</h1>
<ul>
<li>POP3(Post Office Protocol 3) 协议是适用于 C/S
结构的脱机模型的电子邮件协议。</li>
<li>SMTP(Simple Mail Transfer Protocol) 协议是简单邮件传输协议。</li>
<li>IMAP(Internet Message Access Protocol)
是由美国华盛顿大学所研发的一种邮件获取协议。</li>
<li>MPLS(Multiprotocol Label Switch)
即多协议标记交换，是一种标记（label）机制的交换技术。</li>
</ul>
<h1 id="编译与解释">编译与解释</h1>
<ul>
<li>符号表：符号表是一种用于语言翻译器（例如编译器和解释器）中的数据结构。在符号表中，程序源代码中的每个标示符都和它的声明或使用信息绑定在一起，比如数据类型、作用域以及内存地址。</li>
<li>哈希表：也叫散列表，是根据关键码（key
value）而直接进行访问的数据结构。也就是说，它通过把关键码值映射到表中一个位置来访问记录，以加快查找的速度。</li>
<li>动态查找表：动态查找表的表结构本身是在查找过程中动态生成的，即对于给定值
key，若表中存在其关键字等于 key
的记录，则查找成功返回，否则插入关键字等于 key 的记录。</li>
<li>栈和队列：基本的数据结构。栈的基本特点是“后进先出”，而队列的基本特点是“先进先出”。</li>
</ul>
<h1 id="arp">ARP</h1>
<p>ARP 协议的作用是由目标地址的 IP 地址发现对应的 MAC
地址。如果源站要和一个新的目标通信，首先由源站发出 ARP
请求广播包，其中包含目标的 IP 地址，然后目标返回 ARP
应答包，其中包含了自己的 MAC 地址。这时，源站一方面把目标的 MAC
地址装入要发送的数据帧中，一方面把得到的 MAC 地址添加到自己的 ARP
表中。当一个站与多个目标进行了通信后，在其 ARP
表就积累了多个事项，每一项都是 IP 地址与 MAC 地址的映射关系。 ARP
表通常用于由 IP 地址查找对应的 MAC 地址。</p>
<h1 id="编译程序与解释程序">编译程序与解释程序</h1>
<p>编译程序的功能是把高级语言书写的源程序翻译成与之等价的目标程序。编译过程划分成词法分析、语法分析、语义分析、中间代码生成、代码优化和目标代码生成
6 个阶段。目标程序可以独立于源程序运行。</p>
<p>解释程序是一种语言处理程序，在词法、语法和语义分析方面与编译程序的工作原理基本相同，但在运行用户程序程序时，它是直接执行源程序或源代码的内部形式（中间代码）。因此，解释程序并不产生目标程序，这是它和编译程序的主要区别。</p>
<h1 id="概念结构设计">概念结构设计</h1>
<p>数据库的设计阶段分为四个阶段：需求分析阶段、概念结构设计阶段、逻辑结构设计阶段和物理结构设计阶段。数据库概念结构设计阶段是在需求分析的基础上，依照用户需求对信息进行分类、聚集和概括，建立概念模型。</p>
<h1 id="e-r-模型">E-R 模型</h1>
<p>在扩展 E-R
图设计方法中，联系可以被看做实体，参与另一个联系；联系只能产生于实体（或被当作实体的联系）之间；属性只能依附于实体或联系用以刻画该实体或联系；语义上不属于某个实体或联系的属性不能作为其属性。E-R
图是对现实的描述，符合现实语义。联系对应的是事件，三元联系的事件既有三个参与方，而两两联系是两个参与方，描述的现实语义不同。</p>
<h1 id="防火墙技术">防火墙技术</h1>
<p>包过滤防火墙工作在网络协议 IP 层，它只对 IP
包的源地址、目标地址及相应端口进行处理，因此速度比较快，能够处理的并发连接比较多，缺点是对应用层的攻击无能为力，包过滤成本与它的安全性能没有因果关系，而应用程序和用户对于包过滤的过程并不需要了解，因此该技术对应用和用户是透明的。
代理服务器防火墙收到的 IP 包还原成高层协议的通讯故障，比如 http
连接信息，因此能够对基于高层协议的攻击进行拦截。缺点是处理速度比较慢，能够处理的并发数比较少，所以不能提高网络整体性能，而代理对于用户认证可以设置。</p>
<h1 id="uml-语言">UML 语言</h1>
<ul>
<li>类图（class
diagram）：展现了一组对象、接口、协作和它们之间的关系。在面向对象系统的建模中所建立的最常见的图就是类图。类图给出系统的静态设计视图。包含主动类的类图给出了系统的静态进程视图。</li>
<li>对象图（object
diagram）：展现了一组对象以及它们之间的关系。对象图描述了在类图中所建立的事物实例的静态快照。和类图相同，这些图给出系统的静态设计视图或静态进程视图，但它们是从真实的或原型实例的角度建立的。</li>
<li>用例图（user case
diagram）：展现了一组用例、参与者（actor）以及它们之间的关系。用例图给出系统的静态用例视图。这些图对系统的行为进行组织和建模是非常重要的。</li>
<li>序列图（use case
diagram）：是场景（scenario）的图形化表示，描述了以时间顺序组织的对象之间的交互活动。</li>
<li>协作图（callaboration diagram 或 communication
diagram）：强调收发消息的对象的结构组织。序列图和协作图都是交互图（interaction
diagram）。交互图展现了一种交互，它由一组对象和它们之间的关系组成，包括它们之间可能发送的消息。交互图关注系统的动态视图。序列图和协作图是同构的，它们之间可以相互转换。</li>
<li>状态图（statechart
diagram）：展现了一个状态机，它由状态、转换、事件和活动组成。状态图关注系统的动态视图，它对于接口、类和协作的行为建模尤为重要，它强调对象行为的时间顺序。</li>
<li>活动图（activity
diagram）：是一种特殊的状态图，它展现了在系统内从一个活动到另一个活动的流程。活动图专注于系统的动态视图。它对于系统的功能建模特别重要，并强调对象间的控制流程。</li>
<li>构件图（component
diagram）：展现了一组构件之间的组织和依赖。构件图专注于系统的静态实现视图。它与类图相关，通常把构件映射为一个或多个类、接口或协作。</li>
<li>部署图（deployment
diagram）：展现了运行处理节点以及其中构件的配置。部署图给出了体系结构的静态实施视图。它与构件视图相关，通常一个节点包含一个或多个构件。</li>
</ul>
<h1 id="寻址方式">寻址方式</h1>
<p>指令中的寻址方式就是如何对指令中的地址字段进行解释，以获得操作数的方法或获得程序转移地址的方法。常用的寻址方式有：</p>
<ul>
<li>立即寻址：操作数就包含在指令中</li>
<li>直接寻址：操作数存放在内存单元中，指令中直接给出操作数所在的存储单元的地址</li>
<li>寄存器寻址：操作数存放在某一寄存器中，指令中给出存放操作数所在的寄存器名</li>
<li>寄存器间接寻址：操作数存放在内存单元中，操作数所在存储单元的地址在某个寄存器中</li>
<li>间接寻址：指令中给出操作数地址的地址</li>
<li>相对寻址：指令地址码给出的是一个偏移量（可正可负），操作数地址等于本条指令的地址加上偏移量</li>
<li>变址寻址：操作数地址等于变址寄存器的内容加偏移量</li>
</ul>
<h1 id="软件测试">软件测试</h1>
<ul>
<li>回归测试是指修改了旧代码后，重新进行测试以确认修改没有引入新的错误或导致其他代码产生错误。</li>
<li>接受测试是基于客户或最终用户的规格书的最终测试，或基于用户一段时间的使用后，看软件是否满足客户要求。一般从功能、用户界面、性能、业务关联性进行测试。</li>
<li>Installing
testing（安装测试），确保该软件在正常情况和异常情况的不同条件下，例如，进行首次安装、升级、完整的或自定义的安装都能进行安装。异常情况包括磁盘空间不足、缺少目录创建权限等。核实软件在安装后可立即正常运行。安装测试包括测试安装代码以及安装手册。安装手册提供如何进行安装，安装代码提供安装一些程序能够进行的基础数据。</li>
<li>单元测试（unit
testing），是指对软件中的最小可测试单元进行检查和验证。</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>模式</tag>
        <tag>外模式</tag>
        <tag>内模式</tag>
      </tags>
  </entry>
  <entry>
    <title>13 种川菜味型调法</title>
    <url>/2019/04/19/13-%E7%A7%8D%E5%B7%9D%E8%8F%9C%E5%91%B3%E5%9E%8B%E8%B0%83%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>分享下王刚大厨总结的 13 种川菜味型调法。</p>
<span id="more"></span>
<img src="/2019/04/19/13-%E7%A7%8D%E5%B7%9D%E8%8F%9C%E5%91%B3%E5%9E%8B%E8%B0%83%E6%B3%95/1.jpg" class="">
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>川菜</tag>
        <tag>调味</tag>
      </tags>
  </entry>
  <entry>
    <title>Excel 使用技巧总结</title>
    <url>/2020/01/18/Excel-%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="快捷键">快捷键</h1>
<h2 id="定位快捷键-gtrl-g">定位快捷键 <strong>Gtrl + G</strong></h2>
<p>能够一次性选择“附有注释”“空白内容”等符合条件的单元格，一并处理。</p>
<h2 id="设置单元格格式-ctrl-l数字1">设置单元格格式 <strong>Ctrl +
l（数字1）</strong></h2>
<h2 id="查找替换-ctrl-h">查找替换 <strong>Ctrl + H</strong></h2>
<h2 id="一并输入多个单元格-ctrl-enter">一并输入多个单元格 <strong>Ctrl +
Enter</strong></h2>
<h2 id="复制上一个单元格的内容-ctrl-d">复制上一个单元格的内容
<strong>Ctrl + D</strong></h2>
<h2 id="复制左边单元格的内容-ctrl-r">复制左边单元格的内容 <strong>Ctrl +
R</strong></h2>
<span id="more"></span>
<h2 id="设定公式的绝对引用-f4">设定公式的绝对引用
<strong>F4</strong></h2>
<h2 id="可以显示打印预览-ctrl-f2">可以显示打印预览 <strong>Ctrl +
F2</strong></h2>
<h2 id="添加工作表-ctrl-f11">添加工作表 <strong>Ctrl + F11</strong></h2>
<h2 id="运行自动求和-alt">运行“自动求和” <strong>Alt + =</strong></h2>
<h2 id="单元格内换行-alt-enter">单元格内换行 <strong>Alt +
Enter</strong></h2>
<h2 id="选中活动单元格所在的整列-ctrl-空格">选中活动单元格所在的整列
<strong>Ctrl + 空格</strong></h2>
<h2
id="选中活动单元格所在的整行活动单元格为半角英文-shift-空格">选中活动单元格所在的整行（活动单元格为半角英文）
<strong>Shift + 空格</strong></h2>
<h2 id="删除单元格行列-ctrl---减号">删除单元格、行、列 <strong>Ctrl + -
（减号）</strong></h2>
<h2 id="插入单元格行列-shift-ctrl-加号">插入单元格、行、列 <strong>Shift
+ Ctrl + + （加号）</strong></h2>
<h2 id="取消当前单元格的输入-esc">取消当前单元格的输入
<strong>Esc</strong></h2>
<h2 id="快速输入今天的日期-ctrl">快速输入今天的日期 <strong>Ctrl +
;</strong></h2>
<h2 id="快速输入现在的时间-ctrl">快速输入现在的时间 <strong>Ctrl +
:</strong></h2>
<h1 id="数据类型">数据类型</h1>
<h2 id="文本">文本</h2>
<p>如果在函数状态下使用文本，请用双引号（“”）圈起来。 【例】
=IF(A1&gt;=80,“A”,“B”)
作为数值的80直接输入到表格即可，而输入文字项“A”与“B”则需要用双引号标示。</p>
<h2 id="日期-时间">日期 时间</h2>
<p>如果想在 Excel
中正确输入日期，例如“2014/1/1”这样，年、月、日分别用“/”（斜线）隔开。
输入时间时需要则像“13:00”一样，将小时与分钟用“:（冒号）”隔开。</p>
<h2 id="公式-函数">公式 函数</h2>
<p>输入函数、公式时，全从等号（=）开始输入。</p>
<h1 id="函数">函数</h1>
<p>函数的格式：=函数名（参数1，参数2……） 使用 <strong>TAB</strong>
键可以快速补全。</p>
<h2 id="快速应用某个公式到一整列">快速应用某个公式到一整列</h2>
<p>在某个单元格中输入公式后，再次选中该单元格，将鼠标移动被选中单元格右下角的浮标上。这时，原本白色十字的游标变成了黑色。双击该黑色游标即可将公式应用到一整列。</p>
<h1 id="快速选择单元格范围">快速选择单元格范围</h1>
<ul>
<li>使用鼠标拖曳</li>
<li>按下 Shift + 方向键</li>
<li>Shift + Ctrl + 方向键</li>
</ul>
<h1 id="单元格的引用">单元格的引用</h1>
<p>在单元格 A1 中输入价格，单元格 B1
中要计算出此价格加上消费税的总和。需要在
B1中输入以下公式（假设消费税为8%）。 =A1*1.08</p>
<p>要确认输入的公式引用了哪个单元格，则可以选择此格式所在的单元格，按下
F2 键。引用的单元格会被有色框线圈起。</p>
<h1 id="运算符">运算符</h1>
<p>连接两个单元格中的数值时使用 &amp; 运算符，如：=A1&amp;B1</p>
<h1 id="相对引用和绝对引用">相对引用和绝对引用</h1>
<p>$A$1➛固定列和行 A<span
class="math inline">1➛<em>固</em><em>定</em><em>行</em></span>A1➛固定列
A1➛不固定位置</p>
<p>使用 <strong>F4</strong> 键可以改变引用方式。</p>
<h1 id="处理字符串">处理字符串</h1>
<h2 id="提取字符串的部分内容">提取字符串的部分内容</h2>
<ul>
<li>=LEFT(A1,3) 抽取单元格 A1 左数 3 个字符</li>
<li>=RIGHT(A1,4) 抽取单元格 A1 右数 4 个字符</li>
<li>=MID(A1,5,2) 抽取单元格 A1 第 5 个字开始的 2 个字符</li>
</ul>
<h2 id="同时打开多个窗口">同时打开多个窗口</h2>
<p>首先在电脑桌面上准备好 Excel 库快捷启动图标。
1.在已经打开文件的状态下，双击桌面上的 Excel 图标，以新建方式启动。
2.另一个窗口中打开 Excel 。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Excel</tag>
      </tags>
  </entry>
  <entry>
    <title>2020 读书计划</title>
    <url>/2020/01/17/2020-%E8%AF%BB%E4%B9%A6%E8%AE%A1%E5%88%92/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<style>
table th:nth-of-type(2) {
    width: 75px;
}
table th:nth-of-type(3) {
    width: 120px;
}
table th:nth-of-type(4) {
    width: 60px;
}
</style>
<p>新的一年开始了，又到了立 flag 的时候了<sub></sub>
俗话说的好，有目标才有动力<sub></sub>
由于家里今年新添了一名成员，以后需要照顾小盆友，业余时间没有那么多了，那么今年的目标就是阅读
15 本书，重点放在育儿书籍方面，努力成为一名优秀的妈妈<sub></sub>
自己在专业技能上也要更加精进，严格要求自己，赚取更多米米，给宝宝提供更加优质的生活，ヾ(◍°∇°◍)ﾉﾞ
<sub></sub> 后续阅读记录都在微信读书 APP 更新啦~ <span id="more"></span> | 书名 |
作者 | ISBN | 评分 | | —|—| —| —| | <a
href="https://book.douban.com/subject/34785181/">1.《如何科学开发孩子的大脑》</a>
| 9787111630890 | [美]吉尔·斯塔姆（Jill Stamm） / [美]宝拉·斯宾塞（Paula
Spencer） | ★★★☆☆ | | <a
href="https://book.douban.com/subject/27001181/">2.《婴幼儿睡眠全书》</a>
| 9787303219117 | 小土大橙子 | ★★★★☆ | | <a
href="https://book.douban.com/subject/27136643/">3.《父母的语言：3000万词汇塑造更强大的学习型大脑》</a>
| 9787111571544 | [美]达娜·萨斯金德（Dana Suskind） /
MD贝丝·萨斯金德（Beth Suskind） / 莱斯利·勒万特-萨斯金德（Leslie
Lewinter-Suskind） | ★★★☆☆ | | <a
href="https://book.douban.com/subject/30211352/">4.《别错过孩子英语学习敏感期》</a>
| 9787562854050 | 常青藤爸爸 / 张湘君 | ★★★★☆ | | <a
href="https://book.douban.com/subject/30411864/">5.《Excel教科书》</a> |
9787513923415 | [日]吉田拳 | ★★★☆☆ | | <a
href="https://book.douban.com/subject/4207781/">6.《孩子你慢慢来》</a> |
9787108033635 | 龙应台 | ★★★★☆ | | <a
href="https://book.douban.com/subject/34892807/">7.《守夜者3》</a> |
9787559637925 | 法医秦明 | ★★★☆☆ | | <a
href="https://book.douban.com/subject/26605738/">8.《做孩子最好的英语学习规划师》</a>
| 9787513555166 | 盖兆泉 | ★★★★☆ | | <a
href="https://book.douban.com/subject/30190201/">9.《Python
3爬虫、数据清洗与可视化实战》</a> | 9787121333590 | 零一 | ★★☆☆☆ | | <a
href="https://book.douban.com/subject/25809269/">10.《目送》</a> |
9787549550173 | 龙应台 | ★★★☆☆ | | <a
href="https://book.douban.com/subject/27615628/">11.《美国家庭万用亲子英文》</a>
| 9787308175876 | 洪贤珠 | ★★★☆☆ | | <a
href="https://book.douban.com/subject/27115970/">12.《秘密》</a> |
9787544258210 | [日] 东野圭吾 | ★★★★☆ | | <a
href="https://book.douban.com/subject/30314756/">13.《微服务架构基础:Spring
Boot+Spring Cloud+Docker》</a> | 9787115443205 | 黑马程序员 | ★★★☆☆ | |
<a
href="https://book.douban.com/subject/26733302/">14.《自控力：和压力做朋友》</a>
| 9787550267831 | [美] 凯利·麦格尼格尔 | ★★★★☆ | | <a
href="https://book.douban.com/subject/26651926/">15.《红手指》</a> |
9787544281331 | [日] 东野圭吾 | ★★★★☆ | | <a
href="https://book.douban.com/subject/30446284/">16.《思维导图：进阶版》</a>
| 9787122333131 | [英] 东尼·博赞 | ★★★☆☆ | | <a
href="https://book.douban.com/subject/30370277/">17.《越简单，越美好》</a>
| 9787540487270 | 罗敷 | ★★★☆☆ | | <a
href="https://book.douban.com/subject/10786473/">18.《自控力》</a> |
9787514205039 | [美] 凯利·麦格尼格尔 | ★★★★★ | | <a
href="https://book.douban.com/subject/30391803/">19.《小家越住越美的极简收纳术》</a>
| 9787201132129 | 米歇尔 | ★★★★☆ | | <a
href="https://book.douban.com/subject/30330292/">20.《沉睡的森林》</a> |
9787544294201 | [日] 东野圭吾 | ★★★☆☆ | | <a
href="https://book.douban.com/subject/30317423/">21.《我杀了他》</a> |
9787544294119 | [日]东野圭吾 | ★★★☆☆ | | <a
href="https://book.douban.com/subject/26775466/">22.《小家，越住越大》</a>
| 9787508660196 | 逯薇 | ★★★★☆ | | <a
href="https://book.douban.com/subject/30601953/">23.《Vue.js快速入门》</a>
| 9787302517542 | 申思维 | ★★★☆☆ |</p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>读书</tag>
      </tags>
  </entry>
  <entry>
    <title>《MongoDB 权威指南（第2版）》阅读笔记</title>
    <url>/2019/04/12/%E3%80%8AMongoDB-%E6%9D%83%E5%A8%81%E6%8C%87%E5%8D%97%EF%BC%88%E7%AC%AC2%E7%89%88%EF%BC%89%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="第-1-章-mongodb-简介">第 1 章 MongoDB 简介</h1>
<p>MongoDB
是一款强大、灵活，且易于扩展的通用型数据库。它能扩展出非常多的功能，如二级索引（Secondary
index）、范围查询（range
query）、排序、聚合（aggregation），以及地理空间索引（geospatial
inde）。</p>
<h2 id="易于使用">1.1 易于使用</h2>
<p>MongoDB
是一个面向文档（document-oriented）的数据库，而不是关系型数据库。</p>
<p>与关系型数据库相比，面向文档的数据库不再有“行”（row）的概念，取而代之的是更为灵活的“文档”（document）模型。通过在文档中嵌入文档和数组，面向文档的方法能够仅使用一条记录来表现复杂的层次关系。</p>
<p>另外，不再有预定义模式（predefined
schema）：文档的键（key）和值（value）不再是固定的类型和大小。根据需要添加或删除字段变得更容易了。通常，由于开发者能够进行快速迭代，所以开发进程得以加快。而且，试验更容易进行。开发者能尝试大量的数据模型，从中选择一个最好的。
<span id="more"></span> ## 1.2 易于扩展 MongoDB
的设计采用横向扩展。面向文档的数据模型使它能很容易的在多台服务器之间进行数据分割。MongoDB
能自动处理跨集群的数据和负载，自动重新分配文档，以及将用户请求路由到正确的机器上。开发者只需要集中精力编写应用程序，而不需要考虑如何扩展的问题。如果一个集群需要更大的容量，只需要向集群添加新服务器，MongoDB
就会自动将现有数据向新服务传送。</p>
<h2 id="丰富的功能">1.3 丰富的功能</h2>
<ul>
<li>索引 MongoDB
支持通用二级索引，允许多种快速查询，且提供唯一索引、复合索引、地理空间索引，以及全文索引。</li>
<li>聚合 MongoDB 支持“聚合管道”（aggregation
pipeline）。用户能通过简单地片段创建复杂的聚合，并通过数据库自动优化。</li>
<li>特殊的集合类型 MongoDB
支持存在时间有限的集合，适用于那些将在某个时刻过期的数据，如会话（session）。类似地，MongoDB
也支持固定大小的集合，用于保存近期数据，如日志。</li>
<li>文件存储（file storage） MongoDB
支持一种非常易用的协议，用于存储大文件和文件元数据。</li>
</ul>
<h1 id="第-2-章-mongodb-基础知识">第 2 章 MongoDB 基础知识</h1>
<ul>
<li>文档是 MongoDB
中数据库基本单元，非常类似于关系数据库管理系统中的行。</li>
<li>集合（collection）可以看作是一个拥有动态模式（dynamic
schema）的表。</li>
<li>MongoDB
的一个实例可以拥有多个相互独立的数据库（database)，每一个数据库都有自己的集合。</li>
<li>每一个文档都有一个特殊的键“_id“，这个键在文档所属的集合中是惟一的。</li>
<li>MongoDB 自带了一个简单但功能强大的 JavaScript shell，可用于管理
MongoDB 的实例或数据操作。</li>
</ul>
<h2 id="文档">2.1 文档</h2>
<p>文档是 MongoDB
的核心概念。文档就是键值对的一个有序集。文档中的值可以是多种不同的数据类型（甚至可以是一个完整的内嵌文档）。</p>
<p>文档的键是字符串，除了少数例外情况，键可以使用任意 UTF-8 字符。 -
键不能含有 \0 (空字符)。这个字符用于表示键的结尾。 - . 和 $
具有特殊意义，只能在特定环境下使用。通常这两个字符是被保留的。</p>
<p>MongoDB 不但区分类型，还区分大小写。</p>
<p>MongoDB 的文档不能有重复的键。</p>
<h2 id="集合">2.2 集合</h2>
<p>集合就是一组文档。</p>
<h3 id="动态模式">2.2.1 动态模式</h3>
<p>集合是动态模式的。在一个集合里面的文档可以是各式各样的。例如，下面两个文档可以存储在同一个集合里面：
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&quot;greeting&quot;:&quot;hello,world!&quot;&#125;</span><br><span class="line">&#123;&quot;foo&quot;:5&#125;</span><br></pre></td></tr></table></figure></p>
<p>既然没有必要区分不同类型文档的模式，为什么还要使用多个集合呢？这里有几个重要的原因：</p>
<ul>
<li>如果把各种各样的文档不加区分地放在同一个集合里，无论对开发者还是管理员来说都是噩梦。开发者要么确保每次查询只返回固定类型的文档，要么让执行查询的应用程序来处理所有不同类型的文档。</li>
<li>在一个集合里查询特定类型的文档在速度上也不划算，分开查询多个集合要快得多。</li>
<li>把同种类型的文档放在一个集合里，数据会更加集中。</li>
<li>创建索引时，需要使用文档的附加结构（特别是创建唯一索引时）。索引时按照集合来定义的。在一个集合中只放入一种类型的文档，可以更有效地对集合进行索引。</li>
</ul>
<h3 id="命名">2.2.2 命名</h3>
<p>集合名可以是满足下列条件的任意 UTF-8 字符串。 -
集合名不能是空字符串（“”）。 - 集合名不能包含 \0
字符（空字符），这个字符表示集合名的结束。 - 集合名不能以 ”system.“
开头，这是为系统集合保留的前缀。如，system.user
这个集合保存着数据库的用户信息。 -
用户创建的集合不能在集合名中包含保留字符
‘$’，。因为某些系统生成的集合中包含 $
，很多驱动程序确实支持在集合名里包含该字符。除非你要访问这种系统创建的集合，否则不应该在集合名中包含
$ 。</p>
<p>** 子集合 ** 组织集合的一种惯例是使用 “.”
分隔不同命名空间的子集合。例如，一个具有博客功能的应用可能包含两个集合，分别是
blog.posts 和 blog.authors。这是为了使组织结构更清晰。</p>
<h2 id="数据库">2.3 数据库</h2>
<p>在 MongoDB
中，多个文档组成集合，而多个集合组成可以组成<strong>数据库</strong>。一个
MongoDB 实例可以承载多个数据库，每个数据库拥有 0
个或者多个集合。每个数据库都有独立的权限，在磁盘上，不同的数据库也放置在不同的文件中。一般将一个应用程序的所有数据都存储在同一个数据库中。要存储多个应用程序，就需要使用不同的数据库。</p>
<p>数据库可以是满足以下条件的任意 UTF-8 字符串。 - 不能是空字符串 (““).
- 不能含有 /、、.、”、*、&lt;、&gt;、:、|、?、$、\0. 基本上，只能使用
ASCII 中的字母和数字。 -
数据库名区分大小写。简单起见，数据库名应全部小写。 - 数据库名最多为 64
字节。</p>
<p>保留的数据库名： - admin - local - config</p>
<p>把数据库名添加到集合名前，得到集合的完全限定名，即命名空间（namdspace）。命名空间的长度不得超过
121 字节，且在实际使用中应小于 100 字节。</p>
<h2 id="启动-mongodb">2.4 启动 MongoDB</h2>
<p>MongoDB 在没有参数的情况下会使用默认目录 /data/db .
如果参数目录不存在或不可写，服务器会启动失败。因此，在启动前创建数据目录非常重要。</p>
<p>MongoDB 默认监听 27017 端口。如果端口被占用，则启动失败。</p>
<h2 id="mongodb-shell-简介">2.5 MongoDB shell 简介</h2>
<h3 id="运行-shell">2.5.1 运行 shell</h3>
<p>MongoDB shell是一个功能完备的 JavaScript 解释器，可运行任意
JavaScript 程序。如进行简单的数学运算、利用 JavaScript
的标准库还可以定义和调用 JavaScript 函数。</p>
<h3 id="mongodb-客户端">2.5.2 MongoDB 客户端</h3>
<p>查看 db 当前指向哪个数据库 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db</span><br></pre></td></tr></table></figure> 选择数据库 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">use test</span><br></pre></td></tr></table></figure></p>
<h3 id="shell-中的基本操作">2.5.3 shell 中的基本操作</h3>
<p>创建、读取、更新和删除</p>
<p>1.创建 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">post = &#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;My Blog Post&quot;</span>,</span><br><span class="line"><span class="string">&quot;content&quot;</span>:<span class="string">&quot;Here&#x27;s my blog post.&quot;</span>,</span><br><span class="line"><span class="string">&quot;date&quot;</span>:<span class="keyword">new</span> <span class="title class_">Date</span>()&#125;</span><br></pre></td></tr></table></figure> 使用 insert 方法将其保存到 blog 集合中：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">blog</span>.<span class="title function_">insert</span>(post)</span><br></pre></td></tr></table></figure> 查看 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">blog</span>.<span class="title function_">find</span>()</span><br></pre></td></tr></table></figure></p>
<p>2.读取 find 和 findOne
方法可以用于查询集合里的文档。若只想查看一个文档，可用 findOne:
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">blog</span>.<span class="title function_">findOne</span>()</span><br></pre></td></tr></table></figure></p>
<p>3.更新 update
接受（至少）两个参数：第一个是限定条件（用于匹配待更新的文档），第二个是新的文档。假设我们要为先前写的文章增加评论功能，就需要增加一个新的键，用于保存评论数组。</p>
<p>首先，修改变量 post，增加 “comments” 键： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">post.<span class="property">comments</span> = []</span><br></pre></td></tr></table></figure></p>
<p>然后执行 update 操作： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">blog</span>.<span class="title function_">update</span>(&#123;<span class="attr">title</span>:<span class="string">&quot;My Blog Post&quot;</span>&#125;,post)</span><br></pre></td></tr></table></figure></p>
<p>4.删除 使用 remove
方法可将文档从数据库中永久删除。它可以接受一个作为限定条件的文档作为参数。
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">blog</span>.<span class="title function_">remove</span>(&#123;<span class="attr">title</span>:<span class="string">&quot;My Blog Post&quot;</span>&#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="数据类型">2.6 数据类型</h2>
<ul>
<li><p>null null 用于表示空值或者不存在的字段： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:<span class="literal">null</span>&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>布尔型 有两个值 true 或 false： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:<span class="string">&quot;false&quot;</span>&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>数值 shell 默认使用 64 位浮点型数值。 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:<span class="number">3.14</span>&#125;</span><br></pre></td></tr></table></figure> 或：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:<span class="number">3</span>&#125;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<p>对于整型值，可使用 NuberInt 类（4字节带符号整数）或 NumberLong
类（8字符带符号整数）： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:<span class="title class_">NumberInt</span>(<span class="string">&quot;3&quot;</span>)&#125;</span><br><span class="line">&#123;<span class="string">&quot;x&quot;</span>:<span class="title class_">NumberLong</span>(<span class="string">&quot;3&quot;</span>)&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li><p>字符串 UTF-8 字符串都可表示为字符串类型的数据：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:<span class="string">&quot;foobar&quot;</span>&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>日期 日期被存储为自新纪元以来经过的毫秒数，不存储时区：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:<span class="keyword">new</span> <span class="title class_">Date</span>()&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>正则表达式 查询时，使用正则表达式作为限定条件，语法也与
JavaScript 的正则表达式语法相同： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:<span class="regexp">/foobar/i</span>&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>数组 数据列表或数据集可以表示为数组； <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:[<span class="string">&quot;a&quot;</span>,<span class="string">&quot;b&quot;</span>,<span class="string">&quot;c&quot;</span>]&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>内嵌文档 文档可嵌套其他文档，被嵌套的文档作为父文档的值：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:&#123;<span class="string">&quot;foo&quot;</span>:<span class="string">&quot;bar&quot;</span>&#125;&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>对象 id 对象 id 是一个 12 字节的 ID，是文档的唯一标识
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:<span class="title class_">ObjectId</span>()&#125;</span><br></pre></td></tr></table></figure></p></li>
<li><p>二进制数据 二进制数据时一个任意字节的字符串。它不能直接在 shell
中使用。如果要将非 UTF-8
字符保存到数据库中，二进制数据是唯一的方式。</p></li>
<li><p>代码 查询和文档中可以包括任意 JavaScript 代码：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;x&quot;</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="comment">/*...*/</span>&#125;&#125;</span><br></pre></td></tr></table></figure></p></li>
</ul>
<h3 id="日期">2.6.2 日期</h3>
<p>在 JavaScript 中， Date 类可以用作 MongoDB
的日期类型。创建日期对象时，应使用 new Date(…).</p>
<h3 id="id-和-objectid">2.6.5 _id 和 ObjectId</h3>
<p>MongoDB 中存储的文档必须包含一个 “_id”
键。这个键可以是任何类型的，默认是 ObjectId
对象。在一个集合里面，每个文档都有唯一的 “_id”,
确保集合里面每个文档都能被唯一标识。</p>
<p>1.ObjectId ObjectId 是 “_id”
的默认类型。它被设计成轻量型的，不同的机器都能用全局唯一的同种方法方便地生成它。</p>
<p>ObjectId 使用 12 字节的存储空间，是一个由 24
个十六进制数字组成的字符串（每个字节可以存储两个十六进制数组）。</p>
<p>ObjectId 的前 4 个字节是从标准纪元开始的时间戳，单位为秒。接下来的 3
字节是所在主机的唯一标示符。通常是机器主机名的散列值（hash）。这样就可以确保不同主机生成不同的
ObjectId 而不产生冲突。接下来的两字节来自产生 ObjectId
的进程的进程标识符（PID），这样可以确保在同一台机器上并发的多个进程产生的
ObjectId 是惟一的。</p>
<p>前 9 字节保证了同一秒钟不同机器不同进程产生的 ObjectId 是惟一的。最后
3 字节是一个自动增加的计数器，确保相同进程同一秒产生的 ObjectId
也是不一样的。一秒钟最多允许每个进程拥有 256<sup>3</sup>(16 777 216)
个不同的 ObjectId。</p>
<h2 id="使用-mongodb-shell">2.7 使用 MongoDB Shell</h2>
<p>连接 MongoDB 实例： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">mongo some-<span class="attr">host</span>:<span class="number">27017</span>/myDB</span><br></pre></td></tr></table></figure> 启动 mongo shell 时不连接到任何
mongod ： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">mongo --nodb</span><br></pre></td></tr></table></figure> 启动之后，在需要时运行 new Mongo(hostname)
命令就可以连接到想要的 mongod 了： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">conn = <span class="keyword">new</span> <span class="title class_">Mongo</span>(<span class="string">&quot;localhost:27017&quot;</span>)</span><br><span class="line">db = conn.<span class="title function_">getDB</span>(<span class="string">&quot;test&quot;</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="shell-小贴士">2.7.1 shell 小贴士</h3>
<p>由于 mongo 是一个简化的 JavaScript shell，可以通过查看 JavaScript
的在线文档得到大量帮助。可以使用 help 命令查看 MongoDB 特有的功能。
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">help</span><br><span class="line">db.<span class="title function_">help</span>() <span class="comment">//查看数据库级别的帮助</span></span><br><span class="line">db.<span class="property">foo</span>.<span class="title function_">help</span>() <span class="comment">//查看集合级别的帮助</span></span><br></pre></td></tr></table></figure> 如果想知道一个函数是做什么用的，可以直接在 shell
输入函数名（函数名后不要加小括号），这样就可以看到相应函数的 JavaScript
实现代码。 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">foo</span>.<span class="property">update</span></span><br></pre></td></tr></table></figure></p>
<h3 id="使用-shell-执行脚本">2.7.2 使用 shell 执行脚本</h3>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">mongo script1.<span class="property">js</span> script2.<span class="property">js</span> script3.<span class="property">js</span></span><br></pre></td></tr></table></figure>
<p>mongo shell 会依次执行传入的脚本，然后退出。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">mongo --quiet server-<span class="number">1</span>:<span class="number">27017</span>/foo script1.<span class="property">js</span> script2.<span class="property">js</span> script3.<span class="property">js</span></span><br></pre></td></tr></table></figure>
<p>这样可以将 db 指向 server-1:27017 上的 foo
数据库，然后执行这三个脚本。运行 shell
时指定的命令行选项要出现在地址之前。</p>
<p>可以使用 load() 函数，从交互式 shell 中运行脚本： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">load</span>(<span class="string">&quot;script1.js&quot;</span>)</span><br></pre></td></tr></table></figure>
可以使用脚本将变量注入到 shell 中。例如，在操作系统中创建如下脚本：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> connectTo = <span class="keyword">function</span>(<span class="params">port,dbname</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(!port)&#123;</span><br><span class="line">        port = <span class="number">27017</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!dbname)&#123;</span><br><span class="line">        dbname = <span class="string">&quot;test&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    db = <span class="title function_">connect</span>(<span class="string">&quot;localhost:&quot;</span> + port + <span class="string">&quot;/&quot;</span> + dbname);</span><br><span class="line">    <span class="keyword">return</span> db</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure> 在 mongo shell 中加载这个脚本， connectTo
函数就可以使用了： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">load</span>(<span class="string">&#x27;defineConnectTo.js&#x27;</span>)</span><br><span class="line"><span class="keyword">typeof</span> connectTo</span><br></pre></td></tr></table></figure> 默认情况下，shell 会在运行 shell
时所处的目录中查找脚本（可以使用 run(“pwd”“) 命令查看）。也可以在 load
函数中指定一个相对路径或者绝对路径。也可以使用 run()
函数来执行命令行程序。 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">run</span>(<span class="string">&quot;ls&quot;</span>,<span class="string">&quot;-l&quot;</span>,<span class="string">&quot;/&quot;</span>)</span><br></pre></td></tr></table></figure></p>
<h3 id="创建-.mongorc.js-文件">2.7.3 创建 .mongorc.js 文件</h3>
<p>如果某些脚本被频繁加载，可以将它们添加到 .mongorc.js
文件中，这个文件在启动 shell
时自动运行。将该文件放在当前用户的主目录下，如 /root 目录下。
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定制欢迎内容</span></span><br><span class="line"><span class="keyword">var</span> compliment = [<span class="string">&quot;attractive&quot;</span>,<span class="string">&quot;intelligent&quot;</span>,<span class="string">&quot;like Batman&quot;</span>];</span><br><span class="line"><span class="keyword">var</span> index = <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>()*<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">print</span>(<span class="string">&quot;Hello, you&#x27;re looking particularly &quot;</span> + compliment[index] + <span class="string">&quot; today!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> no = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="title function_">print</span>(<span class="string">&quot;Not on my watch.&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 禁止删除数据库</span></span><br><span class="line">db.<span class="property">dropDatabase</span> = <span class="variable constant_">DB</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">dropDatabase</span> = no;</span><br><span class="line"><span class="comment">// 禁止删除集合</span></span><br><span class="line"><span class="title class_">DBCollection</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">drop</span> = no;</span><br><span class="line"><span class="comment">// 禁止删除索引</span></span><br><span class="line"><span class="title class_">DBCollection</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">dropIndex</span> = no;</span><br><span class="line"><span class="comment">// 定制 shell 提示</span></span><br><span class="line">prompt = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">typeof</span> db == <span class="string">&#x27;undefined&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;(nodb)&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        db.<span class="title function_">runCommand</span>(&#123;<span class="attr">getLastError</span>:<span class="number">1</span>&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">catch</span>(e)&#123;</span><br><span class="line">        <span class="title function_">print</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> db+<span class="string">&quot;&gt;&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure> ### 2.7.5 编辑复合变量
对于大块代码或者对象，可以调用操作系统编辑器。在 shell 中设置 EDITOR
变量，也可以在 .mongorc.js 文件中添加一行内容：
EDITOR=“编辑器路径”，以后就不用单独设置了。 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">EDITOR</span>=<span class="string">&quot;/usr/bin/vim&quot;</span></span><br><span class="line"><span class="keyword">var</span> wap = db.<span class="property">col</span>.<span class="title function_">findOne</span>(&#123;<span class="attr">x</span>:<span class="number">1</span>&#125;)</span><br><span class="line">edit wap</span><br></pre></td></tr></table></figure> # 第 3 章
创建、更新和删除文档 ## 3.1 插入并保存文档 插入一个文档使用 insertOne
方法： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">inventory</span>.<span class="title function_">insertOne</span>(</span><br><span class="line">   &#123; <span class="attr">item</span>: <span class="string">&quot;canvas&quot;</span>, <span class="attr">qty</span>: <span class="number">100</span>, <span class="attr">tags</span>: [<span class="string">&quot;cotton&quot;</span>], <span class="attr">size</span>: &#123; <span class="attr">h</span>: <span class="number">28</span>, <span class="attr">w</span>: <span class="number">35.5</span>, <span class="attr">uom</span>: <span class="string">&quot;cm&quot;</span> &#125; &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure> ### 3.1.1 批量插入 批量插入速度会更快一些：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">inventory</span>.<span class="title function_">insertMany</span>([</span><br><span class="line">   &#123; <span class="attr">item</span>: <span class="string">&quot;journal&quot;</span>, <span class="attr">qty</span>: <span class="number">25</span>, <span class="attr">tags</span>: [<span class="string">&quot;blank&quot;</span>, <span class="string">&quot;red&quot;</span>], <span class="attr">size</span>: &#123; <span class="attr">h</span>: <span class="number">14</span>, <span class="attr">w</span>: <span class="number">21</span>, <span class="attr">uom</span>: <span class="string">&quot;cm&quot;</span> &#125; &#125;,</span><br><span class="line">   &#123; <span class="attr">item</span>: <span class="string">&quot;mat&quot;</span>, <span class="attr">qty</span>: <span class="number">85</span>, <span class="attr">tags</span>: [<span class="string">&quot;gray&quot;</span>], <span class="attr">size</span>: &#123; <span class="attr">h</span>: <span class="number">27.9</span>, <span class="attr">w</span>: <span class="number">35.5</span>, <span class="attr">uom</span>: <span class="string">&quot;cm&quot;</span> &#125; &#125;,</span><br><span class="line">   &#123; <span class="attr">item</span>: <span class="string">&quot;mousepad&quot;</span>, <span class="attr">qty</span>: <span class="number">25</span>, <span class="attr">tags</span>: [<span class="string">&quot;gel&quot;</span>, <span class="string">&quot;blue&quot;</span>], <span class="attr">size</span>: &#123; <span class="attr">h</span>: <span class="number">19</span>, <span class="attr">w</span>: <span class="number">22.85</span>, <span class="attr">uom</span>: <span class="string">&quot;cm&quot;</span> &#125; &#125;</span><br><span class="line">])</span><br><span class="line">db.<span class="property">inventory</span>.<span class="title function_">find</span>()</span><br></pre></td></tr></table></figure> 如果集合当前不存在，则插入操作将创建集合。</p>
<h2 id="删除文档">3.2 删除文档</h2>
<p>删除集合中的所有元素，但不会删除集合本身。 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">foo</span>.<span class="title function_">remove</span>(&#123;&#125;)</span><br></pre></td></tr></table></figure> remove
函数接受一个查询文档作为可选参数。只有符合条件的文档才会被删除。
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">mailing</span>.<span class="property">list</span>.<span class="title function_">remove</span>(&#123;<span class="string">&quot;opt-out&quot;</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure> 删除数据是永久性的，不能撤销，也不能恢复。</p>
<p>删除集合中的所有元素，同时删除集合本身。 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">foo</span>.<span class="title function_">drop</span>()</span><br></pre></td></tr></table></figure> ## 3.3
更新文档 ### 3.3.1 文档替换 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;_id&quot;</span>:<span class="title class_">ObjectId</span>(<span class="string">&quot;5cb6e441040c0c1ce40033a7&quot;</span>),</span><br><span class="line">    <span class="string">&quot;name&quot;</span>:<span class="string">&quot;joe&quot;</span>,</span><br><span class="line">    <span class="string">&quot;friends&quot;</span>:<span class="number">32</span>,</span><br><span class="line">    <span class="string">&quot;enimes&quot;</span>:<span class="number">2</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 假如要将以上文档中的
“friends” 和 “enemies” 两个字段移到 “relationships”
子文档中，可以这么做： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> joe=db.<span class="property">users</span>.<span class="title function_">findOne</span>(&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;joe&quot;</span>&#125;)</span><br><span class="line">joe.<span class="property">relationships</span>=&#123;<span class="string">&quot;friendd&quot;</span>:joe.<span class="property">friends</span>,<span class="string">&quot;enemies&quot;</span>:joe.<span class="property">enemies</span>&#125;</span><br><span class="line">joe.<span class="property">username</span>=joe.<span class="property">name</span></span><br><span class="line"><span class="keyword">delete</span> joe.<span class="property">friends</span></span><br><span class="line"><span class="keyword">delete</span> joe.<span class="property">enemies</span></span><br><span class="line"><span class="keyword">delete</span> joe.<span class="property">name</span></span><br><span class="line">db.<span class="property">users</span>.<span class="title function_">update</span>(&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;joe&quot;</span>&#125;,joe)</span><br></pre></td></tr></table></figure> ### 3.3.2 使用修改器 1.”<span
class="math inline">$set" 修改器入门
"$</span>set” 用来指定一个字段的值，如果该字段不存在，则创建它。</p>
<p>例如，用户资料存储在下面的文档里： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;_id&quot;</span>: <span class="title class_">ObjectId</span>(<span class="string">&quot;5cb6ee4a040c0c1ce40033a9&quot;</span>),</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: <span class="string">&quot;joe&quot;</span>,</span><br><span class="line">    <span class="string">&quot;age&quot;</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="string">&quot;sex&quot;</span>: <span class="string">&quot;male&quot;</span>,</span><br><span class="line">    <span class="string">&quot;location&quot;</span>: <span class="string">&quot;Wisconsin&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
要想添加喜欢的书籍进去，可以使用 “<span class="math inline">$set"：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">users</span>.<span class="title function_">update</span>(&#123;<span class="string">&quot;_id&quot;</span>:<span class="title class_">ObjectId</span>(<span class="string">&quot;5cb6ee4a040c0c1ce40033a9&quot;</span>)&#125;,&#123;<span class="string">&quot;$set&quot;</span>:&#123;<span class="string">&quot;favorite book&quot;</span>:<span class="string">&quot;War and Peace&quot;</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
也可以将喜欢的书籍更改为其他值：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">users</span>.<span class="title function_">update</span>(&#123;<span class="string">&quot;_id&quot;</span>:<span class="title class_">ObjectId</span>(<span class="string">&quot;5cb6ee4a040c0c1ce40033a9&quot;</span>)&#125;,&#123;<span class="string">&quot;$set&quot;</span>:&#123;<span class="string">&quot;favorite book&quot;</span>:<span class="string">&quot;Green Eggs and Ham&quot;</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
使用 "$</span>set” 甚至可以修改键的类型： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">users</span>.<span class="title function_">update</span>(&#123;<span class="string">&quot;_id&quot;</span>:<span class="title class_">ObjectId</span>(<span class="string">&quot;5cb6ee4a040c0c1ce40033a9&quot;</span>)&#125;,&#123;<span class="string">&quot;$set&quot;</span>:&#123;<span class="string">&quot;favorite book&quot;</span>:[<span class="string">&quot;Green Eggs and Ham&quot;</span>,<span class="string">&quot;Cat&#x27;s Cradle&quot;</span>,<span class="string">&quot;Foundation Trilogy&quot;</span>]&#125;&#125;)</span><br></pre></td></tr></table></figure> 可以使用 “<span
class="math inline">$unset" 将这个键完全删除：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">users</span>.<span class="title function_">update</span>(&#123;<span class="string">&quot;_id&quot;</span>:<span class="title class_">ObjectId</span>(<span class="string">&quot;5cb6ee4a040c0c1ce40033a9&quot;</span>)&#125;,&#123;<span class="string">&quot;$unset&quot;</span>:&#123;<span class="string">&quot;favorite book&quot;</span>:<span class="number">1</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
也可以使用 "$</span>set” 修改内嵌文档。</p>
<p>2.增加或减少 “<span class="math inline">$inc"
修改器用来增加已有键的值，没有该键则直接创建一个。例如，更新集合
inventory 中 item 为 canvas 的文档，使其 qty 值增加，可以这么写：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">inventory</span>.<span class="title function_">findOne</span>()</span><br><span class="line">db.<span class="property">inventory</span>.<span class="title function_">update</span>(&#123;<span class="string">&quot;item&quot;</span>:<span class="string">&quot;canvas&quot;</span>&#125;,&#123;<span class="string">&quot;$inc&quot;</span>:&#123;<span class="string">&quot;qty&quot;</span>:<span class="number">2</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
3.数组修改器
- 添加元素
如果数组已经存在，"$</span>push”
会向已有的数组末尾加入一个元素，要是没有就创建一个新的数组。例如，假设要存储博客文章，要添加一个用于保存数组的
“comments” 键。 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&gt; db.<span class="property">blog</span>.<span class="property">posts</span>.<span class="title function_">findOne</span>(<span class="params"></span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;_id&quot;</span>: <span class="title class_">ObjectId</span>(<span class="string">&quot;5cb81579040c0c1ce40033aa&quot;</span>),</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;A blog post&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: <span class="string">&quot;bla bla bla&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">&gt; db.<span class="property">blog</span>.<span class="property">posts</span>.<span class="title function_">update</span>(&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;A blog post&quot;</span>&#125;, &#123;<span class="string">&quot;$push&quot;</span>:&#123;<span class="string">&quot;comments&quot;</span>:&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;joe&quot;</span>,<span class="string">&quot;email&quot;</span>:<span class="string">&quot;joe@example.com&quot;</span>,<span class="string">&quot;content&quot;</span>:<span class="string">&quot;nice post.&quot;</span>&#125;&#125;&#125;)</span><br><span class="line">&gt; db.<span class="property">blog</span>.<span class="property">posts</span>.<span class="title function_">findOne</span>(<span class="params"></span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;_id&quot;</span>: <span class="title class_">ObjectId</span>(<span class="string">&quot;5cb81579040c0c1ce40033aa&quot;</span>),</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;A blog post&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: <span class="string">&quot;bla bla bla&quot;</span>,</span><br><span class="line">    <span class="string">&quot;comments&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;joe&quot;</span>,</span><br><span class="line">            <span class="string">&quot;email&quot;</span>: <span class="string">&quot;joe@example.com&quot;</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;nice post.&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 如果还想添加一条评论，继续使用 “<span
class="math inline">$push"：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&gt; db.<span class="property">blog</span>.<span class="property">posts</span>.<span class="title function_">update</span>(&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;A blog post&quot;</span>&#125;, &#123;<span class="string">&quot;$push&quot;</span>:&#123;<span class="string">&quot;comments&quot;</span>:&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;bob&quot;</span>,<span class="string">&quot;email&quot;</span>:<span class="string">&quot;bob@example.com&quot;</span>,<span class="string">&quot;content&quot;</span>:<span class="string">&quot;good post.&quot;</span>&#125;&#125;&#125;)</span><br><span class="line">&gt; db.<span class="property">blog</span>.<span class="property">posts</span>.<span class="title function_">findOne</span>(<span class="params"></span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;_id&quot;</span>: <span class="title class_">ObjectId</span>(<span class="string">&quot;5cb81579040c0c1ce40033aa&quot;</span>),</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;A blog post&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: <span class="string">&quot;bla bla bla&quot;</span>,</span><br><span class="line">    <span class="string">&quot;comments&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;joe&quot;</span>,</span><br><span class="line">            <span class="string">&quot;email&quot;</span>: <span class="string">&quot;joe@example.com&quot;</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;nice post.&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;bob&quot;</span>,</span><br><span class="line">            <span class="string">&quot;email&quot;</span>: <span class="string">&quot;bob@example.com&quot;</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;good post.&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
使用 "$</span>each” 子操作符，可以通过一次 “<span
class="math inline">$push" 操作添加多个值：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&gt; db.<span class="property">blog</span>.<span class="property">posts</span>.<span class="title function_">update</span>(&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;A blog post&quot;</span>&#125;, &#123;<span class="string">&quot;$push&quot;</span>:&#123;<span class="string">&quot;tickets&quot;</span>:&#123;<span class="string">&quot;$each&quot;</span>:[<span class="number">10</span>,<span class="number">20</span>,<span class="number">15</span>]&#125;&#125;&#125;)</span><br><span class="line">&gt; db.<span class="property">blog</span>.<span class="property">posts</span>.<span class="title function_">findOne</span>(<span class="params"></span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;_id&quot;</span>: <span class="title class_">ObjectId</span>(<span class="string">&quot;5cb81579040c0c1ce40033aa&quot;</span>),</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: <span class="string">&quot;A blog post&quot;</span>,</span><br><span class="line">    <span class="string">&quot;content&quot;</span>: <span class="string">&quot;bla bla bla&quot;</span>,</span><br><span class="line">    <span class="string">&quot;comments&quot;</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;joe&quot;</span>,</span><br><span class="line">            <span class="string">&quot;email&quot;</span>: <span class="string">&quot;joe@example.com&quot;</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;nice post.&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;bob&quot;</span>,</span><br><span class="line">            <span class="string">&quot;email&quot;</span>: <span class="string">&quot;bob@example.com&quot;</span>,</span><br><span class="line">            <span class="string">&quot;content&quot;</span>: <span class="string">&quot;good post.&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;tickets&quot;</span>: [</span><br><span class="line">        <span class="number">10</span>,</span><br><span class="line">        <span class="number">20</span>,</span><br><span class="line">        <span class="number">15</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
如果希望数组的最大长度是固定的，那么可以将 "$</span>slice” 和 “<span
class="math inline">$push" 组合使用：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&gt; db.<span class="property">blog</span>.<span class="property">posts</span>.<span class="title function_">update</span>(&#123;<span class="string">&quot;title&quot;</span>:<span class="string">&quot;A blog post&quot;</span>&#125;, &#123;<span class="string">&quot;$push&quot;</span>:&#123;<span class="string">&quot;top10&quot;</span>:&#123;<span class="string">&quot;$each&quot;</span>:[<span class="string">&quot;Nightmare on Elm Street&quot;</span>,<span class="string">&quot;Saw&quot;</span>],<span class="attr">$slice</span>:-<span class="number">10</span>&#125;&#125;&#125;)</span><br></pre></td></tr></table></figure>$</span>slice 的值必须是负整数。</p>
<p>如果数组的元素数量小于
10，那么所有元素都会保留。如果数组的元素数量大于 10，那么只要最后 10
个元素会保留。</p>
<p>类似的用法如 $ne 和 $addToSet 不一一举例。用到的时候再查。</p>
<ul>
<li><p>删除元素 {<span class="math inline">$pop:{"key:":1}
从数组末尾删除一个元素， {$</span>pop:{“key:”:-1} 则从头部删除。
删除待办列表中的 laundry: <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">lists</span>.<span class="title function_">update</span>(&#123;&#125;,&#123;<span class="attr">$pull</span>:&#123;<span class="string">&quot;todo:&quot;</span>:<span class="string">&quot;laundry&quot;</span>&#125;&#125;)</span><br></pre></td></tr></table></figure></p></li>
<li><p>基于位置的数组修改器
有两种方法操作数组中的值：通过位置或者定位操作符 “<span
class="math inline">$" 。
数组下标都是从 0  开头的，可以将下标直接作为键来选择元素。
定位操作符 "$</span>”
标识数组中要更新的元素，而不显式指定元素在数组中的位置。</p></li>
</ul>
<p>例如，将 _id 为 1 的学生的成绩 80 改为
82，则可以这么做，而无需知道数组的下标： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&gt; db.<span class="property">students</span>.<span class="title function_">insert</span>([</span><br><span class="line">   &#123; <span class="string">&quot;_id&quot;</span> : <span class="number">1</span>, <span class="string">&quot;grades&quot;</span> : [ <span class="number">85</span>, <span class="number">80</span>, <span class="number">80</span> ] &#125;,</span><br><span class="line">   &#123; <span class="string">&quot;_id&quot;</span> : <span class="number">2</span>, <span class="string">&quot;grades&quot;</span> : [ <span class="number">88</span>, <span class="number">90</span>, <span class="number">92</span> ] &#125;,</span><br><span class="line">   &#123; <span class="string">&quot;_id&quot;</span> : <span class="number">3</span>, <span class="string">&quot;grades&quot;</span> : [ <span class="number">85</span>, <span class="number">100</span>, <span class="number">90</span> ] &#125;</span><br><span class="line">])</span><br><span class="line">&gt; db.<span class="property">students</span>.<span class="title function_">updateOne</span>(</span><br><span class="line">   &#123; <span class="attr">_id</span>: <span class="number">1</span>, <span class="attr">grades</span>: <span class="number">80</span> &#125;,</span><br><span class="line">   &#123; <span class="attr">$set</span>: &#123; <span class="string">&quot;grades.$&quot;</span> : <span class="number">82</span> &#125; &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
定位符只更新第一个匹配的元素。</p>
<p>以上更新操作符的具体用法请参考 mongoDB 官方文档 <a
href="https://docs.mongodb.com/manual/reference/operator/update/">Update
Operators</a> 。</p>
<h3 id="update-函数参数">3.3.3 update 函数参数</h3>
<p>update 函数格式如下： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">collection</span>.<span class="title function_">update</span>(</span><br><span class="line">   &lt;query&gt;,</span><br><span class="line">   &lt;update&gt;,</span><br><span class="line">   &#123;</span><br><span class="line">     <span class="attr">upsert</span>: &lt;boolean&gt;,</span><br><span class="line">     <span class="attr">multi</span>: &lt;boolean&gt;,</span><br><span class="line">     <span class="attr">writeConcern</span>: &lt;<span class="variable language_">document</span>&gt;,</span><br><span class="line">     <span class="attr">collation</span>: &lt;<span class="variable language_">document</span>&gt;,</span><br><span class="line">     <span class="attr">arrayFilters</span>: [ &lt;filterdocument1&gt;, ... ]</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure> 当 upsert 设置为 true
时，则在没有文档与查询条件匹配时创建新文档。 当 multi
设置为true，则更新符合 query 条件的多个文档。</p>
<h3 id="返回被更新的文档">3.3.5 返回被更新的文档</h3>
<p>db.collection.findAndModify（）
方法可以修改并返回单个文档。其格式为： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">collection</span>.<span class="property">findAndModify</span>（&#123; </span><br><span class="line">    query：&lt;<span class="variable language_">document</span>&gt;，</span><br><span class="line">    sort：&lt;<span class="variable language_">document</span>&gt;，</span><br><span class="line">    remove：&lt;boolean&gt;，</span><br><span class="line">    update：&lt;<span class="variable language_">document</span>&gt;，</span><br><span class="line">    <span class="keyword">new</span>：&lt;boolean&gt;，</span><br><span class="line">    fields：&lt;<span class="variable language_">document</span>&gt;，</span><br><span class="line">    upsert：&lt;boolean&gt;，</span><br><span class="line">    bypassDocumentValidation ：&lt;boolean&gt;，</span><br><span class="line">    writeConcern：&lt;<span class="variable language_">document</span>&gt;，</span><br><span class="line">    collat​​ion：&lt;<span class="variable language_">document</span>&gt;，</span><br><span class="line">    arrayFilters：[&lt;filterdocument1&gt;，...] </span><br><span class="line">&#125;）;</span><br></pre></td></tr></table></figure>
其中具体参数的使用请参照 mongoDB 官方文档。</p>
<h1 id="第-4-章-查询">第 4 章 查询</h1>
<h2 id="find-简介">4.1 find 简介</h2>
<p>find 方法格式如下： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">collection</span>.<span class="title function_">find</span>(query, projection)</span><br></pre></td></tr></table></figure> 其中，参数说明如下:</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>query</td>
<td>document</td>
<td>可选的。指定使用选择过滤查询操作。要返回集合中的所有文档，请省略此参数或传递空文档（{}）。</td>
</tr>
<tr>
<td>projection</td>
<td>document</td>
<td>可选的。指定要在与查询过滤器匹配的文档中返回的字段。要返回匹配文档中的所有字段，请省略此参数。</td>
</tr>
</tbody>
</table>
<p>例如：想要查找 “age” 值为 27 的所有文档，可以这样写： <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">db.user.find(&#123;&quot;age&quot;:27&#125;)</span><br></pre></td></tr></table></figure>
可以向查询文档加入多个键/值对，将多个查询条件组合在一起，例如：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">user</span>.<span class="title function_">find</span>(&#123;<span class="string">&quot;age&quot;</span>:<span class="number">27</span>,<span class="string">&quot;username&quot;</span>:<span class="string">&quot;joe&quot;</span>&#125;)</span><br></pre></td></tr></table></figure> ### 4.1.1 指定需要返回的键 通过 find 或 findOne
的第二个参数指定想要返回的键。</p>
<p>例如，如果只对用户集合的 “username” 和 “email”
键感兴趣，可以使用如下查询返回这些键： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;&#125;,&#123;<span class="string">&quot;username&quot;</span>:<span class="number">1</span>,<span class="string">&quot;email&quot;</span>:<span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure> 默认情况下， “_id”
这个键总是被返回。入股不需要查询返回某个键/值对时，只需要将第二个参数的键的值设为
0 即可。</p>
<p>##4.2 查询条件 ### 4.2.1 查询条件 比较操作符 “<span
class="math inline">$lt"、"$</span>lte”、“<span class="math inline">$gt"
、 "$</span>gte” 和 “<span class="math inline">$ne" 分别对应
&lt;、&lt;=、&gt; 、 &gt;= 和 != 。例如，查询 18~30
岁（含）的用户，可以向下面这样：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="string">&quot;age&quot;</span>:&#123;<span class="string">&quot;$gte&quot;</span>:<span class="number">18</span>,<span class="string">&quot;$lte&quot;</span>:<span class="number">30</span>&#125;&#125;)</span><br></pre></td></tr></table></figure>
这样的范围查询对日期尤为有用。例如，要查找在 2007 年 1 月 1
日前注册的人，可以像下面这样：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&gt; start = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="string">&quot;01/01/2007&quot;</span>)</span><br><span class="line">&gt; db.<span class="property">users</span>.<span class="title function_">find</span>(&#123;<span class="string">&quot;registered&quot;</span>:&#123;<span class="string">&quot;$lt&quot;</span>:start&#125;&#125;)</span><br></pre></td></tr></table></figure>
### 4.2.2 OR 查询
"$</span>in” 可以查询一个键的多个值，“<span class="math inline">$or"
可以在多个键中查询任意的给定值。例如，抽奖活动的中奖号码是 725 、 542 和
390 ，要找出全部的中间文档的话，可以构建如下查询：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">raffle</span>.<span class="title function_">find</span>(&#123;<span class="string">&quot;ticket_no&quot;</span>:&#123;<span class="string">&quot;$in&quot;</span>:[<span class="number">725</span>,<span class="number">542</span>,<span class="number">390</span>]&#125;&#125;)</span><br></pre></td></tr></table></figure>
"$</span>in” 后面的数组可以包含不同类型的值。“$nin”
将返回与数组中所有条件都不匹配的文档。</p>
<h3 id="null">4.3.1 null</h3>
<p>null
不仅可以匹配自身，而且还会匹配不包含这个键的文档。。如果既要检查该键的值是否为
null，还要通过 “$exists” 条件判定键值已存在： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">c</span>.<span class="title function_">find</span>(&#123;<span class="string">&quot;z&quot;</span>:&#123;<span class="string">&quot;$in&quot;</span>:[<span class="literal">null</span>],<span class="string">&quot;$exists&quot;</span>:<span class="literal">true</span>&#125;&#125;)</span><br></pre></td></tr></table></figure> ### 4.3.2
正则表达式 MongoDB 使用 <a
href="https://perldoc.perl.org/perlre.html">Perl
兼容的正则表达式库</a>(PCRE)来匹配正则表达式，任何 PCRE
支持的正则表达式语法都能被 MongoDB 接受。</p>
<p>MongoDB 可以为前缀型正则表达式（比如
/^joey/）查询创建索引，所以这种类型的查询会非常高效。</p>
<h3 id="查询数组">4.3.3 查询数组</h3>
<p>1.$all 使用 $all 通过多个元素来匹配数组。例如，有以下数据：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;_id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="string">&quot;fruit&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;apple&quot;</span>,</span><br><span class="line">        <span class="string">&quot;banana&quot;</span>,</span><br><span class="line">        <span class="string">&quot;peach&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;_id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="string">&quot;fruit&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;apple&quot;</span>,</span><br><span class="line">        <span class="string">&quot;kumquat&quot;</span>,</span><br><span class="line">        <span class="string">&quot;orange&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;_id&quot;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="string">&quot;fruit&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;cherry&quot;</span>,</span><br><span class="line">        <span class="string">&quot;banana&quot;</span>,</span><br><span class="line">        <span class="string">&quot;apple&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 想从中找到既有 “apple” 又有 “banana” 的文档，可以使用
$all ： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">food</span>.<span class="title function_">find</span>(&#123;<span class="attr">fruit</span>:&#123;<span class="attr">$all</span>:[<span class="string">&quot;apple&quot;</span>,<span class="string">&quot;banana&quot;</span>]&#125;&#125;)</span><br></pre></td></tr></table></figure> 要是想查询数组特定位置的元素，需使用 key.index
语法指定的下标： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">food</span>.<span class="title function_">find</span>(&#123;<span class="string">&quot;fruit.2&quot;</span>:<span class="string">&quot;peach&quot;</span>&#125;)</span><br></pre></td></tr></table></figure> 数组下标都是从 0
开始的，所以上面的表达式会用数组的第 3 个元素和 “peach” 进行匹配。</p>
<p>2.$size 可以使用 $size 查询特定长度的数组。 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">food</span>.<span class="title function_">find</span>(&#123;<span class="string">&quot;fruit&quot;</span>:&#123;<span class="string">&quot;$size&quot;</span>:<span class="number">3</span>&#125;&#125;)</span><br></pre></td></tr></table></figure></p>
<p>2.$size 可以使用 $size 查询特定长度的数组。例如： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">food</span>.<span class="title function_">find</span>(&#123;<span class="string">&quot;fruit&quot;</span>:&#123;<span class="string">&quot;$size&quot;</span>:<span class="number">3</span>&#125;)</span><br></pre></td></tr></table></figure></p>
<p>3.<span
class="math inline"><em>s</em><em>l</em><em>i</em><em>c</em><em>e</em><em>操</em><em>作</em><em>符</em></span>slice
操作符可以返回某个键匹配的数组元素的一个子集。例如，返回博客文章的文档的前
10 条评论： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">blog</span>.<span class="property">posts</span>.<span class="title function_">findOne</span>(criteria,&#123;<span class="string">&quot;comments&quot;</span>:&#123;<span class="attr">$slice</span>:<span class="number">10</span>&#125;&#125;)</span><br></pre></td></tr></table></figure> 其中，使用 -10 可以返回后 10 条评论。
也可以指定偏移值以及希望返回的元素数量。如： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">blog</span>.<span class="property">posts</span>.<span class="title function_">findOne</span>(criteria,&#123;<span class="string">&quot;comments&quot;</span>:&#123;<span class="attr">$slice</span>:[<span class="number">23</span>,<span class="number">10</span>]&#125;&#125;)</span><br></pre></td></tr></table></figure>
该操作会跳过前 23 个元素，返回第 24 ~ 33 个元素。 除非特别说明，否则使用
$slice 将返回文档中的所有键。</p>
<p>返回一个匹配的数组元素： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">blog</span>.<span class="property">posts</span>.<span class="title function_">find</span>(&#123;<span class="string">&quot;comments.name&quot;</span>:<span class="string">&quot;bob&quot;</span>,&#123;<span class="string">&quot;comments.$&quot;</span>:<span class="number">1</span>&#125;&#125;)</span><br></pre></td></tr></table></figure> 该查询只返回 Bob
在这篇博客文章下写过的评论的第一条。</p>
<h1 id="第-5-章-索引">第 5 章 索引</h1>
<h2 id="索引简介">5.1 索引简介</h2>
<h3 id="索引基数">5.1.5 索引基数</h3>
<p>基数（cardinality）就是集合中某个字段拥有不同值的数量。通常，一个字段的基数越高，这个键上的索引就越有用。一般来说，应该在基数比较高的键上建立索引，或者至少应该把基数较高的键放在复合索引的前面（低基数的键之前）。</p>
<h2 id="索引类型">5.4 索引类型</h2>
<h3 id="唯一索引">5.4.1 唯一索引</h3>
<p>唯一索引可以确保集合的每一个文档的指定键都有唯一值。唯一索引会把 null
看做值，所以无法将多个缺少唯一索引中的键的文档插入到集合中。例如，如果想保证不同文档的“username”键拥有不同的值，创建一个唯一索引就好了：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">users</span>.<span class="title function_">ensureIndex</span>(&#123;<span class="string">&quot;username&quot;</span>:<span class="number">1</span>&#125;,&#123;<span class="string">&quot;unique&quot;</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure> 1.复合唯一索引
也可以创建复合的唯一索引。创建复合唯一索引时，单个键的值可以相同，但所有键的组合值必须是唯一的。</p>
<p>2.去除重复
创建索引时使用“dropDups”选项，如果遇到重复的值，第一个会被保留，之后的重复文档都会被删除。
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">people</span>.<span class="title function_">ensureIndex</span>(&#123;<span class="string">&quot;username&quot;</span>:<span class="number">1</span>&#125;,&#123;<span class="string">&quot;unique&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;dropDups&quot;</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure> 对于比较重要的数据，千万不要使用“dropDups”。</p>
<h3 id="稀疏索引">5.4.2 稀疏索引</h3>
<p>创建稀疏索引时，只对键有值的情况进行唯一性约束。 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="title function_">ensureIndex</span>(&#123;<span class="string">&quot;email&quot;</span>:<span class="number">1</span>&#125;,&#123;<span class="string">&quot;unique&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;sparse&quot;</span>:<span class="literal">true</span>&#125;)</span><br></pre></td></tr></table></figure>
稀疏索引不必是唯一的，只要去掉 unique
选型，就可以创建一个非唯一的稀疏索引。</p>
<h3 id="标识索引">5.5.1 标识索引</h3>
<p>创建索引时指定索引的名称： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">foo</span>.<span class="title function_">ensureIndex</span>(&#123;<span class="string">&quot;a&quot;</span>:<span class="number">1</span>,<span class="string">&quot;b&quot;</span>:<span class="number">1</span>,<span class="string">&quot;c&quot;</span>:<span class="number">1</span>,...,<span class="string">&quot;z&quot;</span>:<span class="number">1</span>&#125;,&#123;<span class="string">&quot;name&quot;</span>:<span class="string">&quot;alphabet&quot;</span>&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="删除索引">5.5.2 删除索引</h3>
<p>使用 dropIndex 命令删除不再需要的索引： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">people</span>.<span class="title function_">dropIndex</span>(<span class="string">&quot;x_1_y_1&quot;</span>)</span><br></pre></td></tr></table></figure></p>
<h1 id="第-6-章-特殊的索引和集合">第 6 章 特殊的索引和集合</h1>
<h2 id="固定集合">6.1 固定集合</h2>
<p>固定集合需要事先创建好，且大小是固定的。固定集合类似于循环队列，当固定集合被沾满时，如果再插入新文档，固定集合会自动将最老的文档从集合中删除。</p>
<p>固定集合不能被分片。可以用于记录日志。</p>
<h3 id="创建固定集合">6.1.1 创建固定集合</h3>
<p>size 参数可以指定集合的固定大小，以字节为单位： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="title function_">createCollection</span>(<span class="string">&quot;my_collection&quot;</span>,&#123;<span class="string">&quot;capped&quot;</span>:<span class="literal">true</span>,<span class="string">&quot;size&quot;</span>:<span class="number">10000</span>&#125;)</span><br></pre></td></tr></table></figure>
也可以通过 max
参数指定固定集合的文档数量。指定文档数量限制时，必须同时指定固定集合的大小。</p>
<p>可以使用 convertToCapped 命令将常规集合转换为固定集合：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="title function_">runCommand</span>(&#123;<span class="string">&quot;convertToCapped&quot;</span>:<span class="string">&quot;test&quot;</span>,<span class="string">&quot;size&quot;</span>:<span class="number">10000</span>&#125;)</span><br></pre></td></tr></table></figure> 固定集合无法转换为非固定集合。</p>
<h3 id="自然排序">6.1.2 自然排序</h3>
<p>对固定集合可以进行 自然排序（natural
sort）。自然排序返回结果集中文档的顺序就是文档在磁盘上的顺序。
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">my_collection</span>.<span class="title function_">find</span>().<span class="title function_">sort</span>(&#123;<span class="string">&quot;$natural&quot;</span>:<span class="number">1</span>&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="循环游标">6.1.3 循环游标</h3>
<p>循环游标（tailable
cursor）：当循环游标的结果集被取光后，游标不会被关闭。如果超过 10
分钟没有新的结果，循环游标就会被释放。</p>
<h2 id="ttl-索引">6.2 TTL 索引</h2>
<p>TTL 索引是特殊的单字段索引，MongoDB
可以使用它在一定时间后或在特定时钟时间自动从集合中删除文档。数据到期对于某些类型的信息非常有用，例如机器生成的事件数据，日志和会话信息，这些信息只需要在数据库中持续有限的时间。
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">eventlog</span>.<span class="title function_">createIndex</span>( &#123; <span class="string">&quot;lastModifiedDate&quot;</span>: <span class="number">1</span> &#125;, &#123; <span class="attr">expireAfterSeconds</span>: <span class="number">3600</span> &#125; )</span><br></pre></td></tr></table></figure></p>
<h2 id="地理空间索引">6.4 地理空间索引</h2>
<p>MongoDB 支持 2dsphere 索引（用于地球表面类型的地图）和 2d
索引（用于平面地图和时间连续的数据）。</p>
<p>2dsphere 允许使用 GeoJSON 格式指定点、线和多边形。 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>:<span class="string">&quot;New York City&quot;</span>,</span><br><span class="line">    <span class="string">&quot;loc&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>:<span class="string">&quot;Point&quot;</span>,</span><br><span class="line">        <span class="string">&quot;coordinates&quot;</span>:[<span class="number">50</span>,<span class="number">2</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
线可以用一个有点组成的数组来表示： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>:<span class="string">&quot;Hudson River&quot;</span>,</span><br><span class="line">    <span class="string">&quot;loc&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>:<span class="string">&quot;Line&quot;</span>,</span><br><span class="line">        <span class="string">&quot;coordinates&quot;</span>:[[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">1</span>,<span class="number">2</span>]]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 多边形的 ”type“ 不同：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>:<span class="string">&quot;New England&quot;</span>,</span><br><span class="line">    <span class="string">&quot;loc&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;type&quot;</span>:<span class="string">&quot;Polygon&quot;</span>,</span><br><span class="line">        <span class="string">&quot;coordinates&quot;</span>:[[<span class="number">0</span>,<span class="number">1</span>],[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">1</span>,<span class="number">2</span>]]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> 在 ensureIndex 中使用 “2dsphere”
选型可以创建一个地理空间索引： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">world</span>.<span class="title function_">ensureIndex</span>(&#123;<span class="string">&quot;loc&quot;</span>:<span class="string">&quot;2dsphere&quot;</span>&#125;)</span><br></pre></td></tr></table></figure> ### 6.4.1
地理空间查询的类型
可以使用多种不同的地理空间查询：交集（intersection）、包含（within）以及接近（nearness）。查询时，需要将希望查找的内容指定为形如
{“<span class="math inline">$geometry":geoJsonDesc} 的 GeoJSON 对象。
例如，使用 “$</span>geoIntersects” 操作符找出与查询位置相交的文档：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">places</span>.<span class="title function_">find</span>(</span><br><span class="line">   &#123;</span><br><span class="line">     <span class="attr">loc</span>: &#123;</span><br><span class="line">       <span class="attr">$geoIntersects</span>: &#123;</span><br><span class="line">          <span class="attr">$geometry</span>: &#123;</span><br><span class="line">             <span class="attr">type</span>: <span class="string">&quot;Polygon&quot;</span> ,</span><br><span class="line">             <span class="attr">coordinates</span>: [</span><br><span class="line">               [ [ <span class="number">0</span>, <span class="number">0</span> ], [ <span class="number">3</span>, <span class="number">6</span> ], [ <span class="number">6</span>, <span class="number">1</span> ], [ <span class="number">0</span>, <span class="number">0</span> ] ]</span><br><span class="line">             ]</span><br><span class="line">          &#125;</span><br><span class="line">       &#125;</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure> ### 6.4.3 2D 索引
对于非球面地图（游戏地图、时间连续的数据等），可以使用 2d 索引。
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">hyrule</span>.<span class="title function_">ensureIndex</span>(&#123;<span class="attr">title</span>:<span class="string">&quot;2d&quot;</span>&#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="使用-gridfs-存储文件">6.5 使用 GridFS 存储文件</h2>
<h3 id="gridfs-入门">6.5.1 GridFS 入门</h3>
<p>在下面这个会话中，首先用 mongofiles 从文件系统中上传一个文件到 GridFS
，然后列出 GridFS 中的所有文件，最后再将之前上传过的文件从 GridFS
中下载下来： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">echo <span class="string">&quot;Hello,world&quot;</span> &gt; foo.<span class="property">txt</span></span><br><span class="line">mongofiles put foo.<span class="property">txt</span></span><br><span class="line">mongofiles list</span><br><span class="line">mongofiles get foo.<span class="property">txt</span></span><br></pre></td></tr></table></figure></p>
<h1 id="第-7-章-聚合">第 7 章 聚合</h1>
<h2 id="聚合框架">7.1 聚合框架</h2>
<p>例如，有一个保存着杂志文章的集合，假设每篇文章被保存为 MongoDB
中的一个文档，则可以构建如下查询： 1.将 “author” 从每个文档中投射出来
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;$project&quot;</span>:&#123;<span class="string">&quot;author&quot;</span>:<span class="number">1</span>&#125;&#125;</span><br></pre></td></tr></table></figure> 2.将作者按照名字排序，统计每个名字出现的次数
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="attr">$group</span>:&#123;<span class="string">&quot;_id&quot;</span>:<span class="string">&quot;$author&quot;</span>,<span class="string">&quot;count&quot;</span>:&#123;<span class="string">&quot;$sum&quot;</span>:<span class="number">1</span>&#125;&#125;&#125;</span><br></pre></td></tr></table></figure> 3.将作者按照名字出现次数降序排列 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;$sort&quot;</span>:&#123;<span class="string">&quot;count&quot;</span>:-<span class="number">1</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
4.将返回结果限制为前 5 个 <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#123;<span class="string">&quot;$limit&quot;</span>:<span class="number">5</span>&#125;</span><br></pre></td></tr></table></figure> 在 MongoDB
中实际运行时，要将这些操作分别传给 aggregate() 函数： <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">db.<span class="property">aticles</span>.<span class="title function_">aggregate</span>(&#123;<span class="string">&quot;$project&quot;</span>:&#123;<span class="string">&quot;author&quot;</span>:<span class="number">1</span>&#125;&#125;,</span><br><span class="line">&#123;<span class="attr">$group</span>:&#123;<span class="string">&quot;_id&quot;</span>:<span class="string">&quot;$author&quot;</span>,<span class="string">&quot;count&quot;</span>:&#123;<span class="string">&quot;$sum&quot;</span>:<span class="number">1</span>&#125;&#125;&#125;,</span><br><span class="line">&#123;<span class="string">&quot;$sort&quot;</span>:&#123;<span class="string">&quot;count&quot;</span>:-<span class="number">1</span>&#125;&#125;,</span><br><span class="line">&#123;<span class="string">&quot;$limit&quot;</span>:<span class="number">5</span>&#125;)</span><br></pre></td></tr></table></figure></p>
<h2 id="管道操作符">7.2 管道操作符</h2>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>MongoDB</tag>
      </tags>
  </entry>
  <entry>
    <title>黄疸的家庭护理</title>
    <url>/2020/05/06/%E9%BB%84%E7%96%B8%E7%9A%84%E5%AE%B6%E5%BA%AD%E6%8A%A4%E7%90%86/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>护理黄疸的三个要点：</p>
<div class="note info"><p>第一，生理性黄疸是新生儿期的常见现象，会自行消退，不用治疗，只要充分喂养宝宝，让他多吃多拉，就能帮助褪黄。</p>
<p>第二，但你仍然要重视宝宝的黄疸，尤其是宝宝出生后 1
周的时间，因为严重的黄疸可能会引起可怕的胆红素脑病，对宝宝健康造成永久性伤害。</p>
<p>第三，喝白开水、葡萄糖水、吃中成药以及晒太阳帮助褪黄的做法都不可取。</p>
</div>
<p>不推荐给宝宝使用的治疗方法：</p>
<span id="more"></span>
<div class="note danger"><p>第一，晒太阳。要知道，新生儿的皮肤是很娇嫩的，很可能会被紫外线灼伤，想通过晒太阳来褪黄，反而得不偿失，在医院照蓝光就可以了。</p>
<p>第二，不建议采取的方法是喝水和葡萄糖水。这是因为，宝宝的胃容量很小，给宝宝喝水和葡萄糖，会让宝宝喝不下奶，奶喝得少了，排泄跟不上，胆红素就容易在体内囤积，不利黄疸消退。</p>
<p>第三，不推荐口服茵栀黄等中成药。目前没有任何证据表明茵栀黄之类的中成药对新生儿黄疸有治疗作用，很多爸妈还反映宝宝吃了不停地拉肚子，安全性不明，所以不推荐给宝宝使用。</p>
</div>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>黄疸</tag>
      </tags>
  </entry>
  <entry>
    <title>iCloud 备忘录不显示中文</title>
    <url>/2020/03/18/iCloud-%E5%A4%87%E5%BF%98%E5%BD%95%E4%B8%8D%E6%98%BE%E7%A4%BA%E4%B8%AD%E6%96%87/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>今天在 win7 上使用 chrome 浏览器访问 iCloud
备忘录，发现中文无法显示，只显示数字和图片，换用 firefox 登录也不行。
上网检索，没有找到好的解决办法。 后来误打误撞升级了一下 ie 浏览器到版本
11 后就可以正常显示了。有需要的朋友可以试试看。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>iCloud</tag>
        <tag>备忘录</tag>
      </tags>
  </entry>
  <entry>
    <title>Python 获取全国所有城市实时天气预报</title>
    <url>/2020/04/03/Python-%E8%8E%B7%E5%8F%96%E5%85%A8%E5%9B%BD%E6%89%80%E6%9C%89%E5%9F%8E%E5%B8%82%E5%AE%9E%E6%97%B6%E5%A4%A9%E6%B0%94%E9%A2%84%E6%8A%A5/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1
id="查询所有天气数据并打印在控制台">查询所有天气数据并打印在控制台：</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 首先获取全国城市列表</span></span><br><span class="line">url = <span class="string">&#x27;https://a.hecdn.net/download/dev/china-city-list.csv&#x27;</span></span><br><span class="line">strhtml = requests.get(url)</span><br><span class="line">data = strhtml.text</span><br><span class="line">datal = data.split(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="comment"># 列表的前三行是我们不需要的，删除</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    datal.remove(datal[<span class="number">0</span>])</span><br><span class="line"><span class="comment"># 根据城市编码获取实时天气预报</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> datal:</span><br><span class="line">    url = <span class="string">&#x27;https://free-api.heweather.net/s6/weather/now?location=&#x27;</span> + item[<span class="number">0</span>:<span class="number">11</span>] +<span class="string">&#x27;&amp;key=xxx&#x27;</span></span><br><span class="line">    strhtml=requests.get(url)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">print</span>(strhtml.text)</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>其中用到了 <a href="https://dev.heweather.com/">和风天气</a> 的
API，免费用户有流量限制。代码中的 key 需要换成你自己的 key。</p>
<h1
id="将获取到的天气数据保存在-mongodb-数据库中">将获取到的天气数据保存在
mongodb 数据库中：</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立连接</span></span><br><span class="line">client = pymongo.MongoClient(<span class="string">&#x27;192.168.1.123&#x27;</span>,<span class="number">27000</span>)</span><br><span class="line"><span class="comment"># 创建数据库 </span></span><br><span class="line">book_weather=client[<span class="string">&#x27;weather&#x27;</span>]</span><br><span class="line"><span class="comment"># 创建表</span></span><br><span class="line">sheet_weather=book_weather[<span class="string">&#x27;sheet_weather_3&#x27;</span>]</span><br><span class="line">url = <span class="string">&#x27;https://a.hecdn.net/download/dev/china-city-list.csv&#x27;</span></span><br><span class="line">strhtml = requests.get(url)</span><br><span class="line">data = strhtml.text</span><br><span class="line">datal = data.split(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">3</span>):</span><br><span class="line">    datal.remove(datal[<span class="number">0</span>])</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> datal:</span><br><span class="line">    url = <span class="string">&#x27;https://free-api.heweather.net/s6/weather/now?location=&#x27;</span> + item[<span class="number">0</span>:<span class="number">11</span>] +<span class="string">&#x27;&amp;key=xxx&#x27;</span></span><br><span class="line">    strhtml=requests.get(url)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    dic = strhtml.json()</span><br><span class="line">    <span class="comment"># 向数据库中写入数据</span></span><br><span class="line">    sheet_weather.insert_one(dic)</span><br></pre></td></tr></table></figure>
<h1 id="查询北京的天气数据">查询北京的天气数据：</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line">client = pymongo.MongoClient(<span class="string">&#x27;192.168.1.123&#x27;</span>,<span class="number">27000</span>)</span><br><span class="line">book_weather = client[<span class="string">&#x27;weather&#x27;</span>]</span><br><span class="line">sheet_weather = book_weather[<span class="string">&#x27;sheet_weather_3&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> sheet_weather.find(&#123;<span class="string">&#x27;HeWwather6.basic.city&#x27;</span>:<span class="string">&#x27;北京&#x27;</span>&#125;):</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br></pre></td></tr></table></figure>
<p><strong>参考文档：</strong> <a
href="https://book.douban.com/subject/30190201/">Python
3爬虫、数据清洗与可视化实战</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>爬虫</tag>
        <tag>天气预报</tag>
      </tags>
  </entry>
  <entry>
    <title>Python 爬取去哪儿网商品数据</title>
    <url>/2020/04/08/Python-%E7%88%AC%E5%8F%96%E5%8E%BB%E5%93%AA%E5%84%BF%E7%BD%91%E5%95%86%E5%93%81%E6%95%B0%E6%8D%AE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1
id="爬取去哪儿网自由行商品数据并保存在-mongodb-数据库中">爬取去哪儿网自由行商品数据并保存在
mongodb 数据库中：</h1>
<span id="more"></span>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> pymongo</span><br><span class="line"></span><br><span class="line"><span class="comment"># 建立数据库连接并创建数据库和表</span></span><br><span class="line">client = pymongo.MongoClient(<span class="string">&#x27;192.168.1.123&#x27;</span>, <span class="number">27000</span>)</span><br><span class="line">book_qunar = client[<span class="string">&#x27;qunar&#x27;</span>]</span><br><span class="line">sheet_qunar_zyx = book_qunar[<span class="string">&#x27;qunar_zyx&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取产品列表信息</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_list</span>(<span class="params">dep, item</span>):</span><br><span class="line">    url = <span class="string">&#x27;https://touch.dujia.qunar.com/list?modules=list,bookingInfo,activityDetail&amp;dep=&#123;&#125;&amp;query=&#123;&#125;&amp;dappDealTrace=true&amp;mobFunction=%E6%89%A9%E5%B1%95%E8%87%AA%E7%94%B1%E8%A1%8C&amp;cfrom=zyx&amp;it=dujia_hy_destination&amp;date=&amp;needNoResult=true&amp;originalquery=&#123;&#125;&amp;width=480&amp;height=320&amp;quality=90&amp;limit=0,20&amp;includeAD=true&amp;qsact=search&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">        urllib.request.quote(dep), urllib.request.quote(item), urllib.request.quote(item))</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    strhtml = requests.get(url)</span><br><span class="line">    <span class="comment"># 取出产品数</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        routeCount = <span class="built_in">int</span>(strhtml.json()[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;limit&#x27;</span>][<span class="string">&#x27;routeCount&#x27;</span>])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">for</span> limit <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">0</span>, routeCount, <span class="number">20</span>):</span><br><span class="line">        url = <span class="string">&#x27;https://touch.dujia.qunar.com/list?modules=list,bookingInfo,activityDetail&amp;dep=&#123;&#125;&amp;query=&#123;&#125;&amp;dappDealTrace=true&amp;mobFunction=%E6%89%A9%E5%B1%95%E8%87%AA%E7%94%B1%E8%A1%8C&amp;cfrom=zyx&amp;it=dujia_hy_destination&amp;date=&amp;needNoResult=true&amp;originalquery=&#123;&#125;&amp;width=480&amp;height=320&amp;quality=90&amp;limit=&#123;&#125;,20&amp;includeAD=true&amp;qsact=search&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">            urllib.request.quote(dep), urllib.request.quote(item), urllib.request.quote(item), limit)</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line">        strhtml = requests.get(url)</span><br><span class="line">        result = &#123;</span><br><span class="line">            <span class="string">&#x27;date&#x27;</span>: time.strftime(<span class="string">&#x27;%Y-%m-%d&#x27;</span>, time.localtime(time.time())),</span><br><span class="line">            <span class="string">&#x27;dep&#x27;</span>: dep,</span><br><span class="line">            <span class="string">&#x27;arrive&#x27;</span>: item,</span><br><span class="line">            <span class="string">&#x27;limit&#x27;</span>: limit,</span><br><span class="line">            <span class="string">&#x27;result&#x27;</span>: strhtml.json()</span><br><span class="line">        &#125;</span><br><span class="line">        sheet_qunar_zyx.insert_one(result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_json</span>(<span class="params">url</span>):</span><br><span class="line">    strhtml = requests.get(url)</span><br><span class="line">    time.sleep(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> strhtml.json()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="comment"># 获取出发地站点</span></span><br><span class="line">    url = <span class="string">&#x27;https://touch.dujia.qunar.com/depCities.qunar&#x27;</span></span><br><span class="line">    dep_dict = get_json(url)</span><br><span class="line">    <span class="keyword">for</span> dep_item <span class="keyword">in</span> dep_dict[<span class="string">&#x27;data&#x27;</span>]:</span><br><span class="line">        <span class="keyword">for</span> dep <span class="keyword">in</span> dep_dict[<span class="string">&#x27;data&#x27;</span>][dep_item]:</span><br><span class="line">            a = []</span><br><span class="line">            <span class="comment"># 根据出发地站点获取目的地</span></span><br><span class="line">            url = <span class="string">&#x27;https://touch.dujia.qunar.com/golfz/sight/arriveRecommend?dep=&#123;&#125;&amp;exclude=&amp;extensionImg=255,175&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">                urllib.request.quote(dep))</span><br><span class="line">            arrive_dict = get_json(url)</span><br><span class="line">            <span class="keyword">for</span> arrive_item <span class="keyword">in</span> arrive_dict[<span class="string">&#x27;data&#x27;</span>]:</span><br><span class="line">                <span class="keyword">for</span> arrive_item_1 <span class="keyword">in</span> arrive_item[<span class="string">&#x27;subModules&#x27;</span>]:</span><br><span class="line">                    <span class="keyword">for</span> query <span class="keyword">in</span> arrive_item_1[<span class="string">&#x27;items&#x27;</span>]:</span><br><span class="line">                        <span class="comment"># 对目的地进行去重</span></span><br><span class="line">                        <span class="keyword">if</span> query[<span class="string">&#x27;query&#x27;</span>] <span class="keyword">not</span> <span class="keyword">in</span> a:</span><br><span class="line">                            a.append(query[<span class="string">&#x27;query&#x27;</span>])</span><br><span class="line">            <span class="comment"># 获取产品列表</span></span><br><span class="line">            <span class="keyword">for</span> item <span class="keyword">in</span> a:</span><br><span class="line">                get_list(dep, item)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="数据库监控程序">数据库监控程序</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> get_depart <span class="keyword">import</span> sheet_qunar_zyx</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="built_in">print</span>(sheet_qunar_zyx.find().count())</span><br><span class="line">    time.sleep(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>
<p><strong>参考文档：</strong> <a
href="https://book.douban.com/subject/30190201/">Python
3爬虫、数据清洗与可视化实战</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>爬虫</tag>
      </tags>
  </entry>
  <entry>
    <title>Python Mysql 数据库连接和查询</title>
    <url>/2020/04/17/Python-Mysql-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E5%92%8C%E6%9F%A5%E8%AF%A2/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="使用-pymysql">使用 PyMySQL</h1>
<span id="more"></span>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"></span><br><span class="line">db = pymysql.Connect(</span><br><span class="line">    host=<span class="string">&quot;192.168.1.123&quot;</span>,</span><br><span class="line">    port=<span class="number">3306</span>,</span><br><span class="line">    user=<span class="string">&quot;root&quot;</span>,</span><br><span class="line">    password=<span class="string">&quot;Dp330651!&quot;</span>,</span><br><span class="line">    db=<span class="string">&quot;taobao&quot;</span>,</span><br><span class="line">    charset=<span class="string">&quot;utf8&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查询</span></span><br><span class="line">cur = db.cursor()</span><br><span class="line">sql = <span class="string">&#x27;select * from sale_data where 位置 in(%s,%s,%s)&#x27;</span></span><br><span class="line">cur.execute(sql, (<span class="string">&quot;江苏&quot;</span>, <span class="string">&quot;浙江&quot;</span>, <span class="string">&quot;上海&quot;</span>))</span><br><span class="line">result = cur.fetchall()</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> result:</span><br><span class="line">    <span class="built_in">print</span>(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除</span></span><br><span class="line">sql = <span class="string">&#x27;delete from sale_data where 价格 &lt; 100&#x27;</span></span><br><span class="line">cur.execute(sql)</span><br><span class="line">db.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改</span></span><br><span class="line">sql = <span class="string">&#x27;update sale_data set 位置=%s where 位置 in (%s,%s,%s)&#x27;</span></span><br><span class="line">cur.execute(sql,(<span class="string">&quot;江浙沪&quot;</span>,<span class="string">&quot;江苏&quot;</span>, <span class="string">&quot;浙江&quot;</span>, <span class="string">&quot;上海&quot;</span>))</span><br><span class="line">db.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 插入</span></span><br><span class="line">sql = <span class="string">&#x27;insert into sale_data(宝贝,价格,成交量,卖家,位置) values(%s,%s,%s,%s,%s)&#x27;</span></span><br><span class="line">cur.execute(sql,(<span class="string">&quot;2017夏季妈妈装 40-50 岁中老年女装连衣裙&quot;</span>,<span class="number">298</span>,<span class="number">10000</span>,<span class="string">&quot;xxx 天猫旗舰店&quot;</span>,<span class="string">&quot;北京&quot;</span>))</span><br><span class="line">db.commit()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关闭游标和数据库连接</span></span><br><span class="line">cur.close()</span><br><span class="line">db.close()</span><br></pre></td></tr></table></figure>
<h1 id="使用-sqlalchemy">使用 SQLAlchemy</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, String, create_engine</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker</span><br><span class="line"><span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Procuct</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, <span class="built_in">id</span>, name, <span class="built_in">type</span></span>):</span><br><span class="line">        self.<span class="built_in">id</span> = <span class="built_in">id</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.<span class="built_in">type</span> = <span class="built_in">type</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建对象的基类</span></span><br><span class="line">Base = declarative_base()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 定义 Product 对象</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Product</span>(<span class="title class_ inherited__">Base</span>):</span><br><span class="line">    <span class="comment"># 表名</span></span><br><span class="line">    __tablename__ = <span class="string">&#x27;Product&#x27;</span></span><br><span class="line">    <span class="comment"># 表结构</span></span><br><span class="line">    <span class="built_in">id</span> = Column(String(<span class="number">20</span>), primary_key=<span class="literal">True</span>)</span><br><span class="line">    name = Column(String(<span class="number">20</span>))</span><br><span class="line">    <span class="built_in">type</span> = Column(String(<span class="number">20</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 初始化数据库连接</span></span><br><span class="line">engine = create_engine(<span class="string">&#x27;mysql+pymysql://root:Dp330651!@192.168.1.123:3306/taobao&#x27;</span>)</span><br><span class="line"><span class="comment"># 创建 DBSession 类型</span></span><br><span class="line">DBSession = sessionmaker(bind=engine)</span><br><span class="line"><span class="comment"># 插入一条记录</span></span><br><span class="line">session = DBSession()</span><br><span class="line">new_user = Product(<span class="built_in">id</span>=<span class="string">&#x27;19558276&#x27;</span>, name=<span class="string">&#x27;北京5天4晚自由行 含双早 入住前门商业街豪华酒店 含双人故宫电子门票&#x27;</span>, <span class="built_in">type</span>=<span class="string">&#x27;景+酒&#x27;</span>)</span><br><span class="line">session.add(new_user)</span><br><span class="line">session.commit()</span><br><span class="line"><span class="comment"># 查询</span></span><br><span class="line">student = session.query(Product).<span class="built_in">filter</span>(Product.<span class="built_in">id</span>==<span class="string">&#x27;19558276&#x27;</span>).one()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;name: &#x27;</span>, student.name)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;type: &#x27;</span>, student.<span class="built_in">type</span>)</span><br><span class="line"><span class="comment"># 更新</span></span><br><span class="line">session.query(Product).<span class="built_in">filter</span>(Product.<span class="built_in">id</span>==<span class="string">&#x27;19558276&#x27;</span>).update(&#123;Product.name:<span class="string">&quot;北京5天4晚自由行，景+酒套餐&quot;</span>&#125;)</span><br><span class="line">session.commit()</span><br><span class="line"><span class="comment"># 删除数据</span></span><br><span class="line">session.query(Product).<span class="built_in">filter</span>(Product.<span class="built_in">id</span>==<span class="string">&#x27;19558276&#x27;</span>).delete()</span><br><span class="line">session.commit()</span><br><span class="line">session.close()</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Mysql</tag>
        <tag>查询</tag>
        <tag>连接</tag>
      </tags>
  </entry>
  <entry>
    <title>as far as 和 so far as 的区别</title>
    <url>/2020/06/03/as-far-as-%E5%92%8C-so-far-as-%E7%9A%84%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>一 用于指距离，表示“直到……为止”之意时，as far as
既可用于肯定句，也可用于否定句，但 so far as 只能用于否定句中。</p>
<p>二 在表示“直到……程度”之意的借喻说法中，as far as 和 so far as
都可使用，但前者不及后者用得普遍。例：she went so far as （or as far
as） to call him a coward. 她甚至骂他是儒夫。</p>
<p>三 在表示“就……而论”之意时，as far as 和 so far as 可互换使用。例： As
（or So） far as I know，she will be away from Macao for two months.
据我所知，她将要离开澳门两个月。 As （or So） far as my knowledge
goes，there is no such word in English.
据我所知，英语里没有这样一个字。</p>
<p>四 在表示“只要”、“尽……所能”之意时，应用 as far as，不用 so far
as。例： I’ll do my utmost to help you as far as I can.</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>as far as</tag>
        <tag>so far as</tag>
      </tags>
  </entry>
  <entry>
    <title>尿布疹的家庭护理</title>
    <url>/2020/05/23/%E5%B0%BF%E5%B8%83%E7%96%B9%E7%9A%84%E5%AE%B6%E5%BA%AD%E6%8A%A4%E7%90%86/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="什么是红屁屁尿布疹">什么是红屁屁（尿布疹）</h1>
<p>尿布疹就是宝宝们被尿布覆盖的皮肤出现的皮疹或发炎的现象。</p>
<h1 id="尿布疹产生的原因">尿布疹产生的原因</h1>
<p>一般来说，引起尿布疹的最重要的因素就是湿度，如果宝宝的湿尿片太久没换，导致小屁屁长时间潮湿，就可能导致皮肤又湿又热，破坏了宝宝屁股上的皮肤角质层。</p>
<p>这种情况下，尿片和嫩嫩的皮肤继续摩擦，就会进一步加重宝宝皮肤的损伤。</p>
<p>如果宝宝大便了没有及时更换尿片，那粪便中的细菌和尿液相互作用，就会使尿片的
PH 值升高，激活粪便所含的蛋白酶和脂肪酶。</p>
<span id="more"></span>
<h1 id="就医原则">就医原则</h1>
<p>皮疹范围扩大、破皮渗水、出现异味。</p>
<h1 id="如何预防">如何预防</h1>
<ol type="1">
<li>宝宝大便后要尽快更换尿片，减少皮肤与湿气的接触。</li>
<li>每次便便后，都要用柔软的毛巾和干净的清水清洗宝宝的小屁股，尤其是和尿片接触的部分。</li>
<li>换完尿片后，尽可能将宝宝的屁股晾一会，让总是被捂住的皮肤呼吸呼吸新鲜空气。</li>
</ol>
<h1 id="家庭护理">家庭护理</h1>
<p>可以在给宝宝清洁小屁股后，涂上护臀霜，尽量选择凡士林或氧化锌成分的护臀霜就可以了，成分尽量简单为好。</p>
<p>护臀霜不要选择乳膏（creams）和洗剂（lotions），因为它们粘附性较差，封闭程度低，而且还可能含有芳香剂和防腐剂。而应该选择糊剂（pastes）和软膏（ointments）。</p>
<h1 id="不推荐的做法">不推荐的做法</h1>
<ol type="1">
<li>经常使用婴儿湿巾擦拭宝宝的皮肤。</li>
</ol>
<p>因为常见的湿纸巾里含有防腐剂，在选用湿纸巾的时候，也要选择不含酒精不含防腐剂的棉柔巾，用水弄湿后给宝宝擦洗。</p>
<ol start="2" type="1">
<li>使用紫草油。</li>
</ol>
<p>紫草油里含有吡咯里西啶生物碱（PAs），有较强的的肝毒性，可以透过皮肤吸收，有可能引起肝细胞坏死、闭塞性静脉炎等严重疾病。</p>
<ol start="3" type="1">
<li>橄榄油、菜籽油等植物油。</li>
</ol>
<p>这些富含油酸的植物油都属于单不饱和脂肪酸，容易变质，因此商家会为了延长保质期而加入防腐剂，增加接触性皮炎的风险。就算是自制的茶籽油，油酸本身对皮肤屏障也会造成一定的伤害。</p>
<ol start="4" type="1">
<li>爽身粉。</li>
</ol>
<p>因为粉剂容易结块堵塞毛孔，导致排汗不畅，更容易并发细菌感染的可能。要是不小心吸入气道还可能会对气道引起伤害。</p>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>尿布疹</tag>
        <tag>红屁屁</tag>
      </tags>
  </entry>
  <entry>
    <title>鹅口疮的家庭护理</title>
    <url>/2020/05/27/%E9%B9%85%E5%8F%A3%E7%96%AE%E7%9A%84%E5%AE%B6%E5%BA%AD%E6%8A%A4%E7%90%86/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>鹅口疮，又被叫做雪口病。宝宝得了鹅口疮，口腔黏膜会有一层酷似积雪的白色斑块，又因为在症状较轻的时候，并不会让宝宝有不适感，所以常常被爸妈们误认为没有清理干净的奶渣。</p>
<p>用棉签轻轻擦拭宝宝嘴里的白色斑块，鹅口疮很难擦干净。擦除后留下鲜红色创面或出血，说明是鹅口疮。</p>
<p>宝宝口腔黏膜内白斑增多，宝宝感到不适反复哭闹、拒绝进食，鹅口疮反复发作时需要尽快就医。</p>
<span id="more"></span>
<blockquote>
<p>如何护理</p>
</blockquote>
<ol type="1">
<li>保证母乳喂养妈妈的乳头清洁，乳头损伤要及时处理。可以使用咪康唑或克霉唑外涂乳头，哺乳之前使用椰子油或者橄榄油把乳头上的药物移除，哺乳完毕后再次图上抗真菌的药物。</li>
<li>不要使用肥皂清洁乳头，这会给你带来不适。</li>
<li>每次用完奶瓶喂奶后，煮沸消毒。奶嘴、奶瓶，吸奶器，餐具等用水煮沸 20
分钟效度可以杀死念珠菌。</li>
</ol>
<blockquote>
<p>治疗</p>
</blockquote>
<ol type="1">
<li><p>首选制霉菌素（处方药）治疗鹅口疮。</p>
<ul>
<li>2 粒制霉菌素碾碎，混合 10 ml 的温开水或者生理盐水</li>
<li>不会漱口的宝宝可以外涂在口腔里，会漱口的宝宝可以直接拿来漱口</li>
<li>每天 4 次，连续使用 7 ~ 14 天</li>
</ul></li>
<li><p>在超过 2 周的时间未好转时，改用氟康唑口服。</p>
<ul>
<li>第 1 天按照体重 6 mg/kg 服用氟康唑</li>
<li>后续 14 天按照体重 3 mg/kg 服用氟康唑，每天 1 次</li>
</ul></li>
<li><p>在服用氟康唑 14 天没有效果时，带宝宝去医院。</p>
<ul>
<li>进行真菌培养</li>
<li>进行免疫功能评估</li>
</ul></li>
<li><p>不要给四岁的以下的孩子含服锭剂，易导致窒息。</p></li>
<li><p>不要使用龙胆紫外涂，有致癌风险。</p></li>
</ol>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>鹅口疮</tag>
      </tags>
  </entry>
  <entry>
    <title>git 修改已经提交并 push 的 commit 注释</title>
    <url>/2020/08/06/git-%E4%BF%AE%E6%94%B9%E5%B7%B2%E7%BB%8F%E6%8F%90%E4%BA%A4%E5%B9%B6-push-%E7%9A%84-commit-%E6%B3%A8%E9%87%8A/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="修改倒数第-1-次的-commit">修改倒数第 1 次的 commit</h1>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git rebase -i HEAD~1</span></span><br></pre></td></tr></table></figure>
<h1 id="修改-pick-为-edit">修改 pick 为 edit</h1>
<span id="more"></span>
<ul>
<li>按 i 进入编辑模式</li>
<li>将要修改的那一条的pick修改成edit</li>
<li>按 esc 退出编辑模式，输入 :wq 保存并退出</li>
</ul>
<h1 id="修改commit注释内容">修改commit注释内容</h1>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git commit --amend</span></span><br></pre></td></tr></table></figure>
<ul>
<li>按 i 进入编辑模式</li>
<li>将要修改的那一条的pick修改成edit</li>
<li>按 esc 退出编辑模式，输入 :wq 保存并退出</li>
</ul>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git rebase --<span class="built_in">continue</span></span></span><br></pre></td></tr></table></figure>
<h1 id="强制push">强制push</h1>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git push --force github</span></span><br></pre></td></tr></table></figure>
<p>** 参考文档 ** <a
href="https://www.cnblogs.com/superjishere/p/11578130.html">git——修改已经提交并push后的commit注释</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>commit</tag>
      </tags>
  </entry>
  <entry>
    <title>小儿发热</title>
    <url>/2020/05/15/%E5%B0%8F%E5%84%BF%E5%8F%91%E7%83%AD/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="小儿发热">小儿发热</h1>
<h2 id="孩子的正常体温是多少">孩子的正常体温是多少</h2>
<p>一岁以内的婴儿体温在 37.5℃ 以下都属正常。</p>
<p>为了了解孩子本身的体温状况，建议测量基础体温。基础体温指的是清晨睡醒，还未起床活动前的体温。此时人体代谢最低，所以体温也相对最低。</p>
<p>了解孩子的基础体温是很有用的，体温”稍高“与基础体温相比才有意义。</p>
<h2 id="怎样给孩子测量体温才准确">怎样给孩子测量体温才准确</h2>
<p>家庭中最为简易的方式还是建议使用耳温枪。测量前，家长轻轻向外拉直孩子的耳廓，将耳温枪全部阻塞外耳道，再开启测量。如果体温超过
38.5℃，就要给孩子服用退热药物。</p>
<span id="more"></span>
<h2 id="人为什么会发热">人为什么会发热</h2>
<p>发热是位于下丘脑的体温调节中枢上调所致。</p>
<p>当病菌（包括预防接种的疫苗在内）侵犯人体后，人体为了对抗病菌的侵袭，会动用一些防御机制，比如具有杀菌作用的白细胞、淋巴细胞等。动用人体防御机制的启动信号中，发热就是最为主要的一项。</p>
<p>发热是人体对抗病原菌的生理抵抗过程，对人体起到保护作用。引起发热的原因很多，如呼吸道疾病，感冒、扁桃体炎、肺炎等、消化道疾病，急性胃肠炎、腹泻等；出疹性疾病，幼儿急疹、水痘等。</p>
<p>重要的是，要在医生的指导下，寻找发热原因，同时将体温控制于
38.5℃，避免高热惊厥。</p>
<h2 id="如何认识宝宝高热">如何认识宝宝高热</h2>
<ol type="1">
<li><p>高热本身可引起心率增快、呼吸急促、寒战和四肢冰凉等。为人体的正常反应。</p></li>
<li><p>寻找高热的原因，采用对因治疗。</p></li>
</ol>
<p>当体温超过 38.5℃
时，应接受退热药物治疗，比如“对乙酰氨基酚”或“布洛芬”。目的是避免高热惊厥和减少高热引起的体内消耗。服用退热药，一般只能在
4 ~ 6
小时内控制高热。为了增加退热药的效果，一定要多饮水，这样才可以增加皮肤散热、增加排尿等，以达到控制体温的效果。为减少退热药物的副作用，可以“对乙酰氨基酚”和“布洛芬”交替使用。</p>
<p>退热药只是将大脑内体温中枢的调定点下移，增加散热。散热需通过皮肤水分蒸发、排尿等生理过程完成。若体内水分不足，体温下降幅度则小。所以，对于高热婴幼儿，在服用退热药的同时，必须增加水分的摄入。</p>
<h2 id="发热的利弊">发热的利弊</h2>
<p>目前医学研究证实，发热是许多疾病初期的一种防御反应，可增强机体的抗感染能力。从而抵抗一些致病微生物对人体的侵袭，促进人体恢复健康。发热能够产生对抗细菌的抗体；增强人体白细胞内消除毒素的酶活力、增强肝脏对毒素的解毒作用。</p>
<p>发热也会损害人体健康，特别是高热持续过久，会造成人体内各器官、组织的调节功能失常。</p>
<p>针对高热引起的惊厥而言，体温超过
38.5℃，应服退热药；对提高免疫力而言，体温应保持在 37.5℃ ~ 38.5℃。</p>
<h1
id="孩子发热病程中的正确监测和护理">孩子发热病程中的正确监测和护理</h1>
<h2 id="发热时有效的物理降温">发热时有效的物理降温</h2>
<p>退热是以增加散热、减少产热为出发点。退热药是改变体温调节中枢的状况，减少产热。真正退热的效果需要通过物理降温，增加体内散热来实现。</p>
<p>人体散热途经有四条：</p>
<ol type="1">
<li>经皮肤蒸发水分散热是最主要途经，占 90%
以上。所以发热时不要给孩子穿得太多，应该少穿盖衣物。</li>
<li>经呼吸散热。</li>
<li>经排尿散热。多喝水多排尿。</li>
<li>经排便散热。</li>
</ol>
<p>物理降温有两大形式——冷降温和温降温。通过冰袋或冰贴，导致局部皮肤降温为冷降温，退热效果有限。变凉的皮肤血管收缩，反而会妨碍体内热量散出。温降温是在提高环境温度前提下，用温热毛巾敷身体、洗温水澡等致皮肤血管扩张，有利于体内热量散出。</p>
<h2 id="为什么-38.5-就应服用退热药物">为什么 38.5℃ 就应服用退热药物</h2>
<p>因为体温达到 38.5℃
时并不意味着是最高温度，很多时候体温还会继续上升。因药物吸收需要一定时间，而这段时间内体温还可能继续上升。体温降至
38℃ 以下即可，因为低热可以刺激免疫系统成熟。</p>
<h2 id="退热药这么用效果好">退热药，这么用效果好</h2>
<ol type="1">
<li>最好同时选择两种不同成分的药物，比如美林和泰诺林。</li>
<li>两种药物交替使用。这样可以减少每种药物 24
小时内使用的次数，还能减少药物的副作用。</li>
<li>服用一种药物出现呕吐时，应选择另外一种药物。</li>
<li>如果孩子不能接受口服药物，可选择直肠内使用的栓剂。</li>
<li>药物的剂量要适当，同时要让孩子摄入足够的液体。</li>
<li>引起发热的原因有很多，要咨询医生，选择适宜的对因治疗。</li>
</ol>
<h2 id="高热惊厥的预防和处理">高热惊厥的预防和处理</h2>
<p>高热惊厥是因体内温度急剧增高，造成大脑出现异常放电活动，出现突发的全身抽搐。</p>
<p>对于有高热惊厥病史的儿童，应该接受神经科医生的检查，并结合脑电图、脑
CT 等，判断“高热”惊厥，是单纯高热所致，还是高热为其诱因。</p>
<p>若孩子出现高热惊厥，家长首先尽可能在孩子牙齿间放入勺柄等，防止惊厥时造成舌部损伤出血；接着按压人中等穴位，尽快止住惊厥；惊厥结束后，立刻将孩子置于侧位，避免呕吐物呛入气管。稳定后送入医院，千万不要将正在惊厥的孩子，不做任何处理</p>
<h2 id="出现什么情况要带孩子去医院">出现什么情况要带孩子去医院</h2>
<p>不满 3 个月的婴儿体温超过 38℃ 时要立即去医院就诊。3
个月以上的孩子体温超过
40℃，还伴有拒绝喝水；即使喝水较多，仍表现出非常不舒服的样子；排尿很少，而且口腔干燥，哭时眼泪少；诉说头痛、耳朵痛或颈痛等；持续腹泻和/或呕吐；发热已超过
72 小时，出现如上症状时应尽快带孩子去医院就诊。</p>
<p>如果发热时孩子玩耍自如，吃喝正常，交流如前，皮肤红润，说明孩子的病情并不严重，可以在家观察孩子。</p>
<h1 id="传统应对误区">传统应对误区</h1>
<h2 id="发热后立刻带孩子看医生">发热后立刻带孩子看医生</h2>
<p>发热头 24
小时内血液中白细胞分类很难反映出引起发热的原因是病毒还是细菌感染。，过早检测并不能获得理想帮助。</p>
<h2 id="发热后多次带孩子上医院检查">发热后多次带孩子上医院检查</h2>
<ol type="1">
<li>医院是疾病聚集地，特易发生交叉感染；</li>
<li>发热是疾病症状，至少要 3 天；</li>
<li>一次看病得到医生的建议后，应在家遵医嘱；</li>
<li>体温超过 38.5℃ 时，要给孩子服用退热药物，并鼓励多饮水；</li>
<li>尽可能保持轻松环境，让孩子多休息；</li>
<li>发热不是免疫力低下的表现。</li>
</ol>
<p>去医院要注意的事项：</p>
<ol type="1">
<li>简短准确的病史；</li>
<li>看病后仔细倾听并记住医嘱；</li>
<li>下次看病时带着以往的就诊记录和服用过的药物；</li>
<li>孩子生病后的饮食状况；</li>
<li>对疾病预后的认识等。</li>
</ol>
<h2 id="穿厚衣服盖厚被子">穿厚衣服盖厚被子</h2>
<p>高热时给孩子穿过厚衣物，非常不利于退热，还会诱发高热惊厥。退热的根本是增加散热，只要将体内多余的热量散到体外即可退热。</p>
<p>捂热易使热量积于体内诱发热性惊厥，甚至会捂出大汗引发脱水。</p>
<h2 id="一着急就让医生给孩子输液">一着急就让医生给孩子输液</h2>
<p>静脉输液治疗常见呼吸道等感染不是明智抉择！</p>
<ol type="1">
<li><p>静脉穿刺对孩子产生恶劣刺激；</p></li>
<li><p>输液时会开放静脉，大量微粒会随输入液体一同进入人体，增加免疫系统负担；</p></li>
<li><p>药物中的添加剂、防腐剂等直接入血，而口服时受到胃肠道的过滤。如果能够口服药物解决，就不要输液。输液不是快速治病的方式。</p></li>
</ol>
<h2 id="给孩子服用抗生素退热">给孩子服用抗生素退热</h2>
<p>发热时，若白细胞总数和中性粒细胞均低，特别是低于正常值低限，此时淋巴细胞相对增高，说明是病毒感染，不用抗生素。若病毒感染并不严重，非单纯疱疹、EB
病毒等，也不用抗病毒药物。</p>
<p>抗生素只针对细菌和一些特别微生物，如支原体，并没有杀灭病毒的功效。抗生素不仅不会缩短病毒感染病程，反而会导致肠道菌群失调，增加病痛。</p>
<h1 id="问答">问答</h1>
<h2 id="宝宝发热可以喝葡萄糖水吗">宝宝发热可以喝葡萄糖水吗？</h2>
<p>发热时多补充水分非常重要，包括白水、饮料等，但不能是葡萄糖水，除非存在低血糖。葡萄糖属于单糖，在肠道内吸收和体内代谢没有限速酶（调节葡萄糖吸收利用速度的酶），进食后的快速利用会增加胰腺负担。若利用不了通过肾脏排泄还会带走更多水分。</p>
<h2
id="吃了退烧药钻进被窝捂汗科学吗">吃了退烧药钻进被窝捂汗科学吗？</h2>
<p>发热时给孩子服用退热剂后再捂上被子，很容易使孩子出汗，而且是大汉，出大汗后肯定退热。大汗时体内水分和电解质会通过皮肤大量丢失。对于成人，由于体内所储备水和电解质多，大汗后只是感到口渴；而婴幼儿体内储备不足，大汗后会导致脱水。脱水可造成大脑、心脏等严重损伤。其程度远远比发热严重得多。</p>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>发热</tag>
      </tags>
  </entry>
  <entry>
    <title>腹泻的家庭护理</title>
    <url>/2020/06/06/%E8%85%B9%E6%B3%BB%E7%9A%84%E5%AE%B6%E5%BA%AD%E6%8A%A4%E7%90%86/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="腹泻的观察">腹泻的观察</h1>
<p>宝宝出现以下情况时，判断可能是腹泻：</p>
<ul>
<li><p>宝宝大便一天超过 3 次</p></li>
<li><p>伴随大量水状的稀便</p></li>
<li><p>宝宝的排便规律和精神状态都和平时差别很大 <span id="more"></span>
不要把以下两种情况误认为是腹泻，只要宝宝状态良好：</p></li>
<li><p>母乳喂养宝宝每天排出 6 次以上稀便</p></li>
<li><p>大量进食后，短期大便次数增加</p></li>
</ul>
<h1 id="什么时候就医">什么时候就医</h1>
<ul>
<li>出现持续 24 ~ 48 小时的发热</li>
<li>血便</li>
<li>持续 12 ~ 24 小时的呕吐</li>
<li>呕吐物看起来呈绿色，带有血丝或呈咖啡渣状</li>
<li>腹部隆起肿胀</li>
<li>拒绝进食或喝水</li>
<li>严重的腹痛无法缓解，或者腹痛反复难以缓解</li>
<li>出疹，出血点或黄疸</li>
<li>宝宝行为改变，易受刺激或精神萎靡</li>
<li>中到重度的脱水的症状</li>
<li>持续 2 周一直大便多且稀软</li>
</ul>
<h1 id="如何护理">如何护理</h1>
<p>多鼓励宝宝正常吃饭：</p>
<ul>
<li>除非伴随着呕吐、腹痛的症状，否则还是要过鼓励宝宝正常吃饭</li>
</ul>
<p>不要吃高糖、高油脂的食物以及煮沸的牛奶</p>
<p>不要给 12 个月以下的宝宝喝果汁，容易造成腹泻</p>
<h1 id="治疗">治疗</h1>
<p>要少量多次的给宝宝补充适量的水和电解质：</p>
<ul>
<li>国内常用的补液盐 Ⅲ 号给宝宝补充电解质</li>
<li>每次腹泻后补充 50 ~ 100 ml 的电解液</li>
<li>6 个月以下的宝宝每次 50 ml</li>
<li>6 个月以上的宝宝每次 100 ml</li>
</ul>
<p>要考虑给长期腹泻或营养基础差的宝宝补充锌剂：</p>
<ul>
<li>补充锌剂 10 ~ 14 天</li>
<li>6 个月以下的宝宝每天不从 10 mg</li>
<li>6 个月以上的宝宝每天 20 mg</li>
</ul>
<p>不要随意给腹泻宝宝服用益生菌和抗生素</p>
<p>不要给宝宝喂中药或中成药</p>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>腹泻</tag>
      </tags>
  </entry>
  <entry>
    <title>意志力实验：5 分钟训练大脑冥想</title>
    <url>/2020/08/06/%E6%84%8F%E5%BF%97%E5%8A%9B%E5%AE%9E%E9%AA%8C%EF%BC%9A5-%E5%88%86%E9%92%9F%E8%AE%AD%E7%BB%83%E5%A4%A7%E8%84%91%E5%86%A5%E6%83%B3/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>专心呼吸是一种简单有效的冥想技巧，它不但能训练大脑，还能增强意志力。它能减轻你的压力，指导大脑处理内在的干扰（比如冲动、担忧、欲望）和外在的诱惑（比如声音、画面、气味）。新研究表明，定期的思维训练能帮人戒烟、减肥、戒毒、保持清醒。无论你“要做”和“不要”的是什么，这种5分钟冥想都有助于你增强意志力。</p>
<p>让我们开始吧。 <span id="more"></span></p>
<p><div class="note success"><p>1．原地不动，安静坐好</p>
</div></p>
坐在椅子上，双脚平放在地上，或盘腿坐在垫子上。背挺直，双手放在膝盖上。冥想时一定不能烦躁，这是自控力的基本保证。如果你想挠痒的话，可以调整一下胳膊的位置，腿交叉或伸直，看自己是否有冲动但能克制。简单的静坐对于意志力的冥想训练至关重要。你将学会，不再屈服于大脑和身体产生的冲动。<br />

<p>
</p>
<p><div class="note success"><p>2．注意你的呼吸</p>
</div></p>
<p>闭上眼睛。要是怕睡着，你可以盯着某处看，比如盯着一面白墙，但不要看家庭购物频道。注意你的呼吸。吸气时在脑海中默念“吸”，呼气时在脑海中默念“呼”。当你发现自己有点走神的时候，重新将注意力集中到呼吸上。这种反复的注意力训练，能让前额皮质开启高速模式，让大脑中处理压力和冲动的区域更加稳定。</p>
<p><div class="note success"><p>3．感受呼吸，弄清自己是怎么走神的</p>
</div></p>
<p>几分钟后，你就可以不再默念“呼”、“吸”了。试着专注于呼吸本身。你会注意到空气从鼻子和嘴巴进入和呼出的感觉，感觉到吸气时胸腹部的扩张和呼气时胸腹部的收缩。不再默念“呼”、“吸”后，你可能更容易走神。像之前一样，当你发现自己在想别的事情时，重新将注意力集中到呼吸上。如果你觉得很难重新集中注意力，就在心里多默念几遍“呼”和“吸”。这部分的训练能锻炼你的自我意识和自控能力。</p>
<p>刚开始的时候，你每天锻炼5分钟就行。习惯成自然之后，请试着每天做10
15分钟。如果你觉得有负担，那就减少到5分钟。每天做比较短的训练，也比把比较长的训练拖到明天好。这样，你每天都会有一段固定的时间冥想，比如早晨洗澡之前。如果你做不到，可以对时间进行适当的调整。</p>
<p><strong>摘自</strong> <a
href="https://book.douban.com/subject/10786473/">自控力</a></p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>自控力</tag>
        <tag>冥想</tag>
      </tags>
  </entry>
  <entry>
    <title>python 预测居民的年收入</title>
    <url>/2020/06/04/python-%E9%A2%84%E6%B5%8B%E5%B1%85%E6%B0%91%E7%9A%84%E5%B9%B4%E6%94%B6%E5%85%A5/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1994 年 Ronny Kohavi 和 Barry Becker
针对美国某区域的居民做了一次人口普查，经过筛选，一共得到 32 561
条样本数据。数据中主要包含了关于居民的基本信息以及对应的年收入，其中年收入就是本文中需要预测的变量，基于上面的数据集，需要预测居民的年收入是否会超过
5 万美元。 <a
href="https://github.com/SnakeLiu/Python-Data-Aanalysis-and-Miner">数据集下载</a>
<span id="more"></span></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据读取</span></span><br><span class="line">income = pd.read_excel(<span class="string">&#x27;D:\Download\income.xlsx&#x27;</span>)</span><br><span class="line"><span class="comment"># 查看数据集是否存在缺失值</span></span><br><span class="line"><span class="built_in">print</span>(income.apply(<span class="keyword">lambda</span> x: np.<span class="built_in">sum</span>(x.isnull())))</span><br><span class="line"><span class="comment"># 使用各自的众数来替换缺失值</span></span><br><span class="line">income.fillna(value=&#123;<span class="string">&#x27;workclass&#x27;</span>: income.workclass.mode()[<span class="number">0</span>],</span><br><span class="line">                     <span class="string">&#x27;occupation&#x27;</span>: income.occupation.mode()[<span class="number">0</span>],</span><br><span class="line">                     <span class="string">&#x27;native-country&#x27;</span>: income[<span class="string">&#x27;native-country&#x27;</span>].mode()[<span class="number">0</span>]&#125;,</span><br><span class="line">              inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 数值型变量的统计描述</span></span><br><span class="line"><span class="built_in">print</span>(income.describe())</span><br><span class="line"><span class="comment"># 离散型变量的统计描述</span></span><br><span class="line"><span class="built_in">print</span>(income.describe(include=[<span class="string">&#x27;object&#x27;</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置绘图风格</span></span><br><span class="line">plt.style.use(<span class="string">&#x27;ggplot&#x27;</span>)</span><br><span class="line"><span class="comment"># 设置多图形的组合</span></span><br><span class="line">fig, axes = plt.subplots(<span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line"><span class="comment"># 绘制不同收入水平下的年龄核密度图</span></span><br><span class="line">income.age[income.income == <span class="string">&#x27; &lt;=50K&#x27;</span>].plot(kind=<span class="string">&#x27;kde&#x27;</span>, label=<span class="string">&#x27;&lt;=50K&#x27;</span>, ax=axes[<span class="number">0</span>], legend=<span class="literal">True</span>, linestyle=<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">income.age[income.income == <span class="string">&#x27; &gt;50K&#x27;</span>].plot(kind=<span class="string">&#x27;kde&#x27;</span>, label=<span class="string">&#x27;&gt;50K&#x27;</span>, ax=axes[<span class="number">0</span>], legend=<span class="literal">True</span>, linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line"><span class="comment"># 绘制不同收入水平下的周工作小时数据核密度图</span></span><br><span class="line">income[<span class="string">&#x27;hours-per-week&#x27;</span>][income.income == <span class="string">&#x27; &lt;=50K&#x27;</span>].plot(kind=<span class="string">&#x27;kde&#x27;</span>, label=<span class="string">&#x27;&lt;=50K&#x27;</span>, ax=axes[<span class="number">1</span>], legend=<span class="literal">True</span>,</span><br><span class="line">                                                         linestyle=<span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">income[<span class="string">&#x27;hours-per-week&#x27;</span>][income.income == <span class="string">&#x27; &gt;50K&#x27;</span>].plot(kind=<span class="string">&#x27;kde&#x27;</span>, label=<span class="string">&#x27;&gt;50K&#x27;</span>, ax=axes[<span class="number">1</span>], legend=<span class="literal">True</span>,</span><br><span class="line">                                                        linestyle=<span class="string">&#x27;--&#x27;</span>)</span><br><span class="line"><span class="comment"># 显示图形</span></span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构造不同收入水平下各种族人数的数据</span></span><br><span class="line">race = pd.DataFrame(income.groupby(by=[<span class="string">&#x27;race&#x27;</span>, <span class="string">&#x27;income&#x27;</span>]).aggregate(np.size).loc[:, <span class="string">&#x27;age&#x27;</span>])</span><br><span class="line"><span class="comment"># 重设行索引</span></span><br><span class="line">race = race.reset_index()</span><br><span class="line"><span class="comment"># 变量重命名</span></span><br><span class="line">race.rename(columns=&#123;<span class="string">&#x27;age&#x27;</span>: <span class="string">&#x27;counts&#x27;</span>&#125;, inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 排序</span></span><br><span class="line">race.sort_values(by=[<span class="string">&#x27;race&#x27;</span>, <span class="string">&#x27;counts&#x27;</span>], ascending=<span class="literal">False</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构造不同收入水平下各家庭关系人数的数据</span></span><br><span class="line">relationship = pd.DataFrame(income.groupby(by=[<span class="string">&#x27;relationship&#x27;</span>, <span class="string">&#x27;income&#x27;</span>]).aggregate(np.size).loc[:, <span class="string">&#x27;age&#x27;</span>])</span><br><span class="line">relationship = relationship.reset_index()</span><br><span class="line">relationship.rename(columns=&#123;<span class="string">&#x27;age&#x27;</span>: <span class="string">&#x27;counts&#x27;</span>&#125;, inplace=<span class="literal">True</span>)</span><br><span class="line">relationship.sort_values(by=[<span class="string">&#x27;relationship&#x27;</span>, <span class="string">&#x27;counts&#x27;</span>], ascending=<span class="literal">False</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图框比例，并绘图</span></span><br><span class="line">plt.figure(figsize=(<span class="number">9</span>, <span class="number">5</span>))</span><br><span class="line">sns.barplot(x=<span class="string">&#x27;race&#x27;</span>, y=<span class="string">&#x27;counts&#x27;</span>, hue=<span class="string">&#x27;income&#x27;</span>, data=race)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">9</span>, <span class="number">5</span>))</span><br><span class="line">sns.barplot(x=<span class="string">&#x27;relationship&#x27;</span>, y=<span class="string">&#x27;counts&#x27;</span>, hue=<span class="string">&#x27;income&#x27;</span>, data=relationship)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 离散变量的重编码</span></span><br><span class="line"><span class="keyword">for</span> feature <span class="keyword">in</span> income.columns:</span><br><span class="line">    <span class="keyword">if</span> income[feature].dtype == <span class="string">&#x27;object&#x27;</span>:</span><br><span class="line">        income[feature] = pd.Categorical(income[feature]).codes</span><br><span class="line"><span class="built_in">print</span>(income.head())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除无意义变量</span></span><br><span class="line">income.drop([<span class="string">&#x27;education&#x27;</span>, <span class="string">&#x27;fnlwgt&#x27;</span>], axis=<span class="number">1</span>, inplace=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(income.head())</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据拆分</span></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(income.loc[:, <span class="string">&#x27;age&#x27;</span>:<span class="string">&#x27;native-country&#x27;</span>], income[<span class="string">&#x27;income&#x27;</span>],</span><br><span class="line">                                                    train_size=<span class="number">0.75</span>, test_size=<span class="number">0.25</span>, random_state=<span class="number">1234</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;训练数据集共有%d条观测&#x27;</span> % X_train.shape[<span class="number">0</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;训练数据集共有%d条观测&#x27;</span> % X_test.shape[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入 K 近邻模型的类</span></span><br><span class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> KNeighborsClassifier</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建 K 近邻模型</span></span><br><span class="line">kn = KNeighborsClassifier()</span><br><span class="line">kn.fit(X_train, y_train)</span><br><span class="line"><span class="built_in">print</span>(kn)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入 GBDT 模型的类</span></span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> GradientBoostingClassifier</span><br><span class="line"></span><br><span class="line"><span class="comment"># 构建 GBDT 模型</span></span><br><span class="line">gbdt = GradientBoostingClassifier()</span><br><span class="line">gbdt.fit(X_train, y_train)</span><br><span class="line"><span class="built_in">print</span>(gbdt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># K 近邻模型的网格搜索法</span></span><br><span class="line"><span class="comment"># 导入网格搜索法的函数</span></span><br><span class="line"><span class="keyword">from</span> sklearn.grid_search <span class="keyword">import</span> GridSearchCV</span><br><span class="line"></span><br><span class="line"><span class="comment"># 选择不同的参数</span></span><br><span class="line">k_options = <span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>, <span class="number">12</span>))</span><br><span class="line">parameters = &#123;<span class="string">&#x27;n_neighbors&#x27;</span>: k_options&#125;</span><br><span class="line"><span class="comment"># 搜索不同的 K 值</span></span><br><span class="line">grid_kn = GridSearchCV(estimator=KNeighborsClassifier(), param_grid=parameters, cv=<span class="number">10</span>, scoring=<span class="string">&#x27;accuracy&#x27;</span>)</span><br><span class="line">grid_kn.fit(X_train, y_train)</span><br><span class="line"><span class="comment"># 结果输出</span></span><br><span class="line"><span class="built_in">print</span>(grid_kn.grid_scores_, grid_kn.best_params_, grid_kn.best_score_)</span><br><span class="line"></span><br><span class="line"><span class="comment"># GBDT 模型的网格搜索法</span></span><br><span class="line"><span class="comment"># 选择不同的参数</span></span><br><span class="line">learning_rate_options = [<span class="number">0.01</span>, <span class="number">0.05</span>, <span class="number">0.1</span>]</span><br><span class="line">max_depth_options = [<span class="number">3</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>]</span><br><span class="line">n_estimators_options = [<span class="number">100</span>, <span class="number">300</span>, <span class="number">500</span>]</span><br><span class="line">parameters = &#123;<span class="string">&#x27;learning_rate&#x27;</span>: learning_rate_options, <span class="string">&#x27;max_depth&#x27;</span>: max_depth_options,</span><br><span class="line">              <span class="string">&#x27;n_estimators&#x27;</span>: n_estimators_options&#125;</span><br><span class="line">grid_gbdt = GridSearchCV(estimator=GradientBoostingClassifier(), param_grid=parameters, cv=<span class="number">10</span>, scoring=<span class="string">&#x27;accuracy&#x27;</span>)</span><br><span class="line">grid_gbdt.fit(X_train, y_train)</span><br><span class="line"><span class="comment"># 结果输出</span></span><br><span class="line"><span class="built_in">print</span>(grid_gbdt.grid_scores_, grid_gbdt.best_params_, grid_gbdt.best_score_)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认的 K 近邻模型</span></span><br><span class="line">kn_pred = kn.predict(X_test)</span><br><span class="line"><span class="built_in">print</span>(pd.crosstab(kn_pred, y_test))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模型得分</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;模型在训练集上的准确率%f&#x27;</span> % kn.score(X_train, y_train))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;模型在测试集上的准确率%f&#x27;</span> % kn.score(X_test, y_test))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 导入模型评估模块</span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> metrics</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算 ROC 曲线的 x 轴和 y 轴数据</span></span><br><span class="line">fpr, tpr, _ = metrics.roc_curve(y_test, kn.predict_proba(X_test)[:, <span class="number">1</span>])</span><br><span class="line"><span class="comment"># 绘制 ROC 曲线</span></span><br><span class="line">plt.plot(fpr, tpr, linestyle=<span class="string">&#x27;solid&#x27;</span>, color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"><span class="comment"># 添加阴影</span></span><br><span class="line">plt.stackplot(fpr, tpr, color=<span class="string">&#x27;steelblue&#x27;</span>)</span><br><span class="line"><span class="comment"># 绘制参考线</span></span><br><span class="line">plt.plot([<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">1</span>], linestyle=<span class="string">&#x27;dashed&#x27;</span>, color=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line"><span class="comment"># 往图中添加文本</span></span><br><span class="line">plt.text(<span class="number">0.6</span>, <span class="number">0.4</span>, <span class="string">&#x27;AUC=%.3f&#x27;</span> % metrics.auc(fpr, tpr), fontdict=<span class="built_in">dict</span>(size=<span class="number">18</span>))</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 预测测试集</span></span><br><span class="line">grid_kn_pred = grid_kn.predict(X_test)</span><br><span class="line"><span class="built_in">print</span>(pd.crosstab(grid_kn_pred, y_test))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模型得分</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;模型在训练集上的准确率%f&#x27;</span> % grid_kn.score(X_train, y_train))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;模型在测试集上的准确率%f&#x27;</span> % grid_kn.score(X_test, y_test))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制 ROC 曲线</span></span><br><span class="line">fpr, tpr, _ = metrics.roc_curve(y_test, grid_kn.predict_proba(X_test)[:, <span class="number">1</span>])</span><br><span class="line">plt.plot(fpr, tpr, linestyle=<span class="string">&#x27;solid&#x27;</span>, color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">plt.stackplot(fpr, tpr, color=<span class="string">&#x27;steelblue&#x27;</span>)</span><br><span class="line">plt.plot([<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">1</span>], linestyle=<span class="string">&#x27;dashed&#x27;</span>, color=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">plt.text(<span class="number">0.6</span>, <span class="number">0.4</span>, <span class="string">&#x27;AUC=%.3f&#x27;</span> % metrics.auc(fpr, tpr), fontdict=<span class="built_in">dict</span>(size=<span class="number">18</span>))</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认的 GBDT 模型</span></span><br><span class="line">gbdt_pred = gbdt.predict(X_test)</span><br><span class="line"><span class="built_in">print</span>(pd.crosstab(gbdt_pred, y_test))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模型得分</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;模型在训练集上的准确率%f&#x27;</span> % gbdt.score(X_train, y_train))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;模型在测试集上的准确率%f&#x27;</span> % gbdt.score(X_test, y_test))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制 ROC 曲线</span></span><br><span class="line">fpr, tpr, _ = metrics.roc_curve(y_test, gbdt.predict_proba(X_test)[:, <span class="number">1</span>])</span><br><span class="line">plt.plot(fpr, tpr, linestyle=<span class="string">&#x27;solid&#x27;</span>, color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">plt.stackplot(fpr, tpr, color=<span class="string">&#x27;steelblue&#x27;</span>)</span><br><span class="line">plt.plot([<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">1</span>], linestyle=<span class="string">&#x27;dashed&#x27;</span>, color=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">plt.text(<span class="number">0.6</span>, <span class="number">0.4</span>, <span class="string">&#x27;AUC=%.3f&#x27;</span> % metrics.auc(fpr, tpr), fontdict=<span class="built_in">dict</span>(size=<span class="number">18</span>))</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 网格搜索的 GBDT 模型</span></span><br><span class="line">grid_gbdt_pred = grid_gbdt.predict(X_test)</span><br><span class="line"><span class="built_in">print</span>(pd.crosstab(grid_gbdt_pred, y_test))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模型得分</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;模型在训练集上的准确率%f&#x27;</span> % grid_gbdt.score(X_train, y_train))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;模型在测试集上的准确率%f&#x27;</span> % grid_gbdt.score(X_test, y_test))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制 ROC 曲线</span></span><br><span class="line">fpr, tpr, _ = metrics.roc_curve(y_test, grid_gbdt.predict_proba(X_test)[:, <span class="number">1</span>])</span><br><span class="line">plt.plot(fpr, tpr, linestyle=<span class="string">&#x27;solid&#x27;</span>, color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line">plt.stackplot(fpr, tpr, color=<span class="string">&#x27;steelblue&#x27;</span>)</span><br><span class="line">plt.plot([<span class="number">0</span>, <span class="number">1</span>], [<span class="number">0</span>, <span class="number">1</span>], linestyle=<span class="string">&#x27;dashed&#x27;</span>, color=<span class="string">&#x27;black&#x27;</span>)</span><br><span class="line">plt.text(<span class="number">0.6</span>, <span class="number">0.4</span>, <span class="string">&#x27;AUC=%.3f&#x27;</span> % metrics.auc(fpr, tpr), fontdict=<span class="built_in">dict</span>(size=<span class="number">18</span>))</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>转载：</strong> <a
href="https://book.douban.com/subject/30430786/">从零开始学Python数据分析与挖掘</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>python</tag>
      </tags>
  </entry>
  <entry>
    <title>git 命令思维导图</title>
    <url>/2020/08/10/%E5%91%BD%E4%BB%A4%E6%80%9D%E7%BB%B4%E5%AF%BC/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><img src="/2020/08/10/%E5%91%BD%E4%BB%A4%E6%80%9D%E7%BB%B4%E5%AF%BC/1.jpg" class="">
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>命令</tag>
        <tag>思维导图</tag>
      </tags>
  </entry>
  <entry>
    <title>修改 git bash 提示符</title>
    <url>/2020/11/03/%E4%BF%AE%E6%94%B9-git-bash-%E6%8F%90%E7%A4%BA%E7%AC%A6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在 git 的安装目录 <code>D:\ProgramFiles\Git\etc\profile.d</code>
中修改 <code>git-prompt.sh</code> 文件。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>git bash</tag>
      </tags>
  </entry>
  <entry>
    <title>git 远程仓库回退</title>
    <url>/2020/12/09/git-%E8%BF%9C%E7%A8%8B%E4%BB%93%E5%BA%93%E5%9B%9E%E9%80%80/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ol type="1">
<li><code>git log</code> 查看版本号</li>
<li>使用 <code>git reset --hard 目标版本号</code> 命令将版本回退</li>
<li>使用 <code>git push -f</code> 提交更改</li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>回退</tag>
      </tags>
  </entry>
  <entry>
    <title>某列单元格末尾添加字符</title>
    <url>/2020/11/02/%E6%9F%90%E5%88%97%E5%8D%95%E5%85%83%E6%A0%BC%E6%9C%AB%E5%B0%BE%E6%B7%BB%E5%8A%A0%E5%AD%97%E7%AC%A6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>在需要添加字符的某列单元格右边新建一列 B2，输入公式
<code>=A2&amp;"替换为你需要添加的字符"</code>
。举个栗子，如果想给某列前后加单引号，可以这样写<code>="'"&amp;A2&amp;"'"</code>，把鼠标放在B2单元格的右下角，当变成十字形时，双击鼠标左键向下填充。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Excel</tag>
      </tags>
  </entry>
  <entry>
    <title>WebStrom 热部署 html 文件</title>
    <url>/2020/12/17/WebStrom-%E7%83%AD%E9%83%A8%E7%BD%B2-html-%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ol type="1">
<li>chrome 安装插件 JetBrains IDE Support。</li>
<li>WebStorm 打开 Settings &gt;&gt; Buid,Execution,Deployment &gt;&gt;
Debugger &gt;&gt; live Edit ,勾选 Use JetBrains IDE Support extension
for debugging and live Edit 选项。</li>
<li>done!</li>
</ol>
<p>附 WebStorm 版本：WebStorm 2020.2.3</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>WebStorm</tag>
        <tag>html 热部署</tag>
      </tags>
  </entry>
  <entry>
    <title>Element DateTimePicker 报错 dateStr.match is not a function</title>
    <url>/2021/01/06/Element-DateTimePicker-%E6%8A%A5%E9%94%99-dateStr-match-is-not-a-function/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>如题，百度检索了一圈没发现正确答案，用 google
搜了一下，找到一篇报同样错误的，戳 <a
href="https://blog.csdn.net/weixin_44640323/article/details/108670941">这里</a>，但是也不能解决我的问题。
后来仔细分析了一下故障，在点击选择日期的时候报错，点击选择时间是正常的。
回看代码，发现这个地方是这么写的(注意代码第三行的 :default-time)：
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;!--开始时间日期选择器--&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">el-date-picker</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">v-model</span>=<span class="string">&quot;startTimeDate&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">:default-time</span>=<span class="string">&quot;[&#x27;00:00:00&#x27;]&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">type</span>=<span class="string">&quot;datetime&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">class</span>=<span class="string">&quot;filter-item&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">:placeholder</span>=<span class="string">&quot;$t(&#x27;table.startTime&#x27;)&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">  <span class="attr">value-format</span>=<span class="string">&quot;yyyy-MM-dd HH:mm:ss&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">el-date-picker</span>&gt;</span></span></span><br></pre></td></tr></table></figure> 我想可能是由于 :default-time
只初始化了时间，而日期没有初始化，所以导致了此问题，删除 :default-time
这行配置，果然不再报错了。 我可真是一个小机灵鬼儿 (๑╹◡╹)ﾉ”“”</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Elemenmt</tag>
        <tag>DateTimePicker</tag>
      </tags>
  </entry>
  <entry>
    <title>SourceTree 推送没有分支选择</title>
    <url>/2020/12/25/SourceTree-%E6%8E%A8%E9%80%81%E6%B2%A1%E6%9C%89%E5%88%86%E6%94%AF%E9%80%89%E6%8B%A9/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>打开 SourceTree 工具 &gt;&gt; 选项 &gt;&gt; git &gt;&gt;
推送分支，选择 匹配。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>SourceTree</tag>
      </tags>
  </entry>
  <entry>
    <title>《亲爱的界面》读书笔记</title>
    <url>/2021/07/02/%E3%80%8A%E4%BA%B2%E7%88%B1%E7%9A%84%E7%95%8C%E9%9D%A2%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="焦点小组">焦点小组</h1>
<p>焦点小组是一种调研方法。做法是，将一种品牌、服务、新设计、设备或者类似的产品交给一组用户，并且记录他们的主观反应和意见。收集到的数据最终会用来预测大众对这款产品的反应。
<span id="more"></span> # 功能不是需求 需求是问题，功能则是解决问题的具体尝试。
着眼于需求而非功能。 开发产品而非解决方案。 寻找问题的根源。</p>
<h1 id="工作影子和情景访谈">工作影子和情景访谈</h1>
<p>工作影子的理念是去目标用户使用产品的场合拜访他们。目的是查明我们的产品如何帮助他们实现目标。有以下几个问题需要观察：
- 这个人在哪些任务上花费了大量时间？ - 他是否在重复做某件事情？ -
他是否再用权宜之计？ -
他是否被迫记住某项任务的操作步骤、技术事项或其他可由计算机来完成的的事情？
- 他做的事情是否让他感到厌烦或无聊？ -
他是否配合计算机使用了其他的工具，如在纸上列表或者计算器？</p>
<h1 id="以活动为中心的设计">以活动为中心的设计</h1>
<p>以人为本的设计理念是，深入了解使用你产品的潜在用户，为这些人量身设计产品。而已活动为中心的设计则是根据活动或者目标设计产品。</p>
<p>产品的的具体性质决定了你需要关注用户还是活动。这两种设计过程会产生不同的结果。尽早决定关注点很重要。</p>
<ul>
<li>有些产品可能更加适合将活动当做设计流程的重点。</li>
<li>进行用户调研，了解你需要支持什么活动，但不要为特定的人设计特殊的活动。</li>
<li>评估用户反馈的时候要有批判性。有时，将产品设计的对特定群体很友好，反而会对其他人不利。</li>
<li>记住，用户有能力使用你的产品，不用总是让你的产品去适应用户。</li>
</ul>
<h1 id="心智模型">心智模型</h1>
<p>七条可以帮助用户形成有效心智模型的设计原则： 1. 简易 2. 熟悉 3.
易于识别 4. 灵活 5. 反馈 6. 安全 7. 功能可见性</p>
<h1 id="保持开放的心态">保持开放的心态</h1>
<ul>
<li>不要站队</li>
<li>不要做无意义的二选一</li>
<li>不要过早地确定方案</li>
<li>打破常规</li>
<li>回顾先前的想法</li>
<li>你永远可以做得更好</li>
</ul>
<h1 id="一致性">一致性</h1>
<p>想要正确地运用一致性，比 “外观一致”
更重要的是<strong>确保行为不同的元素，外观也不同</strong>。</p>
<h1 id="不要打断用户">不要打断用户</h1>
<ul>
<li>不要打断用户。这样成效甚微，还会让用户不高兴，而且也很不礼貌。</li>
<li>为用户做决定，而不是询问他们。</li>
<li>如果你不能为用户做决定，那就一次性问完所有需要的信息，而不是每遇到一个新问题就去打断用户。</li>
<li>如果必须通知用户某事，至少尽量避免干扰用户，这样他们可以在方便时进行处理。</li>
</ul>
<h1 id="向电子游戏学习">向电子游戏学习</h1>
<p>外部奖励取代内在动机产生的影响，成为过渡辩护效应。</p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>界面</tag>
        <tag>用户体验</tag>
      </tags>
  </entry>
  <entry>
    <title>《从零开始学 UI 设计》读书笔记</title>
    <url>/2021/07/13/%E3%80%8A%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%AD%A6-UI-%E8%AE%BE%E8%AE%A1%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="设计师必须看完的信息源">设计师必须看完的信息源</h1>
<ol type="1">
<li>站酷网</li>
<li>Dribbble</li>
<li>Behance</li>
<li>花瓣网</li>
<li>Unsplash</li>
<li>The FWA</li>
</ol>
<span id="more"></span>
<h1 id="设计时应该知道的数据">设计时应该知道的数据</h1>
<p>PV(Page View)
，即页面浏览量。用户每一次对网站中的每个网页访问均被记录 1
次，用户对同一页面的多次访问，访问量累计。 CTR(Click-through Rate)
，即点击率，指的是点击次数占展示次数的百分比。 CVR(Click Value Rate)
，即转化率，是衡量 CPA 广告效果的指标。 UV(Unique Visitor)
，即独立访客数。通常情况下是依靠浏览器的 cookies
来确定访客是独立访客（之前是否访问过该页面），同一个访客多次访问也只算 1
个访客。 UIP(Unique IP) ，即独立 IP ，和 UV 类似。正常情况下，同一个 IP
可能会有很多个 UV，但是同一个 UV 只能有一个 IP。 VV(Visit View)
，即访问次数，是指统计时段内所有访客的 PV 总和。 CPA
广告是指按广告投放实际情况计价的广告，即按回应的有效问卷或订单来计费，而不限制广告的投放量。</p>
<h1 id="ue-设计师成长须知">UE 设计师成长须知</h1>
<p>UE 设计师在成长的道路上需要经常浏览的4个网站。 1. 优秀作品：优阁网 2.
优秀设计文章：简书文章 3. 灵感网站：muzli 4.
理论网站：人人都是产品经理</p>
<h1 id="配色网站推荐">配色网站推荐</h1>
<ol type="1">
<li>coolhue：很棒的色卡配色网站</li>
<li>NIPPONCOLORS：日本传统色系配色网站</li>
<li>coolors：单击生成颜色</li>
<li>colorfavsr：抓取图像配色，带收藏配色功能</li>
<li>uigradients：在线生成高级的渐变色</li>
<li>MD配色：Material Design 在线配色器</li>
<li>Web Grandients：180 个背景渐变色集合</li>
<li>Color Koya：扁平化配色取色器</li>
</ol>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>UI</tag>
      </tags>
  </entry>
  <entry>
    <title>《人人都是产品经理——思维版》读书笔记</title>
    <url>/2021/07/15/%E3%80%8A%E4%BA%BA%E4%BA%BA%E9%83%BD%E6%98%AF%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86%E2%80%94%E2%80%94%E6%80%9D%E7%BB%B4%E7%89%88%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>只做一次的事情找可行解，反复做的事情求最优解。</p>
<p>先搞清楚问题，后选择方法。</p>
<p>刚性需求要满足以下 3 个条件：真实、刚需和高频。 <span id="more"></span></p>
<p>MECE 原则，其全称是 Mutually Exclusive Collectivly
Exhaustive,中文意思是 “相互独立，完全穷尽”
。也就是对于一个重大的议题，分类要能够做到不重叠、不遗漏，而且能够借此有效把握问题的核心，并解决问题。出自金字塔原理。</p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>产品经理</tag>
      </tags>
  </entry>
  <entry>
    <title>element-ui el-col 奇数份</title>
    <url>/2021/11/08/element-ui-el-col-%E5%A5%87%E6%95%B0%E4%BB%BD/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>Element Layout 布局设置奇数份分栏：</p>
<figure class="highlight javascript"><figcaption><span>1.8</span></figcaption><table><tr><td class="code"><pre><span class="line">&lt;el-col :xs=<span class="string">&quot;12&quot;</span> :sm=<span class="string">&quot;12&quot;</span> :lg=<span class="string">&quot;lgSpan&quot;</span> <span class="keyword">class</span>=<span class="string">&quot;card-panel-col&quot;</span> v-<span class="keyword">for</span>=<span class="string">&quot;item in panelData&quot;</span>&gt;</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;card-panel&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;num&quot;</span>&gt;</span>&#123;&#123;item.num&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;name&quot;</span>&gt;</span>&#123;&#123;item.name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/el-col&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="attr">props</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">lgSpan</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">type</span>: <span class="title class_">Object</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">default</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> &#123; <span class="attr">span</span>: <span class="string">&#x27;4-8&#x27;</span> &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span> <span class="attr">scoped</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    <span class="selector-class">.el-col-lg-4-8</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">        <span class="attribute">width</span>: <span class="number">20%</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p><a
href="https://blog.csdn.net/qq_36262395/article/details/114674476">参考文档</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Element</tag>
        <tag>Layout 布局</tag>
      </tags>
  </entry>
  <entry>
    <title>《人人都是产品经理——案例版》读书笔记</title>
    <url>/2021/08/05/%E3%80%8A%E4%BA%BA%E4%BA%BA%E9%83%BD%E6%98%AF%E4%BA%A7%E5%93%81%E7%BB%8F%E7%90%86%E2%80%94%E2%80%94%E6%A1%88%E4%BE%8B%E7%89%88%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="ppt-的-pk-会">PPT 的 PK 会</h1>
<p>每个月花一天时间，产品团队的每个人做一份自己产品的规划出来讲，规划周期可以限定在三个月。团队的每个人轮流上去，下面的听众是团队的人。每个人讲完之后，听众轮流说一点
”好“ 与一点 ”可以更好“ ，不许重复。当然，可以说规划的内容本身，也可以说
PPT
制作、演讲技巧等。主讲人自己记在白板上。全讲完了，主讲人统一回复讨论，事后回去优化规划的
PPT。</p>
<p>假设是一个六个人大小的团队，那么每份规划就可以得到五点好与五点可以更好，全组就有
30 点好与 30 点可以更好。相信 3~6 个月下来，大家的规划能力、PPT
制作能力都会有显著的提升。 <span id="more"></span>
做的有感觉以后，点评还可以细分为各个方面，比如从规划的
Why（为什么）、What（是什么）、How（怎么做）几个层面分别给出。我们的经验是，一般半天时间（大约
4 个小时）可以讲三个人的样子。这事儿也是
“磨刀不误砍柴工”，半真半假地作为月会的内容也行。有时候团队会比较温和，刺激大家的一个办法就是：选出
”最优评论员“ 和
”最差评论员“。最优的给点奖励，最差的给点惩罚就好，比如让他请点奶茶、水果什么的。——读后感，这也适合小团队工作总结汇报。</p>
<h1 id="培养产品感觉得小游戏">培养产品感觉得小游戏</h1>
<p>这有游戏的玩法很简单，就是随便看到一个产品，然后开始造句，随时随地，单人、多人都可以玩。</p>
<blockquote>
<p>它解决了什么用户的什么需求？</p>
</blockquote>
<p>练习的时候，切忌求多，说一点即可，找到你感觉最贴切的那一种用户，和他最迫切的那一个需求。</p>
<blockquote>
<p>产品需求的场合是什么？</p>
</blockquote>
<p>需求的应用场景，时间、地点等，要有 ”故事感“
，尽量找一个能让人会心一笑的。</p>
<blockquote>
<p>产品的主要功能有哪些？</p>
</blockquote>
<p>需求和功能的区别在于，前者是用户角度说的，是一种希望，利益点，这时候还没有产品；后者是从产品属性上说的。</p>
<blockquote>
<p>技术基础是什么？</p>
</blockquote>
<p>主要考察产品功能的实现成本，从而评估性价比，是否值得做。</p>
<blockquote>
<p>没有这个产品的时候，用户是怎么解决问题的？</p>
</blockquote>
<p>问自己一个极端的问题，不做这个产品会不会死人？我们尽量不要做有很多替代方案的产品。任何一个很值得解决的问题通常已经有解决方案了，那么，这个产品的解决方案好在哪里？</p>
<blockquote>
<p>竞争对手是什么？</p>
</blockquote>
<p>这个问题不要局限，尽量展开了想，它比上一个问题更广，可以考虑潜在的竞争对手。包括有同样解决方案的、用不同方案解决同一个问题的，都是对手。</p>
<blockquote>
<p>顺应了什么趋势？</p>
</blockquote>
<p>好的产品是顺势而为的，满足未来的某种根本需求是更进一步的基础，不妨尝试预测未来。</p>
<p>还有很多扩展问题，比如： 1. 产品的成本构成是什么？ 2.
产品的盈利模式是什么？ 3.
估计一下市场容量（有需求的人数、频率……），以及变化趋势？ 4.
怎么定价？通过什么渠道？设计一个促销方案？ 5.
现在你来做改进，你会加什么功能？优先级是？为什么？需要什么资源（人、财、物，时间……）？之后会发生什么改变？</p>
<h1 id="读后感">读后感</h1>
<p>本书讲述了淘宝一系列产品的演变，从最开始的原始简陋如何一步步走到今天的功能丰富，可以看出，淘宝一开始也是遇到了很多问题，在不断地解决问题、摸爬滚打中，一步步成长，才取得了今天的成就。淘宝的产品经理们也是在不断解决用户的痛点中逐渐成长。通过此书了解了部分淘宝内部的设计方法，对于我们这种终身难以进大厂的程序员来说，还是挺有用的，值得一读！</p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>产品经理</tag>
      </tags>
  </entry>
  <entry>
    <title>Access-Control-Expose-Headers</title>
    <url>/2022/02/10/Access-Control-Expose-Headers/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1
id="access-control-expose-headers">Access-Control-Expose-Headers</h1>
<p>响应首部 <strong><code>Access-Control-Expose-Headers</code></strong>
列出了哪些首部可以作为响应的一部分暴露给外部。</p>
<p>默认情况下，只有七种 <a
href="https://developer.mozilla.org/zh-CN/docs/Glossary/Simple_response_header">simple
response headers</a> （简单响应首部）可以暴露给外部：</p>
<ul>
<li><a
href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control"><code>Cache-Control</code></a></li>
<li><a
href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Language"><code>Content-Language</code></a></li>
<li><a
href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Length"><code>Content-Length</code></a></li>
<li><a
href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Content-Type"><code>Content-Type</code></a></li>
<li><a
href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Expires"><code>Expires</code></a></li>
<li><a
href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Last-Modified"><code>Last-Modified</code></a></li>
<li><a
href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Pragma"><code>Pragma</code></a></li>
</ul>
<p>如果想要让客户端可以访问到其他的首部信息，可以将它们在
<code>Access-Control-Expose-Headers</code> 里面列出来。</p>
<span id="more"></span>
<h2 id="语法"><a
href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#语法">语法</a></h2>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Access-Control-Expose-Headers: &lt;header-name&gt;, &lt;header-name&gt;, ...</span><br></pre></td></tr></table></figure>
<h2 id="指令"><a
href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#指令">指令</a></h2>
<ul>
<li><p><header-name></p>
<p>包含0个或多个除 <a
href="https://developer.mozilla.org/zh-CN/docs/Glossary/Simple_response_header">simple
response headers</a> （简单响应首部）之外的<a
href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers">首部名称</a>列表，可以暴露给外部，供页面资源使用。</p></li>
</ul>
<h2 id="示例"><a
href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#示例">示例</a></h2>
<p>想要暴露一个非简单响应首部，可以这样指定：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Access-Control-Expose-Headers: Content-Length</span><br></pre></td></tr></table></figure>
<p>想要额外暴露自定义的首部，例如
<code>X-Kuma-Revision</code>，可以指定多个，用逗号隔开：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Access-Control-Expose-Headers: Content-Length, X-Kuma-Revision</span><br></pre></td></tr></table></figure>
<h2 id="注意">注意</h2>
<p>当前端实现文件下载功能时，通过 fetch 函数无法获取请求头中的
<code>Content-Disposition</code> 参数时，需要看下后端是否通过
<code>Access-Control-Expose-Headers</code> 暴露了这个参数。</p>
<p><a
href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Access-Control-Expose-Headers">Access-Control-Expose-Headers</a>
<a
href="https://blog.csdn.net/PGguoqi/article/details/106824957">js无法获取响应header的Content-Disposition字段（2020）</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>Access-Control-Expose-Headers</tag>
        <tag>文件下载</tag>
      </tags>
  </entry>
  <entry>
    <title>前端性能优化</title>
    <url>/2022/01/11/%E5%89%8D%E7%AB%AF%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="性能优化的指标和工具">性能优化的指标和工具</h1>
<ol type="1">
<li>https://www.webpagetest.org/ 可以本地配置和安装</li>
<li>lighthouse 用法：lighthouse + 网址</li>
<li>Chorme DevTools</li>
<li>常用的性能测量 APIS</li>
</ol>
<h1 id="渲染优化">渲染优化</h1>
<ol type="1">
<li>关键路径：JavaScript &gt; Style &gt; Layout &gt; Paint &gt;
Composite</li>
<li>影响回流的操作：</li>
</ol>
<ul>
<li>添加 / 删除元素</li>
<li>操作 styles</li>
<li>display：none</li>
<li>offsetLeft， scrollTop，clientWidth</li>
<li>移动元素位置</li>
<li>修改浏览器大小，字体大小</li>
</ul>
<ol start="3" type="1">
<li>复合线程（compositor thread）与图层（layers）</li>
</ol>
<span id="more"></span>
<h1 id="资源优化">资源优化</h1>
<ol type="1">
<li>图片格式优化：图片压缩工具 imagemin</li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>性能优化</tag>
      </tags>
  </entry>
  <entry>
    <title>package.json dependencies 指定项目依赖</title>
    <url>/2022/03/04/package-json-dependencies-%E6%8C%87%E5%AE%9A%E9%A1%B9%E7%9B%AE%E4%BE%9D%E8%B5%96/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h2 id="dependencies">dependencies</h2>
<p>指定项目依赖，值为包名加上版本号。</p>
<p>版本号可以指定一个范围，有以下语法。</p>
<ul>
<li><code>version</code>：精确的版本，例如 <code>1.0.0</code></li>
<li><code>&gt;version</code>：大于 <code>version</code></li>
<li><code>&gt;=version</code>：大于等于</li>
<li><code>&lt;version</code>: 小于</li>
<li><code>&lt;=version</code>: 小于等于</li>
<li><code>~version</code>: 允许补丁级别的变化，例如 <code>~1.2.3</code>
表示 <code>&gt;=1.2.3 &lt;1.3.0</code></li>
<li><code>^version</code>：允许不更改最左侧非0版本号数字的变化，例如
<code>^1.2.3</code> 表示 <code>&gt;=1.2.3 &lt;2.0.0</code></li>
<li><code>1.2.x</code></li>
<li><code>http://...</code></li>
<li><code>*</code></li>
<li><code>version1 - version2</code> 等同于
<code>&gt;=version1 &lt;=version2</code></li>
</ul>
<span id="more"></span>
<p><a
href="https://docs.npmjs.com/cli/v6/configuring-npm/package-json">参考文档</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>package.json</tag>
        <tag>dependencies</tag>
        <tag>项目依赖</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 选择器</title>
    <url>/2022/02/22/CSS-%E9%80%89%E6%8B%A9%E5%99%A8/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="常用-css-选择器名称和功能">常用 CSS 选择器名称和功能</h1>
<table>
<thead>
<tr>
<th>选择器名称</th>
<th>实例</th>
<th style="text-align: left;">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>#id</td>
<td>#div</td>
<td style="text-align: left;">获取 id=“#div” 的元素</td>
</tr>
<tr>
<td>.class</td>
<td>.red</td>
<td style="text-align: left;">获取 class=“red” 的全部元素</td>
</tr>
<tr>
<td>element</td>
<td>div</td>
<td style="text-align: left;">获取所有 </td>
</tr>
<tr>
<td>element element</td>
<td>div p</td>
<td style="text-align: left;">获取 </td>
</tr>
<tr>
<td>element,element</td>
<td>div,p</td>
<td style="text-align: left;">获取全部 </td>
</tr>
<tr>
<td>element&gt;element</td>
<td>div&gt;p</td>
<td style="text-align: left;">获取父元素为 </td>
</tr>
<tr>
<td>element+element</td>
<td>div+p</td>
<td style="text-align: left;">获取紧接在 </td>
</tr>
<tr>
<td>*</td>
<td>*</td>
<td style="text-align: left;">获取所有元素</td>
</tr>
</tbody>
</table>
<span id="more"></span>
<h1 id="属性选择器名称和功能">属性选择器名称和功能</h1>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 17%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr>
<th>选择器名称</th>
<th>实例</th>
<th style="text-align: left;">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>[attribute]</td>
<td>[title]</td>
<td style="text-align: left;">选择带有 title 属性的全部元素</td>
</tr>
<tr>
<td>[attribute=value]</td>
<td>[title=abc]</td>
<td style="text-align: left;">选择 title 属性值为 abc 的全部元素</td>
</tr>
<tr>
<td>[attribute~=value]</td>
<td>[title~=abc]</td>
<td style="text-align: left;">选择 title 属性包含单词 abc
的全部元素</td>
</tr>
<tr>
<td>[attribute|=value]</td>
<td>[title|=abc]</td>
<td style="text-align: left;">选择 title 属性等于 abc 或以 abc-
开头的所有元素</td>
</tr>
<tr>
<td>[attribute^=value]</td>
<td>[title^=“abc”]</td>
<td style="text-align: left;">选择 title 属性值以 abc
开头的全部元素</td>
</tr>
<tr>
<td>[attribute=<span
class="math inline"><em>v</em><em>a</em><em>l</em><em>u</em><em>e</em>]|[<em>t</em><em>i</em><em>t</em><em>l</em><em>e</em></span>=“abc”]</td>
<td>选择 title 属性值以 abc 结尾的全部元素</td>
<td style="text-align: left;"></td>
</tr>
<tr>
<td>[attribute*=value]</td>
<td>[title*=”abc“]</td>
<td style="text-align: left;">选择 title 属性值中包含 abc
的全部元素</td>
</tr>
</tbody>
</table>
<h1 id="伪元素选择器名称和功能">伪元素选择器名称和功能</h1>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 17%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr>
<th>选择器名称</th>
<th>实例</th>
<th style="text-align: left;">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>:first-letter</td>
<td>p:first-letter</td>
<td style="text-align: left;">获取每个 p 元素的首个字母</td>
</tr>
<tr>
<td>:first-line</td>
<td>p:first-line</td>
<td style="text-align: left;">获取每个 p 元素的第一行</td>
</tr>
<tr>
<td>:before</td>
<td>p:before</td>
<td style="text-align: left;">在每个 p 元素的内容之前插入内容</td>
</tr>
<tr>
<td>:after</td>
<td>p:after</td>
<td style="text-align: left;">在每个 p 元素的内容之后插入内容</td>
</tr>
</tbody>
</table>
<h1 id="普通伪类选择器名称和功能">普通伪类选择器名称和功能</h1>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 17%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr>
<th>选择器名称</th>
<th>实例</th>
<th style="text-align: left;">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>:root</td>
<td>:root</td>
<td style="text-align: left;">获取文档的根元素</td>
</tr>
<tr>
<td>:empty</td>
<td>p:empty</td>
<td style="text-align: left;">获取没有子类元素的每个 p
元素，包括文本节点</td>
</tr>
<tr>
<td>:target</td>
<td>#nav.target</td>
<td style="text-align: left;">获取当前活动的 #nav 元素</td>
</tr>
<tr>
<td>:enabled</td>
<td>input:enabled</td>
<td style="text-align: left;">获取每个可用的 input 元素</td>
</tr>
<tr>
<td>:disabled</td>
<td>input:disabled</td>
<td style="text-align: left;">获取每个禁用的 input 元素</td>
</tr>
<tr>
<td>:checked</td>
<td>input:checked</td>
<td style="text-align: left;">获取每个被选中的 input 元素</td>
</tr>
<tr>
<td>:not(selector)</td>
<td>:not(p)</td>
<td style="text-align: left;">获取非 p 元素的每个元素</td>
</tr>
</tbody>
</table>
<h1 id="结构化伪类选择器名称和功能">结构化伪类选择器名称和功能</h1>
<table>
<colgroup>
<col style="width: 26%" />
<col style="width: 17%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr>
<th>选择器名称</th>
<th>实例</th>
<th style="text-align: left;">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td>:first-child</td>
<td>li:first-child</td>
<td style="text-align: left;">选择每个子类 li 元素的第一个元素</td>
</tr>
<tr>
<td>:last-child</td>
<td>li:last-child</td>
<td style="text-align: left;">选择每个子类 li 元素的最后一个元素</td>
</tr>
<tr>
<td>:first-of-type</td>
<td>li:first-of-type</td>
<td style="text-align: left;">选择每个子类 li 元素的第一个元素</td>
</tr>
<tr>
<td>:last-of-type</td>
<td>li:last-of-type</td>
<td style="text-align: left;">选择每个子类 li 元素的最后一个元素</td>
</tr>
<tr>
<td>:only-of-type</td>
<td>li:only-of-type</td>
<td style="text-align: left;">选择每个 li 元素是其父级的唯一元素</td>
</tr>
<tr>
<td>:nth-child(n)</td>
<td>li:nth-child(2)</td>
<td style="text-align: left;">选择每个子类 li 元素的第二个元素</td>
</tr>
</tbody>
</table>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>解构赋值</title>
    <url>/2022/03/08/%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>解构赋值，ES6 新增语法，以下是解构赋值的一些示例代码：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [x,y] = [<span class="number">1</span>,<span class="number">2</span>]</span><br><span class="line">[x,y] = [x+<span class="number">1</span>,y+<span class="number">1</span>]</span><br><span class="line">[x,y] = [y,x]</span><br></pre></td></tr></table></figure>
<p>解构赋值让使用返回数组的函数变得异常便捷：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">toPolar</span>(<span class="params">x, y</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> [<span class="title class_">Math</span>.<span class="title function_">sqrt</span>(x*x+y*y), <span class="title class_">Math</span>.<span class="title function_">atan2</span>(y,x)]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toCartesian</span>(<span class="params">r, theta</span>)&#123;</span><br><span class="line">    <span class="keyword">return</span> [r*<span class="title class_">Math</span>,<span class="title function_">cos</span>(theta), r*<span class="title class_">Math</span>.<span class="title function_">sin</span>(theta)]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> [r,theta] = <span class="title function_">toPolar</span>(<span class="number">1.0</span>, <span class="number">1.0</span>)</span><br><span class="line"><span class="keyword">let</span> [x,y] = <span class="title function_">toCartesian</span>(r,theta)</span><br></pre></td></tr></table></figure>
<p>遍历一个对象所有属性的名/值对：</p>
<span id="more"></span>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let o = &#123;x:1, y:2&#125;</span><br><span class="line">for(const [name,value] of Object.entries(o))&#123;</span><br><span class="line">	console.log(name,value)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解构赋值左侧变量的个数不一定与右侧数组中元素的个数相同。左侧多余的变量会被设置为
undefined，
而右侧多余的值会被忽略。左侧的变量列表可以包含额外的逗号，以跳过右侧的某些值：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [x,y] = [<span class="number">1</span>]</span><br><span class="line">[x,y] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">[,x,,y] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br></pre></td></tr></table></figure>
<p>在解构赋值时，如果你想把所有未使用的或剩余的值收集到一个变量中，可以在左侧最后一个变量名前面加上3个点（…）：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> [x, ...y] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>迭代对象属性</title>
    <url>/2022/03/11/%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>如果想迭代对象的属性，可以使用 for/in 循环，或者基于 Object.keys()
方法的结果使用 for/of :</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123;<span class="attr">x</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">2</span>, <span class="attr">z</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">let</span> keys = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> k <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">key</span>(o))&#123;</span><br><span class="line">    keys += k</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以像下面这样迭代每个键对应的值：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123;<span class="attr">x</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">2</span>, <span class="attr">z</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">let</span> sum = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> v <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">values</span>(o))&#123;</span><br><span class="line">    sum += v</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>如果你既想要对象属性的键，也想要属性的值，可以基于 Object.entries()
和解构赋值来使用 for/of :</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> o = &#123;<span class="attr">x</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">2</span>, <span class="attr">z</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">let</span> paris = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [k, v] <span class="keyword">of</span> <span class="title class_">Object</span>.<span class="title function_">entries</span>(o))&#123;</span><br><span class="line">    paris += k + v</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Object.entries()
返回一个数组的数组，其中每个内部数组表示对象的一个属性的键/值对。</p>
<p>字符串在 ES6 中是可以逐个字符迭代的：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> frequency = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> letter <span class="keyword">of</span> <span class="string">&#x27;mississippi&#x27;</span>)&#123;</span><br><span class="line">    <span class="keyword">if</span>(frequency[letter])&#123;</span><br><span class="line">        frequency[letter]++</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        frequency[letter] = <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>for/in</p>
<p>把一个对象的所有属性复制到数组中：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> o=&#123;<span class="attr">x</span>:<span class="number">1</span>, <span class="attr">y</span>:<span class="number">2</span>, <span class="attr">z</span>:<span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">let</span> a=[], i=<span class="number">0</span></span><br><span class="line"><span class="keyword">for</span>(a[i++] <span class="keyword">in</span> o) ;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>迭代</tag>
        <tag>对象属性</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 实现水平垂直居中</title>
    <url>/2022/04/02/CSS-%E5%AE%9E%E7%8E%B0%E6%B0%B4%E5%B9%B3%E5%9E%82%E7%9B%B4%E5%B1%85%E4%B8%AD/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.flex布局，无需考虑父子宽高 <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 父元素设置 */</span></span><br><span class="line"><span class="attribute">display</span>: flex;</span><br><span class="line"><span class="attribute">justify-content</span>: center;</span><br><span class="line"><span class="attribute">align-items</span>: center;</span><br></pre></td></tr></table></figure></p>
<p>2.相对定位+transform，无需考虑父子宽高 <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 子元素设置 */</span></span><br><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">translate</span>(-<span class="number">50%</span>, -<span class="number">50%</span>);</span><br></pre></td></tr></table></figure></p>
<p>3.display：table-cell <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.parent</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">  <span class="attribute">display</span>: table-cell;</span><br><span class="line">  <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.child</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: skyblue;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <span id="more"></span> 4.相对定位 +
具体magin <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line"><span class="attribute">margin-top</span>: 手动计算;</span><br><span class="line"><span class="attribute">margin-left</span>: 手动计算;</span><br></pre></td></tr></table></figure></p>
<p>5.magin auto，父元素宽高可以不确定，子元素没有具体宽高会铺满父元素
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">position</span>: absolute;</span><br><span class="line"><span class="attribute">margin</span>: auto;</span><br><span class="line"><span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">bottom</span>: <span class="number">0</span>;</span><br></pre></td></tr></table></figure></p>
<p>6.手动计算具体magin，父子元素宽高需要确定 <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">margin-top</span>: 手动计算;</span><br><span class="line"><span class="attribute">margin-left</span>: 手动计算;</span><br></pre></td></tr></table></figure></p>
<p><a
href="https://github.com/BetaSu/fe-hunter/issues/26#issuecomment-1080095904">参考文档</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>CSS</tag>
        <tag>水平垂直居中</tag>
      </tags>
  </entry>
  <entry>
    <title>几种排序算法的原理</title>
    <url>/2022/05/13/%E5%87%A0%E7%A7%8D%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="选择排序">选择排序</h1>
<p>选择排序是一种简单直观的排序算法，它的基本原理如下：对于给定的一组记录，经过第一轮比较后得到最小的记录，然后将该记录与第一个位置的记录进行交换；接着对不包括第一个记录以外的其他记录进行第二轮比较，得到最小的记录并与第二个记录进行位置交换；重复该过程，直到进行比较的记录只有一个时为止。</p>
<h1 id="快速排序">快速排序</h1>
<p>快速排序是一种非常高效的排序算法，它采用“分而治之”的思想，把大的拆分为小的，小的再拆分为更小的。其原理为：对于一组给定的记录，通过一趟排序后，将原序列分为两部分，其中前部分的所有记录均比后部分的所有记录小，然后再依次对前后两部分的记录进行快速排序，递归该过程，直到序列中的所有记录均有序为止。</p>
<span id="more"></span>
<h1 id="希尔排序">希尔排序</h1>
<p>希尔排序也称为“缩小增量排序”，它的基本原理如下：首先，将待排序的元素分成多个子序列，使得每个子序列的元素个数相对较少，对各个子序列分别进行直接插入排序，待整个待排序序列“基本有序后”，再对所有元素进行一次直接插入排序。希尔排序也是形成部分有序的序列。</p>
<h1 id="归并排序">归并排序</h1>
<p>希尔排序也称为“缩小增量排序”，它的基本原理如下：首先，将待排序的元素分成多个子序列，使得每个子序列的元素个数相对较少，对各个子序列分别进行直接插入排序，待整个待排序序列“基本有序后”，再对所有元素进行一次直接插入排序。希尔排序也是形成部分有序的序列。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>排序算法</tag>
        <tag>选择排序</tag>
        <tag>快速排序</tag>
        <tag>希尔排序</tag>
        <tag>归并排序</tag>
      </tags>
  </entry>
  <entry>
    <title>属性访问错误</title>
    <url>/2022/03/14/%E5%B1%9E%E6%80%A7%E8%AE%BF%E9%97%AE%E9%94%99%E8%AF%AF/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>查询不存在对象的属性会报错，如果 . 的左边是 null 或
undefined，则属性访问表达式会失败。因此在写类似
`<code>book.author.sername</code> 这样的表达式时，要确保 book 和
book.author 是有定义的。以下是两种防止这类问题的写法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">surname = book &amp;&amp; book.<span class="property">author</span> &amp;&amp; book.<span class="property">author</span>.<span class="property">surname</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> surname = book?.<span class="property">author</span>?.<span class="property">surname</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>属性访问</tag>
      </tags>
  </entry>
  <entry>
    <title>设计模式</title>
    <url>/2022/04/12/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>采用模式时必须要考虑到这么做是否有意义，绝对不能为了使用模式而使用模式。</p>
<h1 id="策略模式">策略模式</h1>
<p>策略模式定义了算法族，分别封装起来，让它们之间可以互相替换，此模式让算法的变化独立于使用算法的客户。</p>
<p>场景：模拟鸭子游戏。游戏中会出现各种鸭子，一边游泳戏水，一边呱呱叫。</p>
<h2 id="封装变化的代码">封装变化的代码</h2>
<p>找出应用中可能需要变化之处，把它们独立出来，不要和那些不需要变化的代码混在一起。</p>
<p>把会变化的部分取出并封装起来，以便以后可以轻易地改动或扩充此部分，而不影响不需要变化的其他部分。</p>
<h2 id="针对接口编程">针对接口编程</h2>
<p>针对接口编程，而不是针对实现编程。</p>
<p>”针对接口编程“ 真正的意思是 ”针对超类型（supertype）编程“。</p>
<h2 id="多用组合少用继承">多用组合，少用继承</h2>
<p>使用组合建立系统具有很大的弹性，不仅可将算法族封装成类，更可以
“在运行时动态地改变行为”，只要组合的行为对象符合正确的接口标准即可。</p>
<span id="more"></span>
<h1 id="观察者模式">观察者模式</h1>
<p>观察者模式定义对象之间的一对多依赖，这样一来，当一个对象改变状态时，它的所有依赖者都会收到通知并自动更新。</p>
<p>场景：气象监测应用，有三种布告板，分别显示目前的状况、气象统计及简单的预报。当
WeatherObject 对象获得最新的测量数据时，三种布告板必须实时更新。</p>
<h2 id="松耦合的威力">松耦合的威力</h2>
<p>为了交互对象之间的松耦合设计而努力。松耦合将对象之间的互相依赖降到了最低。</p>
<h2 id="举例java-内置的观察者">举例：Java 内置的观察者</h2>
<h1 id="装饰者模式">装饰者模式</h1>
<p>装饰者模式动态地将责任附加到对象上。若要扩展功能，装饰者提供了比继承更有弹性的替代方案。</p>
<p>场景：星巴兹咖啡连锁店的订单系统，订单系统必须考虑加入的各种调料对价格的影响。</p>
<h2 id="开放-关闭原则">开放-关闭原则</h2>
<p>类应该对扩展开放，对修改关闭。</p>
<h2 id="举例java-io">举例：Java I/O</h2>
<h1 id="工厂方法模式">工厂方法模式</h1>
<p>工厂方法模式定义了一个创建对象的接口，但由子类决定要实例化的类是哪一个。工厂方法让类把实例化推迟到子类。</p>
<p>场景：披萨的制作。</p>
<h2 id="抽象工厂模式">抽象工厂模式</h2>
<p>提供一个接口，用于创建相关或依赖对象的家族，而不需要明确指定具体类。</p>
<h2 id="依赖倒置原则">依赖倒置原则</h2>
<p>要依赖抽象，不要依赖具体类。</p>
<h1 id="单件模式">单件模式</h1>
<p>单件模式确保一个类只有一个实例，并提供一个全局访问点。</p>
<p>场景：巧克力工厂。</p>
<p>注意 Java 多线程引起的创建单例模式出错问题。</p>
<h1 id="命令模式">命令模式</h1>
<p>命令模式将“请求”封装成对象，以便使用不同的请求，队列或者日志来参数化其他对象。命令模式也支持可撤销的操作。</p>
<p>场景：具有七个可编程插槽的遥控器，每个插槽都有对应的开关按钮。这个遥控器还具备一个整体的撤销按钮。创建一组控制遥控器的
API，让每个插槽都能够控制一个或一组装置。</p>
<h1 id="适配器模式与外观模式">适配器模式与外观模式</h1>
<p>适配器模式将一个类的接口，转换成客户期望的另一个接口。适配器让原本接口不兼容的类可以合作无间。</p>
<p>场景：如果你需要在欧洲国家使用美国制造的笔记本电脑，你可能需要使用一个交流电的适配器。</p>
<p>外观模式提供了一个统一的接口，用来访问子系统中的一群接口。外观定义了一个高层接口，让子系统更容易使用。</p>
<p>场景：家庭影院，将观赏电影所需要的一系列步骤封装到一个新类中，简化观赏电影的步骤。</p>
<h2 id="最少知识原则">最少知识原则</h2>
<p>最少知识原则：只和你的密友交谈。</p>
<p>这个原则希望我们在设计中，不要让太多的类耦合在一起，免得修改系统中一部分，会影响到其他部分。如果许多类之间相互依赖，那么这个系统就会变成一个易碎的系统，它需要花许多成本维护，也会因为太复杂而不容易被其他人了解。</p>
<h1 id="模板方法模式">模板方法模式</h1>
<p>模板方法模式在一个方法中定义了一个算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以在不改变算法结构的情况下，重新定义算法中的某些步骤。</p>
<p>场景：冲咖啡和冲茶的步骤部分一样，部分不一样。</p>
<h2 id="好莱坞原则">好莱坞原则</h2>
<p>别调用我，我会调用你。高层组件控制何时以及如何让低层组件参与，低层组件绝对不可以直接调用高层组件。</p>
<h1 id="迭代器与组合模式">迭代器与组合模式</h1>
<p>迭代器模式提供一种方法顺序访问一个聚合对象中的各个元素，而又不暴露其内部的表示。</p>
<p>场景：对乡村餐厅和对象村煎饼屋合并了。如何将两家餐厅的菜单合并呢？</p>
<h2 id="单一责任原则">单一责任原则</h2>
<p>一个类应该只有一个引起变化的原因。</p>
<p>组合模式允许你将对象组合成树形结构来表现“整体/部分”层次结构。组合能让客户以一致的方式处理个别对象以及对象组合。</p>
<h1 id="状态模式">状态模式</h1>
<p>状态模式允许对象在内部状态改变时改变它的行为，对象看起来好像修改了它的类。</p>
<p>场景：万能糖果公司的糖果机控制器。</p>
<h1 id="代理模式">代理模式</h1>
<p>代理模式为另一个对象提供一个替身或占位符以控制对这个对象的访问。</p>
<p>场景：远程查看糖果机的库存和机器状态的报告。</p>
<h1 id="复合模式">复合模式</h1>
<p>复合模式结合两个或以上的模式，组成一个解决方案，解决一再发生的一般性问题。</p>
<p>场景：重建鸭子模拟器。</p>
<p><strong>参考文档：</strong> <a
href="https://book.douban.com/subject/2243615/">Head First
设计模式</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>设计模式</tag>
      </tags>
  </entry>
  <entry>
    <title>IP 地址分类</title>
    <url>/2022/05/16/IP-%E5%9C%B0%E5%9D%80%E5%88%86%E7%B1%BB/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>IP 地址根据网络 ID 的不同分为5种类型：A 类地址、B 类地址、C 类地址、D
类地址和 E 类地址。</p>
<p><strong>A 类</strong> IP
地址由1字节的网络地址和3字节主机地址组成，网络地址的最高位必须是“0”，地址范围从1.0.0.0
到126.0.0.0。可用的A类网络有126个，每个网络能容纳1亿多个主机。</p>
<p><strong>B 类</strong> IP
地址由2个字节的网络地址和2个字节的主机地址组成，网络地址的最高位必须是“10”，地址范围从128.0.0.0到191.255.255.255。可用的B类网络有16382个，每个网络能容纳6万多个主机。</p>
<p><strong>C 类</strong> IP
地址由3字节的网络地址和1字节的主机地址组成，网络地址的最高位必须是“110”，范围从192.0.0.0到223.255.255.255。C类网络可达209万个，每个网络能容纳254个主机。</p>
<p><strong>D 类</strong> IP
地址的第一个字节以“1110”开始，它是一个专门保留的地址。它并不指向特定的网络，目前这一类地址被用在多点广播（Multicast）中。多点广播地址用来一次寻址一组计算机，它标识共享同一协议的一组计算机。</p>
<p><strong>E 类</strong> IP
地址的第一个字节以“11110”开始，为将来使用保留。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>IP 地址</tag>
      </tags>
  </entry>
  <entry>
    <title>npm 命令参数</title>
    <url>/2023/04/06/npm-%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="npm-i--d">1.npm i -D</h1>
<p>“npm i -D”是npm
install命令的简写，其中”-D”是”–save-dev”的缩写，表示将包安装为开发依赖项(devDependencies)。</p>
<p>开发依赖项是指在开发过程中需要但不需要在生产环境中运行的依赖项。例如，测试库、构建工具和代码检查器等。这些依赖项通常只需要在开发时使用，并且在项目构建或打包时不会添加到最终生成的产品中。</p>
<p>通过在”npm i
-D”命令中使用”-D”选项，可以将包保存到package.json文件中的devDependencies对象中。这意味着在运行
“npm install” 命令时，这些包将被自动安装，并且只在开发环境中可用。</p>
<p>示例：如果您要安装一个名为”jest”的测试库作为开发依赖项，您可以使用以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i -D jest</span><br></pre></td></tr></table></figure>
<p>这将安装jest并将其添加到package.json文件中的devDependencies对象中。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>2023 新起点新征程</title>
    <url>/2023/01/03/2023-%E6%96%B0%E8%B5%B7%E7%82%B9%E6%96%B0%E5%BE%81%E7%A8%8B/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>2022
年最大的收获就是我的小女儿降生啦，人生大事又搞定了一件，以后可以全力以赴的工作。2023
年新年伊始，定立几个小小的目标，认真工作，不焦虑，好好享受生活，耐心陪伴孩子成长。希望自己也变得越来越优秀！！！</p>
<ul class="task-list">
<li><label><input
type="checkbox" />每月至少阅读两本书（一本技术书籍一本兴趣爱好）</label></li>
<li><label><input
type="checkbox" />在工作时间处理完所有工作，提高工作效率</label></li>
<li><label><input
type="checkbox" />回家后不看手机，陪孩子们玩，给孩子们讲故事（每天至少阅读两本绘本）</label></li>
<li><label><input
type="checkbox" />均衡饮食，周末时间锻炼身体，提高全家抵抗力</label></li>
</ul>
<p>2023
年所有病痛退！退！退！孩子们少生病，健康快乐成长，爸爸妈妈努力赚钱，给你们提供更优质的生活！</p>
<hr />
<p>2023 年度总结：</p>
<p>2023 年家人平安健康是最大的福气！</p>
<ul class="task-list">
<li><label><input type="checkbox"
checked="" />阅读目标完成的不错，今年读完 25 本书，英文原版书籍 《Magic
Tree House 1-25》算了一本，这套书内容比较少而且简单，读起来比较快。2024
年要提高英文原版书籍的难度。</label></li>
<li><label><input type="checkbox"
checked="" />今年的工作效率有很大提升，定的目标基本全部完成。只要管理好自己的情绪，停止内耗，早睡早起，就能精神充沛、全力以赴的奔向自己的目标。</label></li>
<li><label><input type="checkbox"
checked="" />陪伴孩子阅读一开始还做的很好，后面有些偷懒::&gt;_&lt;::。有时候累了下班回去就想追追剧，有时候陷入坏情绪里，不想去做。但是想想孩子最需要自己的也就是那么几年，所以尽量还是多陪陪孩子，一眨眼的功法她们就长大了，不再那么粘着你，需要你了，多珍惜和她们在一起的时间，多参与她们的成长，不要留遗憾。</label></li>
<li><label><input type="checkbox"
checked="" />今年夏天报班学会了蛙泳，还自学了自由泳，自由泳现在还不熟练，但是蛙泳已经游得很轻松了，现在已经爱上游泳了。报名学游泳是下了很大决心才去的，学会了可真香，突破自己的感觉真的好爽。以后每年都要挑战一些自己不敢做的事情。</label></li>
</ul>
<p>2023
年的年尾还报名了直播销售员的考试，一个月后出成绩，期待好消息。<br />
多年没有参加考试了，还是有点紧张，为了准备这次考试学到了很多直播相关的知识，挺有用的，现在再去看别人的直播，就会看出来那些主播的套路，哈哈哈哈哈！<br />
不知道今后自己是否也能成为一名主播~<br />
以考促学，这是今年学到的最棒的经验，只有报名了，才会认真起来，才能逼自己一把，才能取得更大的进步。</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>新年目标</tag>
        <tag>2023</tag>
      </tags>
  </entry>
  <entry>
    <title>《博弈论的诡计》笔记</title>
    <url>/2023/03/16/%E3%80%8A%E5%8D%9A%E5%BC%88%E8%AE%BA%E7%9A%84%E8%AF%A1%E8%AE%A1%E3%80%8B%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>博弈论的诡计：日常生活中的博弈策略</p>
<p>王春永</p>
<p>20个笔记</p>
<p>博弈的构成要素</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>形成一个博弈的以下四个要素。第一，两个或两个以上的参与者（Player）。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>第二，博弈要有参与各方争夺的资源或收益（Resources/Payoff）。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>第三，参与者有自己能够选择的策略（Strategy）。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>第四，参与者拥有一定量的信息（Information）。</p>
<p><span id="more"></span></p>
<p>相互依存与均衡</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>均衡，可以说是博弈论中重要的思想之一，但是并不复杂。我们可以用描述法来加以定义：局中的每一个参与者都不可能因为单方面改变自己的策略而增加获益，于是各方为了自己利益的最大化而选择了各自的最优策略，并与其他对手达成了某种暂时的平衡。在外界环境没有变化的情况下，倘若有关各方坚持原有的利益最大化原则并理性面对现实，那么这种平衡状况就能够长期保持稳定。在所有的均衡中，纳什均衡则是一个基础性的概念。简单地说，所谓纳什均衡就是所有人的选择综合在一块，不一定所有选择都能实现利益最大化，但能使所有人都达到最大化的选择。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>纳什均衡是一最常见的均衡。它的含义是：在对方策略确定的情况下，每个参与者的策略是最好的，此时没有人愿意先改变或主动改变自己的策略。也就是说，此时如果他改变策略，他的收益将会降低，所以没有人愿意先改变自己的策略。在纳什均衡点上，每一个理性的参与者都不会有单独改变策略的冲动。</p>
<p>负和、零和与正和</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>零和博弈</p>
<p>零和博弈是一种完全对抗、强烈竞争的对策。在零和博弈的结局中，参与者的收益总和是零（或某个常数），一个参与者的所得恰是另一参与者的所失。狐狸和狼一只在上面，一只在下面，下面的这一只想上去，就得想办法让上面的一只下来。但是通过博弈调换位置以后，仍然是一只在上面，一只在下面。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>非零和博弈</p>
<p>所谓非零和博弈，是既有对抗又有合作的博弈，各参与者的目标不完全对立，对局表现为各种各样的情况。有时候选手只按本身的利害关系单方面做出决策，有时为了共同利益而合作。其结局收益总和是可变的，参与者可以同时有所得或有所失。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>负和博弈</p>
<p>比如在《拉封丹寓言》中，如果狐狸看到狼在井口，心想我在井里受罪，你也别想舒服，它不是欺骗狼坐在桶里下来，而是让狼跳下来，那么最终结局将是狼和狐狸都身陷井中。这种两败俱伤的非零和博弈，我们称之为负和博弈。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>正和博弈</p>
<p>反之，如果狼明白狐狸掉到了井里，动了恻隐之心，搬来一块石头放到上面的桶中，完全可以利用石头的重量把狐狸拉上来。或者相反，如果狐狸担心狼没有这种乐于助人的精神，通过欺骗升到井口以后，再用石头把狼拉上来。这两种方式的结局是两个参与者都到了井上面，那么双方进行的就是一种正和博弈。</p>
<p>倒霉是因为自作聪明</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>在相互交往过程中，个人通过背叛来追求最大利益，有时反而会带来糟糕的共同结局，造成大家一起倒霉、一锅烩的结局。也就是说，很多失败不是因为人们太傻，而恰恰是太精明所致。所谓的聪明反被聪明误，就是说的这种情况。一方面，它启示人们为私利考虑时不要太“精明”；另一方面，它对理性假设的适用性提出了警告。</p>
<p>宽恕带来更多背叛</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>俗话说的坏人专挑软柿子捏吗？</p>
<p>博弈论告诉我们，有望在将来得到你宽恕的人，反而更可能背叛你。有人举例说，在史前时代的一些村落中生活着一群盗贼，他们经常到各个村落来偷食物。理性的村落一般选择宽恕，只有在不至于付出太高的代价时，才会去抓捕盗贼。而报复心强的村落，则会不计代价地去抓捕这些人。这样，盗匪会更愿意对理性的村落下手，而被认为报复心强，却起了保护食物的作用。因此，拒绝宽恕和进行报复也就有了演进的优势。</p>
<p>用道德来保证均衡</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>西方伦理学把人类的道德准则分为四种：金律、银律、铜律和铁律。金律（Golden
Rule），可以称为“作为者”的行为准则，其内容是：“你要别人怎样对待你，你就怎样对待别人。”也就是孔子所说的“己欲立而立人，己欲达而达人”。银律（Silver
Rule），可以称为“退让者”的行为准则，也就是孔子所说的“己所不欲，勿施于人”。铜律（Bronze
Rule），可以称为“报复者”的行为准则，其内容是：“别人怎样对待你，你就怎样对待别人。”铁律（Iron
Rule），可以称为“进攻者”的行为准则，其内容是：“在别人进攻你之前，首先进攻别人。”</p>
<p>地老天荒的胜利者</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>那么，如何促进合作呢？总结起来，大概有以下几条：第一，要建立持久的关系。即使是海枯石烂的爱情，也需要建立婚姻契约以维持双方的合作。第二，要增强识别对方行动的能力。如果不清楚对方是合作还是不合作，就没法回报他了。被人卖了还帮着数钱，如此懵懂是无法获得合作的。第三，要维持声誉。说要报复就一定要做到，人家才知道你是“三只眼的马王爷”，才不敢轻易地背叛。第四，能够分步完成的对局不要一次完成，以维持长久关系。比如，大笔的交易都要分步进行，要细水长流，而不要一锤子买卖，以促使对方采取合作态度。第五，不要嫉妒人家的成功。第六，不要首先背叛，以免担上罪魁祸首的道德压力。第七，不仅对背叛要回报，对合作也要做出回报。朋友来了有好酒，若是那敌人来了，迎接他的有猎枪。第八，不要耍小聪明，企图占人家便宜。贪小便宜往往吃大亏。友善、有原则、宽容、简单、不妒忌朋友的成功，其实也正是“菩萨低眉”和“金刚怒目”的具体化，这些信条本来就是我们生活中常见的为人处世之道，只是很少人会将这些信条联系起来作为一种策略组合行事。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>恋人相互之间的忠诚，靠的不是地老天荒、情深爱笃的誓言，而是需要一定的博弈策略。在恋爱这场不太好玩的“游戏”中，谁能熟练驾驭游戏或博弈规则，谁才能成为爱情的赢家，拥有美满的生活。对正在恋爱中的人们来说，获得幸福爱情的博弈原则应该有以下几点：第一，善意而不是恶意地对待恋人。这个道理很简单了，无须多说。第二，宽容而不是尖刻地对待恋人。幸福的恋人能够生活得愉快，关键是能够彼此宽容，能宽容对方的缺点。尖刻地对待恋人，往往得不到幸福。第三，简单明了而不是山环水绕地对待恋人。在博弈过程中，过分复杂的策略使得对手难以理解，无所适从，因而难以建立稳定的合作关系。明晰的个性、简练的作风和坦诚的态度倒是制胜的要诀。</p>
<p>猎人的帕累托效率</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>帕累托（意大利经济学家）效率准则是：经济的效率体现于配置社会资源以改善人们的境况，主要看资源是否已经被充分利用。如果资源已经被充分利用，要想再改善任何人都必须损害别的人了，这时候就说已经实现了帕累托效率。</p>
<p>赢家通吃并不理性</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>然而，在一定的时空之内，能够分配的利益总量是既定的，当一些人分得过多时，别人就肯定很少，特别是如果这种瓜分不是通过生产的方式，而是私权相授，那么就会出现富者越富、贫者越贫的“马太效应”。虽然网络时代，资源分布曲线的长尾更长了，但“大头”更大了。传统社会中的“三四律”发现，有影响力的市场竞争者数量绝不会超过三个，最大竞争者的份额不会超过最小者的四倍。在网络时代，这种差距不仅没有拉近，反而变本加厉地变成了“631”的豪门盛宴，即顶尖企业占据市场的60%，30%和10%分别属于第二名和其他。看一下BAT（百度、阿里巴巴、腾讯）怎样借助资本的力量在各领域攻城略地、所向披靡，不就很明白了吗？而如果坐视此种现象发生甚至有意无意地加以助长，囚徒困境就会普遍发生，阶层固化的社会就会丧失最基本的互信，资源就会投入无效益的地方，从而降低全社会的福利水平，大家一齐滑向一种无效率的状态。赢家通吃是不理性的，因为这必然导致背叛。即便现在不背叛，也必然会在未来出现。这样做的结果，用作家王鼎钧的一句话说就是：聪明人一向占尽便宜，处处得意，不知道临事而惧，最后往往一败涂地。</p>
<p>共同付出才能共赢</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>我们分析一下生活中最常见的博弈——爱情博弈，就可以打开理解上述情形的一个小小窗口。只有一方付出的关系可以是施舍，可以是被剥削，但绝不是爱情，更不是达成幸福婚姻的优势策略。一场博弈中的成本，会直接影响对方的策略选择。你越是对另一方无欲无求，越是不忍心让对方有半点付出，对方在婚姻中的投入就越少，越是不重视这段婚姻，也就越容易背叛。婚姻是重复博弈，两个参与者共同合作，付出物质与精神，相互馈赠和回报，才能取得共赢。而每个参与者除了自己采取合作付出的策略，更要鼓励和要求对方有相应的合作和付出，这才是赢得幸福婚姻的优势策略。</p>
<p>人生的倒后推理</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>当我们在为手头的工作忙得焦头烂额的时候，一定要停下来，静静地问一下自己：五年后你最希望得到什么？你现在所做的工作有助于你达到这个目标吗？如果不能，你为什么要做？如果无法回答这些问题，那么需要检讨自己的价值观，想象一下自己想要成为什么样的人。如果我们没有清晰的目标，就会为那些有清晰目标的人工作，事实就是如此。也就是说，当你在职场上奔波时，所追求的不是达成自己的目标，而是努力达成别人的目标。要在最短时间内实现人生目标，我们必须把目前年度的4～10个目标写出来，找出一个核心目标，并依次排列重要性，然后依照自己的目标定一些详细的计划，然后依照计划进行。如果我们根本就没有这样一个目标，那么策略思维根本是一句空话。</p>
<p>从墓志铭想人生</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>伍迪·艾伦曾经说过，生活中90%的时间只是在混日子。大多数人的生活层次只停留在为吃饭而吃，为工作而工作，为回家而回家。他们从一个地方逛到另一个地方，事情做完一件又一件，好像做了很多事，却很少有时间从事自己真正想完成的目标。就这样，一直到老死。很多人临到自己垂垂老矣的时候，才发现自己虚度了大半生，剩余的日子又在病痛中一点一点地流逝。那么，我们要怎样度过一生，才能不算虚度呢？回答这个问题，可以帮助我们把所有生活层面的东西过滤，提炼出我们最根本的人生目标，发掘我们心底最根深蒂固的价值观，决定我们人生目标的最核心部分。</p>
<p>微信读书</p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>博弈论</tag>
      </tags>
  </entry>
  <entry>
    <title>G6 节点的连接点 anchorPoint</title>
    <url>/2023/03/06/G6-%E8%8A%82%E7%82%B9%E7%9A%84%E8%BF%9E%E6%8E%A5%E7%82%B9-anchorPoint/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p><a
href="https://g6.antv.antgroup.com/manual/middle/elements/nodes/anchorpoint">G6
节点的连接点 anchorPoint</a>，以备速查！ </p>
<span id="more"></span>
<p>相关知识点 <a
href="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Paths">SVG
path</a></p>

]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>节点的连接点</tag>
        <tag>anchorPoint</tag>
      </tags>
  </entry>
  <entry>
    <title>《培养孩子从画画开始2》读书笔记</title>
    <url>/2023/03/22/%E3%80%8A%E5%9F%B9%E5%85%BB%E5%AD%A9%E5%AD%90%E4%BB%8E%E7%94%BB%E7%94%BB%E5%BC%80%E5%A7%8B2%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="孩子的成长及绘画的作用">孩子的成长及绘画的作用</h1>
<h2 id="成人的画和孩子的画有何不同">成人的画和孩子的画有何不同</h2>
<p>美术教育应该是顺应孩子的身心发展规律培养孩子画出属于自己的作品。</p>
<ol type="1">
<li>学龄前儿童的画是需要倾听的</li>
<li>学龄前儿童画画不是为了兴趣</li>
<li>对于学龄前儿童，绘画是身心发展过程中不可或缺的一种劳动形式</li>
<li>学龄前儿童用绘画而不是文字来表达</li>
<li>绘画反映了儿童的人格 <span id="more"></span></li>
</ol>
<h2 id="成人如何参与孩子的绘画活动">成人如何参与孩子的绘画活动</h2>
<ul>
<li>用语言引导的方式培养孩子画画</li>
</ul>
<h1
id="孩子的身心发展及其绘画的鉴赏方法">孩子的身心发展及其绘画的鉴赏方法</h1>
<h2
id="一到三岁孩子的发展规律及其绘画的鉴赏方法">一到三岁孩子的发展规律及其绘画的鉴赏方法</h2>
<ul>
<li>从手开始</li>
</ul>
<p>绘画活动是从涂鸦开始的。</p>
<ul>
<li>手的劳动产生涂鸦</li>
</ul>
<p>婴儿的运动能力，是按照从上到下，从中心向末端的顺序，有规律地发展的。手的功能，也是按照这个规律逐渐发展完善的。首先是肩膀，然后是肘、手腕、手指关节，即从与身体（躯干）连接的部分开始，向身体的末端发展。</p>
<p>一岁左右幼儿的涂鸦，最初是以肩做轴，画出来很多点点。</p>
<p>一岁两三个月至一岁半左右的初期阶段，因为孩子以肘做轴，用手来画画，画出来的是扇形的、左右往返型的线条。</p>
<p>一岁六个月以后，孩子通过肩和肘的协调运动，能画出有力度的大螺旋形涂鸦。</p>
<p>一岁十个月到两岁左右，孩子使用手腕和手指画出小螺旋型的涂鸦，并且能画出上下竖直方向往返型线条。</p>
<p>以上阶段称为 “一维涂鸦”。</p>
<ul>
<li>捏的动作从两岁开始</li>
<li>眼睛给线条带路</li>
</ul>
<p>两岁四个月左右，孩子手的功能和眼睛的功能相结合，能够画出封闭的圆圈或是一个单独的线条来。</p>
<ul>
<li>令绘画有内容的是语言</li>
</ul>
<h2 id="保护孩子的涂鸦与绘画热情">保护孩子的涂鸦与绘画热情</h2>
<ul>
<li>绘画积极性减退的孩子</li>
</ul>
<p>孩子们有一同玩耍的伙伴作伴，共同做着同样的事，对同一件事发生兴趣。“并列玩耍”
是满足这个阶段孩子社会性的一种游戏方式。</p>
<ul>
<li><p>要保证孩子有游戏伙伴</p></li>
<li><p>请给孩子准备好绘画环境</p></li>
</ul>
<h2
id="四到九岁孩子的发展规律及其绘画的鉴赏方法">四到九岁孩子的发展规律及其绘画的鉴赏方法</h2>
<ul>
<li>语言能力的发展与绘画能力的发展</li>
</ul>
<p>四至八岁，是语言能力引导着绘画能力的发展。</p>
<ul>
<li><p>凭印象画画的四岁儿童</p></li>
<li><p>五六岁开始对事物之间的关系产生浓厚兴趣</p></li>
<li><p>六岁左右基底线登场了</p></li>
</ul>
<h1 id="亲眼见证孩子的绘画发展过程">亲眼见证孩子的绘画发展过程</h1>
<h2 id="一岁">一岁</h2>
<ul>
<li><p>涂鸦从画点开始</p></li>
<li><p>通过绘画进行亲子对话（一岁七个月）</p></li>
<li><p>用手腕画画（一岁十一个月）</p></li>
</ul>
<h2 id="两岁">两岁</h2>
<ul>
<li><p>开始进行有意义的涂鸦</p></li>
<li><p>涂鸦中开始出现涂色</p></li>
</ul>
<h2 id="三岁">三岁</h2>
<ul>
<li>开始用线条表征（三岁六个月）</li>
</ul>
<h2 id="四岁">四岁</h2>
<ul>
<li>动笔之前先决定绘画内容</li>
</ul>
<h2 id="五岁">五岁</h2>
<ul>
<li>看了就明白的五岁儿童的画</li>
</ul>
<h2 id="六岁至八岁">六岁至八岁</h2>
<p>掌握了用自己的眼睛从自然界或社会捕捉单纯的形状，并把它形象化的能力。</p>
<h2 id="九岁">九岁</h2>
<ul>
<li><p>面临转折期的九岁儿童</p></li>
<li><p>九至十岁的视觉写实主义</p></li>
<li><p>九岁儿童的绘画指导方式</p></li>
</ul>
<p>在绘画开始之前就首先要求孩子的画面要充满故事性，然后进一步要求孩子画一幅不需要作文说明就能让人看懂的画。</p>
<ul>
<li>怎样培养孩子有一双会观察的眼睛</li>
</ul>
<p>让孩子讲实物和自己的画进行对比，从历史的角度分析自己做得是否正确。</p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>画画</tag>
      </tags>
  </entry>
  <entry>
    <title>《Webpack+Babel入门与实例详解》</title>
    <url>/2023/03/20/%E3%80%8AWebpack-Babel%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E4%BE%8B%E8%AF%A6%E8%A7%A3%E3%80%8B/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>Webpack+Babel入门与实例详解</p>
<p>姜瑞涛</p>
<p>36个笔记（微信读书只能试读前两章，第三章开始笔记是自己手敲的）</p>
<p>第1章 Webpack入门</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>执行如下命令，该命令是Webpack
5的命令行打包命令。[插图]上面命令的作用：从a.js文件开始，按照模块引入的顺序把所有代码打包到一个JS文件里，这个文件的默认名称是main.js。Webpack会自动处理打包后代码的顺序与依赖关系。–entry用来指定打包入口文件，-o是out的意思，表示输出目录，这里使用dist目录作为打包后的输出目录。注意，webpack是打包命令，后面的内容是打包参数。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>Webpack的打包模式共有三种：production、development和none，这三种模式是通过mode参数来指定的。production和development这两种模式会分别按照线上生产环境和本地开发环境进行一些优化处理，而none模式会保留原始的打包结果。例如，production模式是给生产环境打包使用的，打包后的bundle.js文件代码是压缩后的</p>
<p><span id="more"></span></p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>在使用resolve方法的时候，我们使用了__dirname。__dirname是Node.js的一个全局变量，表示当前文件的路径。这样，path.resolve（__dirname，’’）表示的其实就是当前文件夹根目录的绝对路径。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>要对某种模块进行处理，我们需要为配置项新增module项。该项是一个对象，其rules里是我们对各个类型文件的处理规则配置。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>1）test：取值是一个正则表达式，表示的含义是当文件名后缀是.css的时候，我们使用对应use项里的预处理器。2）use：取值是一个数组，数组每一项是一个预处理器。预处理器的执行顺序是从后向前执行，先执行css-loader，然后把css-loader的执行结果交给style-loader执行。</p>
<p>第2章 Webpack资源入口与出口</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>ES6的模块化语法主要有export模块导出、import模块导入，以及import()函数动态加载模块。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>export还可以导出模块的默认值，方便在导入的时候使用。[插图]</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>我们使用import…from’…‘方式导入模块。如果导入的模块有默认值，我们可以自定义一个变量代表其默认值。[插图]对于导入模块的其他非默认值，我们可以使用大括号方式导入。[插图]除了使用import…from’…‘方式导入模块，也可以使用import’…’方式。使用后者时，导入模块后会执行模块内容，但是并不使用其对外提供的接口。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>import()函数可以用来动态导入模块，它是在ES2020提案里提出的。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>需要注意的是，import()函数与import…from’…‘方式除了外观形式上有所区别，import()函数导入模块是动态的，而import…from’…’方式是通过静态分析导入的。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>下面简单解释一下import()函数的原理。Webpack在打包的时候，碰到import()函数导入的模块并不会立刻把该模块内容打包到当前文件中。Webpack会使用动态生成JS的方式，在运行代码的时候生成script标签，script标签引入的就是import()里导入的内容。import()函数导入模块后会返回一个Promise对象，我们可以通过import().then()的方式来处理后续的异步工作。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>CommonJS主要使用module.exports导出模块，使用require（‘…’）导入模块。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>章末总结，很好的写作方式！</p>
<p>本节介绍了与JS模块化相关的内容，知识点总结如下。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>本节介绍了与JS模块化相关的内容，知识点总结如下。1）Webpack支持ES6
Module、CommonJS和AMD等模块化规范，目前常用的是ES6
Module和CommonJS。2）ES6
Module通过export导出模块，通过import…from’…‘或import’…‘导入模块。3）CommonJS通过module.exports导出模块，通过require（’…’）导入模块。4）ES6
Module通过import()函数动态导入模块，CommonJS通过require.ensure动态导入模块，推荐使用import()函数动态导入模块。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>context在Webpack中表示资源入口entry是以哪个目录为起点的。context的值是一个字符串，表示一个绝对路径。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>Webpack资源入口entry需要使用相对路径来表示。目前我们使用的entry都是字符串形式的，其实它还可以是数组形式、对象形式、函数形式和描述符形式的。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>2.入口entry是数组形式表示数组的最后一个文件是资源的入口文件，数组的其余文件会被预先构建到入口文件中。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>3.入口entry是对象形式对象形式的entry又被称为多入口配置。之前我们讲的都是单入口配置，就是打包后生成一个JS文件。多入口配置就是打包后生成多个JS文件。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>上面的配置分别从两个入口文件打包，每个入口文件各自寻找自己依赖的文件模块并打包成一个JS文件，最终得到两个JS文件。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>4.入口entry是函数形式函数形式的entry，Webpack取函数返回值作为入口配置，返回值是上述三种形式之一即可。函数形式的entry可以用来做一些额外的逻辑处理，不过在自己搭脚手架时很少使用。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>5.入口entry是描述符（descriptor）形式这种入口形式也是一个对象，我们称之为描述符。描述符语法可以用来给入口传入额外的选项，例如设置dependOn选项时，可以与另一个入口chunk共享模块。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>context是一个绝对路径，是基础目录的意思。entry是一个相对路径，它与context拼接起来，就是Webpack打包的入口文件了。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>filename除了可以是一个文件名称，也可以是一个相对地址，如’./js/bundle.js’。最终打包输出的文件地址是path绝对路径与filename拼接后的地址。filename支持类似变量的方式生成动态文件名，如[hash]-bundle.js，其中方括号代表占位符，里面的hash表示特定的动态值。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>[name]表示的是chunk的名字，简单理解的话，在打包过程中，一个资源入口依赖的模块集合代表一个chunk，一个异步模块依赖的模块集合也代表一个chunk，另外代码拆分也会有单独的chunk生成，我们将在第7章进行具体讲解。[id]是Webpack在打包过程中为每个chunk生成的唯一序号。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>其中字符串形式和数组形式entry的output.filename的[name]值都是main。对于entry是对象形式的多入口配置，[name]是对象的属性名，对应每一个入口文件。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>我们在开发时，一般会用webpack-dev-server开启一个本地服务器，这个服务器可以自动刷新和热加载等，它生成的文件存放在内存中而不是在电脑磁盘中。对于该内存中的文件路径，我们会用Webpack配置文件的devServer配置项的publicPath表示，它虚拟映射了电脑磁盘路径。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>资源输出位置表示的是本次打包完成后，资源存放在磁盘中的位置。资源存放到磁盘后，浏览器如何知道该资源存放在什么位置呢？这个时候需要我们指定该资源的访问路径，这个访问路径就是用output.publicPath来表示的。在Web开发时，配置项output.publicPath的默认值是auto，表示资源调用者与被调用者在同一目录下。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>在把publicPath设置为’assets/’这类路径时，它是相对于当前HTML页面路径取值的。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>output.publicPath的值有函数与字符串两种形式，通常我们使用字符串形式的值。在使用字符串形式的值时，Webpack
5官方文档中主要提供了五种形式的值，分别是相对URL（relative
URL）、相对服务器地址（server-relative）、绝对HTTP协议地址（protocol-absolute）、相对HTTP协议地址（protocol-relative）和auto。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>1.相对URL前面讲解的例子里的”js/“（或”./js/“）就属于这种形式的值，它是相对于当前浏览的HTML页面路径取值的。output.publicPath的值以”./“、’js/’或”../“等开头，表示要访问的资源以当前页面URL作为基础路径。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>2.相对服务器地址output.publicPath的值以”/“开头，表示要访问的资源以当前页面的服务器地址根目录作为基础路径。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>3.绝对HTTP协议地址output.publicPath的值以HTTP协议名称开始，代表绝对HTTP协议地址，一般在使用CDN或对象存储的时候，我们会采用这种方式。现代前端工程中很大一部分静态资源都是通过CDN进行访问的。Web中常见的协议名称有HTTP和HTTPS，例如我的网站（见链接16）的协议名称就是HTTPS。下面看一下output.publicPath的值以协议名称开始的例子，在以协议名称开始的publicPath中，资源的访问地址是publicPath代表的绝对路径加上资源名称。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>4.相对HTTP协议地址相对HTTP协议地址以//开头，与绝对HTTP协议地址相比，它省略了前面的https:或http:。在使用相对HTTP协议地址的时候，浏览器会将当前页面使用的协议名称与相对协议地址拼接，这样本质上与使用绝对HTTP协议地址是一样的。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>在Webpack里，我们通常用[hash：8]表示取hash值的前八位，例如在Webpack配置文件中，我们用filename：’jQuery-[hash：8].js’来定义文件名。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>首先，fullhash与hash是一样的，fullhash是Webpack
5提出的，它用来替代之前的hash。另外，hash、chunkhash和contenthash这三者都是根据文件内容计算出的hash值，只是它们计算的文件不一样。hash是根据打包中的所有文件计算出的hash值。在一次打包中，所有资源出口文件的filename获得的[hash]都是一样的。chunkhash是根据打包过程中当前chunk计算出的hash值。如果Webpack配置是多入口配置，那么通常会生成多个chunk，每个chunk对应的资源出口文件的filename获得的[chunkhash]是不一样的。这样可以保证打包后每一个JS文件名都不一样（这么说不太严谨，但有助于理解）。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>contenthash有点像chunkhash，是根据打包时的内容计算出的hash值。在使用提取CSS文件的插件的时候，我们一般使用contenthash。</p>
<p>微信读书</p>
<p>第3章 Webpack预处理器</p>
<p>预处理器本上是是一个函数，它接收一个资源模块，然后将其处理成 Webpack
能使用的形式。</p>
<p>在 Webpack 中，一切皆模块。Webpack
在进行打包的时候，会把所有引入的资源文件都当做模块来处理。</p>
<p>如果 exclude 与 include 同时存在，Webpack 会优先使用 exclude
的配置。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>webpack-dev-server 常用配置参数</title>
    <url>/2023/04/06/webpack-dev-server-%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>Webpack Dev Server的一些常用配置参数：</p>
<p>host：指定服务器的主机名，默认为 localhost。</p>
<p>port：指定服务器运行的端口号，默认为 8080。</p>
<p>contentBase/publicPath：指定静态文件的路径。contentBase参数用于指定提供文件的根目录，而publicPath则用于指定浏览器请求资源的基础路径。默认情况下，两个参数都指向项目根目录。</p>
<p>hot：启用热模块替换（Hot Module
Replacement），允许在不刷新整个页面的情况下更新模块。值为true或false。</p>
<p>historyApiFallback：启用 HTML5 的历史记录 API
，解决使用单页应用时路由跳转404问题。值为true或false。 <span id="more"></span>
proxy：设置代理服务器。可以将客户端请求代理到后端API服务器以避免跨域问题。</p>
<p>compress：启用gzip压缩来减小文件传输大小。值为true或false。</p>
<p>watchOptions：配置监视文件变化的选项，例如轮询间隔、忽略某些文件等。</p>
<p>clientLogLevel：设置日志级别。可选的值有none/error/warning/info。</p>
<p>open：启动dev server时是否自动打开浏览器。值为true或false。</p>
<p>可以在webpack配置文件中通过devServer对象进行设置。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>webpack</tag>
        <tag>参数</tag>
      </tags>
  </entry>
  <entry>
    <title>G6 节点的连接点 anchorPoint</title>
    <url>/2023/04/06/G6-%E8%8A%82%E7%82%B9%E7%9A%84%E8%BF%9E%E6%8E%A5%E7%82%B9-anchorPoint/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p><a
href="https://g6.antv.antgroup.com/manual/middle/elements/nodes/anchorpoint">G6
节点的连接点 anchorPoint</a>，以备速查！ <img src="/2023/04/06/G6-%E8%8A%82%E7%82%B9%E7%9A%84%E8%BF%9E%E6%8E%A5%E7%82%B9-anchorPoint/%E8%8A%82%E7%82%B9%E7%9A%84%E8%BF%9E%E6%8E%A5%E7%82%B9.png" class=""></p>
<span id="more"></span>
<p>相关知识点 <a
href="https://developer.mozilla.org/zh-CN/docs/Web/SVG/Tutorial/Paths">SVG
path</a></p>
<img src="/2023/04/06/G6-%E8%8A%82%E7%82%B9%E7%9A%84%E8%BF%9E%E6%8E%A5%E7%82%B9-anchorPoint/SVG-path.png" class="">
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>节点的连接点</tag>
        <tag>anchorPoint</tag>
      </tags>
  </entry>
  <entry>
    <title>git 初始化已存在项目并上传 gitlab</title>
    <url>/2023/04/06/git-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B7%B2%E5%AD%98%E5%9C%A8%E9%A1%B9%E7%9B%AE%E5%B9%B6%E4%B8%8A%E4%BC%A0-gitlab/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>要在已存在的目录下新建 Git 仓库，可以按照以下步骤进行操作：</p>
<ol type="1">
<li>打开命令行终端并进入要作为 Git 仓库的目录。</li>
<li>运行 <code>git init</code> 命令初始化该目录为 Git 仓库。</li>
<li>将需要进行版本控制的文件添加到 Git 仓库中。可以使用
<code>git add &lt;file&gt;</code> 命令将文件添加到暂存区。</li>
<li>运行 <code>git commit -m "&lt;commit message&gt;"</code>
命令提交更改到 Git 仓库中，并添加一条提交说明。</li>
</ol>
<p>完成以上步骤后，已经成功在该目录下创建了一个 Git
仓库，并将文件添加到了版本控制中。</p>
<p>其中 3、4 步骤可以在 sourceTree 中执行。 <span id="more"></span> 在 gitlab
中新建一个项目，不要勾选生成 README.md
文件，因为我们项目里已经有这个文件了。</p>
<p>参考以下命令就能实现把本地项目推送到 gitlab 上了！</p>
<img src="/2023/04/06/git-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%B7%B2%E5%AD%98%E5%9C%A8%E9%A1%B9%E7%9B%AE%E5%B9%B6%E4%B8%8A%E4%BC%A0-gitlab/git%E6%8E%A8%E9%80%81%E5%B7%B2%E5%AD%98%E5%9C%A8%E9%A1%B9%E7%9B%AE%E5%88%B0%E8%BF%9C%E7%A8%8B.png" class="">
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>初始化</tag>
        <tag>gitlab</tag>
      </tags>
  </entry>
  <entry>
    <title>《培养孩子从画画开始1》读书笔记</title>
    <url>/2023/04/06/%E3%80%8A%E5%9F%B9%E5%85%BB%E5%AD%A9%E5%AD%90%E4%BB%8E%E7%94%BB%E7%94%BB%E5%BC%80%E5%A7%8B1%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>孩子的画和婴儿的哭是一样的，仅仅是直接表达心情的一种方式而已。父母不能用好坏来评价。</p>
<p>孩子不能用语言来充分表达，又不能靠书写文字来表达，他们通过绘画来表达自己的想法，讲述自己的感受和发现。无论画的好坏，成人都应该首先倾听孩子在绘画中想要表达的东西，理解他们所要讲述的内容。</p>
<p>所以，孩子的画不是用来“看”的，而是用来“听”的，就是这个意思。更准确地说，孩子的画是“听”了才能够明白的东西。对于孩子来说，他们的画只有被“听”，他们的绘画行为才有意义。被“听”，被理解了，就有了表达的乐趣。因此，对于孩子的画，作为母亲最重要的态度就是去“听”，去了解，去感受！</p>
<span id="more"></span>
<p>无论是谁都拥有与生俱来的绘画能力！这种能力是幼儿在成长过程中非常自然地培养获得的能力。一岁的时候获得一岁的能力，两岁的时候获得两岁的能力，不能年龄的孩子具备与年龄相应的能力的时候，绘画的能力也会自然地表现出来。这时候对成人来说最重要的事，是欣喜地守护孩子的这种能力，为孩子创造绘画活动的环境与氛围。</p>
<p>绘画也是一种造型艺术。所谓造型艺术，就是创造有美感的形象的艺术，要通过创造的形象来表达情感和思想。创造一种新形象，弄脏已有的形象，从某种意义来说就是破坏已有的形象，弄脏已有的形象。艺术的真正本质，就是以毁坏、弄脏已有形象为基础的。</p>
<h1 id="一岁">一岁</h1>
<p>与其说是绘画，不如说是手的运动轨迹。 绘画活动的诞生。</p>
<p><strong>绘画要点</strong>： 让孩子充分地涂鸦
不要给孩子看形象，也不要教孩子画形象。
一岁两三个月至一岁半，画像半圆形弧线的画。
一岁半以后，从大的连续圆圈到小的连续圆圈。
从这个时期开始，到孩子三岁，家长应该尽量让孩子涂鸦的能力得到充分发展。</p>
<h1 id="两岁">两岁</h1>
<p>眼睛追随手的运动。 开始试图用语言解释。</p>
<p><strong>绘画要点</strong> 仍然不能让孩子画脸等形象。
妈妈画形象给孩子看也不好。</p>
<p><strong>绘画用具</strong>
不要给孩子很多种颜色，只需一种颜色。除了粗的马克笔外，还要给孩子细的签字笔、圆珠笔、铅笔、蜡笔。纸张也要既有小的也有大的。</p>
<h1 id="三岁">三岁</h1>
<p><strong>绘画要点</strong>
仍然不能教孩子画具体形象，不要让孩子画人脸、车、人物之类的东西。
要听孩子讲用很多的圆圈和线条画出来的画的内容。</p>
<p>用极具表征的手法表现现实生活事物的线条，是三至四岁儿童绘画的显著特征。因此，这个年龄段的绘画也被称为“表征主义时代”。这个时期的画，是猿猴无法画出的，正处于向具有人类独特表现手法的绘画转化的时期，具有划时代的意义。</p>
<p>妈妈要让孩子像三岁的孩子那样画圆圈。画的时候，把大的圆圈和小的圆圈分开画，同时和孩子聊聊画画的感受，用画圆圈来代表各种事物。</p>
<h1 id="四岁">四岁</h1>
<p>终于可以画出形象了。 开始了凭印象画画的时期。
绘画作品中除了有头足人像，还体现了头体二足人像。
绘画作品像商品目录一样，各种食物无秩序排列。</p>
<p><strong>绘画要点</strong>
欣赏孩子的绘画作品时，不要仅仅看孩子画了些什么形象，更要认真听听孩子的讲述。</p>
<p>如果在这个时期成人教给孩子如何画画，就是剥夺了孩子认识事物的乐趣，甚至是挫伤了孩子认识世界的积极性。成人如果这样做就是阻碍了孩子成长为人的最重要的学习和发展的能力。没有比这更严重的罪过了。</p>
<p>四岁半后的画，看起来就像商品目录一样杂乱无章。</p>
<p>不是边看边画，而是把自己认识到的事实按照自己的感受画出来，这才是八岁之前孩子的绘画特点。写生，最好还是等到孩子九岁左右的时候。</p>
<h1 id="五岁">五岁</h1>
<p>并不是把经历过的事情按照自己看到的样子画出来，而是把感兴趣的事情按照自己的认识画出来。
开始给事物建立秩序，并开始出现“基底线”。
能够把听到的事情在头脑里形成印象并画成画。</p>
<p><strong>绘画要点</strong> 请家长不好说孩子画的形象奇怪、可笑。
仔细倾听孩子画中所表现的各种关系。</p>
<p>不是按照自己看到的
j，而是按照自己认识到的，只画自己感兴趣和关心的事物。这种现象是四到八岁左右孩子绘画的特点。这种倾向一直会持续到孩子九岁左右的绘画转化期。</p>
<p>在孩子二至五岁半的那段时期，我们只要问问孩子“这是什么”就可以了，而到了现在这段时期，我希望家长仔细问问孩子：“谁？在哪里？在干什么？”为了让孩子能画出更多的故事情节，家长请尽量去丰富孩子的生活吧。</p>
<p>请做那种总是让孩子央求你讲故事给他听的父母。一旦孩子成为一个爱听故事的孩子，他就会成长为爱画画、爱讲话，对各种事物有丰富印象的孩子。</p>
<p>不要让孩子看着画，而是凭印象去画。</p>
<h1 id="六岁">六岁</h1>
<p>坚决地使用利用基底线建立事物秩序的方式。
开始能够做图案游戏，把事物做抽象化表达。</p>
<p><strong>绘画要点</strong> 绝对不要用画得好、画得不好来评价孩子的画。
重视和孩子之间的谈话，多问孩子画里画的是谁、在哪里、在干什么等。
不要让孩子总看电视。 把有趣的生活经历作为绘画的主题让孩子画出来。</p>
<h1 id="七八岁">七八岁</h1>
<p>基底线转变为水平线或地平线。
开始分别从正面、侧面、背面三个角度画人物肖像。</p>
<p><strong>绘画要点</strong>
孩子的画逐渐变得让成人一看就能理解，成人要去体会孩子的心情，仔细欣赏孩子的作品。</p>
<h1 id="九岁">九岁</h1>
<p>开始追求画出眼睛见到的真实景象。</p>
<p><strong>绘画要点</strong>
当孩子对画画很着迷的时候，成人不要过于计较他的写实能力。对孩子横加干涉是没用的，不如和孩子一起动手吧。
可以借家庭旅行的机会来一次亲自写生，或是和孩子一起做贺年卡片，和孩子共同体验亲子活动的乐趣。</p>
<p>孩子到了五至六岁才会使用和形象相符合的颜色。</p>
<p>绘画，不是被迫或不得已时做的事情，而是一种享受和游戏。</p>
<p>如果有个绘画班重视孩子的自然发展规律，为孩子提供伙伴、用具和材料，并且对以孩子为主体的绘画活动只是在旁边欣喜地关注的话，就是一个理想的绘画班。</p>
<p>作为智人，为了发育成长，孩子们遇到的第一项文化活动就是绘画。幼儿的绘画，是在创造性的造型艺术活动过程中，锤炼自己凭语言形成印象的能力、思考的能力、判断的能力等等这些作为智人所必需的诸多能力。
家长对孩子艺术活动处处干涉，就等于摧毁了孩子作为人类最应该培养的创造力的萌芽。</p>
<img src="/2023/04/06/%E3%80%8A%E5%9F%B9%E5%85%BB%E5%AD%A9%E5%AD%90%E4%BB%8E%E7%94%BB%E7%94%BB%E5%BC%80%E5%A7%8B1%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/3-9%E5%B2%81%E4%BA%BA%E5%83%8F.png" class="">
<img src="/2023/04/06/%E3%80%8A%E5%9F%B9%E5%85%BB%E5%AD%A9%E5%AD%90%E4%BB%8E%E7%94%BB%E7%94%BB%E5%BC%80%E5%A7%8B1%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/1-3%E5%B2%81.jpg" class="">
<img src="/2023/04/06/%E3%80%8A%E5%9F%B9%E5%85%BB%E5%AD%A9%E5%AD%90%E4%BB%8E%E7%94%BB%E7%94%BB%E5%BC%80%E5%A7%8B1%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/4-6%E5%B2%81.jpg" class="">
<img src="/2023/04/06/%E3%80%8A%E5%9F%B9%E5%85%BB%E5%AD%A9%E5%AD%90%E4%BB%8E%E7%94%BB%E7%94%BB%E5%BC%80%E5%A7%8B1%E3%80%8B%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0/7-9%E5%B2%81.jpg" class="">
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>画画</tag>
      </tags>
  </entry>
  <entry>
    <title>如何安装 cnpm</title>
    <url>/2023/04/06/%E5%A6%82%E4%BD%95%E5%AE%89%E8%A3%85-cnpm/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>cnpm 是淘宝镜像提供的 npm 命令行工具，用于加速 npm
包的下载和安装。以下是如何使用 cnpm：</p>
<p>安装 cnpm：您可以通过以下命令全局安装 cnpm。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>
<p>执行上述命令时，将从淘宝镜像下载 cnpm 并安装在全局环境中。</p>
<p>使用 cnpm：现在，您可以使用 cnpm 来代替 npm 来安装依赖项，例如：
<span id="more"></span> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cnpm install lodash</span><br></pre></td></tr></table></figure> 这将使用淘宝镜像来下载和安装 lodash
库，速度可能比直接使用 npm 更快一些。</p>
<p>您还可以使用 cnpm 来运行其他 npm 命令，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cnpm update</span><br><span class="line">cnpm uninstall react</span><br></pre></td></tr></table></figure>
<p>请注意，虽然 cnpm 可以加速 npm
包的下载和安装，但有时也会出现问题。如果您遇到 cnpm
无法解决的问题，请尝试使用原始的npm命令。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>cnpm</tag>
      </tags>
  </entry>
  <entry>
    <title>《你不知道的JavaScript（上卷）》读书笔记</title>
    <url>/2023/03/16/%E3%80%8A%E4%BD%A0%E4%B8%8D%E7%9F%A5%E9%81%93%E7%9A%84JavaScript%EF%BC%88%E4%B8%8A%E5%8D%B7%EF%BC%89%E3%80%8B%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>你不知道的 JavaScript（上卷）</p>
<p>凯尔辛普森</p>
<p>81 个笔记</p>
<p>点评</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>认为好看</p>
<p>非常好的一本书，作者把 JavaScript
中的一些难点讲的非常透彻，包括作用域、this 、对象、Prototype
和委托，值得仔细阅读理解！本书翻译作者也是鬼才，翻译的很接地气，不像有些技术书籍翻译的很晦涩，哈哈哈哈哈！</p>
<p>1.2 理解作用域</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>引擎、编译器和作用域是干什么的</p>
<p>· 引擎从头到尾负责整个 JavaScript 程序的编译及执行过程。·
编译器引擎的好朋友之一，负责语法分析及代码生成等脏活累活（详见前一节的内容）。·
作用域引擎的另一位好朋友，负责收集并维护由所有声明的标识符（变量）组成的一系列查询，并实施一套非常严格的规则，确定当前执行的代码对这些标识符的访问权限。</p>
<p><span id="more"></span></p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>变量赋值操作的两个动作</p>
<p>总结：变量的赋值操作会执行两个动作，首先编译器会在当前作用域中声明一个变量（如果之前没有声明过），然后在运行时引擎会在作用域中查找该变量，如果能够找到就会对它赋值。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>LHS 查询和 RHS 查询</p>
<p>RHS 查询与简单地查找某个变量的值别无二致，而 LHS
查询则是试图找到变量的容器本身，从而可以对其赋值。从这个角度说，RHS
并不是真正意义上的“赋值操作的右侧”，更准确地说是“非左侧”。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>LHS 和 RHS
的含义是“赋值操作的左侧或右侧”并不一定意味着就是“=赋值操作符的左侧或右侧”。赋值操作还有其他几种形式，因此在概念上最好将其理解为“赋值操作的目标是谁（LHS）”以及“谁是赋值操作的源头（RHS）”。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>这段翻译的太接地气，太幽默了，哈哈哈哈哈！</p>
<p>引擎：我说作用域，我需要为 foo 进行 RHS
引用。你见过它吗？作用域：别说，我还真见过，编译器那小子刚刚声明了它。它是一个函数，给你。引擎：哥们太够意思了！好吧，我来执行一下
foo。引擎：作用域，还有个事儿。我需要为 a 进行 LHS
引用，这个你见过吗？作用域：这个也见过，编译器最近把它声名为 foo
的一个形式参数了，拿去吧。引擎：大恩不言谢，你总是这么棒。现在我要把 2
赋值给 a。引擎：哥们，不好意思又来打扰你。我要为 console 进行 RHS
引用，你见过它吗？作用域：咱俩谁跟谁啊，再说我就是干这个。这个我也有，console
是个内置对象。给你。引擎：么么哒。我得看看这里面是不是有
log(..)。太好了，找到了，是一个函数。引擎：哥们，能帮我再找一下对 a 的
RHS
引用吗？虽然我记得它，但想再确认一次。作用域：放心吧，这个变量没有变动过，拿走，不谢。引擎：真棒。我来把
a 的值，也就是 2，传递进 log(..)。……</p>
<p>1.4 异常</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>ReferenceError 同作用域判别失败相关，而 TypeError
则代表作用域判别成功了，但是对结果的操作是非法或不合理的。</p>
<p>1.5 小结</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>作用域小结</p>
<p>作用域是一套规则，用于确定在何处以及如何查找变量（标识符）。如果查找的目的是对变量进行赋值，那么就会使用
LHS 查询；如果目的是获取变量的值，就会使用 RHS 查询。赋值操作符会导致
LHS
查询。=操作符或调用函数时传入参数的操作都会导致关联作用域的赋值操作。JavaScript
引擎首先会在代码执行前对其进行编译，在这个过程中，像 var a = 2
这样的声明会被分解成两个独立的步骤：1．首先，var a
在其作用域中声明新变量。这会在最开始的阶段，也就是代码执行前进行。2．接下来，a
= 2 会查询（LHS 查询）变量 a 并对其进行赋值。LHS 和 RHS
查询都会在当前执行作用域中开始，如果有需要（也就是说它们没有找到所需的标识符），就会向上级作用域继续查找目标标识符，这样每次上升一级作用域（一层楼），最后抵达全局作用域（顶层），无论找到或没找到都将停止。不成功的
RHS 引用会导致抛出 ReferenceError 异常。不成功的 LHS
引用会导致自动隐式地创建一个全局变量（非严格模式下），该变量使用 LHS
引用的目标作为标识符，或者抛出 ReferenceError 异常（严格模式下）。</p>
<p>2.1 词法阶段</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>作用域查找的过程</p>
<p>作用域查找会在找到第一个匹配的标识符时停止。在多层的嵌套作用域中可以定义同名的标识符，这叫作“遮蔽效应”（内部的标识符“遮蔽”了外部的标识符）。抛开遮蔽效应，作用域查找始终从运行时所处的最内部作用域开始，逐级向外或者说向上进行，直到遇见第一个匹配的标识符为止。</p>
<p>3.1 函数中的作用域</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>函数作用域的含义是指，属于这个函数的全部变量都可以在整个函数的范围内使用及复用（事实上在嵌套的作用域中也可以使用）。这种设计方案是非常有用的，能充分利用
JavaScript 变量可以根据需要改变值类型的“动态”特性。</p>
<p>3.2 隐藏内部实现</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>可以把变量和函数包裹在一个函数的作用域中，然后用这个作用域来“隐藏”它们。</p>
<p>实际的结果就是在这个代码片段的周围创建了一个作用域气泡，也就是说这段代码中的任何声明（变量或函数）都将绑定在这个新创建的包装函数的作用域中，而不是先前所在的作用域中。换句话说，可以把变量和函数包裹在一个函数的作用域中，然后用这个作用域来“隐藏”它们。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>最小授权或最小暴露原则</p>
<p>它们大都是从最小特权原则中引申出来的，也叫最小授权或最小暴露原则。这个原则是指在软件设计中，应该最小限度地暴露必要内容，而将其他内容都“隐藏”起来，比如某个模块或对象的
API 设计。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>1．全局命名空间</p>
<p>3.3 函数作用域</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>[插图][插图]</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>区分函数声明和表达式的方法</p>
<p>区分函数声明和表达式最简单的方法是看 function
关键字出现在声明中的位置（不仅仅是一行代码，而是整个声明中的位置）。如果
function
是声明中的第一个词，那么就是一个函数声明，否则就是一个函数表达式。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>匿名函数表达式的缺点</p>
<p>匿名函数表达式书写起来简单快捷，很多库和工具也倾向鼓励使用这种风格的代码。但是它也有几个缺点需要考虑。1．匿名函数在栈追踪中不会显示出有意义的函数名，使得调试很困难。2．如果没有函数名，当函数需要引用自身时只能使用已经过期的
arguments.callee
引用，比如在递归中。另一个函数需要引用自身的例子，是在事件触发后事件监听器需要解绑自身。3．匿名函数省略了对于代码可读性/可理解性很重要的函数名。一个描述性的名称可以让代码不言自明。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>3.3.2
立即执行函数表达式[插图]由于函数被包含在一对()括号内部，因此成为了一个表达式，通过在末尾加上另外一个()可以立即执行这个函数，比如(function
foo(){ .. })()。第一个()将函数变成表达式，第二个()执行了这个函数。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>这种模式很常见，几年前社区给它规定了一个术语：IIFE，代表立即执行函数表达式（Immediately
Invoked Function Expression）；</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>相较于传统的 IIFE 形式，很多人都更喜欢另一个改进的形式：(function(){
..
}())。仔细观察其中的区别。第一种形式中函数表达式被包含在()中，然后在后面用另一个()括号来调用。第二种形式中用来调用的()括号被移进了用来包装的()括号中。这两种形式在功能上是一致的。选择哪个全凭个人喜好。</p>
<p>3.4 块作用域</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>let 关键字可以将变量绑定到所在的任意作用域中（通常是{ ..
}内部）。换句话说，let 为其声明的变量隐式地劫持了所在的块作用域。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>提升是指声明会被视为存在于其所出现的作用域的整个范围内。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>但是使用 let
进行的声明不会在块作用域中进行提升。声明的代码被运行之前，声明并不“存在”。[插图]</p>
<p>4.2 编译器再度来袭</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>因此，打个比方，这个过程就好像变量和函数声明从它们在代码中出现的位置被“移动”到了最上面。这个过程就叫作提升。换句话说，先有蛋（声明）后有鸡（赋值）。[插图]
只有声明本身会被提升，而赋值或其他运行逻辑会留在原地。如果提升改变了代码执行的顺序，会造成非常严重的破坏。</p>
<p>4.4 小结</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>这意味着无论作用域中的声明出现在什么地方，都将在代码本身被执行前首先进行处理。可以将这个过程形象地想象成所有的声明（变量和函数）都会被“移动”到各自作用域的最顶端，这个过程被称为提升。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>声明本身会被提升，而包括函数表达式的赋值在内的赋值操作并不会提升。要注意避免重复声明，特别是当普通的
var 声明和函数声明混合在一起的时候，否则会引起很多危险的问题！</p>
<p>5.1 启示</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>我现在就是这种感觉，好期待作者可以教我掌握闭包的概念！！！</p>
<p>对于那些有一点 JavaScript
使用经验但从未真正理解闭包概念的人来说，理解闭包可以看作是某种意义上的重生，但是需要付出非常多的努力和牺牲才能理解这个概念。回忆我前几年的时光，大量使用
JavaScript
但却完全不理解闭包是什么。总是感觉这门语言有其隐蔽的一面，如果能够掌握将会功力大涨，但讽刺的是我始终无法掌握其中的门道。</p>
<p>5.2 实质问题</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>当函数可以记住并访问所在的词法作用域时，就产生了闭包，即使函数是在当前词法作用域之外执行。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>这个函数在定义时的词法作用域以外的地方被调用。闭包使得函数可以继续访问定义时的词法作用域。</p>
<p>5.3 现在我懂了</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>给译者点个赞，翻译的真好！</p>
<p>尽管技术上来讲，闭包是发生在定义时的，但并不非常明显，就好像六祖慧能所说：“既非风动，亦非幡动，仁者心动耳。”[插图]</p>
<p>5.4 循环和闭包</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>这里引伸出一个更深入的问题，代码中到底有什么缺陷导致它的行为同语义所暗示的不一致呢？缺陷是我们试图假设循环中的每个迭代在运行时都会给自己“捕获”一个
i
的副本。但是根据作用域的工作原理，实际情况是尽管循环中的五个函数是在各个迭代中分别定义的，但是它们都被封闭在一个共享的全局作用域中，因此实际上只有一个
i。这样说的话，当然所有函数共享一个 i
的引用。循环结构让我们误以为背后还有更复杂的机制在起作用，但实际上没有。如果将延迟函数的回调重复定义五次，完全不使用循环，那它同这段代码是完全等价的。下面回到正题。缺陷是什么？我们需要更多的闭包作用域，特别是在循环的过程中每个迭代都需要一个闭包作用域。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>在迭代内使用 IIFE
会为每个迭代都生成一个新的作用域，使得延迟函数的回调可以将新的作用域封闭在每个迭代内部，每个迭代中都会含有一个具有正确值的变量供我们访问。</p>
<p>5.5 模块</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>如果要更简单的描述，模块模式需要具备两个必要条件。1．必须有外部的封闭函数，该函数必须至少被调用一次（每次调用都会创建一个新的模块实例）。2．封闭函数必须返回至少一个内部函数，这样内部函数才能在私有作用域中形成闭包，并且可以访问或者修改私有的状态。</p>
<p>5.6 小结</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>当函数可以记住并访问所在的词法作用域，即使函数是在当前词法作用域之外执行，这时就产生了闭包。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>模块有两个主要特征：（1）为创建内部作用域而调用了一个包装函数；（2）包装函数的返回值必须至少包括一个对内部函数的引用，这样就会创建涵盖整个包装函数内部作用域的闭包。</p>
<p>附录 A 动态作用域</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>主要区别：词法作用域是在写代码或者说定义时确定的，而动态作用域是在运行时确定的。（this
也是！）词法作用域关注函数在何处声明，而动态作用域关注函数从何处调用。</p>
<p>附录 B 块作用域的替代方案</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>哈哈哈哈哈，本文翻译真是鬼才<sub></sub>~</p>
<p>“但是，”你可能会说，“鬼才要写这么丑陋的代码！”没错，没人写的代码像
CoffeeScript 编译器输出的代码，但这不是重点。</p>
<p>第 1 章 关于 this</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>经典！</p>
<p>任何足够先进的技术都和魔法无异。</p>
<p>1.2 误解</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>说的不就是我嘛……(╯﹏╰)b</p>
<p>遇到这样的问题时，许多开发者并不会深入思考为什么 this
的行为和预期的不一致，也不会试图回答那些很难解决但却非常重要的问题。他们只会回避这个问题并使用其他方法来达到目的，比如创建另一个带有
count 属性的对象。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>2023 跳出舒适区！！！</p>
<p>从某种角度来说这个方法确实“解决”了问题，但可惜它忽略了真正的问题——无法理解
this
的含义和工作原理——而是返回舒适区，使用了一种更熟悉的技术：词法作用域。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>如果要从函数对象内部引用它自身，那只使用 this
是不够的。一般来说你需要通过一个指向函数对象的词法标识符（变量）来引用它。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>第一个函数被称为具名函数，在它内部可以使用 foo
来引用自身。但是在第二个例子中，传入
setTimeout(..)的回调函数没有名称标识符（这种函数被称为匿名函数），因此无法从函数内部引用自身。[插图]
还有一种传统的但是现在已经被弃用和批判的用法，是使用 arguments. callee
来引用当前正在运行的函数对象。这是唯一一种可以从匿名函数对象内部引用自身的方法。然而，更好的方式是避免使用匿名函数，至少在需要自引用时使用具名函数（表达式）。arguments.callee
已经被弃用，不应该再使用它。</p>
<p>1.4 小结</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>this
实际上是在函数被调用时发生的绑定，它指向什么完全取决于函数在哪里被调用。</p>
<p>2.1 调用位置</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>亲测谷歌浏览器调试工具最右边中间有个 Call Stack 可以显示调用栈！</p>
<p>你可以把调用栈想象成一个函数调用链，就像我们在前面代码段的注释中所写的一样。但是这种方法非常麻烦并且容易出错。另一个查看调用栈的方法是使用浏览器的调试工具。绝大多数现代桌面浏览器都内置了开发者工具，其中包含
JavaScript 调试器。就本例来说，你可以在工具中给
foo()函数的第一行代码设置一个断点，或者直接在第一行代码之前插入一条
debugger;语句。运行代码时，调试器会在那个位置暂停，同时会展示当前位置的函数调用列表，这就是你的调用栈。因此，如果你想要分析
this
的绑定，使用开发者工具得到调用栈，然后找到栈中第二个元素，这就是真正的调用位置。</p>
<p>2.2 绑定规则</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>对象属性引用链中只有上一层或者说最后一层在调用位置中起作用。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>隐式丢失一个最常见的 this
绑定问题就是被隐式绑定的函数会丢失绑定对象，也就是说它会应用默认绑定，从而把
this 绑定到全局对象或者 undefined 上，取决于是否是严格模式。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>JavaScript
中的“所有”函数都有一些有用的特性（这和它们的[[Prototype]]有关——之后我们会详细介绍原型），可以用来解决这个问题。具体点说，可以使用函数的
call(..)和 apply(..)方法。严格来说，JavaScript
的宿主环境有时会提供一些非常特殊的函数，它们并没有这两个方法。但是这样的函数非常罕见，JavaScript
提供的绝大多数函数以及你自己创建的所有函数都可以使用 call(..)和
apply(..)方法。这两个方法是如何工作的呢？它们的第一个参数是一个对象，是给
this 准备的，接着在调用函数时将其绑定到 this。因为你可以直接指定 this
的绑定对象，因此我们称之为显式绑定。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>如果你传入了一个原始值（字符串类型、布尔类型或者数字类型）来当作 this
的绑定对象，这个原始值会被转换成它的对象形式（也就是 new String(..)、new
Boolean(..)或者 new Number(..)）。这通常被称为“装箱”。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>硬绑定的典型应用场景就是创建一个包裹函数，负责接收参数并返回值：</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>另一种使用方法是创建一个可以重复使用的辅助函数：</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>使用 new
来调用函数，或者说发生构造函数调用时，会自动执行下面的操作。1．创建（或者说构造）一个全新的对象。2．这个新对象会被执行[[Prototype]]连接。3．这个新对象会绑定到函数调用的
this。4．如果函数没有返回其他对象，那么 new
表达式中的函数调用会自动返回这个新对象。</p>
<p>2.3 优先级</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>这种 bind(..)是一种 polyfill 代码（polyfill
就是我们常说的刮墙用的腻子，polyfill
代码主要用于旧浏览器的兼容，比如说在旧的浏览器中并没有内置 bind
函数，因此可以使用 polyfill 代码在旧浏览器中实现新的功能），对于 new
使用的硬绑定函数来说，这段 polyfill 代码和 ES5 内置的
bind(..)函数并不完全相同（后面会介绍为什么要在 new
中使用硬绑定函数）。由于 polyfill
并不是内置函数，所以无法创建一个不包含．prototype
的函数，因此会具有一些副作用。如果你要在 new 中使用硬绑定函数并且依赖
polyfill 代码的话，一定要非常小心。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>判断 this
现在我们可以根据优先级来判断函数在某个调用位置应用的是哪条规则。可以按照下面的顺序来进行判断：1．函数是否在
new 中调用（new 绑定）？如果是的话 this
绑定的是新创建的对象。[插图]2．函数是否通过
call、apply（显式绑定）或者硬绑定调用？如果是的话，this
绑定的是指定的对象。[插图]3．函数是否在某个上下文对象中调用（隐式绑定）？如果是的话，this
绑定的是那个上下文对象。[插图]4．如果都不是的话，使用默认绑定。如果在严格模式下，就绑定到
undefined，否则绑定到全局对象。[插图]就是这样。对于正常的函数调用来说，理解了这些知识你就可以明白
this 的绑定原理了。不过……凡事总有例外。</p>
<p>2.4 绑定例外</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>注意：对于默认绑定来说，决定 this
绑定对象的并不是调用位置是否处于严格模式，而是函数体是否处于严格模式。如果函数体处于严格模式，this
会被绑定到 undefined，否则 this 会被绑定到全局对象。</p>
<p>2.5 this 词法</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>箭头函数不使用 this
的四种标准规则，而是根据外层（函数或者全局）作用域来决定 this。</p>
<p>2.6 小结</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>如果要判断一个运行中函数的 this
绑定，就需要找到这个函数的直接调用位置。找到之后就可以顺序应用下面这四条规则来判断
this 的绑定对象。1．由 new 调用？绑定到新创建的对象。2．由 call 或者
apply（或者
bind）调用？绑定到指定的对象。3．由上下文对象调用？绑定到那个上下文对象。4．默认：在严格模式下绑定到
undefined，否则绑定到全局对象。一定要注意，有些调用可能在无意中使用默认绑定规则。如果想“更安全”地忽略
this 绑定，你可以使用一个 DMZ 对象，比如 ø =
Object.create(null)，以保护全局对象。ES6
中的箭头函数并不会使用四条标准的绑定规则，而是根据当前的词法作用域来决定
this，具体来说，箭头函数会继承外层函数调用的 this 绑定（无论 this
绑定到什么）。这其实和 ES6 之前代码中的 self = this 机制一样。</p>
<p>3.3 内容</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>在对象中，属性名永远都是字符串。如果你使用
string（字面量）以外的其他值作为属性名，那它首先会被转换为一个字符串。即使是数字也不例外，虽然在数组下标中使用的的确是数字，但是在对象属性名中数字会被转换成字符串，所以当心不要搞混对象和数组中数字的用法：</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>给数组添加属性，数组的 length 值不会发生改变</p>
<p>可以看到虽然添加了命名属性（无论是通过．语法还是[]语法），数组的
length 值并未发生变化。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>你完全可以把数组当作一个普通的键/值对象来使用，并且不添加任何数值索引，但是这并不是一个好主意。数组和普通的对象都根据其对应的行为和用途进行了优化，所以最好只用对象来存储键/值对，只用数组来存储数值下标/值对</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>注意：如果你试图向数组添加一个属性，但是属性名“看起来”像一个数字，那它会变成一个数值下标（因此会修改数组的内容而不是添加一个属性）：</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>如你所见，这个普通的对象属性对应的属性描述符（也被称为“数据描述符”，因为它只保存一个数据值）可不仅仅只是一个
2。它还包含另外三个特性：writable（可写）、enumerable（可枚举）和
configurable（可配置）。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>在创建普通属性时属性描述符会使用默认值，我们也可以使用
Object.defineProperty(..)来添加一个新属性或者修改一个已有属性（如果它是
configurable）并对特性进行设置。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>1．Writablewritable 决定是否可以修改属性的值。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>2．Configurable 只要属性是可配置的，就可以使用
defineProperty(..)方法来修改属性描述符：</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>把 configurable 修改成 false 是单向操作，无法撤销！</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>3．Enumerable
这里我们要介绍的最后一个属性描述符（还有两个，我们会在介绍 getter 和
setter 时提到）是
enumerable。从名字就可以看出，这个描述符控制的是属性是否会出现在对象的属性枚举中，比如说
for..in 循环。如果把 enumerable 设置成
false，这个属性就不会出现在枚举中，虽然仍然可以正常访问它。相对地，设置成
true 就会让它出现在枚举中。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>1．对象常量结合 writable:false 和 configurable:false
就可以创建一个真正的常量属性（不可修改、重定义或者删除）：</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>2．禁止扩展如果你想禁止一个对象添加新属性并且保留已有属性，可以使用
Object.prevent Extensions(..)：</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>3．密封
Object.seal(..)会创建一个“密封”的对象，这个方法实际上会在一个现有对象上调用
Object.preventExtensions(..)并把所有现有属性标记为
configurable:false。所以，密封之后不仅不能添加新属性，也不能重新配置或者删除任何现有属性（虽然可以修改属性的值）。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>4．冻结
Object.freeze(..)会创建一个冻结对象，这个方法实际上会在一个现有对象上调用
Object.seal(..)并把所有“数据访问”属性标记为
writable:false，这样就无法修改它们的值。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>in 操作符会检查属性是否在对象及其[[Prototype]]原型链中（参见第 5
章）。相比之下，hasOwnProperty(..)只会检查属性是否在 myObject
对象中，不会检查[[Prototype]]链。在第 5
章讲解[[Prototype]]时我们会详细介绍这两者的区别。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>原因是“可枚举”就相当于“可以出现在对象属性的遍历中”。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>在数组上应用 for..in
循环有时会产生出人意料的结果，因为这种枚举不仅会包含所有数值索引，还会包含所有可枚举属性。最好只在对象上应用
for..in 循环，如果要遍历数组就使用传统的 for 循环来遍历数值索引。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>propertyIsEnumerable(..)会检查给定的属性名是否直接存在于对象中（而不是在原型链上）并且满足
enumerable:true。Object.keys(..)会返回一个数组，包含所有可枚举属性，Object.getOwnPropertyNames(..)会返回一个数组，包含所有属性，无论它们是否可枚举。in
和
hasOwnProperty(..)的区别在于是否查找[[Prototype]]链，然而，Object.keys(..)和
Object.getOwnPropertyNames(..)都只会查找对象直接包含的属性。（目前）并没有内置的方法可以获取
in
操作符使用的属性列表（对象本身的属性以及[[Prototype]]链中的所有属性，参见第
5
章）。不过你可以递归遍历某个对象的整条[[Prototype]]链并保存每一层中使用
Object.keys(..)得到的属性列表——只包含可枚举属性。</p>
<p>3.4 遍历</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>ES5 中增加了一些数组的辅助迭代器，包括 forEach(..)、every(..)和
some(..)。每种辅助迭代器都可以接受一个回调函数并把它应用到数组的每个元素上，唯一的区别就是它们对于回调函数返回值的处理方式不同。forEach(..)会遍历数组中的所有值并忽略回调函数的返回值。every(..)会一直运行直到回调函数返回
false（或者“假”值）, some(..)会一直运行直到回调函数返回
true（或者“真”值）。every(..)和 some(..)中特殊的返回值和普通 for
循环中的 break 语句类似，它们会提前终止遍历。使用 for..in
遍历对象是无法直接获取属性值的，因为它实际上遍历的是对象中的所有可枚举属性，你需要手动获取属性值。</p>
<p>4.4 混入</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>mixin() 函数</p>
<p>回顾一下之前提到的 mixin(..)函数：[插图][插图]现在我们来分析一下
mixin(..)的工作原理。它会遍历 sourceObj（本例中是
Vehicle）的属性，如果在 targetObj（本例中是
Car）没有这个属性就会进行复制。由于我们是在目标对象初始化之后才进行复制，因此一定要小心不要覆盖目标对象的原有属性。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>一定要注意，只在能够提高代码可读性的前提下使用显式混入，避免使用增加代码理解难度或者让对象关系更加复杂的模式。</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>如果使用混入时感觉越来越困难，那或许你应该停止使用它了。实际上，如果你必须使用一个复杂的库或者函数来实现这些细节，那就标志着你的方法是有问题的或者是不必要的</p>
<p>5.3 （原型）继承</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>下面是第二种判断[[Prototype]]反射的方法，它更加简洁：[插图]</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>我们也可以直接获取一个对象的[[Prototype]]链。在 ES5
中，标准的方法是：[插图]</p>
<p>5.4 对象关联</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTYuMjUgOC44MzkxOUM2LjI0OTUxIDYuMzM5MTkgOC4yNzM4MSA1LjAyOTY2IDEwLjA1OTUgNS4wMjk2NkMxMS44NDUyIDUuMDI5NjYgMTMuNjMxIDYuNjk2MzMgMTMuNjMxIDguMTI0OUMxMy42MzEgOC40MzQ3MyAxMy42NzkzIDguOTYyMjkgMTMuNzc2MSA5LjcwNzU2QzEzLjgyNzQgMTAuMTAzIDEzLjU5MTUgMTAuNDc5MyAxMy4yMTMyIDEwLjYwNTRMMTIuNzk3NiAxMC43NDM5VjEwLjkwNjhDMTIuNzk3NiAxMi4wNjY5IDExLjk5OTUgMTMuMDc0NiAxMC44NzAyIDEzLjM0MDNMMTAuNzczOCAxMy4zNjNWMTQuNTUzNUM5LjA3NDEzIDE0LjY3MTMgNy44ODM2NSAxNC4yNzQ1IDcuMjAyMzggMTMuMzYzQzcuMjAyMzggMTIuMTEyIDYuODg0OTIgMTAuNjA0MSA2LjI1IDguODM5MTlaTTkuNTIzODEgMTIuMzczTDEwLjU4MzkgMTIuMTIzNUMxMS4xNDg2IDExLjk5MDcgMTEuNTQ3NiAxMS40ODY4IDExLjU0NzYgMTAuOTA2OFY5Ljg0M0wxMi40OTM3IDkuNTI3NjRDMTIuNDE4OCA4LjkwNzM2IDEyLjM4MSA4LjQ0NjcgMTIuMzgxIDguMTI0OUMxMi4zODEgNy4zODE5NCAxMS4xNDA5IDYuMjc5NjYgMTAuMDU5NSA2LjI3OTY2QzguNzI0OSA2LjI3OTY2IDcuNjAwOTMgNy4yMTUyNSA3LjUwNjQzIDguNjQyMzVDOC4wNTcxOSAxMC4yMTk1IDguMzcwMjYgMTEuNjIyMiA4LjQzODI1IDEyLjg1ODlDOC42OTU5NCAxMy4wNjk0IDkuMDUyMDIgMTMuMjEzNCA5LjUyMzgxIDEzLjI4MDhWMTIuMzczWk0xMS45NjI0IDE0LjI3MDZDMTEuOTkyNSAxNC42MTQ1IDEyLjI5NTcgMTQuODY4OSAxMi42Mzk1IDE0LjgzODhDMTMuOTAwNCAxNC43Mjg1IDE0LjgzMyAxMy42MTY5IDE0LjcyMjcgMTIuMzU2MUMxNC42OTI3IDEyLjAxMjIgMTQuMzg5NSAxMS43NTc5IDE0LjA0NTYgMTEuNzg3OUMxMy43MDE4IDExLjgxOCAxMy40NDc0IDEyLjEyMTIgMTMuNDc3NSAxMi40NjVDMTMuNTI3NiAxMy4wMzgxIDEzLjEwMzcgMTMuNTQzNCAxMi41MzA2IDEzLjU5MzVDMTIuMTg2NyAxMy42MjM2IDExLjkzMjMgMTMuOTI2OCAxMS45NjI0IDE0LjI3MDZaIiBmaWxsPSIjOTlBMEFBIi8+Cjwvc3ZnPgo="
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>原型链</p>
<p>现在我们知道了，[[Prototype]]机制就是存在于对象中的一个内部链接，它会引用其他对象。通常来说，这个链接的作用是：如果在对象上没有找到需要的属性或者方法引用，引擎就会继续在[[Prototype]]关联的对象上进行查找。同理，如果在后者中也没有找到需要的引用就会继续查找它的[[Prototype]]，以此类推。这一系列对象的链接被称为“原型链”。</p>
<p>5.5 小结</p>
<figure>
<img
src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiM3Nzc3NzciIGZpbGwtb3BhY2l0eT0iMC4xNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEzLjM1MDUgMTIuMDgzMkgxMi4xMDQ3TDExLjU3MzggMTAuNTM0SDguNTI5NjhMNy45OTg4NCAxMi4wODMySDYuNzUzMDFMOS41ODA1MSA0LjM2OTg3SDEwLjUyM0wxMy4zNTA1IDEyLjA4MzJaTTExLjI0ODggOS41MzczN0wxMC4wNzg4IDYuMTE0MDRMOC44NzYzNCA5LjUzNzM3SDExLjI0ODhaTTEzLjMzMzQgMTMuNzVINi42NjY3NVYxNUgxMy4zMzM0VjEzLjc1WiIgZmlsbD0iIzk5QTBBQSIvPgo8L3N2Zz4K"
alt="underline" />
<figcaption aria-hidden="true">underline</figcaption>
</figure>
<p>如果要访问对象中并不存在的一个属性，[[Get]]操作（参见第 3
章）就会查找对象内部[[Prototype]]关联的对象。这个关联关系实际上定义了一条“原型链”（有点像嵌套的作用域链），在查找属性时会对它进行遍历。所有普通对象都有内置的
Object.prototype，指向原型链的顶端（比如说全局作用域），如果在原型链中找不到指定的属性就会停止。toString()、valueOf()和其他一些通用的功能都存在于
Object.prototype
对象上，因此语言中所有的对象都可以使用它们。关联两个对象最常用的方法是使用
new 关键词进行函数调用，在调用的 4 个步骤（第 2
章）中会创建一个关联其他对象的新对象。使用 new
调用函数时会把新对象的．prototype 属性关联到“其他对象”。带 new
的函数调用通常被称为“构造函数调用”，尽管它们实际上和传统面向类语言中的类构造函数不一样。虽然这些
JavaScript 机制和传统面向类语言中的“类初始化”和“类继承”很相似，但是
JavaScript
中的机制有一个核心区别，那就是不会进行复制，对象之间是通过内部的[[Prototype]]链关联的。出于各种原因，以“继承”结尾的术语（包括“原型继承”）和其他面向对象的术语都无法帮助你理解
JavaScript
的真实机制（不仅仅是限制我们的思维模式）。相比之下，“委托”是一个更合适的术语，因为对象之间的关系不是复制而是委托。</p>
<p>微信读书</p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>npm 配置使用淘宝镜像</title>
    <url>/2023/04/10/npm-%E9%85%8D%E7%BD%AE%E4%BD%BF%E7%94%A8%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在npm中设置淘宝镜像可以使用以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm config set registry https://registry.npm.taobao.org/</span><br></pre></td></tr></table></figure>
<p>如果要恢复回默认的官方镜像，可以使用以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm config set registry https://registry.npmjs.org/</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>npm</tag>
        <tag>淘宝镜像</tag>
      </tags>
  </entry>
  <entry>
    <title>各种排序算法的性能</title>
    <url>/2023/04/06/%E5%90%84%E7%A7%8D%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E6%80%A7%E8%83%BD/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<img src="/2023/04/06/%E5%90%84%E7%A7%8D%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E6%80%A7%E8%83%BD/%E5%90%84%E7%A7%8D%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%9A%84%E6%80%A7%E8%83%BD.jpg" class="">
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>中国居民平衡膳食餐盘</title>
    <url>/2023/04/20/%E4%B8%AD%E5%9B%BD%E5%B1%85%E6%B0%91%E5%B9%B3%E8%A1%A1%E8%86%B3%E9%A3%9F%E9%A4%90%E7%9B%98/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<img src="/2023/04/20/%E4%B8%AD%E5%9B%BD%E5%B1%85%E6%B0%91%E5%B9%B3%E8%A1%A1%E8%86%B3%E9%A3%9F%E9%A4%90%E7%9B%98/%E4%B8%AD%E5%9B%BD%E5%B1%85%E6%B0%91%E5%B9%B3%E8%A1%A1%E8%86%B3%E9%A3%9F%E9%A4%90%E7%9B%981.jpeg" class="">
<span id="more"></span>
<img src="/2023/04/20/%E4%B8%AD%E5%9B%BD%E5%B1%85%E6%B0%91%E5%B9%B3%E8%A1%A1%E8%86%B3%E9%A3%9F%E9%A4%90%E7%9B%98/%E4%B8%AD%E5%9B%BD%E5%B1%85%E6%B0%91%E5%B9%B3%E8%A1%A1%E8%86%B3%E9%A3%9F%E9%A4%90%E7%9B%982.jpeg" class="">
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>膳食餐盘</tag>
      </tags>
  </entry>
  <entry>
    <title>Echarts 自定义 X 轴标签个数</title>
    <url>/2023/04/25/Echarts%E8%87%AA%E5%AE%9A%E4%B9%89X%E8%BD%B4%E6%A0%87%E7%AD%BE%E4%B8%AA%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>首先可以阅读 Echarts 官网关于<a
href="https://echarts.apache.org/handbook/zh/concepts/axis/">坐标轴</a>的相关知识。</p>
<ol type="1">
<li>必须显示 X 轴第一个和最后一个标签</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xAxis: &#123;</span><br><span class="line">  axisLabel: &#123;</span><br><span class="line">    showMinLabel: true,</span><br><span class="line">    showMaxLabel: true</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ol start="2" type="1">
<li>显示第一个、最后一个，中间任意个,显示的个数由 num 控制</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xAxis: &#123;</span><br><span class="line">  axisLabel: &#123;</span><br><span class="line">    showMinLabel: true,</span><br><span class="line">    showMaxLabel: true,</span><br><span class="line">    interval: Math.ceil(data.length / num)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li>通过格式化的方式实现</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xAxis: &#123;</span><br><span class="line">  data: data,</span><br><span class="line">  axisLabel: &#123;</span><br><span class="line">    formatter(val, i) &#123;</span><br><span class="line">      if (</span><br><span class="line">        i === 0 ||</span><br><span class="line">        i === data.length - 1 ||</span><br><span class="line">        i === Math.ceil(data.length / 2)</span><br><span class="line">      ) &#123;</span><br><span class="line">        return val;</span><br><span class="line">      &#125;</span><br><span class="line">      return &quot;&quot;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Echarts</tag>
        <tag>X 轴标签</tag>
      </tags>
  </entry>
  <entry>
    <title>VS Code 常用快捷键</title>
    <url>/2023/04/14/VS-Code-%E5%B8%B8%E7%94%A8%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="general-通用">General 通用</h1>
<p><strong>Ctrl+Shift+P, F1</strong> Show Command Palette
显示命令面板<br />
<strong>Ctrl+P</strong> Quick Open, Go to File…
快速打开，跳转到文件<br />
<strong>Ctrl+Shift+N</strong> New window/instance 新建窗口/实例<br />
<strong>Ctrl+Shift+W</strong> Close window/instance 关闭窗口/实例<br />
<strong>Ctrl+,</strong> User Settings 用户设置<br />
<strong>Ctrl+K Ctrl+S</strong> Keyboard Shortcuts 键盘快捷键</p>
<span id="more"></span>
<h1 id="basic-editing-基本编辑">Basic editing 基本编辑</h1>
<p><strong>Ctrl+X</strong> Cut line (empty selection)
剪切行（未选中）<br />
<strong>Ctrl+C</strong> Copy line (empty selection)
复制行（未选中）<br />
<strong>Alt+ ↑ / ↓</strong> Move line up/down 移动行上下<br />
<strong>Shift+Alt + ↓ / ↑</strong> Copy line up/down 复制行上下<br />
<strong>Ctrl+Shift+K</strong> Delete line 删除行<br />
<strong>Ctrl+Enter</strong> Insert line below 在下方插入行<br />
<strong>Ctrl+Shift+Enter</strong> Insert line above 在上方插入行<br />
<strong>Ctrl+Shift+\</strong> Jump to matching bracket
跳转到匹配的括号<br />
<strong>Ctrl+] / [</strong> Indent/outdent line 调整代码缩进<br />
<strong>Home / End</strong> Go to beginning/end of line
移动光标到行首/行尾<br />
<strong>Ctrl+Home</strong> Go to beginning of file
移动光标到文件开头<br />
<strong>Ctrl+End</strong> Go to end of file 移动光标到文件结尾<br />
<strong>Ctrl+↑ / ↓</strong> Scroll line up/down 滚屏一行<br />
<strong>Alt+PgUp / PgDn</strong> Scroll page up/down 滚屏一页<br />
<strong>Ctrl+Shift+[** Fold (collapse) region 折叠代码块<br />
**Ctrl+Shift+]</strong> Unfold (uncollapse) region 展开代码块<br />
<strong>Ctrl+K Ctrl+[** Fold (collapse) all subregions
折叠全部子代码块<br />
**Ctrl+K Ctrl+]</strong> Unfold (uncollapse) all subregions
展开全部子代码块<br />
<strong>Ctrl+K Ctrl+0</strong> Fold (collapse) all regions
折叠所有代码块<br />
<strong>Ctrl+K Ctrl+J</strong> Unfold (uncollapse) all regions
展开所有代码块<br />
<strong>Ctrl+K Ctrl+C</strong> Add line comment 添加行注释<br />
<strong>Ctrl+K Ctrl+U</strong> Remove line comment 取消行注释<br />
<strong>Ctrl+/</strong> Toggle line comment
切换行注释（添加或删除）<br />
<strong>Shift+Alt+A</strong> Toggle block comment
切换代码块注释（添加或删除）<br />
<strong>Alt+Z</strong> Toggle word wrap
切换自动换行：将文本编辑器中的自动换行模式打开或关闭</p>
<h1 id="navigation-导航">Navigation 导航</h1>
<p><strong>Ctrl+T</strong> Show all Symbols 显示所有符号<br />
<strong>Ctrl+G</strong> Go to Line… 转到行……<br />
<strong>Ctrl+P</strong> Go to File… 转到文件……<br />
<strong>Ctrl+Shift+O</strong> Go to Symbol… 转到符号……<br />
<strong>Ctrl+Shift+M</strong> Show Problems panel 显示问题面板<br />
<strong>F8</strong> Go to next error or warning
转到下一个错误或警告<br />
<strong>Shift+F8</strong> Go to previous error or warning
转到上一个错误或警告<br />
<strong>Ctrl+Shift+Tab</strong> Navigate editor group history
导航至编辑器组历史记录<br />
<strong>Alt+ ← / →</strong> Go back / forward 后退 / 前进<br />
<strong>Ctrl+M</strong> Toggle Tab moves focus 切换 Tab 键移动焦点</p>
<h1 id="search-and-replace-搜索和替换">Search and replace
搜索和替换</h1>
<p><strong>Ctrl+F</strong> Find 查找<br />
<strong>Ctrl+H</strong> Replace 替换<br />
<strong>F3 / Shift+F3</strong> Find next/previous
查找下一个/上一个<br />
<strong>Alt+Enter</strong> Select all occurences of Find match
选择”查找匹配项“的所有匹配项（选中所有）<br />
<strong>Ctrl+D</strong> Add selection to next Find match
将所选内容添加到下一个查找匹配项<br />
<strong>Ctrl+K Ctrl+D</strong> Move last selection to next Find match
将上一个选择移动到下一个查找匹配项<br />
<strong>Alt+C / R / W</strong> Toggle case-sensitive / regex / whole
word 切换区分大小写 / 正则表达式 / 整个单词</p>
<h1 id="multi-cursor-and-selection-多光标和选择">Multi-cursor and
selection 多光标和选择</h1>
<p><strong>Alt+Click</strong> Insert cursor 单击插入光标<br />
<strong>Ctrl+Alt+ ↑ / ↓</strong> Insert cursor above / below
在上方/下方插入鼠标<br />
<strong>Ctrl+U</strong> Undo last cursor operation
撤销上次光标操作<br />
<strong>Shift+Alt+I</strong> Insert cursor at end of each line selected
在所选每行的末尾插入光标<br />
<strong>Ctrl+L</strong> Select current line 选择当前行<br />
<strong>Ctrl+Shift+L</strong> Select all occurrences of current
selection 选择当前所选内容的所有匹配项<br />
<strong>Ctrl+F2</strong> Select all occurrences of current word
选择当前单词的所有匹配项<br />
<strong>Shift+Alt+→</strong> Expand selection 扩展所选内容<br />
<strong>Shift+Alt+←</strong> Shrink selection 收缩选择<br />
<strong>Shift+Alt +(drag mouse)</strong> Column (box) selection
列（框）选择<br />
<strong>Ctrl+Shift+Alt + (arrow key)</strong> Column (box) selection
列（框）选择<br />
<strong>Ctrl+Shift+Alt+PgUp/PgDn</strong> Column (box) selection page
up/down 列（框）选择页向上/向下</p>
<h1 id="rich-languages-editing-丰富的语言编辑">Rich languages editing
丰富的语言编辑</h1>
<p><strong>Ctrl+Space, Ctrl+I</strong> Trigger suggestion
触发输入建议<br />
<strong>Ctrl+Shift+Space</strong> Trigger parameter hints
触发参数提示<br />
<strong>Shift+Alt+F</strong> Format document 格式化文档<br />
<strong>Ctrl+K Ctrl+F</strong> Format selection 格式选择<br />
<strong>F12</strong> Go to Definition 转到定义<br />
<strong>Alt+F12</strong> Peek Definition 速览定义<br />
<strong>Ctrl+K F12</strong> Open Definition to the side
向一侧打开定义<br />
<strong>Ctrl+.</strong> Quick Fix 快速修复<br />
<strong>Shift+F12</strong> Show References 显示参考<br />
<strong>F2</strong> Rename Symbol 重命名<br />
<strong>Ctrl+K Ctrl+X</strong> Trim trailing whitespace
删除尾部空格<br />
<strong>Ctrl+K M</strong> Change file language 修改文件类型</p>
<h1 id="editor-management-编辑管理">Editor management 编辑管理</h1>
<p><strong>Ctrl+F4, Ctrl+W</strong> Close editor 关闭编辑器<br />
<strong>Ctrl+K F</strong> Close folder 关闭文件夹<br />
<strong>Ctrl+\</strong> Split editor 分割编辑器<br />
<strong>Ctrl+ 1 / 2 / 3</strong> Focus into 1st, 2nd or 3rd editor group
聚焦到 1、2 或 3 编辑器组<br />
<strong>Ctrl+K Ctrl+ ←/→</strong> Focus into previous/next editor group
聚焦到上一个/下一个编辑器组<br />
<strong>Ctrl+Shift+PgUp / PgDn</strong> Move editor left/right
左/右移动编辑器<br />
<strong>Ctrl+K ← / →</strong> Move active editor group
移动活动编辑器组</p>
<h1 id="file-management-文件管理">File management 文件管理</h1>
<p><strong>Ctrl+N</strong> New File 新建文件<br />
<strong>Ctrl+O</strong> Open File…打开文件<br />
<strong>Ctrl+S</strong> Save 保存<br />
<strong>Ctrl+Shift+S</strong> Save As…另存为…<br />
<strong>Ctrl+K S</strong> Save All 全部保存<br />
<strong>Ctrl+F4</strong> Close 关闭<br />
<strong>Ctrl+K Ctrl+W</strong> Close All 全部关闭<br />
<strong>Ctrl+Shift+T</strong> Reopen closed editor
重新打开关闭的编辑器<br />
<strong>Ctrl+K</strong> Enter Keep preview mode editor open
保持浏览模式编辑器打开<br />
<strong>Ctrl+Tab</strong> Open next 打开下一个<br />
<strong>Ctrl+Shift+Tab</strong> Open previous 打开上一个<br />
<strong>Ctrl+K P</strong> Copy path of active file
复制活动文件的路径<br />
<strong>Ctrl+K R</strong> Reveal active file in Explorer
在资源管理器中显示活动文件<br />
<strong>Ctrl+K O</strong> Show active file in new window/instance
在新窗口/实例中显示活动文件</p>
<h1 id="display-显示">Display 显示</h1>
<p><strong>F11</strong> Toggle full screen 切换全屏<br />
<strong>Shift+Alt+0</strong> Toggle editor layout (horizontal/vertical)
切换编辑器布局（水平/垂直)<br />
<strong>Ctrl+ = / -</strong> Zoom in/out 放大/缩小<br />
<strong>Ctrl+B</strong> Toggle Sidebar visibility
切换侧边栏是否可见<br />
<strong>Ctrl+Shift+E</strong> Show Explorer / Toggle focus
显示资源管理器/切换焦点<br />
<strong>Ctrl+Shift+F</strong> Show Search 显示搜索<br />
<strong>Ctrl+Shift+G</strong> Show Source Control 显示源代码管理<br />
<strong>trl+Shift+D</strong> Show Debug 显示调试<br />
<strong>Ctrl+Shift+X</strong> Show Extensions 显示扩展<br />
<strong>Ctrl+Shift+H</strong> Replace in files 在文件中替换<br />
<strong>Ctrl+Shift+J</strong> Toggle Search details
切换搜索详细信息<br />
<strong>Ctrl+Shift+U</strong> Show Output panel 显示输出面板<br />
<strong>Ctrl+Shift+V</strong> Open Markdown preview 打开 Markdown
预览<br />
<strong>Ctrl+K V</strong> Open Markdown preview to the side 在侧面打开
Markdown 预览<br />
<strong>Ctrl+K Z</strong> Zen Mode (Esc Esc to exit) Zen 模式（Esc Esc
退出）</p>
<h1 id="debug-调试">Debug 调试</h1>
<p><strong>F9</strong> Toggle breakpoint 切换断点<br />
<strong>F5</strong> Start/Continue 开始/继续<br />
<strong>Shift+F5</strong> Stop 停止<br />
<strong>F11 / Shift+F11</strong> Step into/out 进入/退出<br />
<strong>F10</strong> Step over 跳过<br />
<strong>Ctrl+K Ctrl+I</strong> Show hover 显示悬停</p>
<h1 id="integrated-terminal-集成终端">Integrated terminal 集成终端</h1>
<p><strong>Ctrl+Shift+`</strong> Create new terminal 新建终端
<strong>Ctrl+C</strong> Copy selection 复制选择 <strong>Ctrl+V</strong>
Paste into active terminal 粘贴到活动终端 <strong>Ctrl+↑ / ↓</strong>
Scroll up/down 向上/向下滚动 <strong>Shift+PgUp / PgDn</strong> Scroll
page up/down 向上/向下滚动页面 <strong>Ctrl+Home / End</strong> Scroll
to top/bottom 滚动到顶部/底部</p>
<h1 id="reference">Reference</h1>
<p>Keyboard shortcuts for Windows 以上为 Windows 快捷键 Other operating
systems’ keyboard shortcuts and additional unassigned shortcuts
available at aka.ms/vscodekeybindings
其他操作系统的键盘快捷键和其他未分配的快捷键可在
aka.ms/vscodekeybindings 上找到</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>快捷键</tag>
        <tag>VS Code</tag>
      </tags>
  </entry>
  <entry>
    <title>写给中国父母的话</title>
    <url>/2023/04/27/%E5%86%99%E7%BB%99%E4%B8%AD%E5%9B%BD%E7%88%B6%E6%AF%8D%E7%9A%84%E8%AF%9D/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>亲爱的家长朋友:</p>
<p>你们好!</p>
<p>每天，和孩子一起亲子共读的时间，必将成为你们彼此生命里共同度过的最有品质并且对未来最具深远影响的时光。这样的说法，是有理论依据的。现在，我和大家分享一些我的观点
。</p>
<p>在一天紧张繁忙的工作之余，和孩子一起读书，是放慢生活节奏、享受温暖和亲密的亲子时光的绝佳机会。心理学家把这叫作“建立亲子纽带的经历”，认为这样能培养孩子稳定的情绪，使其感受到全身心的爱护以及安全感等重要情感。每天，你可以花半个小时左右的时间，在家里和孩子一起阅读。</p>
<p>为孩子阅读，也是对孩子的一种滋养。脑科学家已经证实，那些经常和父母以及关爱他们的长辈一起读书的幼童，控制语言能力发展的那部分大脑发育得更迅速，也更充分。优秀图画书里的丰富词汇，将是孩子健康成长的最基本精神食粮；而书里充满表现力的图画，也起着同样的作用。和孩子分享这些图画，对其大脑的生长发育具有益处。从事这项研究的科学家同时指出，为孩子读书，开始得越早越好。</p>
<span id="more"></span>
<p>众所周知，掌握阅读能力是孩子取得好的学业成的绩并在日后生活中制胜的关键之一。但鲜为人知的是，如果从生命之初。父母就帮助孩子发现阅读所带来的知识和乐趣，有可能让他成为终生热爱阅读的人。和孩子共读优秀的图画书，分享那些生动的多样的故事以及引人人胜、缤纷的图画，是一种最好的方法，能让父母帮助幼小的孩子认识到这样一个真理——阅读能够改变命运。</p>
<p>许多父母会担心自己不了解为孩子阅读图画书的正确方法。这里，我给大家一些建议:</p>
<p>首先，别担心，无论你的表现如何，孩子都会非常喜欢你的“表演”。在为孩子读书时，你完全不必当一名演员，甚至无须是一个流畅的朗读者。真正重要的是，你在阅读过程中所努力表现出的对孩子深深的爱。正是这种爱，使亲子共读成为你和孩子之间独特而深具成长意义的经历。把书的作者和绘画者当作你和孩子的帮手吧！请记住：为孩子读书，没有错误的方法，只要读就是正确的。</p>
<p>通常来说，从开头读到结尾，是阅读图画书的有效方法。但是有时候，孩子会对某一幅图画产生特别的兴趣，想仔细观察一番。如果是这样，不要急急忙忙翻到下一页。请将这本书当作你和孩子之间对话的源头。和孩子一起讨论一本书，
是建立“亲子纽带”的良好途径之一。</p>
<p>你可以试着给孩子读各种各样的图画书，观察孩子的反应。渐渐地，你就会发现孩子最喜欢的故事类型。每个孩子都有自己独特的喜好。即便是最经典的书，也未必适合每一个孩子。</p>
<p>如果孩子一遍又一遍地要求你阅读同一本书，那应该是他在这本书的文字或者图画里，发现了对他而言具有独特意义的事物。你要满足孩子的需求，一遍遍地读给他听，并让孩子明白你懂得他的感受，使孩子成为亲子阅读的引领者。</p>
<p>最后，如果你发现自己被孩子的图画书深深地吸引了，并且急切渴盼下一次亲子共读时光的到来，请不要感到惊讶。真正优秀的图画书不分国界和年龄，能提供给我们人生智慧和日常生活的体验。这些精彩的故事和美丽的图画所提供的无与伦比的阅读体验，能够满足所有人的需要。</p>
<p>(美国著名童书研究专家 伦纳德.S.马库斯)</p>
<p>PS:本文摘抄于绘本《老鼠牙仙》中作者写给中国父母的话</p>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>亲自共读</tag>
      </tags>
  </entry>
  <entry>
    <title>antv G6 标签文本 label 及其配置 labelCfg</title>
    <url>/2023/04/28/antv-G6-%E6%A0%87%E7%AD%BE%E6%96%87%E6%9C%AC-label-%E5%8F%8A%E5%85%B6%E9%85%8D%E7%BD%AE-labelCfg/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>官网文档见下，mark！ <a
href="https://g6-v3-2.antv.vision/zh/docs/manual/middle/elements/nodes/defaultNode/#%E6%A0%87%E7%AD%BE%E6%96%87%E6%9C%AC-label-%E5%8F%8A%E5%85%B6%E9%85%8D%E7%BD%AE-labelcfg">标签文本
label 及其配置 labelCfg</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>antv G6</tag>
        <tag>label</tag>
        <tag>labelCfg</tag>
      </tags>
  </entry>
  <entry>
    <title>防抖和节流</title>
    <url>/2023/05/15/%E9%98%B2%E6%8A%96%E5%92%8C%E8%8A%82%E6%B5%81/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>防抖和节流是前端开发中常用的两种性能优化技术，它们都可以帮助我们避免过多的函数调用和网络请求，从而提高网站的性能和用户体验。</p>
<blockquote>
<p>防抖(debounce)</p>
</blockquote>
<p>防抖是指在短时间内连续触发同一事件时，只会执行一次函数。简单来说，就是延迟执行函数。在这个短时间内，如果又触发了该事件，则重新计算函数执行的时间。</p>
<p>以下是一个实现防抖的例子：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timer;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">    timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      func.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 在输入框连续输入时，只有最后一次输入后才会触发函数。</span></span><br><span class="line"><span class="keyword">const</span> input = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;input&quot;</span>);</span><br><span class="line">input.<span class="title function_">addEventListener</span>(</span><br><span class="line">  <span class="string">&quot;input&quot;</span>,</span><br><span class="line">  <span class="title function_">debounce</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;searching...&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">500</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>在上面的例子中，我们定义了一个
debounce()函数，它接受两个参数：要执行的函数和延迟时间。当事件被触发时，该函数会清除之前设置的定时器，并重新设置一个新的定时器。只有在短时间内没有再次触发该事件，定时器到期后才会执行回调函数。</p>
<blockquote>
<p>节流(throttle)</p>
</blockquote>
<p>节流是指在一段时间内只能触发一次函数。与防抖不同，它不会在最后一次触发事件后等待一段时间再执行函数，而是固定间隔执行函数。</p>
<p>以下是一个实现节流的例子：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">throttle</span>(<span class="params">func, delay</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> lastTime = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> now = +<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    <span class="keyword">if</span> (now - lastTime &gt;= delay) &#123;</span><br><span class="line">      func.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">      lastTime = now;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 滚动页面时每200ms执行一次函数。</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(</span><br><span class="line">  <span class="string">&quot;scroll&quot;</span>,</span><br><span class="line">  <span class="title function_">throttle</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;scrolling...&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">200</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>在上面的例子中，我们定义了一个
throttle()函数，它接受两个参数：要执行的函数和时间间隔。当事件被触发时，该函数会检查当前时间是否距离上一次执行函数已经超过了指定的时间间隔。如果超过了时间间隔，则执行函数并更新上次执行函数的时间。</p>
<p>防抖和节流的区别</p>
<ul>
<li>防抖是在短时间内连续触发同一事件时只会执行一次函数，节流是在一段时间内只能触发一次函数。</li>
<li>防抖延迟执行函数，节流固定时间间隔执行函数。</li>
<li>防抖适合处理频繁触发的事件，例如输入框搜索，防止向服务器发送多次请求；节流适合处理流式事件，如鼠标滚动，鼠标移动等，防止过多计算。</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>防抖</tag>
        <tag>节流</tag>
      </tags>
  </entry>
  <entry>
    <title>常用 URL</title>
    <url>/2023/05/05/%E5%B8%B8%E7%94%A8-URL/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="技术类">技术类</h1>
<ol type="1">
<li><a href="https://webpack.docschina.org/concepts/">webpack
中文文档</a></li>
<li><a href="https://webpack.js.org/">webpack 英文文档</a></li>
<li><a href="https://zh-hans.react.dev/learn">React 中文文档</a></li>
<li><a href="https://react.dev/">React 英文文档</a></li>
<li><a
href="https://ww1.docschina.org/">印记中文-前端技术文档汇总</a></li>
<li><a
href="https://www.bootcdn.cn/">BootCDN-稳定、快速、免费的前端开源项目
CDN 加速服务</a></li>
<li><a href="https://markdown.com.cn/basic-syntax/">Markdown
官方教程</a></li>
<li><a
href="https://gist.github.com/rxaviers/7360908">表情符号简码列表</a></li>
<li><a href="http://www.wetools.com/">wetools 在线工具大全</a></li>
<li><a href="https://caniuse.com/">查询 CSS3 兼容性</a></li>
<li><a href="https://www.iconfont.cn/">iconfont</a></li>
<li><a href="https://cubic-bezier.com">贝塞尔曲线</a></li>
</ol>
<h1 id="英文">英文</h1>
<ol type="1">
<li><a href="https://www.reddit.com/r/popular/top/">reddit</a></li>
<li><a href="https://dict.eudic.net/">欧路词典</a></li>
</ol>
<span id="more"></span>
<h1 id="学习">学习</h1>
<ol type="1">
<li><a href="https://www.bilibili.com/">B站</a></li>
<li><a href="https://weread.qq.com/">微信读书</a></li>
</ol>
<h1 id="个人">个人</h1>
<ol type="1">
<li><a href="https://www.icloud.com.cn/">iCloud</a></li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>URL</tag>
      </tags>
  </entry>
  <entry>
    <title>bootstrap-datepicker 设置可选时间范围</title>
    <url>/2023/04/28/bootstrap-datepicker-%E8%AE%BE%E7%BD%AE%E5%8F%AF%E9%80%89%E6%97%B6%E9%97%B4%E8%8C%83%E5%9B%B4/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>datepicker 设置未来日期不可选，只能选择一年内日期。一开始通过 endDate
属性设置未来日期不可选，出现了一个奇怪的
bug，然后用如下方法实现该功能。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//初始化</span></span><br><span class="line"><span class="keyword">var</span> ops = &#123;</span><br><span class="line">    <span class="attr">multidate</span>: <span class="literal">true</span>,<span class="comment">//同时可以选中多个日期</span></span><br><span class="line">    <span class="attr">todayHighlight</span>: <span class="literal">true</span>, <span class="comment">//设置当天日期高亮</span></span><br><span class="line">    <span class="attr">language</span>: <span class="string">&#x27;zh-CN&#x27;</span>, <span class="comment">//语言</span></span><br><span class="line">    <span class="attr">autoclose</span>: <span class="literal">true</span>, <span class="comment">//选择后自动关闭</span></span><br><span class="line">    <span class="attr">clearBtn</span>: <span class="literal">true</span>,<span class="comment">//清除按钮</span></span><br><span class="line">    <span class="attr">format</span>: <span class="string">&quot;yyyy-mm-dd&quot;</span>,<span class="comment">//日期格式</span></span><br><span class="line">&#125;;</span><br><span class="line">$(<span class="string">&quot;#itxst&quot;</span>).<span class="title function_">datepicker</span>(ops);</span><br><span class="line"><span class="comment">//设置只能选择一年内日期</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setStartDate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">setDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDate</span>() - <span class="number">365</span>));</span><br><span class="line">    $(<span class="string">&#x27;#itxst&#x27;</span>).<span class="title function_">datepicker</span>(<span class="string">&#x27;setStartDate&#x27;</span>, dt);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//设置不能选择当天日期起之后的日期</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">setEndDate</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> dt = <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">setDate</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getDate</span>()));</span><br><span class="line">    $(<span class="string">&#x27;#itxst&#x27;</span>).<span class="title function_">datepicker</span>(<span class="string">&#x27;setEndDate&#x27;</span>, dt);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">setStartDate</span>();</span><br><span class="line"><span class="title function_">setEndDate</span>();</span><br></pre></td></tr></table></figure>
<p><a
href="https://www.itxst.com/bootstrap-datepicker/2uqarzaq.html">参考文档</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>datepicker</tag>
      </tags>
  </entry>
  <entry>
    <title>对象数组和数组对象</title>
    <url>/2023/05/16/%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%E5%92%8C%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>对象数组和数组对象是不同的概念。虽然它们都涉及到了JavaScript中的数组和对象，但它们的数据结构和使用方法不同。</p>
<blockquote>
<p>对象数组</p>
</blockquote>
<p>对象数组是由多个对象组成的数组，每个对象都具有相同的属性结构。例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> users = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;Bob&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&#x27;Charlie&#x27;</span>, <span class="attr">age</span>: <span class="number">35</span> &#125;</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<p>在上面的例子中，我们定义了一个名为users的对象数组。该数组包含三个对象，每个对象具有相同的属性结构（id、name和age）。
<span id="more"></span>
要访问对象数组中的特定对象或属性，可以使用索引或迭代方法，例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(users[<span class="number">0</span>]); <span class="comment">// &#123; id: 1, name: &#x27;Alice&#x27;, age: 25 &#125;</span></span><br><span class="line"></span><br><span class="line">users.<span class="title function_">forEach</span>(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">name</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// Alice</span></span><br><span class="line"><span class="comment">// Bob</span></span><br><span class="line"><span class="comment">// Charlie</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>数组对象</p>
</blockquote>
<p>数组对象是指包含多个属性的单一对象，其中每个属性都是一个数组。例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> user = &#123;</span><br><span class="line">  <span class="attr">id</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  <span class="attr">name</span>: [<span class="string">&#x27;Alice&#x27;</span>, <span class="string">&#x27;Bob&#x27;</span>, <span class="string">&#x27;Charlie&#x27;</span>],</span><br><span class="line">  <span class="attr">age</span>: [<span class="number">25</span>, <span class="number">30</span>, <span class="number">35</span>]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在上面的例子中，我们定义了一个名为user的数组对象。该对象包含三个属性，每个属性都是一个数组，每个数组包含三个相应的值。</p>
<p>要访问数组对象中的特定值，可以使用属性名称和索引，例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(user.<span class="property">name</span>[<span class="number">0</span>]); <span class="comment">// Alice</span></span><br></pre></td></tr></table></figure>
<p>因此，对象数组和数组对象是不同的概念，它们具有不同的数据结构和用途。对象数组通常用于表示多个对象的集合，而数组对象则通常用于表示单个对象的多个属性。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>对象数组</tag>
        <tag>数组对象</tag>
      </tags>
  </entry>
  <entry>
    <title>win7 使用 18.16.0 版本 node</title>
    <url>/2023/05/17/win7-%E4%BD%BF%E7%94%A8-18-16-0-%E7%89%88%E6%9C%AC-node/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ol type="1">
<li>下载 18.16.0 版本的压缩包,解压改名放到指定盘符如 D:8.16.0</li>
<li>系统变量 path 追加 ;D:8.16.0;</li>
<li>系统变量新增 NODE_SKIP_PLATFORM_CHECK 为 1</li>
<li>切回低版本 node：系统变量删除之前的追加，重新追加 ;D:3.14.0;</li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>NodeJS</tag>
      </tags>
  </entry>
  <entry>
    <title>win7 cmd 进入某个文件夹的方式</title>
    <url>/2023/05/18/win7-cmd-%E8%BF%9B%E5%85%A5%E6%9F%90%E4%B8%AA%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9A%84%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>除了在 cmd 窗口里使用 <code>cd dir</code>
命令外，还可以打开资源管理器，进入到你要切换的那个文件夹下，在路径窗口输入
cmd 命令，回车后启动 cmd 窗口，已经切换到当前路径下。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>win7</tag>
        <tag>cmd</tag>
      </tags>
  </entry>
  <entry>
    <title>Lorem</title>
    <url>/2023/05/30/Lorem/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>“Lorem”通常是指”Lorem
Ipsum”，这是一种常用于印刷和排版设计中的占位符文本。它通常用于填充空白区域，以便在设计过程中更好地预览布局和格式。它的实际内容并没有意义，只是一些拉丁文单词和短语的随机组合。</p>
<p>在 VSCode 中输入：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;lorem5&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<p>将会生成:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;div&gt;<span class="title class_">Lorem</span> ipsum dolor sit amet.&lt;/div&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Lorem</tag>
      </tags>
  </entry>
  <entry>
    <title>重绘和回流</title>
    <url>/2023/05/17/%E9%87%8D%E7%BB%98%E5%92%8C%E5%9B%9E%E6%B5%81/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>重绘和回流是前端性能优化中的两个重要概念，对网站性能有着深远的影响。</p>
<blockquote>
<p>重绘（Repaint）</p>
</blockquote>
<p>重绘指的是当元素样式的改变不影响布局时，浏览器会重新绘制这个元素，但不会影响其他元素的位置和尺寸，这个过程也称为“重画”。重绘操作通常由JavaScript脚本或CSS动画引起。</p>
<p>例如，在下面的HTML代码中，我们将元素的颜色从红色改为绿色：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;color: red;&quot;</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>).<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;green&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>在执行上述代码时，浏览器将重新绘制 <code>&lt;div&gt;</code>
元素，以反映其新的样式设置，但不会改变其位置和大小。</p>
<blockquote>
<p>回流（Reflow）</p>
</blockquote>
<p>回流指的是当元素的尺寸、位置或内容发生改变时，浏览器需要重新计算布局，并重新排列其他相关元素，这个过程也称为“重排”。回流操作通常由以下事件引起：</p>
<ul>
<li>页面首次渲染。</li>
<li>浏览器窗口大小发生改变。</li>
<li>元素尺寸、位置或内容发生改变。</li>
<li>添加或删除DOM元素。</li>
</ul>
<p>例如，在下面的 HTML 代码中，我们将元素的宽度从 100px 改为 200px：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 100px;&quot;</span>&gt;</span>Hello, world!<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;div&#x27;</span>).<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;200px&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>在执行上述代码时，浏览器将重新计算布局，并重新排列其他相关元素，以适应
<code>&lt;div&gt;</code> 元素的新宽度。</p>
<blockquote>
<p>重绘和回流的区别 -
重绘是指浏览器需要重新绘制一个元素，但不会影响其他元素的位置和尺寸；回流是指浏览器需要重新计算页面布局，并重新排列其他相关元素。
-
重绘通常由JavaScript脚本或CSS动画引起；回流通常由页面首次渲染、浏览器窗口大小发生改变、元素尺寸、位置或内容发生改变、添加或删除DOM元素等事件引起。
-
回流比重绘更加耗费性能，因为它需要重新计算布局，并重新排列其他相关元素。因此，在前端开发中，我们应该尽量避免回流操作，控制好DOM树的深度和复杂度，以提高网站的性能和用户体验。</p>
</blockquote>
<blockquote>
<p>减少重绘和回流</p>
</blockquote>
<ul>
<li>减少 DOM 操作</li>
</ul>
<p>DOM
操作往往会导致浏览器进行重排和重绘操作，并且在大型应用程序中使用过多的
DOM 操作会降低性能。因此，应该尽量避免不必要的 DOM
操作。例如，可以将多个 DOM 操作合并为一个批处理操作。</p>
<ul>
<li>缓存布局信息</li>
</ul>
<p>获取元素的位置和尺寸等布局信息需要进行回流操作，因此在需要使用这些信息时，最好将其缓存起来以减少回流次数。例如，可以使用getBoundingClientRect()方法获取元素的位置和尺寸信息，并将其存储在变量中以供将来使用。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> element = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.my-element&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> rect = element.<span class="title function_">getBoundingClientRect</span>();</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 CSS 动画</li>
</ul>
<p>CSS 动画可通过 GPU
加速，从而减少了浏览器的工作负担，提高了动画的性能。而 JavaScript
实现的动画则需要更多的计算资源，并可能导致重绘和回流操作。因此，在可能的情况下，应尽量使用
CSS 动画。</p>
<ul>
<li>避免频繁的样式改变</li>
</ul>
<p>频繁改变元素的样式可能会导致浏览器频繁进行重绘和回流操作。因此，应尽量避免频繁改变元素的样式。例如，可以将多个样式合并为一个类，然后通过更改元素的类来一次性地更改样式。</p>
<ul>
<li>使用虚拟 DOM</li>
</ul>
<p>虚拟 DOM 可以将多个 DOM
操作合并为一个批处理操作，并最小化重排和重绘操作，从而提高页面性能。在某些框架中，如
React 和 Vue.js，使用虚拟 DOM 已成为标准做法。</p>
<p>总之，减少重绘和回流操作是网站性能优化中的关键步骤之一。通过合理编写代码，避免不必要的
DOM
操作和频繁的样式改变等操作，可以有效地减少重绘和回流的次数，提高网站的性能和用户体验。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>重绘</tag>
        <tag>回流</tag>
      </tags>
  </entry>
  <entry>
    <title>柯里化（Currying）</title>
    <url>/2023/05/23/%E6%9F%AF%E9%87%8C%E5%8C%96%EF%BC%88Currying%EF%BC%89/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>柯里化（Currying）是一种函数式编程技术，它将一个多参数的函数转换为一系列单参数函数的嵌套调用。具体来说，柯里化可以将一个接受多个参数的函数
f(x, y, z) 转换成一个接受单个参数的函数 g(x)，其中 g(x)
返回一个接受单个参数的函数 h(y)，h(y) 返回一个接受单个参数的函数
i(z)，最终 i(z) 返回 f(x, y, z) 的结果。</p>
<p>通过柯里化，我们可以将一个多参数的函数变成一系列单参数函数的组合，这样可以更方便地组合复杂的函数，也可以更容易地进行函数复用。此外，柯里化还可以帮助我们实现函数的部分应用，即将一个多参数函数的一部分参数固定下来，得到一个新的单参数函数。
<span id="more"></span> <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">x, y, z</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y + z;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">curry</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> <span class="title function_">curried</span>(<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (args.<span class="property">length</span> &gt;= fn.<span class="property">length</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> fn.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">...moreArgs</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> curried.<span class="title function_">apply</span>(<span class="variable language_">this</span>, args.<span class="title function_">concat</span>(moreArgs));</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> curriedAdd = <span class="title function_">curry</span>(add);</span><br><span class="line"><span class="keyword">const</span> add5 = <span class="title function_">curriedAdd</span>(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">const</span> add5and6 = <span class="title function_">add5</span>(<span class="number">6</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">add5and6</span>(<span class="number">7</span>)); <span class="comment">// 输出 18</span></span><br></pre></td></tr></table></figure>
在上述代码中，我们首先定义了一个接受三个参数的函数 add(x, y,
z)，然后定义了一个通用的柯里化函数
curry(fn)，它接受一个函数作为参数，返回一个新的柯里化后的函数。</p>
<p>在 curry()
函数内部，我们使用了递归的方式来实现柯里化。如果函数的参数个数已经达到了原函数的参数个数，就直接调用原函数并返回结果；否则，返回一个新的函数，它接受更多的参数，并将之前的参数和新的参数合并起来，继续等待下一次调用。</p>
<p>然后，我们使用 curry() 函数将 add()
函数进行柯里化，并得到一个新的柯里化后的函数
curriedAdd()。接着，我们使用 curriedAdd(5) 得到一个新的函数
add5()，它可以将 5 与其它两个参数相加。最后，我们使用 add5(6)
得到一个新的函数 add5and6()，它可以将 5、6
和一个额外的参数相加，并返回结果。</p>
<p>在这个例子中，我们展示了柯里化的一个重要特性：部分应用。通过柯里化，我们可以将原本接受多个参数的函数转换为一系列接受单个参数的函数，然后将其中一部分参数固定下来，得到一个新的函数。这种技术可以帮助我们更方便地进行函数复用和组合。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>柯里化</tag>
        <tag>Currying</tag>
      </tags>
  </entry>
  <entry>
    <title>常用布局名词</title>
    <url>/2023/06/05/%E5%B8%B8%E7%94%A8%E5%B8%83%E5%B1%80%E5%90%8D%E8%AF%8D/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="常用布局名词">1.常用布局名词</h1>
<img src="/2023/06/05/%E5%B8%B8%E7%94%A8%E5%B8%83%E5%B1%80%E5%90%8D%E8%AF%8D/%E5%B8%B8%E7%94%A8%E5%B8%83%E5%B1%80%E5%90%8D%E8%AF%8D.png" class="">
<span id="more"></span>
<h1 id="重置默认样式">2.重置默认样式</h1>
<p>很多元素都有默认样式，比如： 1. p 元素有默认的上下 margin 。 2. h1~h6
标题也有上下 margin ，且字体加粗。 3. body 元素有默认的 8px 外边距。 4.
超链接有默认的文字颜色和下划线。 5. ul 元素有默认的左 padding 。 6.
…….</p>
<h2 id="方案一使用全局选择器">2.1方案一：使用全局选择器</h2>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">* &#123;</span><br><span class="line"><span class="attr">margin</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attr">padding</span>: <span class="number">0</span>;</span><br><span class="line">......</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>此种方法，在简单案例中可以用一下，但实际开发中不会使用，因为 *
选择的是所有元素，而并不是所有的元素都有默认样式；而且我们重置时，有时候是需要做特定处理的，比如：想让a
元素的文字是灰色，其他元素文字是蓝色。</p>
</blockquote>
<h2 id="reset.css">2.2: reset.css</h2>
<p>选择到具有默认样式的元素，清空其默认的样式。 &gt; 经过 reset
后的网页，好似“一张白纸”，开发人员可根据设计稿，精细的去添加具体的样式。</p>
<h2 id="normalize.css">2.3: Normalize.css</h2>
<p><a href="http://necolas.github.io/normalize.css/">Normalize.css</a>
是一种最新方案，它在清除默认样式的基础上，保留了一些有价值的默认样式。</p>
<p>相对于 reset.css ， Normalize.css 有如下优点：</p>
<ol type="1">
<li>保护了有价值的默认样式，而不是完全去掉它们。</li>
<li>为大部分 HTML 元素提供一般化的样式。</li>
<li>新增对 HTML5 元素的设置。</li>
<li>对并集选择器的使用比较谨慎，有效避免调试工具杂乱。</li>
</ol>
<blockquote>
<p>备注： Normalize.css 的重置，和 reset.css
相比，更加的温和，开发时可根据实际情况进行选择。</p>
</blockquote>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>布局名词</tag>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 选择器权重计算</title>
    <url>/2023/05/30/CSS-%E9%80%89%E6%8B%A9%E5%99%A8%E6%9D%83%E9%87%8D%E8%AE%A1%E7%AE%97/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p><strong>权重是用来确定哪个样式规则应该应用于元素的。权重越高，优先级越高。</strong></p>
<h1 id="权重计算分为四个等级">权重计算分为四个等级：</h1>
<p>行内 &gt; ID 选择器 &gt; 类选择器 &gt; 元素选择器 &gt; 通配选择器
*</p>
<ul>
<li>内联样式（Inline styles）：权重为 1000</li>
<li>ID 选择器（ID selectors）：权重为 100</li>
<li>类选择器（Class selectors）、属性选择器（Attribute
selectors）和伪类选择器（Pseudo-classes）：权重为 10</li>
<li>元素选择器（Element
selectors）和伪元素选择器（Pseudo-elements）：权重为 1</li>
</ul>
<h2 id="举例">举例：</h2>
<p>#my-id：权重为 100（一个ID选择器）<br />
.my-class：权重为 10（一个类选择器）<br />
div：权重为 1（一个元素选择器）<br />
a:hover：权重为 11（一个元素选择器和一个伪类选择器）</p>
<p>当有多个选择器应用于同一个元素时，权重最高的选择器将应用其样式。如果权重相同，那么按照选择器在
CSS 中出现的顺序，后出现的选择器将覆盖先前的选择器。</p>
<span id="more"></span>
<h1 id="一种简单的计算方法">一种简单的计算方法</h1>
<p>格式：(a,b,c)，其中：<br />
a: ID 选择器的个数<br />
b: 类、伪类、属性 选择器的个数<br />
c: 元素、伪元素 选择器的个数</p>
<h2 id="举例-1">举例：</h2>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 计算结果为 (0,2,1)</span></span><br><span class="line">.<span class="property">container</span> span.<span class="property">slogan</span> &#123;</span><br><span class="line">  <span class="attr">color</span>:red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 计算结果为 (0,1,3)</span></span><br><span class="line">div&gt;p&gt;<span class="attr">span</span>:nth-<span class="title function_">child</span>(<span class="params"><span class="number">1</span></span>)&#123;</span><br><span class="line">  <span class="attr">color</span>:green;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从左到右比较括号内的数字大小： - 如果数字相等，则继续比较 -
如果数字其中一个较大，则较大值的选择器权重高，胜出，后面不再比较。 -
如果三位一样大，则按照出现顺序，后出现的将覆盖先前的选择器。</p>
<p>TIPS: VSCode 鼠标移动到 CSS 选择器上时，会自动帮忙算出权重(Selector
Specificity)。</p>
<img src="/2023/05/30/CSS-%E9%80%89%E6%8B%A9%E5%99%A8%E6%9D%83%E9%87%8D%E8%AE%A1%E7%AE%97/CSS2.jpg" class="">
]]></content>
  </entry>
  <entry>
    <title>BFC</title>
    <url>/2023/06/13/BFC/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="bfc-定义">BFC 定义</h1>
<ol type="1">
<li>BFC 是 Block Formatting Context
（块级格式上下文），可以理解成元素的一个“特异功能”。</li>
<li>该
“特异功能”，在默认的情况下处于关闭状态；当元素满足了某些条件后，该“特异功能”被激活。</li>
<li>所谓激活“特异功能”，专业点说就是：该元素创建了 BFC （又称：开启了
BFC ）。</li>
</ol>
<h1 id="bfc-能解决什么问题">BFC 能解决什么问题</h1>
<ol type="1">
<li>元素开启BFC 后，其子元素不会再产生margin 塌陷问题。</li>
<li>元素开启BFC 后，自己不会被其他浮动元素所覆盖。</li>
<li>元素开启BFC 后，就算其子元素浮动，元素自身高度也不会塌陷。</li>
</ol>
<span id="more"></span>
<h1 id="如何开启-bfc">如何开启 BFC</h1>
<ul>
<li>根元素</li>
<li>浮动元素</li>
<li>绝对定位、固定定位的元素</li>
<li>行内块元素</li>
<li>表格单元格： table 、thead 、tbody 、tfoot 、th 、td 、tr
、caption</li>
<li>overflow 的值不为 visible 的块元素</li>
<li>伸缩项目</li>
<li>多列容器</li>
<li>column-span 为 all 的元素（即使该元素没有包裹在多列容器中）</li>
<li>display 的值，设置为flow-root</li>
</ul>
<p><a
href="https://www.bilibili.com/video/BV1p84y1P7Z5?p=199&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">禹神的
2023 最新前端 html5+css3 视频</a>，强烈推荐！！！</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>BFC</tag>
        <tag>Block Formatting Context</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 对象数组深拷贝和浅拷贝</title>
    <url>/2023/06/20/JavaScript-%E5%AF%B9%E8%B1%A1%E6%95%B0%E7%BB%84%E6%B7%B1%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B5%85%E6%8B%B7%E8%B4%9D/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>遇到的问题：VUE 项目里把 data
里定义的对象数组赋值给新的变量，新的变量对数组对象做了一些操作，但却把
data 里面原本的对象数组也修改了。</p>
<p>下面举一个简单例子：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">     <span class="keyword">const</span> b = [</span><br><span class="line">       &#123; <span class="attr">name</span>: <span class="string">&quot;John&quot;</span>, <span class="attr">age</span>: <span class="number">25</span> &#125;,</span><br><span class="line">       &#123; <span class="attr">name</span>: <span class="string">&quot;Jane&quot;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;,</span><br><span class="line">     ];</span><br><span class="line">     <span class="keyword">var</span> a = b</span><br><span class="line"></span><br><span class="line">     <span class="comment">// 修改变量 a 的值</span></span><br><span class="line">     a[<span class="number">0</span>].<span class="property">age</span> = <span class="number">99</span>;</span><br><span class="line"></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 输出[&#123;name: &#x27;John&#x27;, age: 99&#125;, &#123;name: &#x27;Jane&#x27;, age: 25&#125;]</span></span><br><span class="line">     <span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// 输出[&#123;name: &#x27;John&#x27;, age: 99&#125;, &#123;name: &#x27;Jane&#x27;, age: 25&#125;]</span></span><br><span class="line">   &#125;;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>要将 JavaScript 对象数组 b 的值赋给变量 a，同时确保更改 a
的值不会影响 b
的值，可以使用对象的深拷贝方法。这将创建一个新的数组，并复制原始数组中的所有元素。</p>
<p>在 JavaScript
中，可以使用多种方法执行深拷贝，其中一种常见的方法是使用 JSON.stringify
和 JSON.parse 组合来实现。下面是一个示例代码：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> b = [&#123;<span class="attr">name</span>: <span class="string">&#x27;John&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span>&#125;, &#123;<span class="attr">name</span>: <span class="string">&#x27;Jane&#x27;</span>, <span class="attr">age</span>: <span class="number">25</span>&#125;];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 JSON.stringify 和 JSON.parse 执行深拷贝</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(b));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 修改变量a的值</span></span><br><span class="line">a[<span class="number">0</span>].<span class="property">name</span> = <span class="string">&#x27;Updated John&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(a); <span class="comment">// 输出: [&#123;name: &#x27;Updated John&#x27;, age: 30&#125;, &#123;name: &#x27;Jane&#x27;, age: 25&#125;]</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(b); <span class="comment">// 输出: [&#123;name: &#x27;John&#x27;, age: 30&#125;, &#123;name: &#x27;Jane&#x27;, age: 25&#125;]</span></span><br></pre></td></tr></table></figure>
<p>在上述代码中，我们使用 JSON.stringify 将数组 b 转换为 JSON
字符串，然后使用 JSON.parse 将该 JSON 字符串解析为新的数组
a。这样做会创建一个新的数组 a，其中包含与数组 b
相同的对象，但是它们在内存中的位置是不同的。因此，对变量 a
进行的更改不会影响变量 b。</p>
<p>请注意，这种方法只适用于包含原始数据类型和普通对象的数组。如果数组中包含复杂对象（例如函数、正则表达式、Map、Set
等），则需要使用其他深拷贝方法，如递归复制或第三方库（例如 lodash 的
cloneDeep 函数）来确保完整的深拷贝。</p>
<p>最好还要注意一点:</p>
<p>1.slice 函数，newArr = arr.slice(0)</p>
<p>2.concat 函数，newArr = [].concat(arr,arr2,…)</p>
<p>3.assign 函数（对象），newObj = object.assign({},obj)</p>
<p>但以上三种方式都是对对象第一层的深拷贝，第二层之后还是浅拷贝，要实现多维数组的深拷贝，还是需要上面的方法。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>对象数组</tag>
        <tag>深拷贝</tag>
        <tag>浅拷贝</tag>
      </tags>
  </entry>
  <entry>
    <title>解决 Eslint 和 Prettier 之间的冲突</title>
    <url>/2023/06/20/%E8%A7%A3%E5%86%B3Eslint-%E5%92%8C-Prettier-%E4%B9%8B%E9%97%B4%E7%9A%84%E5%86%B2%E7%AA%81/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>解决办法，在 .eslintrc.js 文件中修改：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">//修改前</span></span><br><span class="line"><span class="attr">extends</span>: [<span class="string">&#x27;plugin:vue/recommended&#x27;</span>, <span class="string">&#x27;eslint:recommended&#x27;</span>],</span><br><span class="line"><span class="comment">//修改后</span></span><br><span class="line"> <span class="attr">extends</span>: [<span class="string">&#x27;plugin:vue/recommended&#x27;</span>, <span class="string">&#x27;eslint:recommended&#x27;</span>, <span class="string">&quot;plugin:prettier/recommended&quot;</span>],</span><br></pre></td></tr></table></figure>
<p><a href="https://juejin.cn/post/7012160233061482532">参考文档</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Eslint</tag>
        <tag>Prettier</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue 如何监听复杂对象属性值改变</title>
    <url>/2023/06/21/Vue-%E5%A6%82%E4%BD%95%E7%9B%91%E5%90%AC%E5%A4%8D%E6%9D%82%E5%AF%B9%E8%B1%A1%E5%B1%9E%E6%80%A7%E5%80%BC%E6%94%B9%E5%8F%98/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>先说结论，可以通过 computed 和 watch 结合的方法实现监听复杂对象！</p>
<p>需求：有一个单选框按钮组（手动/自动），当点击手动时，输入框可以输入数值，当点击自动时，输入框禁用。</p>
<p>解决办法：</p>
<p>1.首先给单选框添加 change 事件（Element
组件库），实现当单选框按钮值改变时是否禁用输入框。
2.由于单选框的值会根据后端回传数据改变，所以通过 watch
方法监听单选框值改变，实现当后端回传数据导致单选框按钮值改变，而输入框未实现同步禁用的问题。</p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 数据格式</span></span><br><span class="line"><span class="attr">controlData</span>: [</span><br><span class="line">        &#123; <span class="attr">key</span>: <span class="number">0</span>, <span class="attr">value</span>: <span class="number">24</span>, <span class="attr">unit</span>: <span class="string">&quot;℃&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">key</span>: <span class="number">1</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">unit</span>: <span class="string">&quot;%&quot;</span> &#125;,</span><br><span class="line">        &#123; <span class="attr">key</span>: <span class="number">2</span>, <span class="attr">value</span>: <span class="number">1</span>, <span class="attr">unit</span>: <span class="string">&quot;℃&quot;</span> &#125;,]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 计算属性</span></span><br><span class="line"><span class="attr">computed</span>: &#123;</span><br><span class="line">  <span class="title function_">computedFanEEV</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">EEV</span>: <span class="variable language_">this</span>.<span class="property">controlData</span>[<span class="number">1</span>].<span class="property">value</span>,</span><br><span class="line">      <span class="attr">fan</span>: <span class="variable language_">this</span>.<span class="property">controlData</span>[<span class="number">2</span>].<span class="property">value</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,    </span><br><span class="line"></span><br><span class="line"><span class="comment">// watch 同时监听复杂对象的多个属性值改变</span></span><br><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">  <span class="attr">computedFanEEV</span>: <span class="keyword">function</span>(<span class="params">newFan, oldfan</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">parseInt</span>(newFan.<span class="property">EEV</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">EEV1</span> = <span class="literal">true</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">EEV2</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">parseInt</span>(newFan.<span class="property">EEV</span>) === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">EEV1</span> = <span class="literal">false</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">EEV2</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">parseInt</span>(newFan.<span class="property">fan</span>) === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">fan1</span> = <span class="literal">true</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">fan2</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">parseInt</span>(newFan.<span class="property">fan</span>) === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">fan1</span> = <span class="literal">false</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">fan2</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Vue</tag>
        <tag>复杂对象</tag>
        <tag>computed</tag>
        <tag>watch</tag>
      </tags>
  </entry>
  <entry>
    <title>Element Card 组件添加移入移出事件</title>
    <url>/2023/06/21/Element-Card-%E7%BB%84%E4%BB%B6%E6%B7%BB%E5%8A%A0%E7%A7%BB%E5%85%A5%E7%A7%BB%E5%87%BA%E4%BA%8B%E4%BB%B6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;el-card <span class="keyword">class</span>=<span class="string">&quot;box-card&quot;</span> @mouseente native=<span class="string">&quot;enter&quot;</span> @mouseleave.<span class="property">native</span>=<span class="string">&#x27;leave&#x27;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">slot</span>=<span class="string">&quot;header&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">span</span>&gt;</span>卡片名称<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">style</span>=<span class="string">&quot;float: right; padding: 3px 0&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>&gt;</span>操作按钮<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;o in 4&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;o&quot;</span> <span class="attr">class</span>=<span class="string">&quot;text item&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   &#123;&#123;&#x27;列表内容 &#x27; + o &#125;&#125;</span></span><br><span class="line"><span class="language-xml"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/el-card&gt;</span><br><span class="line"></span><br><span class="line"><span class="attr">methods</span>: &#123;</span><br><span class="line"> <span class="title function_">enter</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;enter&#x27;</span>)</span><br><span class="line"> &#125;,</span><br><span class="line"> <span class="title function_">leave</span>(<span class="params"></span>)&#123;</span><br><span class="line">   <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;leave&#x27;</span>)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<span id="more"></span>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Element</tag>
        <tag>移入 Card</tag>
        <tag>移出 Card</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 作用域</title>
    <url>/2023/06/29/JavaScript-%E4%BD%9C%E7%94%A8%E5%9F%9F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>作用域简单来说就是一个变量的作用范围。 在 JavaScript
中作用域分成两种：</p>
<blockquote>
<p>全局作用域</p>
</blockquote>
<ul>
<li>直接在 script 标签中编写的代码都运行在全局作用域中</li>
<li>全局作用域在打开页面时创建，在页面关闭时销毁</li>
<li>全局作用域中有一个全局对象 window，window
对象由浏览器提供,可以在页面中直接使用，它代表的是整个的浏览器的窗口</li>
<li>在全局作用域中创建的<strong>变量</strong>都会作为 window
对象的<strong>属性</strong>保存</li>
<li>在全局作用域中创建的<strong>函数</strong>都会作为 window
对象的<strong>方法</strong>保存</li>
<li>在全局作用域中创建的变量和函数可以在页面的任意位置访问,在函数作用域中也可以访问到全局作用域的变量。</li>
<li>尽量不要在全局中创建变量</li>
</ul>
<span id="more"></span>
<blockquote>
<p>函数作用域</p>
</blockquote>
<ul>
<li>函数作用域是函数执行时创建的作用域，每次调用函数都会创建一个新的函数作用域</li>
<li>函数作用域在函数执行时创建，在函数执行结束时销毁</li>
<li>在函数作用域中创建的变量，不能在全局中访问</li>
<li>当在函数作用域中使用一个变量时，它会先在自身作用域中寻找，如果找到了则直接使用，如果没有找到则到上一级作用域中寻找，如果找到了则使用，找不到则继续向上找</li>
</ul>
<blockquote>
<p>变量的声明提前</p>
</blockquote>
<ul>
<li>在全局作用域中，使用 var
关键字声明的变量会在所有的代码执行之前被声明，但是不会赋值。所以我们可以在变量声明前使用变量。但是不使用
var 关键字声明的变量不会被声明提前。</li>
<li>在函数作用域中，也具有该特性，使用 var
关键字声明的变量会在函数所有的代码执行前被声明，如果没有使用 var
关键字声明变量，则变量会变成全局变量</li>
</ul>
<blockquote>
<p>函数的声明提前</p>
</blockquote>
<ul>
<li>在全局作用域中，使用函数声明创建的函数 (function
fun(){}),会在所有的代码执行之前被创建，也就是我们可以在函数声明前去调用函数，但是使用函数表达式
(var fun = function(){}) 创建的函数没有该特性</li>
<li>在函数作用域中，使用函数声明创建的函数，会在所有函数中的代码执行之前就被创建好。</li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>作用域</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 匿名函数的直接调用</title>
    <url>/2023/06/29/JavaScript-%E5%8C%BF%E5%90%8D%E5%87%BD%E6%95%B0%E7%9A%84%E7%9B%B4%E6%8E%A5%E8%B0%83%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在 JavaScript 中，可以使用匿名函数的直接调用（Immediately Invoked
Function Expression，IIFE）来立即执行函数。</p>
<p>下面是一个使用匿名函数直接调用的示例：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 在这里编写需要执行的代码</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;这是一个匿名函数的直接调用示例。&quot;</span>);</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>在上面的示例中，我们使用 (function() { … })()
的语法来创建一个匿名函数，并立即调用它。函数体内的代码会立即执行。</p>
<span id="more"></span>
<p>匿名函数的直接调用的主要目的是创建一个作用域边界，避免函数内部的变量和函数污染全局作用域。通过立即调用函数，函数内部的变量和函数都会在执行完后销毁，不会对全局作用域造成影响。</p>
<p>此外，如果需要将参数传递给匿名函数，可以在调用时传入参数：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span>(<span class="params">name</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello, &quot;</span> + name + <span class="string">&quot;!&quot;</span>);</span><br><span class="line">&#125;)(<span class="string">&quot;John&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>在上面的示例中，我们传递了一个名为 “John”
的参数给匿名函数，并在函数内部打印了 “Hello, John!”。</p>
<p>通过使用匿名函数的直接调用，可以在需要时立即执行一段代码，同时有效地控制变量作用域。</p>
<p>需要注意的是，由于匿名函数是没有名称的，因此我们无法在外部代码中引用它。如果需要多次调用该函数，可以将它赋值给一个变量，例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myFunction = <span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="comment">// 匿名函数的代码</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">myFunction</span>(); <span class="comment">// 调用匿名函数</span></span><br><span class="line"><span class="title function_">myFunction</span>(); <span class="comment">// 再次调用匿名函数</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>匿名函数</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS 之 BEM 命名规范</title>
    <url>/2023/06/27/CSS-%E4%B9%8B-BEM-%E5%91%BD%E5%90%8D%E8%A7%84%E8%8C%83/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>CSS
BEM（块元素修饰符）是一种命名约定和方法论，用于在编写可维护和可扩展的
CSS
代码时提供结构和规范。它的目标是解决样式表的命名冲突问题，并提供一种一致性和可重用性的编码方式。</p>
<blockquote>
<p>BEM 的命名约定由以下三个部分组成：</p>
</blockquote>
<p><strong>块（Block）</strong>：代表一个独立的、可重复使用的组件或模块，它是页面上的一个独立单元。块的命名应该简洁、清晰，并用一个单词或短语表示，使用连字符分隔单词（例如：button、header）。</p>
<p><strong>元素（Element）</strong>：代表块的内部元素，它们不能独立存在，必须作为块的一部分存在。元素的命名应该以块的名称为前缀，用两个连下划线
** 进行分隔（例如：button**text、header__logo）。</p>
<p><strong>修饰符（Modifier）</strong>：代表块或元素的不同状态或变体。修饰符是可选的，可以通过改变外观、行为或状态来扩展块或元素。修饰符的命名应该以块或元素的名称为前缀，用两个连短划线
– 进行分隔（例如：button–primary、header–fixed）。</p>
<span id="more"></span>
<blockquote>
<p>使用 CSS BEM 的主要优点包括：</p>
</blockquote>
<p><strong>可读性：</strong>BEM
提供了一种一致的命名约定，使代码易于理解和阅读，减少团队成员之间的沟通成本。</p>
<p><strong>可重用性：</strong>BEM
鼓励模块化和组件化的设计思维，使得样式代码更容易重用于不同的场景。</p>
<p><strong>可维护性：</strong>由于命名规范和模块化的结构，BEM
使得样式表的维护更加简单和可靠。</p>
<p>总之，CSS BEM 是一种帮助开发人员编写可维护、可扩展和易于理解的 CSS
代码的方法论。它提供了一种命名约定，通过明确的命名规则和结构化的代码组织，促进团队协作和代码质量的提升。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>BEM</tag>
        <tag>命名规范</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 工厂方法创建对象</title>
    <url>/2023/06/29/JavaScript-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E5%88%9B%E5%BB%BA%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在 JavaScript 中，可以使用工厂方法（Factory
Method）创建对象。工厂方法是一种创建对象的设计模式，它通过一个函数来封装对象的创建过程，并返回新创建的对象。</p>
<p>下面是一个简单的示例，演示如何使用工厂方法创建对象：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义一个工厂方法</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createPerson</span>(<span class="params">name, age</span>) &#123;</span><br><span class="line">  <span class="comment">// 创建一个新对象</span></span><br><span class="line">  <span class="keyword">var</span> person = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 添加属性和方法到对象</span></span><br><span class="line">  person.<span class="property">name</span> = name;</span><br><span class="line">  person.<span class="property">age</span> = age;</span><br><span class="line">  person.<span class="property">sayHello</span> = <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Hello, my name is &quot;</span> + <span class="variable language_">this</span>.<span class="property">name</span> + <span class="string">&quot; and I&#x27;m &quot;</span> + <span class="variable language_">this</span>.<span class="property">age</span> + <span class="string">&quot; years old.&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 返回创建的对象</span></span><br><span class="line">  <span class="keyword">return</span> person;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用工厂方法创建对象</span></span><br><span class="line"><span class="keyword">var</span> john = <span class="title function_">createPerson</span>(<span class="string">&quot;John&quot;</span>, <span class="number">25</span>);</span><br><span class="line"><span class="keyword">var</span> mary = <span class="title function_">createPerson</span>(<span class="string">&quot;Mary&quot;</span>, <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用对象的方法</span></span><br><span class="line">john.<span class="title function_">sayHello</span>(); <span class="comment">// 输出：Hello, my name is John and I&#x27;m 25 years old.</span></span><br><span class="line">mary.<span class="title function_">sayHello</span>(); <span class="comment">// 输出：Hello, my name is Mary and I&#x27;m 30 years old.</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>在上面的示例中，createPerson 是一个工厂方法，它接受参数 name 和
age，并返回一个包含这些属性和方法的新对象。通过调用 createPerson
方法，我们可以创建多个具有相同结构和行为的对象。</p>
<p>使用工厂方法创建对象的好处是可以封装对象的创建逻辑，并提供一种统一的方式来创建对象。这样可以简化对象的创建过程，并且在需要时可以对创建过程进行扩展和修改，而不必改变使用对象的代码。</p>
<p>需要注意的是，工厂方法创建的对象是独立的，每个对象都拥有自己的属性和方法。这与使用原型继承创建的对象不同，后者可以共享同一个原型对象的属性和方法。根据实际需求和设计考虑，可以选择适合的对象创建方式。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>工厂方法</tag>
        <tag>对象</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 基础知识总结1</title>
    <url>/2023/07/07/JavaScript-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%931/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p><strong>数据类型</strong></p>
<blockquote>
<p>分类</p>
</blockquote>
<p>基本（值）类型</p>
<ul>
<li>String：任意字符串</li>
<li>Number：任意数值</li>
<li>boolean：true/false</li>
<li>undefined：undefined</li>
<li>null：null</li>
</ul>
<p>对象（引用）类型</p>
<ul>
<li>Object：任意对象</li>
<li>Function：一种特别的对象（可以执行）</li>
<li>Array：一种特别的对象（数值下标，内部数据是有序的 ）</li>
</ul>
<blockquote>
<p>判断</p>
</blockquote>
<ul>
<li>typeof 返回数据类型的字符串表达（小写）
<ul>
<li>可以判断：undefined / 数值 / 字符串 / 布尔值 / function</li>
<li>不能判断：null 与 object、object 与 array</li>
</ul></li>
<li>instanceof 判断对象的具体类型</li>
<li>===
<ul>
<li>可以判断：undefined / null</li>
</ul></li>
</ul>
<ol type="1">
<li>函数高级</li>
<li>面向对象高级</li>
<li>线程机制与事件机制</li>
</ol>
<span id="more"></span>
<p>FAQ：</p>
<ol type="1">
<li><p>undefined 与 null 的区别？</p>
<ul>
<li>undefined 代表定义未赋值</li>
<li>null 代表定义并赋值，值为 null</li>
</ul></li>
<li><p>什么时候给变量赋值为 null ？</p>
<ul>
<li>初始赋值，表明将要赋值为对象</li>
<li>结束前，表明该对象不再使用，成为垃圾对象（被垃圾回收器回收）</li>
</ul></li>
<li><p>严格区别变量类型与数据类型？</p>
<ul>
<li>数据的类型：
<ul>
<li>基本类型</li>
<li>对象类型</li>
</ul></li>
<li>变量的类型（变量内存值的类型）：
<ul>
<li>基本类型：保存就是基本类型的数据</li>
<li>引用类型：保存地址值</li>
</ul></li>
</ul></li>
</ol>
<p><strong>数据、变量与内存</strong></p>
<ol type="1">
<li><p>什么是数据？</p>
<ul>
<li>存储在内存中代表特定信息的’东东‘，本质上是 0101……</li>
<li>数据的特点：可传递，可运算</li>
<li>一切皆数据</li>
<li>内存中所有操作的目标：数据
<ul>
<li>算术运算</li>
<li>逻辑运算</li>
<li>赋值</li>
<li>运行函数</li>
</ul></li>
</ul></li>
<li><p>什么是内存？</p>
<ul>
<li>内存条通电以后产生的可存储数据的空间（临时的）</li>
<li>内存产生和死亡：内存条（电路板）==&gt; 通电 ==&gt; 产生内存空间
==&gt; 存储数据 ==&gt; 断电 ==&gt; 内存空间和数据都消失</li>
<li>一块小内存的两个数据：
<ul>
<li>栈：全局变量/局部变量</li>
<li>堆：地址</li>
</ul></li>
</ul></li>
<li><p>什么是变量？</p>
<ul>
<li>可变化的量，由变量名和变量值组成</li>
<li>每个变量都对应一块小内存，变量名用来查找对应的内存，变量值就是内存中保存的数据</li>
</ul></li>
<li><p>内存、数据、变量三者之间的关系？</p>
<ul>
<li>内存用来存储数据的空间</li>
<li>变量是内存的标识</li>
</ul></li>
</ol>
<p>FAQ:</p>
<ol type="1">
<li><p>var a = xxx, a 内存中到底保存的是什么？</p>
<ul>
<li>xxx 是基本数据，保存的是这个数据</li>
<li>xxx 是对象，保存的是对象的地址</li>
<li>xxx 是一个变量，保存的 xxx
的内存内容（可能是基本数据，也可能是地址值）</li>
</ul></li>
<li><p>关于引用变量赋值问题</p>
<ul>
<li>n 个引用变量指向同一个对象，通过一个变量修改对象内部数据，其他所有
变量看到的是修改之后的数据</li>
</ul></li>
<li><p>在 js 调用函数时传递变量参数时，是值传递还是引用传递</p>
<ul>
<li>理解 1：都是值传递（基本/地址值）传递</li>
<li>理解 2：可能是值传递，也可能是引用传递（地址值）</li>
</ul></li>
<li><p>JS 引擎如何管理内存</p>
<ul>
<li>内存生命周期
<ul>
<li>分配小内存空间，得到它的使用权</li>
<li>存储数据，可以反复进行操作</li>
<li>释放小内存空间</li>
</ul></li>
<li>释放内存
<ul>
<li>​ 局部变量：函数执行完自动释放</li>
<li>对象：成为垃圾对象 ==&gt; 垃圾回收器回收</li>
</ul></li>
</ul></li>
</ol>
<p>视频教程：​<a
href="https://www.bilibili.com/video/BV14s411E7qf/?p=7&amp;spm_id_from=pageDriver&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">尚硅谷
JavaScript 高级教程(javascript 实战进阶)</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 创建一个可以执行简单动画的函数</title>
    <url>/2023/07/07/JavaScript-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%8F%AF%E4%BB%A5%E6%89%A7%E8%A1%8C%E7%AE%80%E5%8D%95%E5%8A%A8%E7%94%BB%E7%9A%84%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 参数：</span></span><br><span class="line"><span class="comment"> * 	obj:要执行动画的对象</span></span><br><span class="line"><span class="comment"> * 	attr:要执行动画的样式，比如：left top width height</span></span><br><span class="line"><span class="comment"> * 	target:执行动画的目标位置</span></span><br><span class="line"><span class="comment"> * 	speed:移动的速度(正数向右移动，负数向左移动)</span></span><br><span class="line"><span class="comment"> *  callback:回调函数，这个函数将会在动画执行完毕以后执行</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">move</span>(<span class="params">obj, attr, target, speed, callback</span>) &#123;</span><br><span class="line">  <span class="comment">//关闭上一个定时器</span></span><br><span class="line">  <span class="built_in">clearInterval</span>(obj.<span class="property">timer</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//获取元素目前的位置</span></span><br><span class="line">  <span class="keyword">var</span> current = <span class="built_in">parseInt</span>(<span class="title function_">getStyle</span>(obj, attr));</span><br><span class="line"></span><br><span class="line">  <span class="comment">//判断速度的正负值</span></span><br><span class="line">  <span class="comment">//如果从0 向 800移动，则speed为正</span></span><br><span class="line">  <span class="comment">//如果从800向0移动，则speed为负</span></span><br><span class="line">  <span class="keyword">if</span> (current &gt; target) &#123;</span><br><span class="line">    <span class="comment">//此时速度应为负值</span></span><br><span class="line">    speed = -speed;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//开启一个定时器，用来执行动画效果</span></span><br><span class="line">  <span class="comment">//向执行动画的对象中添加一个timer属性，用来保存它自己的定时器的标识</span></span><br><span class="line">  obj.<span class="property">timer</span> = <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">//获取box1的原来的left值</span></span><br><span class="line">    <span class="keyword">var</span> oldValue = <span class="built_in">parseInt</span>(<span class="title function_">getStyle</span>(obj, attr));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//在旧值的基础上增加</span></span><br><span class="line">    <span class="keyword">var</span> newValue = oldValue + speed;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断newValue是否大于800</span></span><br><span class="line">    <span class="comment">//从800 向 0移动</span></span><br><span class="line">    <span class="comment">//向左移动时，需要判断newValue是否小于target</span></span><br><span class="line">    <span class="comment">//向右移动时，需要判断newValue是否大于target</span></span><br><span class="line">    <span class="keyword">if</span> ((speed &lt; <span class="number">0</span> &amp;&amp; newValue &lt; target) || (speed &gt; <span class="number">0</span> &amp;&amp; newValue &gt; target)) &#123;</span><br><span class="line">      newValue = target;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//将新值设置给box1</span></span><br><span class="line">    obj.<span class="property">style</span>[attr] = newValue + <span class="string">&quot;px&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当元素移动到0px时，使其停止执行动画</span></span><br><span class="line">    <span class="keyword">if</span> (newValue == target) &#123;</span><br><span class="line">      <span class="comment">//达到目标，关闭定时器</span></span><br><span class="line">      <span class="built_in">clearInterval</span>(obj.<span class="property">timer</span>);</span><br><span class="line">      <span class="comment">//动画执行完毕，调用回调函数</span></span><br><span class="line">      callback &amp;&amp; <span class="title function_">callback</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">30</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 定义一个函数，用来获取指定元素的当前的样式</span></span><br><span class="line"><span class="comment"> * 参数：</span></span><br><span class="line"><span class="comment"> * 		obj 要获取样式的元素</span></span><br><span class="line"><span class="comment"> * 		name 要获取的样式名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getStyle</span>(<span class="params">obj, name</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">getComputedStyle</span>) &#123;</span><br><span class="line">    <span class="comment">//正常浏览器的方式，具有getComputedStyle()方法</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">getComputedStyle</span>(obj, <span class="literal">null</span>)[name];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//IE8的方式，没有getComputedStyle()方法</span></span><br><span class="line">    <span class="keyword">return</span> obj.<span class="property">currentStyle</span>[name];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个函数，用来向一个元素中添加指定的class属性值</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 参数:</span></span><br><span class="line"><span class="comment"> * 	obj 要添加class属性的元素</span></span><br><span class="line"><span class="comment"> *  cn 要添加的class值</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">addClass</span>(<span class="params">obj, cn</span>) &#123;</span><br><span class="line">  <span class="comment">//检查obj中是否含有cn</span></span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">hasClass</span>(obj, cn)) &#123;</span><br><span class="line">    obj.<span class="property">className</span> += <span class="string">&quot; &quot;</span> + cn;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 判断一个元素中是否含有指定的class属性值</span></span><br><span class="line"><span class="comment"> * 	如果有该class，则返回true，没有则返回false</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hasClass</span>(<span class="params">obj, cn</span>) &#123;</span><br><span class="line">  <span class="comment">//判断obj中有没有cn class</span></span><br><span class="line">  <span class="comment">//创建一个正则表达式</span></span><br><span class="line">  <span class="comment">//var reg = /\bb2\b/;</span></span><br><span class="line">  <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;\\b&quot;</span> + cn + <span class="string">&quot;\\b&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> reg.<span class="title function_">test</span>(obj.<span class="property">className</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 删除一个元素中的指定的class属性</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">removeClass</span>(<span class="params">obj, cn</span>) &#123;</span><br><span class="line">  <span class="comment">//创建一个正则表达式</span></span><br><span class="line">  <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;\\b&quot;</span> + cn + <span class="string">&quot;\\b&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//删除class</span></span><br><span class="line">  obj.<span class="property">className</span> = obj.<span class="property">className</span>.<span class="title function_">replace</span>(reg, <span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * toggleClass可以用来切换一个类</span></span><br><span class="line"><span class="comment"> * 	如果元素中具有该类，则删除</span></span><br><span class="line"><span class="comment"> * 	如果元素中没有该类，则添加</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toggleClass</span>(<span class="params">obj, cn</span>) &#123;</span><br><span class="line">  <span class="comment">//判断obj中是否含有cn</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">hasClass</span>(obj, cn)) &#123;</span><br><span class="line">    <span class="comment">//有，则删除</span></span><br><span class="line">    <span class="title function_">removeClass</span>(obj, cn);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">//没有，则添加</span></span><br><span class="line">    <span class="title function_">addClass</span>(obj, cn);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>来自 <a
href="https://www.bilibili.com/video/BV1YW411T7GX?p=136&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">尚硅谷
JavaScript 基础&amp;实战丨 JS 入门到精通全套完整版</a>
课程源码，仅作记录，老师讲的很好，强烈推荐！</p>
<p>学习此课程心得：</p>
<ol type="1">
<li>将大的问题、功能点一步步分解，可以借助流程图或者伪代码，然后一步步去实现。</li>
<li>去做，做的过程中出现问题再去解决问题。</li>
<li>思路一定要清晰，先想清楚，然后再去实现，不要一上来就开干。</li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>动画</tag>
      </tags>
  </entry>
  <entry>
    <title>将一个数组旋转 k 步</title>
    <url>/2023/07/25/%E5%B0%86%E4%B8%80%E4%B8%AA%E6%95%B0%E7%BB%84%E6%97%8B%E8%BD%AC-k-%E6%AD%A5/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>问题 1：输入一个数组 [1,2,3,4,5,6,7]，k=3，即旋转 3 步，输出
[5,6,7,1,2,3,4]</p>
<p>思路 1：把末尾的元素挨个 pop ，然后 unshift 到数组前面</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">rotateArray</span>(<span class="params">arr, k</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> length = arr.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">if</span> (!k || length === <span class="number">0</span>) <span class="keyword">return</span> arr;</span><br><span class="line">  k = <span class="title class_">Math</span>.<span class="title function_">abs</span>(k % length);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; k; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> lastElement = arr.<span class="title function_">pop</span>();</span><br><span class="line">    arr.<span class="title function_">unshift</span>(lastElement);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> inputArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line"><span class="keyword">const</span> k = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> rotatedArray = <span class="title function_">rotateArray</span>(inputArray, k);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rotatedArray); <span class="comment">// Output: [5, 6, 7, 1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>
<p>思路 2：把数组拆分，最后 concat 拼接到一起</p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">rotateArray</span>(<span class="params">arr, k</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> length = arr.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">if</span> (!k || length === <span class="number">0</span>) <span class="keyword">return</span> arr;</span><br><span class="line">  k = <span class="title class_">Math</span>.<span class="title function_">abs</span>(k % length); <span class="comment">// Handle cases where k is greater than the array length</span></span><br><span class="line">  <span class="keyword">const</span> firstPart = arr.<span class="title function_">slice</span>(<span class="number">0</span>, length - k);</span><br><span class="line">  <span class="keyword">const</span> secondPart = arr.<span class="title function_">slice</span>(length - k);</span><br><span class="line">  <span class="keyword">return</span> secondPart.<span class="title function_">concat</span>(firstPart);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> inputArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>];</span><br><span class="line"><span class="keyword">const</span> k = <span class="number">3</span>;</span><br><span class="line"><span class="keyword">const</span> rotatedArray = <span class="title function_">rotateArray</span>(inputArray, k);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(rotatedArray); <span class="comment">// Output: [5, 6, 7, 1, 2, 3, 4]</span></span><br></pre></td></tr></table></figure>
<p>让我们来分析以上两种思路的时间复杂度和空间复杂度：</p>
<p>思路 1：</p>
<p>时间复杂度：在该思路中，我们需要进行 k
次旋转操作。每次旋转操作都需要将末尾元素移除，并将其添加到数组的前面。pop
和 unshift 操作的时间复杂度都是 O(1)。因此，总体时间复杂度为 O(k)。
空间复杂度：在原地进行操作，没有使用额外的辅助数组或数据结构，因此空间复杂度为
O(1)，即为常数空间复杂度。</p>
<p>思路 2：</p>
<p>时间复杂度：在该思路中，我们需要进行一次 slice 操作和一次 concat
操作。slice 操作的时间复杂度为 O(n)，其中 n 是数组的长度。concat
操作的时间复杂度也是
O(n)，因为它需要遍历并拼接两个数组。因此，总体时间复杂度为 O(n)。
空间复杂度：在该思路中，我们使用了两个辅助数组，分别存储前部分和后部分的元素，因此空间复杂度为
O(n)，其中 n
是数组的长度。这里的空间复杂度主要由两个辅助数组的大小决定。</p>
<p>综上所述，思路 1 的时间复杂度为 O(k)，空间复杂度为 O(1)；而思路 2
的时间复杂度为 O(n)，空间复杂度为 O(n)。通常情况下，如果 k
的值较小且不与数组的长度相关，那么思路 1 的效率会更高。但是，如果 k
的值较大，接近或大于数组的长度，那么思路 2
的效率会更高，因为它只需要进行一次数组拼接操作。</p>
<p><strong>亮点</strong> 写单元测试</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>旋转数组</tag>
      </tags>
  </entry>
  <entry>
    <title>正则表达式中的 &#92;b</title>
    <url>/2023/07/07/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%AD%E7%9A%84-b/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>正则表达式中的 示单词边界（word
boundary）。它匹配一个位置，该位置位于单词字符和非单词字符之间，或者位于字符串的开头或结尾。单词字符包括字母、数字和下划线。</p>
<p>下面是一些示例，说明 使用方式：</p>
<span id="more"></span>
<p>匹配包含单词 “cat” 的字符串： 正则表达式：配的字符串：“I have a
cat.”、“The cat is cute.”、“My cat is black.”</p>
<p>匹配以字母 “b” 开头的单词： 正则表达式：+ 匹配的字符串：“The bird is
beautiful.”、“She bought a book.”</p>
<p>匹配以数字结尾的单词： 正则表达式：+配的字符串：“I have 3
apples.”、“The room number is 205.”</p>
<p>匹配独立的单词 “at”： 正则表达式：配的字符串：“I’m good at
swimming.”、“The hat is on the table.”、“He’s a great athlete.”</p>
<p>需要注意的是，正则表达式中的
一个转义字符，需要在字符串中使用双斜杠来表示，如
<code>\\bcat\\b</code>。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>正则表达式</tag>
        <tag>JavaScript</tag>
        <tag>&#92;b</tag>
      </tags>
  </entry>
  <entry>
    <title>Echarts 图表中动态添加单位</title>
    <url>/2023/07/07/Echarts-%E5%9B%BE%E8%A1%A8%E4%B8%AD%E5%8A%A8%E6%80%81%E6%B7%BB%E5%8A%A0%E5%8D%95%E4%BD%8D/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>现在有一个需求是：前端根据用户勾选的状态参数绘制多条曲线。</p>
<p>实现思路：</p>
<ol type="1">
<li>前端获取到用户勾选的状态参数。</li>
<li>将状态参数列表发给后端。</li>
<li>后端将状态参数的数据发给前端。</li>
<li>前端根据后端发送的参数，分别构建 legend，X 轴，Y
轴数据，并生成图表需要的 option，更新图表。</li>
</ol>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 根据参数名获取对应的单位</span></span><br><span class="line"><span class="title function_">getUnit</span>(<span class="params">key</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> unit = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">switch</span> (key) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;回风温度&quot;</span>:</span><br><span class="line">      unit = <span class="string">&quot;℃&quot;</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;回风湿度&quot;</span>:</span><br><span class="line">      unit = <span class="string">&quot;%&quot;</span>;</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> unit;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// 发起请求，更新图表</span></span><br><span class="line"><span class="title function_">requestData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 构造 Post 请求参数</span></span><br><span class="line">  <span class="keyword">const</span> data = &#123;</span><br><span class="line">    <span class="attr">start</span>: <span class="title function_">timeToTamp</span>(<span class="variable language_">this</span>.<span class="property">rangeDate</span>[<span class="number">0</span>]),</span><br><span class="line">    <span class="attr">end</span>: <span class="title function_">timeToTamp</span>(<span class="variable language_">this</span>.<span class="property">rangeDate</span>[<span class="number">1</span>]),</span><br><span class="line">    <span class="attr">ids</span>: <span class="variable language_">this</span>.<span class="property">checkedStatus</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 向后端请求状态参数数据</span></span><br><span class="line">  <span class="title function_">chart</span>(<span class="title function_">getToken</span>(<span class="string">&quot;id&quot;</span>), data)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> that = <span class="variable language_">this</span>; <span class="comment">// !!! 注意，此处需要保存 this，在 63 行代码处会用到</span></span><br><span class="line">        <span class="comment">// 构造 X 轴数据</span></span><br><span class="line">        <span class="keyword">let</span> xAxis = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; res.<span class="property">timestamp</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">          xAxis.<span class="title function_">push</span>(<span class="title function_">tampToTime</span>(res.<span class="property">timestamp</span>[i]));</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 构造 legend 数据</span></span><br><span class="line">        <span class="keyword">let</span> legend = [];</span><br><span class="line">        <span class="comment">// 构造 Y 轴数据</span></span><br><span class="line">        <span class="keyword">let</span> <span class="title class_">YAxis</span> = [];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> res.<span class="property">data</span>) &#123;</span><br><span class="line">          legend.<span class="title function_">push</span>(webidToName[key]);</span><br><span class="line">          <span class="keyword">let</span> temp = &#123;&#125;;</span><br><span class="line">          temp.<span class="property">name</span> = webidToName[key];</span><br><span class="line">          temp.<span class="property">type</span> = <span class="string">&quot;line&quot;</span>;</span><br><span class="line">          temp.<span class="property">unit</span> = res.<span class="property">unit</span>[key];</span><br><span class="line">          temp.<span class="property">data</span> = res.<span class="property">data</span>[key];</span><br><span class="line">          <span class="title class_">YAxis</span>.<span class="title function_">push</span>(temp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 更新图表</span></span><br><span class="line">        <span class="keyword">let</span> option = &#123;</span><br><span class="line">          <span class="attr">legend</span>: &#123;</span><br><span class="line">            <span class="attr">data</span>: legend</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">xAxis</span>: &#123;</span><br><span class="line">            <span class="attr">data</span>: xAxis</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="comment">// 鼠标悬浮提示框</span></span><br><span class="line">          <span class="attr">tooltip</span>: &#123;</span><br><span class="line">            <span class="attr">trigger</span>: <span class="string">&quot;axis&quot;</span>, <span class="comment">// 触发</span></span><br><span class="line">            <span class="comment">// 轴指针</span></span><br><span class="line">            <span class="attr">axisPointer</span>: &#123;</span><br><span class="line">              <span class="comment">// 鼠标样式</span></span><br><span class="line">              <span class="attr">animation</span>: <span class="literal">true</span>,</span><br><span class="line">              <span class="comment">// 竖线条样式</span></span><br><span class="line">              <span class="attr">lineStyle</span>: &#123;</span><br><span class="line">                <span class="attr">width</span>: <span class="number">2</span>, <span class="comment">// 宽度</span></span><br><span class="line">                <span class="attr">opacity</span>: <span class="number">0.8</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">formatter</span>: <span class="keyword">function</span>(<span class="params">params</span>) &#123;</span><br><span class="line">              <span class="keyword">var</span> relVal = params[<span class="number">0</span>].<span class="property">name</span>;</span><br><span class="line">              <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, l = params.<span class="property">length</span>; i &lt; l; i++) &#123;</span><br><span class="line">                relVal +=</span><br><span class="line">                  <span class="string">&quot;&lt;br/&gt;&quot;</span> +</span><br><span class="line">                  params[i].<span class="property">marker</span> +</span><br><span class="line">                  <span class="string">&quot; &quot;</span> +</span><br><span class="line">                  params[i].<span class="property">seriesName</span> +</span><br><span class="line">                  <span class="string">&quot; : &quot;</span> +</span><br><span class="line">                  params[i].<span class="property">value</span> +</span><br><span class="line">                  <span class="string">&quot; &quot;</span> +</span><br><span class="line">                  that.<span class="title function_">getUnit</span>(params[i].<span class="property">seriesName</span>);</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span> relVal;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          <span class="attr">series</span>: <span class="title class_">YAxis</span></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">chart</span>.<span class="title function_">setOption</span>(option);</span><br><span class="line">      &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(e);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="title class_">Message</span>(&#123;</span><br><span class="line">        <span class="attr">message</span>: err.<span class="property">response</span>.<span class="property">data</span>.<span class="property">message</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&quot;error&quot;</span>,</span><br><span class="line">        <span class="attr">duration</span>: <span class="number">5</span> * <span class="number">1000</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>参考文档： <a
href="https://blog.csdn.net/weixin_55508391/article/details/128452403">Echarts
折线图数值后添加单位</a> 提供了根据曲线名查找对应的单位思路。 <a
href="https://juejin.cn/post/7212500870763642938">Echarts 的 tooltip
中动态单位设置（使用 formatter 函数加工）</a> 提供了保存 this
的思路。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>Echarts</tag>
        <tag>Vue</tag>
        <tag>单位</tag>
      </tags>
  </entry>
  <entry>
    <title>时间复杂度和空间复杂度</title>
    <url>/2023/07/25/%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%E5%92%8C%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>时间复杂度和空间复杂度是用于衡量算法效率的概念。</p>
<ol type="1">
<li><p>时间复杂度：
时间复杂度描述了算法运行时间随输入规模增长而增加的速率。它表示算法执行所需的时间与输入数据的大小之间的关系。通常用大
O 符号（O）来表示时间复杂度。 例如，如果一个算法的时间复杂度为
O(n)，意味着随着输入数据的大小 n
增加，算法的运行时间会线性增长。如果时间复杂度为
O(n^2)，则表示随着输入数据的大小 n
增加，算法的运行时间会按二次方增长。一般而言，时间复杂度越低，算法执行速度越快。</p></li>
<li><p>空间复杂度：
空间复杂度描述了算法执行所需的额外空间随输入规模增长而增加的速率。它表示算法使用的额外内存空间与输入数据的大小之间的关系。通常也用大
O 符号（O）来表示空间复杂度。 例如，如果一个算法的空间复杂度为
O(n)，意味着随着输入数据的大小 n
增加，算法使用的额外内存空间也会线性增长。如果空间复杂度为
O(1)，则表示算法使用的额外内存空间是常数，与输入数据的大小无关。</p></li>
</ol>
<p>在进行算法分析时，我们通常关注算法的时间复杂度和空间复杂度，以便评估算法的效率和资源利用情况。较低的时间复杂度和空间复杂度通常意味着更优秀的算法。然而，要根据具体情况选择合适的算法，因为某些情况下可能需要在时间和空间之间进行权衡。</p>
<span id="more"></span>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>时间复杂度</tag>
        <tag>空间复杂度</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 基础知识总结2</title>
    <url>/2023/07/25/JavaScript-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%BB%932/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p><strong>对象</strong></p>
<ol type="1">
<li><p>什么是对象</p>
<ul>
<li>多个数据的封装体</li>
<li>用来保存多个数据的容器</li>
<li>一个对象代表现实中的一个事物</li>
</ul></li>
<li><p>为什么要用对象</p>
<ul>
<li>统一管理多个数据</li>
</ul></li>
<li><p>对象的组成</p>
<ul>
<li>属性：属性名（字符串）和属性值（任意）组成</li>
<li>方法：一种特别的属性（属性值是函数）</li>
</ul></li>
<li><p>如何访问对象内部数据</p>
<ul>
<li>.属性名：编码简单，有时不能用</li>
<li>[‘属性名’]：编码麻烦，能通用</li>
</ul></li>
<li><p>FAQ</p>
<ul>
<li>什么时候必须用[‘属性名’]的方式
<ul>
<li>属性名包含特殊字符：- 空格</li>
<li>变量名不确定</li>
</ul></li>
</ul></li>
</ol>
<span id="more"></span>
<p><strong>函数</strong></p>
<ol type="1">
<li><p>什么是函数</p>
<ul>
<li>实现特定功能的 n 条语句的封装体</li>
<li>只有函数是可以执行的，其它类型的数据不能执行</li>
</ul></li>
<li><p>为什么要用函数</p>
<ul>
<li>提高代码复用</li>
<li>便于阅读交流</li>
</ul></li>
<li><p>如何定义函数</p>
<ul>
<li>函数声明</li>
<li>表达式</li>
</ul></li>
<li><p>如何调用(执行)函数</p>
<ul>
<li>test()：直接调用</li>
<li>obj.test()：通过对象调用</li>
<li>new test()：new 调用</li>
<li>test.call/apply(obj)：临时让 test 成为 obj 的方法进行调用</li>
</ul></li>
<li><p>回调函数</p>
<ul>
<li><p>你定义的</p></li>
<li><p>你没有调用</p></li>
<li><p>但最终它执行了</p></li>
<li><p>常见的回调函数</p>
<ul>
<li>dom 事件回调函数 ==&gt; 发生事件的 dom 元素</li>
<li>定时器回调函数 ==&gt; window</li>
<li>ajax 请求回调函数</li>
<li>生命周期回调函数</li>
</ul></li>
</ul></li>
<li><p>IIFE</p>
<ul>
<li>Immediately-Invoked Function Expression</li>
<li>(function(){console.log(‘I am a IIFE’)})()</li>
<li>隐藏实现</li>
<li>不会污染外部（全局）命名空间</li>
</ul></li>
<li><p>函数中的 this</p>
<ul>
<li><p>this 是什么</p>
<ul>
<li>任何函数本质上都是通过某个对象来调用的，如果没有直接指定就是 window
调用</li>
<li>所有函数内部都有一个变量 this</li>
<li>它的值是调用函数的当前对象</li>
</ul></li>
<li><p>如何确定 this 的值</p>
<ul>
<li>test(): window</li>
<li>p.test(): p</li>
<li>new test(): <strong>新创建的对象</strong></li>
<li>p.call(obj): obj</li>
</ul></li>
</ul></li>
</ol>
<p><strong>JS 语句分号</strong></p>
<ol type="1">
<li><p>以下两种情况不加分号会有问题</p>
<ul>
<li>小括号开头的前一条语句</li>
<li>中放括号开头的一条语句</li>
</ul></li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>函数高级</title>
    <url>/2023/07/26/%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A7/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ol type="1">
<li><p>原型与原型链</p>
<ul>
<li><p>原型(prototype)</p>
<ul>
<li>函数的 prototype 属性
<ul>
<li>每个函数都有一个 prototype 属性，它默认指向一个 Object
空对象（即称为：原型对象)</li>
<li>原型对象中有一个 constructor ，它指向函数对象</li>
</ul></li>
</ul></li>
<li><p>显式原型与隐式原型</p>
<ul>
<li>每个函数 function 都有一个 prototype，即显式原型(属性)</li>
<li>每个实例对象都有一个
<code>__proto__</code>，可称为隐式原型（属性）</li>
<li>对象的隐式原型的值为其对应构造函数的显示原型的值</li>
</ul></li>
<li><p>原型链</p>
<ul>
<li>访问一个对象的属性时：
<ul>
<li>先在自身属性中查找，找到返回</li>
<li>如果没有，再沿着 <code>__proto__</code>
这条链向上查找，找到返回</li>
<li>如果最终没有找到，返回 undefined</li>
</ul></li>
<li>别名：隐式原型连</li>
<li>作用：查找对象的属性（方法）</li>
<li>原型继承
<ul>
<li>构造函数的实例对象自动拥有构造函数原型对象的属性（方法）</li>
<li>利用的就是原型链</li>
</ul></li>
<li>原型属性问题
<ul>
<li>读取对象的属性值时，会自动到原型链中查找</li>
<li>设置对象的属性值时，不会查找原型链，如果当前对象中没有此属性，直接添加此属性并设置值</li>
<li>方法一般定义在原型中，属性一般通过构造函数定义在对象本身上</li>
</ul></li>
</ul></li>
<li><p>探索 instanceof</p>
<ul>
<li>表达式：A instanceof B</li>
<li>如果 B 函数的显示原型对象在 A 对象的原型链上，返回 true，否则返回
false</li>
</ul></li>
</ul></li>
</ol>
<span id="more"></span>
<ol start="2" type="1">
<li><p>执行上下文与执行上下文栈</p>
<ul>
<li><p>变量提升与函数提升</p>
<ul>
<li>变量声明提升
<ul>
<li>通过 var 定义（声明）的变量，在定义语句之前就可以访问到</li>
<li>值 undefined</li>
</ul></li>
<li>函数声明提升
<ul>
<li>通过 function 声明的函数，在之前就可以直接调用</li>
<li>值：函数定义（对象）</li>
</ul></li>
<li>变量提升和函数提升是如何产生的</li>
</ul></li>
<li><p>执行上下文</p>
<ul>
<li><p>代码分类</p>
<ul>
<li>全局代码</li>
<li>函数（局部）代码</li>
</ul></li>
<li><p>全局执行上下文</p>
<ul>
<li>在执行全局代码前将 window 确定为全局执行上下文</li>
<li>对全局数据进行预处理
<ul>
<li>var 定义的全局变量 ==&gt; undefined，添加为 window 的属性</li>
<li>function 声明的全局函数 ==&gt; 赋值（fun），添加为 window
的方法</li>
<li>this ==&gt; 赋值（window）</li>
</ul></li>
<li>开始执行全局代码</li>
</ul></li>
<li><p>函数执行上下文</p>
<ul>
<li>在调用函数，准备执行函数体之前，创建对应的函数执行上下文对象</li>
<li>对局部函数进行预处理
<ul>
<li>形参变量 ==&gt; 赋值（实参）==&gt; 添加为执行上下文的属性</li>
<li>arguments ==&gt; 赋值（实参列表），添加为执行上下文的属性</li>
<li>var 定义的局部变量 ==&gt; undefined，添加为执行上下文的属性</li>
<li>function 声明的函数 ==&gt; 赋值（fun)，添加为执行上下文的方法</li>
<li>this ==&gt; 赋值（调用函数的对象）</li>
</ul></li>
<li>开始执行函数体代码</li>
</ul></li>
</ul></li>
<li><p>执行上下文栈</p>
<ul>
<li>在全局代码执行前，JS
引擎就会创建一个栈来存储管理所有的执行上下文对象</li>
<li>在全局执行上下文（window）确定后，将其添加到栈中（压栈）</li>
<li>在函数执行上下文创建后，将其添加到栈中（压栈）</li>
<li>在当前函数执行完后，将栈顶的对象移除（出栈）</li>
<li>当所有的代码执行完后，栈中只剩下 window</li>
</ul></li>
</ul></li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>函数</tag>
      </tags>
  </entry>
  <entry>
    <title>函数高级2</title>
    <url>/2023/07/27/%E5%87%BD%E6%95%B0%E9%AB%98%E7%BA%A72/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ol type="1">
<li><p>作用域与作用域链</p>
<ul>
<li><p>作用域</p>
<ul>
<li>理解
<ul>
<li>代码段所在的区域</li>
<li>它是静态的（相对于上下文对象），在编写代码时就确定了</li>
</ul></li>
<li>分类
<ul>
<li>全局作用域</li>
<li>函数作用域</li>
<li>块作用域</li>
</ul></li>
<li>作用
<ul>
<li>隔离变量，不同作用域下同名变量不会有冲突</li>
</ul></li>
</ul></li>
<li><p>作用域与执行上下文</p>
<ul>
<li>区别 1
<ul>
<li>全局作用域外，每个函数都会创建自己的作用域，作用域在函数定义时就已经确定了，而不是在调用时确定</li>
<li>全局执行上下文环境是在全局作用域确定后，js 代码马上执行之前创建</li>
<li>函数执行上下文环境是在调用函数时，函数体代码执行之前创建</li>
</ul></li>
<li>区别 2
<ul>
<li>作用域是静态的，只要函数定义好了就一直存在，且不会变化</li>
<li>上下文环境是动态的，调用函数时创建，函数调用结束时上下文环境就自动释放</li>
</ul></li>
<li>联系
<ul>
<li>执行上下文环境（对象）是从属于所在的作用域</li>
<li>全局上下文环境 ==&gt; 全局作用域</li>
<li>函数上下文环境 ==&gt; 对应的函数使用域</li>
</ul></li>
</ul></li>
<li><p>作用域链</p></li>
</ul></li>
</ol>
<span id="more"></span>
<ol start="2" type="1">
<li><p>闭包</p>
<ul>
<li>如何产生闭包
<ul>
<li>当一个嵌套的内部（子）函数引用了嵌套的外部（父）函数的变量（函数）时，就产生了闭包</li>
</ul></li>
<li>闭包到底是什么
<ul>
<li>使用 chrome 查看</li>
<li>理解一：闭包是嵌套的内部函数</li>
<li>理解二：包含被引用变量（函数）的对象</li>
<li>注意：闭包存在于嵌套的内部函数中</li>
</ul></li>
<li>产生闭包的条件
<ul>
<li>函数嵌套</li>
<li>内部函数引用了外部函数的数据（变量/函数)</li>
</ul></li>
<li>闭包的作用
<ul>
<li>使函数内部的变量在函数执行完后,仍然存活在内存中(延长了局部变量的声明周期)</li>
<li>让函数外部可以操作(读写)到函数内部的数据(变量/函数)</li>
</ul></li>
<li>闭包的应用:定义 JS 模块
<ul>
<li>具有特定功能的 js 文件</li>
<li>将所有的数据和功能都封装在一个函数内部(私有的)</li>
<li>只向外暴露一个包含 n 个方法的对象或函数</li>
<li>模块的使用者,只需要通过模块暴露的对象调用方法来实现对应的功能</li>
</ul></li>
<li>缺点
<ul>
<li>函数执行完后,函数内的局部变量没有释放,占用内存时间变长</li>
<li>容易造成内存泄漏</li>
</ul></li>
<li>解决
<ul>
<li>能不用闭包就不用</li>
<li>及时释放</li>
</ul></li>
</ul></li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>函数</tag>
      </tags>
  </entry>
  <entry>
    <title>寻找数组的中心索引</title>
    <url>/2023/07/28/%E5%AF%BB%E6%89%BE%E6%95%B0%E7%BB%84%E7%9A%84%E4%B8%AD%E5%BF%83%E7%B4%A2%E5%BC%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>自己想到的解法，就是循环遍历数组中的每一个元素，求出左侧数之和和右侧数之和，然后判断是否相等。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> pivotIndex = <span class="keyword">function</span> (<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> sumLeft = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> sumRight = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1.求左侧数之和</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> l = <span class="number">0</span>; l &lt; i; l++) &#123;</span><br><span class="line">      sumLeft += nums[l];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2.求右侧数之和</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> r = i + <span class="number">1</span>; r &lt; nums.<span class="property">length</span>; r++) &#123;</span><br><span class="line">      sumRight += nums[r];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 判断</span></span><br><span class="line">    <span class="keyword">if</span> (sumLeft === sumRight) &#123;</span><br><span class="line">      <span class="keyword">return</span> i;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (i === nums.<span class="property">length</span> - <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">nums = [<span class="number">1</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">pivotIndex</span>(nums));</span><br></pre></td></tr></table></figure>
<p>由于使用了嵌套的 for 循环，所以时间复杂度为 O(n²)。</p>
<span id="more"></span>
<p>结合<a
href="https://leetcode.cn/problems/find-the-middle-index-in-array/solutions/1010005/zhao-dao-shu-zu-de-zhong-jian-wei-zhi-by-s8cy/">力扣官方解法</a>和
gpt 给出的答案，不得不说， gpt
真是辅助开发的好伙伴啊！！！又发现了它的一个妙用 O(∩_∩)O<sub></sub></p>
<p>可以使用前缀和（Prefix Sum）来优化这段代码，从而将时间复杂度降低到
O(n)。前缀和是一种常用的技巧，它可以在一次遍历数组的过程中，将某个位置的元素之前所有元素的累加和计算出来，从而避免了重复计算。</p>
<p>当中心索引左侧或右侧没有元素时，即为零个项相加，这在数学上称作「空和」（empty sum）。在程序设计中我们约定「空和是零」。</p>
<p>优化方案的思路是先计算出数组的总和
totalSum，然后遍历数组一次，在遍历的过程中，用变量 leftSum
记录当前索引之前的所有元素的累加和。在每次遍历时，检查 leftSum 是否等于
totalSum - leftSum -
nums[i]，如果是，则说明找到了中心索引，直接返回当前索引 i。</p>
<p>这种优化方案的时间复杂度为
O(n)，只需要一次遍历数组即可找到中心索引，而不需要嵌套循环。同时，空间复杂度仍然为
O(1)，因为只使用了常数个额外的变量来保存结果。这样的优化方案在处理大规模数组时性能会更好。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">findCenterIndex</span>(<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> totalSum = nums.<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, num</span>) =&gt;</span> acc + num, <span class="number">0</span>);</span><br><span class="line">  <span class="keyword">let</span> leftSum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (leftSum === totalSum - leftSum - nums[i]) &#123;</span><br><span class="line">      <span class="keyword">return</span> i;</span><br><span class="line">    &#125;</span><br><span class="line">    leftSum += nums[i];</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nums = [<span class="number">1</span>, <span class="number">7</span>, <span class="number">3</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line"><span class="keyword">const</span> centerIndex = <span class="title function_">findCenterIndex</span>(nums);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(centerIndex); <span class="comment">// 输出: 3</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>中心索引</tag>
      </tags>
  </entry>
  <entry>
    <title>两数之和</title>
    <url>/2023/07/27/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>leetcode 题库里面的<a
href="https://leetcode.cn/problems/two-sum/solutions/434597/liang-shu-zhi-he-by-leetcode-solution/">一道题</a>，官方讲解得很清楚，记录一下。</p>
<p>给定一个整数数组 nums 和一个整数目标值
target，请你在该数组中找出和为目标值 target 的那 两个
整数，并返回它们的数组下标。</p>
<p>你可以假设每种输入只会对应一个答案。但是，数组中同一个元素在答案里不能重复出现。</p>
<p>你可以按任意顺序返回答案。</p>
<p>解法一，比较容易想到的解法就是暴力求解，嵌套 for 循环，时间复杂度
O（n²），空间复杂度 O(1)。
题目要求，数组中同一个元素在答案里不能重复出现，所以，第二层 for
循环只需要在 i 之后的元素中寻找。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">target</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number[]</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> twoSum = <span class="keyword">function</span> (<span class="params">nums, target</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span> - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = i + <span class="number">1</span>; j &lt; nums.<span class="property">length</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (nums[i] + nums[j] === target) <span class="keyword">return</span> [i, j];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>解法二，使用 HASH 表取代内层循环，以空间换时间。
哈希表中储存的是数组中的数字和数字对应的索引，其中：key
为数组中的数字，value 为数字对应的索引，每次循环判断 target
值减去数字值在不在 key
中，在的话就返回数组下标，不在的话就将数字和下标保存在哈希表中。</p>
<img src="/2023/07/27/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C.png" class="">
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[]</span>&#125; <span class="variable">nums</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">target</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number[]</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> twoSum = <span class="keyword">function</span> (<span class="params">nums, target</span>) &#123;</span><br><span class="line">  <span class="comment">// 存储出现过的数字和索引，其中 key 为 数字，value 为索引</span></span><br><span class="line">  <span class="keyword">const</span> hashTable = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 当前元素</span></span><br><span class="line">    <span class="keyword">const</span> curNum = nums[i];</span><br><span class="line">    <span class="comment">// 目标元素</span></span><br><span class="line">    <span class="keyword">const</span> anotherNum = target - curNum;</span><br><span class="line">    <span class="comment">// 获取目标元素的索引</span></span><br><span class="line">    <span class="keyword">const</span> anotherNumIndex = hashTable[anotherNum];</span><br><span class="line">    <span class="comment">// 如果哈希表中存在</span></span><br><span class="line">    <span class="keyword">if</span> (anotherNumIndex !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> [i, anotherNumIndex];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      hashTable[curNum] = i;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>哈希表</tag>
      </tags>
  </entry>
  <entry>
    <title>Adobe Acrobat Pro DC 修改文档背景颜色</title>
    <url>/2023/07/31/Adobe-Acrobat-Pro-DC-%E4%BF%AE%E6%94%B9%E6%96%87%E6%A1%A3%E8%83%8C%E6%99%AF%E9%A2%9C%E8%89%B2/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ol type="1">
<li>修改文档背景色</li>
</ol>
<p>参考<a
href="https://blog.csdn.net/annuusheli/article/details/122397114">原文</a>，记录备查！</p>
<p>修改路径：打开 Acrobat DC 点击编辑 ==&gt; 首选项 ==&gt; 辅助工具
==&gt; 文档颜色选项 ==&gt; 自定义颜色。</p>
<p>几种柔和的背景色配色方案:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Typora颜色：（255,251,232）</span><br><span class="line">下面的颜色部分转载于（https://www.jianshu.com/p/bbe9ce62e5a2）</span><br><span class="line">河白色 FFFFFF rgb(255, 255, 255)</span><br><span class="line">杏仁黄 FAF9DE rgb(250, 249, 222)</span><br><span class="line">秋叶褐 FFF2E2 rgb(255, 242, 226)</span><br><span class="line">胭脂红 FDE6E0 rgb(253, 230, 224)</span><br><span class="line">青草绿 E3EDCD rgb(227, 237, 205)</span><br><span class="line">海天蓝 DCE2F1 rgb(220, 226, 241)</span><br><span class="line">葛巾紫 E9EBFE rgb(233, 235, 254)</span><br><span class="line">极光灰 EAEAEF rgb(234, 234, 239)</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li>快速高亮文本</li>
</ol>
<p>参考<a
href="https://helpx.adobe.com/cn/acrobat/using/keyboard-shortcuts.html">原文</a>，要启用单键快捷方式，请打开“首选项”对话框（“编辑”&gt;“首选项”），然后在“一般”下，选择“使用单键加速键访问工具”选项。
展开页面右侧导航，选择 注释 ，点击 高亮文本
工具，可实现鼠标左键双击高亮文本。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">选定当前高亮标记工具 U</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Adobe Acrobat Pro</tag>
      </tags>
  </entry>
  <entry>
    <title>2023 阅读记录</title>
    <url>/2023/07/28/2023-%E9%98%85%E8%AF%BB%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="英文原版书">英文原版书</h1>
<ul class="task-list">
<li><label><input type="checkbox" checked="" />1.<a
href="https://www.amazon.com/Dinosaurs-Before-Dark-Magic-House/dp/0679824111/ref=sr_1_1?crid=1A9XM3ZS88ZC2&amp;keywords=dinosaurs+before+dark+magic+tree+house%2C+no.+1&amp;qid=1690514336&amp;sprefix=%2Caps%2C442&amp;sr=8-1">Dinosaurs
Before Dark (Magic Tree House, No. 1)</a></label></li>
<li><label><input type="checkbox" checked="" />2.<a
href="https://www.amazon.com/Knight-Dawn-Magic-Tree-House/dp/067982412X/ref=sr_1_1?keywords=the+knight+at+dawn&amp;qid=1690856230&amp;s=books&amp;sprefix=the+knight+at+%2Cstripbooks-intl-ship%2C474&amp;sr=1-1">The
Knight at Dawn (Magic Tree House, No. 2)</a></label></li>
<li><label><input type="checkbox" checked="" />3.<a
href="https://www.amazon.com/Mummies-Morning-Magic-Tree-House/dp/0679824243/ref=sr_1_1?keywords=mummies+in+the+morning&amp;qid=1691631796&amp;s=books&amp;sprefix=mum%2Cstripbooks-intl-ship%2C295&amp;sr=1-1">Mummies
in the Morning</a></label></li>
<li><label><input type="checkbox" checked="" />4.<a
href="https://www.amazon.com/gp/product/0679824251?ref_=dbs_m_mng_rwt_calw_tpbk_3&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Pirates
Past Noon</a></label></li>
<li><label><input type="checkbox" checked="" />5.<a
href="https://www.amazon.com/gp/product/0679863710?ref_=dbs_m_mng_rwt_calw_tpbk_4&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Night
of the Ninjas</a></label></li>
</ul>
<span id="more"></span>
<ul class="task-list">
<li><label><input type="checkbox" checked="" />6.<a
href="https://www.amazon.com/gp/product/0679863729?ref_=dbs_m_mng_rwt_calw_tpbk_5&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Afternoon
on the Amazon</a></label></li>
<li><label><input type="checkbox" checked="" />7.<a
href="https://www.amazon.com/gp/product/0679863737?ref_=dbs_m_mng_rwt_calw_tpbk_6&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Sunset
of the Sabertooth</a></label></li>
<li><label><input type="checkbox" checked="" />8.<a
href="https://www.amazon.com/gp/product/0679863745?ref_=dbs_m_mng_rwt_calw_tpbk_7&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Midnight
on the Moon</a></label></li>
<li><label><input type="checkbox" checked="" />9.<a
href="https://www.amazon.com/gp/product/067988338X?ref_=dbs_m_mng_rwt_calw_tpbk_8&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Dolphins
at Daybreak</a></label></li>
<li><label><input type="checkbox" checked="" />10.<a
href="https://www.amazon.com/gp/product/0679883398?ref_=dbs_m_mng_rwt_calw_tpbk_9&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Ghost
Town at Sundown</a></label></li>
<li><label><input type="checkbox" checked="" />11.<a
href="https://www.amazon.com/gp/product/0679883401?ref_=dbs_m_mng_rwt_calw_tpbk_10&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Lions
at Lunchtime</a></label></li>
<li><label><input type="checkbox" checked="" />12.<a
href="https://www.amazon.com/gp/product/067988341X?ref_=dbs_m_mng_rwt_calw_tpbk_11&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Polar
Bears Past Bedtime</a></label></li>
<li><label><input type="checkbox" checked="" />13.<a
href="https://www.amazon.com/gp/product/0679890505?ref_=dbs_m_mng_rwt_calw_tpbk_12&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Vacation
Under The Volcano</a></label></li>
<li><label><input type="checkbox" checked="" />14.<a
href="https://www.amazon.com/gp/product/0679890513?ref_=dbs_m_mng_rwt_calw_tpbk_13&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Day
of the Dragon King</a></label></li>
<li><label><input type="checkbox" checked="" />15.<a
href="https://www.amazon.com/gp/product/0679890610?ref_=dbs_m_mng_rwt_calw_tpbk_14&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Viking
Ships At Sunrise</a></label></li>
<li><label><input type="checkbox" checked="" />16.<a
href="https://www.amazon.com/gp/product/0679890629?ref_=dbs_m_mng_rwt_calw_tpbk_14&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Hour
of the Olympics</a></label></li>
<li><label><input type="checkbox" checked="" />17.<a
href="https://www.amazon.com/gp/product/0679890637?ref_=dbs_m_mng_rwt_calw_tpbk_15&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Tonight
on the Titanic</a></label></li>
<li><label><input type="checkbox" checked="" />18.<a
href="https://www.amazon.com/gp/product/0679890645?ref_=dbs_m_mng_rwt_calw_tpbk_16&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Buffalo
Before Breakfast</a></label></li>
<li><label><input type="checkbox" checked="" />19.<a
href="https://www.amazon.com/gp/product/0679890653?ref_=dbs_m_mng_rwt_calw_tpbk_17&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Tigers
at Twilight</a></label></li>
<li><label><input type="checkbox" checked="" />20.<a
href="https://www.amazon.com/gp/product/0679890661?ref_=dbs_m_mng_rwt_calw_tpbk_18&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Dingoes
at Dinnertime</a></label></li>
<li><label><input type="checkbox" checked="" />21.<a
href="https://www.amazon.com/gp/product/067989067X?ref_=dbs_m_mng_rwt_calw_tpbk_19&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Civil
War On Sunday</a></label></li>
<li><label><input type="checkbox" checked="" />22.<a
href="https://www.amazon.com/gp/product/0679890688?ref_=dbs_m_mng_rwt_calw_tpbk_20&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Revolutionary
War on Wednesday</a></label></li>
<li><label><input type="checkbox" checked="" />23.<a
href="https://www.amazon.com/gp/product/0679890696?ref_=dbs_m_mng_rwt_calw_tpbk_21&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Twister
on Tuesday</a></label></li>
<li><label><input type="checkbox" checked="" />24.<a
href="amazon.com/gp/product/0375806113?ref_=dbs_m_mng_rwt_calw_tpbk_22&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Stage
Fright on a Summer Night</a></label></li>
<li><label><input type="checkbox" checked="" />25.<a
href="https://www.amazon.com/gp/product/0375806148?ref_=dbs_m_mng_rwt_calw_tpbk_23&amp;storeType=ebooks&amp;qid=1691631796&amp;sr=1-1">Good
Morning, Gorillas</a></label></li>
</ul>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>英文原版</tag>
      </tags>
  </entry>
  <entry>
    <title>搜索插入位置</title>
    <url>/2023/07/31/%E6%90%9C%E7%B4%A2%E6%8F%92%E5%85%A5%E4%BD%8D%E7%BD%AE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>给定一个排序数组和一个目标值，在数组中找到目标值，并返回其索引。如果目标值不存在于数组中，返回它将会被按顺序插入的位置。</p>
<p>请必须使用时间复杂度为 O(log n) 的算法。</p>
<p>自己想到的解法,时间复杂度为 O(n)：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> length = nums.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (target &lt;= nums[<span class="number">0</span>]) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (target === nums[length - <span class="number">1</span>]) &#123;</span><br><span class="line">  <span class="keyword">return</span> length - <span class="number">1</span>;</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (target &gt; nums[length - <span class="number">1</span>]) &#123;</span><br><span class="line">  <span class="keyword">return</span> length;</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> flag = <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (target === nums[i]) <span class="keyword">return</span> i;</span><br><span class="line">    <span class="keyword">else</span> flag = <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; nums.<span class="property">length</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (target &gt;= nums[i] &amp;&amp; target &lt;= nums[i + <span class="number">1</span>]) &#123;</span><br><span class="line">        <span class="keyword">return</span> i + <span class="number">1</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>经过 gpt 改进后的代码,时间复杂度为 O(log
n)，划重点：看到已排序的数组，就要想到二分查找法！记住此代码模板！！！</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">searchInsert</span>(<span class="params">nums, target</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> right = nums.<span class="property">length</span> - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (left &lt;= right) &#123;</span><br><span class="line">    <span class="keyword">const</span> mid = <span class="title class_">Math</span>.<span class="title function_">floor</span>((left + right) / <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">if</span> (nums[mid] === target) &#123;</span><br><span class="line">      <span class="keyword">return</span> mid;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (nums[mid] &lt; target) &#123;</span><br><span class="line">      left = mid + <span class="number">1</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      right = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> left;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a
href="https://leetcode.cn/problems/search-insert-position/solutions/8017/hua-jie-suan-fa-35-sou-suo-cha-ru-wei-zhi-by-guanp/">力扣高赞解题</a></p>
<p>注意：</p>
<p>二分查找的思路不难理解，但是边界条件容易出错，比如 循环结束条件中
left 和 right 的关系，更新 left 和 right 位置时要不要加 1 减 1。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>二分查找</tag>
      </tags>
  </entry>
  <entry>
    <title>javaScript sort 函数</title>
    <url>/2023/08/01/javaScript-sort-%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在 JavaScript 中，Array.prototype.sort()
是一个内置的数组排序方法，用于对数组元素进行排序。它可以接受一个可选的比较函数作为参数，用于定义排序的顺序。</p>
<p>语法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">array.<span class="title function_">sort</span>([compareFunction]);</span><br></pre></td></tr></table></figure>
<p>参数：</p>
<p>compareFunction：一个可选的函数，用于定义排序顺序。如果省略此参数，数组元素将按照默认的字符串排序顺序进行排序。
返回值： 排序后的数组。请注意，sort()
方法会直接修改原始数组，并且不会创建新的副本。</p>
<p>比较函数的形式：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">compareFunction</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="comment">// 返回一个负数表示 a 应该在 b 之前</span></span><br><span class="line">  <span class="comment">// 返回 0 表示 a 和 b 相等的排序顺序</span></span><br><span class="line">  <span class="comment">// 返回一个正数表示 a 应该在 b 之后</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ul>
<li>如果 compareFunction(a, b) 返回负数，表示 a 小于 b，a 会排在 b
前面。</li>
<li>如果 compareFunction(a, b) 返回 0，表示 a 和 b
相等，排序顺序不变。</li>
<li>如果 compareFunction(a, b) 返回正数，表示 a 大于 b，a 会排在 b
后面。</li>
</ul>
<p>如果不提供 compareFunction 参数，sort()
方法将按照默认的字符串排序顺序进行排序，例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fruits = [<span class="string">&quot;banana&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;apple&quot;</span>, <span class="string">&quot;lemon&quot;</span>];</span><br><span class="line">fruits.<span class="title function_">sort</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fruits); <span class="comment">// 输出 [&#x27;apple&#x27;, &#x27;banana&#x27;, &#x27;lemon&#x27;, &#x27;orange&#x27;]</span></span><br></pre></td></tr></table></figure>
<p>如果提供了 compareFunction
参数，排序顺序将根据该函数的逻辑来确定。例如，对于数字数组：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> numbers = [<span class="number">10</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">numbers.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a - b); <span class="comment">// 升序排序</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers); <span class="comment">// 输出 [1, 2, 5, 8, 10]</span></span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line">numbers.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> b - a); <span class="comment">// 降序排序</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(numbers); <span class="comment">// 输出 [10, 8, 5, 2, 1]</span></span><br></pre></td></tr></table></figure>
<p>需要注意的是，sort()
方法会直接修改原始数组，因此请谨慎使用以免造成不必要的副作用。如果需要保留原数组，可以在调用
sort() 前先复制一份原数组。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>sort</tag>
      </tags>
  </entry>
  <entry>
    <title>合并区间</title>
    <url>/2023/08/01/%E5%90%88%E5%B9%B6%E5%8C%BA%E9%97%B4/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>以数组 intervals 表示若干个区间的集合，其中单个区间为 intervals[i] =
[starti, endi]
。请你合并所有重叠的区间，并返回一个不重叠的区间数组，该数组需恰好覆盖输入中的所有区间
 。</p>
<p>示例 1：</p>
<p>输入：intervals = [[1,3],[2,6],[8,10],[15,18]]
输出：[[1,6],[8,10],[15,18]] 解释：区间 [1,3] 和 [2,6] 重叠,
将它们合并为 [1,6].</p>
<p>示例  2：</p>
<p>输入：intervals = [[1,4],[4,5]] 输出：[[1,5]] 解释：区间 [1,4] 和
[4,5] 可被视为重叠区间。</p>
<p>提示：</p>
<p>1 &lt;= intervals.length &lt;= 104 intervals[i].length == 2 0 &lt;=
starti &lt;= endi &lt;= 104</p>
<span id="more"></span>
<p>要合并重叠的区间，我们需要首先将输入的区间数组按照区间的起始位置进行排序，然后遍历排序后的数组，逐个合并重叠的区间。</p>
<p>以下是解决问题的算法步骤：</p>
<ol type="1">
<li>对输入的 intervals 数组按照区间的起始位置进行升序排序。</li>
<li>初始化一个结果数组 merged 用于存储合并后的区间。</li>
<li>遍历排序后的 intervals 数组，如果当前区间与 merged
中的最后一个区间有重叠，就合并这两个区间，否则将当前区间添加到 merged
中。</li>
<li>最后返回 merged 数组作为结果。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">merge</span>(<span class="params">intervals</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (intervals.<span class="property">length</span> &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> intervals;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  intervals.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> a[<span class="number">0</span>] - b[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> merged = [intervals[<span class="number">0</span>]];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; intervals.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> currentInterval = intervals[i];</span><br><span class="line">    <span class="keyword">const</span> lastMergedInterval = merged[merged.<span class="property">length</span> - <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (currentInterval[<span class="number">0</span>] &lt;= lastMergedInterval[<span class="number">1</span>]) &#123;</span><br><span class="line">      lastMergedInterval[<span class="number">1</span>] = <span class="title class_">Math</span>.<span class="title function_">max</span>(</span><br><span class="line">        lastMergedInterval[<span class="number">1</span>],</span><br><span class="line">        currentInterval[<span class="number">1</span>]</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      merged.<span class="title function_">push</span>(currentInterval);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> merged;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a
href="https://leetcode.cn/problems/merge-intervals/solutions/203562/he-bing-qu-jian-by-leetcode-solution/">官方题解</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>零矩阵</title>
    <url>/2023/08/04/%E9%9B%B6%E7%9F%A9%E9%98%B5/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ol type="1">
<li>题目描述：</li>
</ol>
<p>编写一种算法，若 M × N 矩阵中某个元素为
0，则将其所在的行与列清零。</p>
<ol start="2" type="1">
<li><a
href="https://leetcode.cn/leetbook/read/array-and-string/ciekh/">力扣官方题解</a></li>
<li>ChatGPT</li>
</ol>
<p>遍历整个矩阵，记录所有为 0 的元素的行号和列号。
根据记录的行号和列号，将对应的行与列清零。</p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">setZeroes</span>(<span class="params">matrix</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> m = matrix.<span class="property">length</span>; <span class="comment">// 矩阵的行数</span></span><br><span class="line">  <span class="keyword">const</span> n = matrix[<span class="number">0</span>].<span class="property">length</span>; <span class="comment">// 矩阵的列数</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> zeroRows = <span class="keyword">new</span> <span class="title class_">Set</span>(); <span class="comment">// 记录为0的行号</span></span><br><span class="line">  <span class="keyword">const</span> zeroCols = <span class="keyword">new</span> <span class="title class_">Set</span>(); <span class="comment">// 记录为0的列号</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 遍历矩阵，记录为0的元素的行号和列号</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (matrix[i][j] === <span class="number">0</span>) &#123;</span><br><span class="line">        zeroRows.<span class="title function_">add</span>(i);</span><br><span class="line">        zeroCols.<span class="title function_">add</span>(j);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 根据记录的行号和列号，将对应的行与列清零</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; m; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (zeroRows.<span class="title function_">has</span>(i) || zeroCols.<span class="title function_">has</span>(j)) &#123;</span><br><span class="line">        matrix[i][j] = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例</span></span><br><span class="line"><span class="keyword">const</span> matrix = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="title function_">setZeroes</span>(matrix);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(matrix);</span><br></pre></td></tr></table></figure>
<ol type="1">
<li>我的解法</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> setZeroes = <span class="keyword">function</span> (<span class="params">matrix</span>) &#123;</span><br><span class="line">  <span class="comment">// 记录哪些行包含 0</span></span><br><span class="line">  <span class="keyword">let</span> row = [];</span><br><span class="line">  <span class="comment">// 记录哪些列包含 0</span></span><br><span class="line">  <span class="keyword">let</span> column = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; matrix.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; matrix[i].<span class="property">length</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="number">0</span> === matrix[i][j]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!row.<span class="title function_">includes</span>(i)) &#123;</span><br><span class="line">          row.<span class="title function_">push</span>(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!column.<span class="title function_">includes</span>(j)) &#123;</span><br><span class="line">          column.<span class="title function_">push</span>(j);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (row.<span class="property">length</span> === <span class="number">0</span> &amp;&amp; column.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> matrix;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 将所有 0 所在的行清零</span></span><br><span class="line">    row.<span class="title function_">forEach</span>(<span class="function">(<span class="params">row</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; matrix[row].<span class="property">length</span>; i++) &#123;</span><br><span class="line">        matrix[row][i] = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 将所有 0 所在的列清零</span></span><br><span class="line">    column.<span class="title function_">forEach</span>(<span class="function">(<span class="params">column</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; matrix.<span class="property">length</span>; i++) &#123;</span><br><span class="line">        matrix[i][column] = <span class="number">0</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> matrix1 = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>],</span><br><span class="line">  [<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">];</span><br><span class="line"><span class="title function_">setZeroes</span>(matrix1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(matrix1); <span class="comment">// 输出 [[7, 4, 1], [8, 5, 2], [9, 6, 3]]</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>gitlab 上传代码报错</title>
    <url>/2023/08/02/gitlab-%E4%B8%8A%E4%BC%A0%E4%BB%A3%E7%A0%81%E6%8A%A5%E9%94%99/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>gitlab 上传代码报错 fatal: unable to access
’http://gitlab.x.com:9090/greefox/bms.git/: SSL: no alternative
certificate subject name matches target host name…</p>
<p>如图：</p>
<img src="/2023/08/02/gitlab-%E4%B8%8A%E4%BC%A0%E4%BB%A3%E7%A0%81%E6%8A%A5%E9%94%99/gitlab_error.png" class="">
<span id="more"></span>
<p>解决办法，git 全局配置：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global http.sslVerify false</span><br></pre></td></tr></table></figure>
<p><a
href="https://blog.csdn.net/weixin_43175427/article/details/104490438">参考</a>
<a href="https://www.jianshu.com/p/df4f7f0dc2eb">报错原因</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>gitlab</tag>
      </tags>
  </entry>
  <entry>
    <title>最长公共前缀</title>
    <url>/2023/08/08/%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%89%8D%E7%BC%80/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.题目描述： 编写一个函数来查找字符串数组中的最长公共前缀。</p>
<p>如果不存在公共前缀，返回空字符串  ““。</p>
<p>示例 1：</p>
<p>输入：strs = [“flower”,“flow”,“flight”] 输出：“fl” 示例 2：</p>
<p>输入：strs = [“dog”,“racecar”,“car”] 输出：“”
解释：输入不存在公共前缀。</p>
<span id="more"></span>
<p>2.<a
href="https://leetcode.cn/problems/longest-common-prefix/solutions/288575/zui-chang-gong-gong-qian-zhui-by-leetcode-solution/">力扣官方题解</a></p>
<p>3.ChatGPT</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">longestCommonPrefix</span>(<span class="params">strs</span>) &#123;</span><br><span class="line">  <span class="comment">// 边界检查</span></span><br><span class="line">  <span class="keyword">if</span> (strs === <span class="literal">null</span> || strs.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 以第一个字符串作为参考</span></span><br><span class="line">  <span class="keyword">let</span> prefix = strs[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 遍历后续字符串，依次和当前最长公共前缀进行比较</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; strs.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (</span><br><span class="line">      j &lt; prefix.<span class="property">length</span> &amp;&amp;</span><br><span class="line">      j &lt; strs[i].<span class="property">length</span> &amp;&amp;</span><br><span class="line">      prefix.<span class="title function_">charAt</span>(j) === strs[i].<span class="title function_">charAt</span>(j)</span><br><span class="line">    ) &#123;</span><br><span class="line">      j++;</span><br><span class="line">    &#125;</span><br><span class="line">    prefix = prefix.<span class="title function_">substring</span>(<span class="number">0</span>, j);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 如果当前最长公共前缀为空，则直接返回空字符串</span></span><br><span class="line">    <span class="keyword">if</span> (prefix === <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> prefix;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>矩阵旋转</title>
    <url>/2023/08/03/%E7%9F%A9%E9%98%B5%E6%97%8B%E8%BD%AC/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>给你一幅由 N × N 矩阵表示的图像，其中每个像素的大小为 4
字节。请你设计一种算法，将图像旋转 90 度。</p>
<p>不占用额外内存空间能否做到？</p>
<p>示例 1:</p>
<p>给定 matrix = [ [1,2,3], [4,5,6], [7,8,9]],</p>
<p>原地旋转输入矩阵，使其变为: [ [7,4,1], [8,5,2], [9,6,3]] 示例 2:</p>
<p>给定 matrix = [ [ 5, 1, 9,11], [ 2, 4, 8,10], [13, 3, 6, 7],
[15,14,12,16]],</p>
<p>原地旋转输入矩阵，使其变为: [ [15,13, 2, 5], [14, 3, 4, 1], [12, 6,
8, 9], [16, 7,10,11]]</p>
<span id="more"></span>
<p>官方给出了<a
href="https://leetcode.cn/problems/rotate-image/solutions/526980/xuan-zhuan-tu-xiang-by-leetcode-solution-vu3m/">三种解法</a>:</p>
<ol type="1">
<li>使用辅助数组</li>
<li>原地旋转</li>
<li>翻转代替旋转:
<ul>
<li>① <a
href="https://www.bilibili.com/video/BV1Sq4y1t7tj/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">沿主对角线翻转，然后再沿垂直中心轴翻转</a>；轴示意图： |</li>
<li>② 沿水平轴翻转，再沿主对角线翻转（力扣解法三）；轴示意图：—<br />
</li>
<li>② 沿副对角线（左下到右上）翻转，再水平轴翻转（ gpt
解法）；轴示意图：/ —</li>
<li>④ 沿垂直中心轴翻转，再沿副对角线翻转。轴示意图：| /</li>
</ul></li>
</ol>
<p>第 ② 种解法代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number[][]</span>&#125; <span class="variable">matrix</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">void</span>&#125; Do not return anything, modify matrix in-place instead.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> rotate = <span class="keyword">function</span> (<span class="params">matrix</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> n = matrix.<span class="property">length</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Step 1: 沿着副对角线交换元素</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n - i; j++) &#123;</span><br><span class="line">      <span class="comment">// 交换 matrix[i][j] 和 matrix[n-j-1][n-i-1]</span></span><br><span class="line">      [matrix[i][j], matrix[n - j - <span class="number">1</span>][n - i - <span class="number">1</span>]] = [</span><br><span class="line">        matrix[n - j - <span class="number">1</span>][n - i - <span class="number">1</span>],</span><br><span class="line">        matrix[i][j],</span><br><span class="line">      ];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(matrix); <span class="comment">// 可以先注释下面循环看打印信息，输出 [[9, 6, 3], [8, 5, 2], [7, 4, 1]]</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// Step 2: 沿着中心水平线翻转</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="title class_">Math</span>.<span class="title function_">floor</span>(n / <span class="number">2</span>); i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">      <span class="comment">// 交换 matrix[i][j] 和 matrix[n-i-1][j]</span></span><br><span class="line">      [matrix[i][j], matrix[n - i - <span class="number">1</span>][j]] = [</span><br><span class="line">        matrix[n - i - <span class="number">1</span>][j],</span><br><span class="line">        matrix[i][j],</span><br><span class="line">      ];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> matrix1 = [</span><br><span class="line">  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</span><br><span class="line">  [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],</span><br><span class="line">  [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>],</span><br><span class="line">];</span><br><span class="line"><span class="title function_">rotate</span>(matrix1);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(matrix1); <span class="comment">// 输出 [[7, 4, 1], [8, 5, 2], [9, 6, 3]]</span></span><br></pre></td></tr></table></figure>
<p>复杂度分析</p>
<p>时间复杂度：O(N²)，其中 N 是 matrix
的边长。对于每一次翻转操作，我们都需要枚举矩阵中一半的元素。</p>
<p>空间复杂度：O(1)。为原地翻转得到的原地旋转。</p>
<p>TIPS:</p>
<p>不要被程序中各种下标唬住，可以带入实际的数字，一步步分析，调试看打印信息。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>对角线遍历</title>
    <url>/2023/08/07/%E5%AF%B9%E8%A7%92%E7%BA%BF%E9%81%8D%E5%8E%86/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ol type="1">
<li><p>题目描述：</p>
<p>给你一个大小为 m x n 的矩阵 mat
，请以对角线遍历的顺序，用一个数组返回这个矩阵中的所有元素。</p>
<img src="/2023/08/07/%E5%AF%B9%E8%A7%92%E7%BA%BF%E9%81%8D%E5%8E%86/diag1-grid.jpg" class="">
<p>输入：mat = [[1,2,3],[4,5,6],[7,8,9]] 输出：[1,2,4,7,5,3,6,8,9] 示例
2：</p>
<p>输入：mat = [[1,2],[3,4]] 输出：[1,2,3,4]</p>
<span id="more"></span></li>
<li><p><a
href="https://leetcode.cn/problems/diagonal-traverse/solutions/1597961/dui-jiao-xian-bian-li-by-leetcode-soluti-plz7/">力扣官方题解</a></p></li>
</ol>
<p>力扣官方题解更好理解一点。</p>
<ol start="3" type="1">
<li>ChatGPT 题解：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">diagonalTraverse</span>(<span class="params">mat</span>) &#123;</span><br><span class="line">  <span class="comment">// 行</span></span><br><span class="line">  <span class="keyword">const</span> m = mat.<span class="property">length</span>;</span><br><span class="line">  <span class="comment">// 列</span></span><br><span class="line">  <span class="keyword">const</span> n = mat[<span class="number">0</span>].<span class="property">length</span>;</span><br><span class="line">  <span class="comment">// 初始化一个空数组 result，用于存储遍历后的结果</span></span><br><span class="line">  <span class="keyword">const</span> result = [];</span><br><span class="line">  <span class="comment">// 矩阵的对角线个数为 m + n - 1</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; m + n - <span class="number">1</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> rowStart = <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0</span>, i - n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">const</span> rowEnd = <span class="title class_">Math</span>.<span class="title function_">min</span>(i, m - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (i % <span class="number">2</span> === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="comment">// 当 i 为偶数时，从下往上遍历，即 r 从 rowEnd 开始到 rowStart，对应的 c 为 i - r</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = rowEnd; j &gt;= rowStart; j--) &#123;</span><br><span class="line">        result.<span class="title function_">push</span>(mat[j][i - j]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 当 i 为奇数时，从上往下遍历，即 r 从 rowStart 开始到 rowEnd，对应的 c 为 i - r</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> j = rowStart; j &lt;= rowEnd; j++) &#123;</span><br><span class="line">        result.<span class="title function_">push</span>(mat[j][i - j]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>解题思路：</p>
<p>初始化一个空数组 result，用于存储遍历后的结果。 外层循环遍历的次数为
m + n - 1，因为矩阵的对角线个数为 m + n - 1。
内层循环用于遍历当前对角线上的元素。
下面详细解释内层循环的处理过程：</p>
<p>对于每一条对角线，我们可以通过 i 的取值来确定 j 的范围，其中 i
代表当前对角线的索引，从 0 开始到 m + n - 2。 假设当前对角线上的元素为
(r, c)，其中 r 为行索引，c 为列索引，根据对角线的特点，有 r + c = i。
我们要在 r 的合理范围内遍历，因此 r 的范围为 Math.max(0, i - n + 1) 到
Math.min(i, m - 1)。当 i &lt; n 时，r 的范围是从 0 开始到 i；当 i &gt;=
n 时，r 的范围是从 i - n + 1 开始到 m - 1。 根据 r
的取值，我们可以求出对应的 c，即 c = i - r。 接下来，根据 i
的奇偶性来决定遍历的方向：</p>
<p>当 i 为偶数时，从下往上遍历，即 r 从 rowEnd 开始到 rowStart，对应的 c
为 i - r。 当 i 为奇数时，从上往下遍历，即 r 从 rowStart 开始到
rowEnd，对应的 c 为 i - r。
根据上述规则，我们可以在内层循环中遍历当前对角线上的所有元素，并将其添加到结果数组
result 中。</p>
<p>最后，返回结果数组 result 即可得到按对角线遍历的顺序返回矩阵 mat
中的所有元素。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>RESTful API</title>
    <url>/2023/08/08/RESTful-API/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>RESTful API 是一种设计风格和架构原则，用于构建网络应用程序中的 Web
API。它是 Representational State Transfer（表现层状态转移）的缩写。</p>
<p>RESTful API 的设计遵循一组约定和原则，这些约定和原则使得 API
更加简单、灵活、易于理解和使用。它借鉴了 HTTP 协议的设计理念，并使用
HTTP 方法来表示不同的操作（GET、POST、PUT、DELETE 等），以及使用 URL
来定位资源。</p>
<p>RESTful API 的含义和特点包括：</p>
<span id="more"></span>
<p>资源导向：RESTful API
将网络应用程序中的数据和功能都视为资源，每个资源都有唯一的 URL
用于标识。通过对资源进行增删改查等操作来完成不同的功能。</p>
<p>状态转移：客户端通过发送请求，请求中包含所需的操作（HTTP
方法）和资源标识（URL），服务器根据请求对资源进行状态转移，将结果返回给客户端。</p>
<p>无状态：每个请求都包含足够的信息，使得服务器可以独立处理请求，没有前后依赖，每个请求都是独立的。</p>
<p>使用标准的 HTTP 方法：RESTful API 使用标准的 HTTP
方法（GET、POST、PUT、DELETE 等）来表示不同的操作，让 API
更具有语义化，易于理解。</p>
<p>使用标准的 HTTP 状态码：RESTful API 使用标准的 HTTP
状态码来表示请求的处理结果，如 200 表示成功，404 表示资源不存在等，让
API 返回的信息更加明确。</p>
<p>无状态通信：RESTful API
不会保存客户端的状态信息，每个请求都是无状态的，客户端必须提供身份验证等信息来进行授权。</p>
<p>通过遵循 RESTful API 的设计风格和架构原则，可以使得 Web API
更易于使用和维护，同时提高了网络应用程序的可扩展性和互操作性。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>RESTful API</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript中的原型</title>
    <url>/2023/08/09/JavaScript%E4%B8%AD%E7%9A%84%E5%8E%9F%E5%9E%8B/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在 JavaScript
中，每个对象都有一个与之关联的原型（prototype）。原型是一个对象，它包含了共享的属性和方法，可以被其他对象继承。通过原型链，JavaScript
对象可以访问到其原型对象上的属性和方法。</p>
<p>当你创建一个对象时，JavaScript
会自动为这个对象关联一个原型。你可以将原型看作是一个对象的”父对象”，它定义了该对象共享的属性和方法。通过原型链，对象可以访问其原型对象的属性和方法。</p>
<p>每个 JavaScript 对象都有一个隐藏的属性
<code>__proto__</code>，它指向了该对象的原型。在访问一个对象的属性或方法时，如果对象本身没有找到，JavaScript
引擎会沿着原型链去查找对象的原型，然后再去原型的原型，依此类推，直到找到所需的属性或方法或者到达原型链的末端。</p>
<p>例如：</p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义一个原型对象</span></span><br><span class="line"><span class="keyword">const</span> animalPrototype = &#123;</span><br><span class="line">  <span class="attr">sound</span>: <span class="string">&quot;Animal makes a sound&quot;</span>,</span><br><span class="line">  <span class="attr">makeSound</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">sound</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建一个对象并关联原型</span></span><br><span class="line"><span class="keyword">const</span> dog = <span class="title class_">Object</span>.<span class="title function_">create</span>(animalPrototype);</span><br><span class="line">dog.<span class="property">sound</span> = <span class="string">&quot;Woof!&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用对象自身的属性和原型链上的方法</span></span><br><span class="line">dog.<span class="title function_">makeSound</span>(); <span class="comment">// 输出 &quot;Woof!&quot;</span></span><br></pre></td></tr></table></figure>
<p>在上面的例子中，dog 对象通过 Object.create(animalPrototype)
创建，并且关联了原型对象 animalPrototype。虽然 dog 自身没有定义
makeSound 方法，但它可以通过原型链访问到 animalPrototype 上的 makeSound
方法。</p>
<p>总之，JavaScript
中的原型是一种机制，它允许对象通过原型链继承共享的属性和方法。这也是
JavaScript 中实现继承的一种方式。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>原型</tag>
      </tags>
  </entry>
  <entry>
    <title>vscode 好用的插件</title>
    <url>/2023/08/10/vscode-%E5%A5%BD%E7%94%A8%E7%9A%84%E6%8F%92%E4%BB%B6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ol type="1">
<li>HTML-Comment：可以解决 Vue 嵌套注释报错</li>
<li></li>
<li></li>
<li></li>
<li></li>
</ol>
<span id="more"></span>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>vscode</tag>
        <tag>插件</tag>
      </tags>
  </entry>
  <entry>
    <title>计数器 Ⅱ</title>
    <url>/2023/08/09/%E8%AE%A1%E6%95%B0%E5%99%A8-%E2%85%A1/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.题目描述：</p>
<p>请你写一个函数 createCounter. 这个函数接收一个初始的整数值 init
并返回一个包含三个函数的对象。</p>
<p>这三个函数是：</p>
<p>increment() 将当前值加 1 并返回。 decrement() 将当前值减 1 并返回。
reset() 将当前值设置为 init 并返回。</p>
<p>示例 1：</p>
<p>输入：init = 5, calls = [“increment”,“reset”,“decrement”]
输出：[6,5,4] 解释： const counter = createCounter(5);
counter.increment(); // 6 counter.reset(); // 5 counter.decrement(); //
4 示例 2：</p>
<p>输入：init = 0, calls =
[“increment”,“increment”,“decrement”,“reset”,“reset”] 输出：[1,2,1,0,0]
解释： const counter = createCounter(0); counter.increment(); // 1
counter.increment(); // 2 counter.decrement(); // 1 counter.reset(); //
0 counter.reset(); // 0</p>
<span id="more"></span>
<p>2.此题比较简单，注意保存原始变量就行了，题解：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> createCounter = <span class="keyword">function</span> (<span class="params">init</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> origin = init;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">increment</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> ++origin;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">decrement</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> --origin;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">reset</span>(<span class="params"></span>) &#123;</span><br><span class="line">    origin = init;</span><br><span class="line">    <span class="keyword">return</span> origin;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    increment,</span><br><span class="line">    reset,</span><br><span class="line">    decrement,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> counter = <span class="title function_">createCounter</span>(<span class="number">5</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter.<span class="title function_">increment</span>()); <span class="comment">// 6</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter.<span class="title function_">reset</span>()); <span class="comment">// 5</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(counter.<span class="title function_">decrement</span>()); <span class="comment">// 4</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>复合函数</title>
    <url>/2023/08/11/%E5%A4%8D%E5%90%88%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.题目描述</p>
<p>请你编写一个函数，它接收一个函数数组 [f1, f2, f3，…， fn]
，并返回一个新的函数 fn ，它是函数数组的 复合函数 。</p>
<p>[f(x)， g(x)， h(x)] 的 复合函数 为 fn(x) = f(g(h(x))) 。</p>
<p>一个空函数列表的 复合函数 是 恒等函数 f(x) = x 。</p>
<p>你可以假设数组中的每个函数接受一个整型参数作为输入，并返回一个整型作为输出。</p>
<p>2.题解</p>
<p>传统方法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> compose = <span class="keyword">function</span> (<span class="params">functions</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = functions.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">      x = functions[i](x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn = <span class="title function_">compose</span>([<span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span>, <span class="function">(<span class="params">x</span>) =&gt;</span> <span class="number">2</span> * x]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fn</span>(<span class="number">4</span>)); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>reduce 方法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> compose = <span class="keyword">function</span> (<span class="params">functions</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> functions.<span class="title function_">reduceRight</span>(<span class="function">(<span class="params">target, fn</span>) =&gt;</span> <span class="title function_">fn</span>(target), x);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fn = <span class="title function_">compose</span>([<span class="function">(<span class="params">x</span>) =&gt;</span> x + <span class="number">1</span>, <span class="function">(<span class="params">x</span>) =&gt;</span> <span class="number">2</span> * x]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">fn</span>(<span class="number">4</span>)); <span class="comment">// 9</span></span><br></pre></td></tr></table></figure>
<p>3.reduce() 用法</p>
<p>arr.reduce(callback,[initialValue])</p>
<p>reduce
为数组中的每一个元素依次执行回调函数，不包括数组中被删除或从未被赋值的元素，接受四个参数：初始值（或者上一次回调函数的返回值），当前元素值，当前索引，调用
reduce 的数组。</p>
<p>callback （执行数组中每个值的函数，包含四个参数）</p>
<ul>
<li>previousValue
（上一次调用回调返回的值，或者是提供的初始值（initialValue））</li>
<li>currentValue （数组中当前被处理的元素）</li>
<li>index （当前元素在数组中的索引）</li>
<li>array （调用 reduce 的数组）</li>
</ul>
<p>initialValue （作为第一次调用 callback 的第一个参数。）</p>
<p>第一次执行回调函数时，不存在“上一次的计算结果”。如果需要回调函数从数组索引为
0 的元素开始执行，则需要传递初始值。否则，数组索引为 0
的元素将被用作初始值，迭代器将从第二个元素开始执行（即从索引为 1 而不是
0 的位置开始）。</p>
<p><a
href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/reduce">Array.prototype.reduce()</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>执行可取消的延迟函数</title>
    <url>/2023/08/17/%E6%89%A7%E8%A1%8C%E5%8F%AF%E5%8F%96%E6%B6%88%E7%9A%84%E5%BB%B6%E8%BF%9F%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<a
href="https://leetcode.cn/problems/execute-cancellable-function-with-delay/description/?envType=study-plan-v2&amp;envId=30-days-of-javascript">题目描述</a></p>
<p>现给定一个函数 fn ，一个参数数组 args 和一个以毫秒为单位的超时时间 t
，返回一个取消函数 cancelFn 。</p>
<p>在经过 t 毫秒的延迟后，应该调用 fn 函数，并将 args 作为参数传递。除非
在 t 毫秒的延迟过程中，在 cancelT 毫秒时调用了
cancelFn。并且在这种情况下，fn 函数不应该被调用。</p>
<span id="more"></span>
<p>2.思路</p>
<p>定义一个 cancellable 函数，该函数接受 fn（函数）、args（参数数组）和
t（延迟时间）作为参数，并返回一个取消函数 cancelFn。</p>
<p>创建一个延迟计时器 timer，在 t 毫秒后调用传入的 fn 函数，并将 args
作为参数传递。然后，返回一个函数，该函数会在调用时清除
timer，从而取消定时调用 fn。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">fn</span>(...args);</span><br><span class="line">&#125;, t);</span><br><span class="line"><span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>3.类似题目<a
href="https://leetcode.cn/problems/interval-cancellation/description/?envType=study-plan-v2&amp;envId=30-days-of-javascript">间隔取消</a></p>
<p>现给定一个函数 fn，一个参数数组 args 和一个时间间隔
t，返回一个取消函数 cancelFn。</p>
<p>函数 fn 应该立即使用 args 调用，并且在每个 t 毫秒内再次调用，直到调用
cancelFn。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">fn</span>(...args);</span><br><span class="line"><span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(fn, t, ...args);</span><br><span class="line"><span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">clearInterval</span>(timer);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>/2023/08/18/%E6%9C%89%E6%97%B6%E9%97%B4%E9%99%90%E5%88%B6%E7%9A%84-Promise-%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>1.<a
href="https://leetcode.cn/problems/promise-time-limit/">题目描述</a></p>
<p>请你编写一个函数，它接受一个异步函数 fn 和一个以毫秒为单位的时间
t。它应根据限时函数返回一个有 限时 效果的函数。函数 fn 接受提供给 限时
函数的参数。</p>
<p>限时 函数应遵循以下规则：</p>
<p>如果 fn 在 t 毫秒的时间限制内完成，限时 函数应返回结果。 如果 fn
的执行超过时间限制，限时 函数应拒绝并返回字符串 “Time Limit Exceeded”
。</p>
<span id="more"></span>
<p>知识点：Promise.race</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> timeLimit = <span class="keyword">function</span> (<span class="params">fn, t</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> timer;</span><br><span class="line">    <span class="keyword">const</span> timeoutPromise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">res, rej</span>) =&gt;</span> &#123;</span><br><span class="line">      timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">        <span class="title function_">rej</span>(<span class="string">&quot;Time Limit Exceeded&quot;</span>);</span><br><span class="line">      &#125;, t);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Promise</span>.<span class="title function_">race</span>([<span class="title function_">fn</span>(...args), timeoutPromise]).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">clearTimeout</span>(timer);</span><br><span class="line">      <span class="keyword">return</span> res;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>Split Strings</title>
    <url>/2023/08/22/Split-Strings/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<a
href="https://www.codewars.com/kata/515de9ae9dcfc28eb6000001/solutions/javascript">题目描述</a>
Complete the solution so that it splits the string into pairs of two
characters. If the string contains an odd number of characters then it
should replace the missing second character of the final pair with an
underscore (‘_’).</p>
<p>Examples:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">* &#x27;abc&#x27; =&gt;  [&#x27;ab&#x27;, &#x27;c_&#x27;]</span><br><span class="line">* &#x27;abcdef&#x27; =&gt; [&#x27;ab&#x27;, &#x27;cd&#x27;, &#x27;ef&#x27;]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>2.我的解法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">solution</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> pair = [];</span><br><span class="line">  <span class="comment">// 1.将字符串两两分割存入数组</span></span><br><span class="line">  <span class="comment">// Array.prototype.slice(start,end)</span></span><br><span class="line">  <span class="comment">// 如果 end &gt;= array.length 或者省略了 end，则使用 array.length，提取所有元素直到末尾</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; str.<span class="property">length</span>; i += <span class="number">2</span>) &#123;</span><br><span class="line">    pair.<span class="title function_">push</span>(str.<span class="title function_">slice</span>(i, i + <span class="number">2</span>));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 2.如果字符串长度为奇数，则为 pair 最后一个元素添加下划线</span></span><br><span class="line">  <span class="keyword">if</span> (str.<span class="property">length</span> % <span class="number">2</span> === <span class="number">1</span>) &#123;</span><br><span class="line">    pair[pair.<span class="property">length</span> - <span class="number">1</span>] += <span class="string">&quot;_&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> pair;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>3.学习到的解法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">solution</span>(<span class="params">s</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (s + <span class="string">&quot;_&quot;</span>).<span class="title function_">match</span>(<span class="regexp">/.&#123;2&#125;/g</span>) || [];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>有时间限制的缓存</title>
    <url>/2023/08/21/%E6%9C%89%E6%97%B6%E9%97%B4%E9%99%90%E5%88%B6%E7%9A%84%E7%BC%93%E5%AD%98/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<a
href="https://leetcode.cn/problems/cache-with-time-limit/description/?envType=study-plan-v2&amp;envId=30-days-of-javascript">题目描述</a></p>
<p>编写一个类，它允许获取和设置键-值对，并且每个键都有一个 过期时间
。</p>
<p>该类有三个公共方法：</p>
<p>set(key, value, duration) ：接收参数为整型键 key 、整型值 value
和以毫秒为单位的持续时间 duration 。一旦 duration
到期后，这个键就无法访问。如果相同的未过期键已经存在，该方法将返回 true
，否则返回 false
。如果该键已经存在，则它的值和持续时间都应该被覆盖。</p>
<p>get(key) ：如果存在一个未过期的键，它应该返回这个键相关的值。否则返回
-1 。</p>
<p>count() ：返回未过期键的总数。</p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">TimeLimitedCache</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 保存键值对</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">map</span> = <span class="keyword">new</span> <span class="title class_">Map</span>();</span><br><span class="line">  <span class="comment">// 保存过期时间到需要清理键值对的 setTimeout 返回的 ID 值</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">timeIds</span> = &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">key</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">value</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; time until expiration in ms</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">boolean</span>&#125; if un-expired key already existed</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title class_">TimeLimitedCache</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">set</span> = <span class="keyword">function</span> (<span class="params">key, value, duration</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> res = <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">has</span>(key);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">set</span>(key, value);</span><br><span class="line">  <span class="comment">// 如果该键已经存在，则它的值和持续时间都应该被覆盖</span></span><br><span class="line">  <span class="comment">// 传入一个错误的 ID 给 clearTimeout()不会有任何影响；也不会抛出异常</span></span><br><span class="line">  <span class="built_in">clearTimeout</span>(<span class="variable language_">this</span>.<span class="property">timeIds</span>[key]);</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">timeIds</span>[key] = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 一旦 duration 到期后，这个键就无法访问</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">delete</span>(key);</span><br><span class="line">  &#125;, duration);</span><br><span class="line">  <span class="comment">// 如果相同的未过期键已经存在，该方法将返回 true ，否则返回 false</span></span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">key</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125; value associated with key</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title class_">TimeLimitedCache</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">get</span> = <span class="keyword">function</span> (<span class="params">key</span>) &#123;</span><br><span class="line">  <span class="comment">// 空值合并运算符（??）是一个逻辑运算符，</span></span><br><span class="line">  <span class="comment">// 当左侧的操作数为 null 或者 undefined 时，返回其右侧操作数，否则返回左侧操作数</span></span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="title function_">get</span>(key) ?? -<span class="number">1</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125; count of non-expired keys</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="title class_">TimeLimitedCache</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">count</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">map</span>.<span class="property">size</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>box-sizing: border-box</title>
    <url>/2023/08/23/box-sizing-border-box/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p><code>box-sizing: border-box;</code> 是一个 CSS
属性，用于指定元素的盒模型。它影响了元素的尺寸计算方式。</p>
<p>默认情况下，元素的盒模型是
“content-box”，这意味着元素的宽度和高度仅包括内容的宽度和高度，不包括边框（border）和内边距（padding）。这导致了在使用固定宽度和内边距时，元素的实际宽度会超出所设置的宽度。</p>
<p><code>box-sizing: border-box;</code> 的作用是改变盒模型为
“border-box”，这意味着元素的宽度和高度包括内容的宽度、内边距和边框。这使得在设置元素的宽度时，你可以确保元素的最终宽度不会超出你所指定的宽度。</p>
<span id="more"></span>
<p>例如：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* 默认盒模型，宽度不包括内边距和边框 */</span></span><br><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">5px</span> solid <span class="number">#000</span>;</span><br><span class="line">  <span class="comment">/* 实际宽度 = 内容宽度 + 内边距 + 边框 = 200px + 20px + 10px = 230px */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 使用 border-box 盒模型，宽度包括内边距和边框 */</span></span><br><span class="line"><span class="selector-class">.element</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">5px</span> solid <span class="number">#000</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="comment">/* 实际宽度 = 200px */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在实际开发中，通常会将 <code>box-sizing: border-box;</code>
应用到所有元素，以确保更一致和可控的盒模型行为。这对于创建响应式设计和布局非常有用，因为你可以更准确地控制元素的尺寸。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>CSS</tag>
      </tags>
  </entry>
  <entry>
    <title>函数防抖</title>
    <url>/2023/08/22/%E5%87%BD%E6%95%B0%E9%98%B2%E6%8A%96/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<a
href="https://leetcode.cn/problems/debounce/description/?envType=study-plan-v2&amp;envId=30-days-of-javascript">题目描述</a></p>
<p>请你编写一个函数，接收参数为另一个函数和一个以毫秒为单位的时间 t
，并返回该函数的 函数防抖 后的结果。</p>
<p>函数防抖 方法是一个函数，它的执行被延迟了 t
毫秒，如果在这个时间窗口内再次调用它，它的执行将被取消。你编写的防抖函数也应该接收传递的参数。</p>
<p>例如，假设 t = 50ms ，函数分别在 30ms 、 60ms 和 100ms
时调用。前两个函数调用将被取消，第三个函数调用将在 150ms 执行。如果改为
t = 35ms ，则第一个调用将被取消，第二个调用将在 95ms
执行，第三个调用将在 135ms 执行。</p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> debounce = <span class="keyword">function</span> (<span class="params">fn, t</span>) &#123;</span><br><span class="line">  <span class="comment">// 定义一个定时器 timeoutID ，保存上一个函数调用时生成的定时器 timeoutID</span></span><br><span class="line">  <span class="keyword">let</span> timeId = <span class="literal">null</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    <span class="comment">// 当防抖函数再次被调用时，判断上次定时器 timeoutID 是否存在，存在表示在窗口内再次调用，则更新延迟调用时间</span></span><br><span class="line">    <span class="comment">// 如果 timeoutID 不存在，表示在窗口外调用，将生成的 timeoutID 赋值给 timeId，用于下次调用判断是否在窗口内</span></span><br><span class="line">    <span class="comment">// 一句话总结，如果调用函数在窗口内，则取消上次调用，并设置新的延迟调用；在窗口外则直接设置延迟调用并保存 timeoutID</span></span><br><span class="line">    <span class="keyword">if</span> (timeId) <span class="built_in">clearTimeout</span>(timeId);</span><br><span class="line">    timeId = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title function_">fn</span>(...args);</span><br><span class="line">    &#125;, t);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>并行执行异步函数</title>
    <url>/2023/08/23/%E5%B9%B6%E8%A1%8C%E6%89%A7%E8%A1%8C%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<a
href="https://leetcode.cn/problems/execute-asynchronous-functions-in-parallel/?envType=study-plan-v2&amp;envId=30-days-of-javascript">题目描述</a></p>
<p>给定一个异步函数数组 functions，返回一个新的 promise 对象
promise。数组中的每个函数都不接受参数并返回一个 promise。</p>
<p>promise resolve 条件：</p>
<p>当所有从 functions 返回的 promise 都成功解析时。promise
的解析值应该是一个按照它们在 functions 中的顺序排列的 promise
的解析值数组。 promise reject 条件：</p>
<p>当任何从 functions 返回的 promise 被拒绝时。promise
也会被拒绝，并返回第一个拒绝的原因。 请在不使用内置的 Promise.all
函数的情况下解决。</p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> promiseAll = <span class="keyword">async</span> <span class="keyword">function</span> (<span class="params">functions</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 已成功的数量</span></span><br><span class="line">    <span class="keyword">let</span> resolveCount = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// 待处理的 promises 数组的长度，此处为传入的参数 functions</span></span><br><span class="line">    <span class="keyword">const</span> promisesLength = functions.<span class="property">length</span>;</span><br><span class="line">    <span class="comment">// 准备一个保存成功值的数组</span></span><br><span class="line">    <span class="keyword">const</span> values = <span class="keyword">new</span> <span class="title class_">Array</span>(promisesLength);</span><br><span class="line">    <span class="comment">// 遍历每个待处理的 promise</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; promisesLength; i++) &#123;</span><br><span class="line">      <span class="comment">// 注意 functions[i] 是异步函数 执行函数后才返回 promise 对象 故此处为 functions[i]()</span></span><br><span class="line">      functions[i]().<span class="title function_">then</span>(</span><br><span class="line">        <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 保存当前 promise 成功的值到对应的下标</span></span><br><span class="line">          values[i] = value;</span><br><span class="line">          <span class="comment">// 成功的数量加 1</span></span><br><span class="line">          resolveCount++;</span><br><span class="line">          <span class="comment">// 一旦全部成功</span></span><br><span class="line">          <span class="keyword">if</span> (resolveCount === promisesLength) &#123;</span><br><span class="line">            <span class="comment">// 将所有成功值的数组作为返回 promise 对象的成功结果值</span></span><br><span class="line">            <span class="title function_">resolve</span>(values);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="comment">// 一旦有一个 promise 产生了失败结果值，将其作为返回 promises 对象的失败结果值</span></span><br><span class="line">          <span class="title function_">reject</span>(reason);</span><br><span class="line">        &#125;</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>VSCode git 提交记住用户名和密码</title>
    <url>/2023/08/25/VSCode-git-%E6%8F%90%E4%BA%A4%E8%AE%B0%E4%BD%8F%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<code>ctrl + shift + p</code> 打开命令面板，输入
<code>Preferences:Open User Settings(JSON)</code>。 <img src="/2023/08/25/VSCode-git-%E6%8F%90%E4%BA%A4%E8%AE%B0%E4%BD%8F%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81/1.png" class=""></p>
<span id="more"></span>
<p>2.修改
<code>"git.path":"输入你自己电脑安装的 git 地址"</code>，如果没有则自行添加。
<img src="/2023/08/25/VSCode-git-%E6%8F%90%E4%BA%A4%E8%AE%B0%E4%BD%8F%E7%94%A8%E6%88%B7%E5%90%8D%E5%92%8C%E5%AF%86%E7%A0%81/2.png" class=""></p>
<p>3.git bush 中设置全局变量</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global user.name &quot;用户名&quot;</span><br><span class="line">git config --global user.email &quot;用户邮箱&quot;</span><br></pre></td></tr></table></figure>
<p>4.设置记住用户名和密码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global credential.helper store</span><br></pre></td></tr></table></figure>
<p>参考文档： <a
href="https://blog.csdn.net/Zheng_xinle/article/details/113524134">VSCode
设置 git 账号和密码</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>密码</tag>
        <tag>VSCode</tag>
        <tag>用户名</tag>
      </tags>
  </entry>
  <entry>
    <title>Cookies、Session Storage、和 Local Storage</title>
    <url>/2023/08/24/Cookies%E3%80%81Session-Storage%E3%80%81%E5%92%8C-Local-Storage/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>Cookies、Session Storage、和 Local Storage
是用于在浏览器中存储数据的不同机制，它们有各自的用途和特点。</p>
<p><strong>Cookies</strong>:</p>
<ol type="1">
<li><strong>存储容量</strong>: Cookies 最大可存储大约 4KB 的数据。</li>
<li><strong>生命周期</strong>: Cookies
可以设置过期时间，可以是会话级别的（浏览器关闭后失效）或长期的（根据设置的过期时间）。</li>
<li><strong>跨域请求</strong>: Cookies
可以在同一域名下的不同路径和子域之间共享。</li>
<li><strong>安全性</strong>: Cookies 可以设置为 HTTP Only 和
Secure，以提高安全性，但仍然容易受到跨站点脚本攻击（XSS）的威胁。</li>
<li><strong>用途</strong>:
通常用于存储少量的身份验证信息、会话标识、用户首选项等。</li>
</ol>
<span id="more"></span>
<p><strong>Session Storage</strong>:</p>
<ol type="1">
<li><strong>存储容量</strong>: Session Storage 可以存储大约 5-10MB
的数据，比 Cookies 更大。</li>
<li><strong>生命周期</strong>: 存储在 Session Storage
中的数据在浏览器会话结束后（即浏览器关闭）会被删除，它是会话级别的存储。</li>
<li><strong>跨域请求</strong>: Session Storage
只在同一标签页或窗口中共享，不会跨标签页或窗口。</li>
<li><strong>安全性</strong>: Session Storage
不易受到跨站点脚本攻击（XSS）的威胁，因为它的作用范围有限于单个窗口或标签页。</li>
<li><strong>用途</strong>:
适用于在单个浏览器会话期间需要存储临时数据的情况，例如表单数据。</li>
</ol>
<p><strong>Local Storage</strong>:</p>
<ol type="1">
<li><strong>存储容量</strong>: Local Storage 可以存储大约 5-10MB
的数据，与 Session Storage 相似。</li>
<li><strong>生命周期</strong>: 存储在 Local Storage
中的数据不会在浏览器关闭后失效，它是长期的存储。</li>
<li><strong>跨域请求</strong>: Local Storage
也在同一域名下的不同路径和子域之间共享。</li>
<li><strong>安全性</strong>: 与 Cookies 类似，Local Storage
可以受到跨站点脚本攻击（XSS）的威胁。</li>
<li><strong>用途</strong>:
适用于需要长期存储的数据，例如用户首选项、本地缓存等。</li>
</ol>
<p>总结一下：</p>
<ul>
<li>Cookies
适用于小容量的数据，可以用于跨域请求，但受到安全性和存储容量的限制。</li>
<li>Session Storage
适用于会话级别的数据，不跨标签页或窗口，相对较安全，但会话结束后数据会丢失。</li>
<li>Local Storage
适用于长期存储的数据，可以跨标签页或窗口，但受到安全性的限制。</li>
</ul>
<p>选择适当的存储机制取决于你的具体需求，包括数据大小、生命周期、跨域需求和安全性考虑。</p>
]]></content>
  </entry>
  <entry>
    <title>分组和排序方式</title>
    <url>/2023/08/25/%E5%88%86%E7%BB%84%E5%92%8C%E6%8E%92%E5%BA%8F%E6%96%B9%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<a
href="https://leetcode.cn/problems/group-by/?envType=study-plan-v2&amp;envId=30-days-of-javascript">分组</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">groupBy</span> = <span class="keyword">function</span> (<span class="params">fn</span>) &#123;</span><br><span class="line">  <span class="comment">// 定义一个对象保存最终结果值</span></span><br><span class="line">  <span class="keyword">let</span> result = &#123;&#125;;</span><br><span class="line">  <span class="comment">// 遍历数组</span></span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 函数 fn(item) 的返回值作为 result 的属性</span></span><br><span class="line">    <span class="keyword">if</span> (result.<span class="title function_">hasOwnProperty</span>(<span class="title function_">fn</span>(item))) &#123;</span><br><span class="line">      <span class="comment">// 如果对象中已经包含该属性，则将遍历到的数组值存入属性值中</span></span><br><span class="line">      <span class="comment">// 由于属性值是一个数组，所以用 push 方法</span></span><br><span class="line">      result[<span class="title function_">fn</span>(item)].<span class="title function_">push</span>(item);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 如果对象中没有包含该属性，则将遍历到的数组值构造成一个数组放入对应的属性值中</span></span><br><span class="line">      result[<span class="title function_">fn</span>(item)] = [item];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * [1,2,3].groupBy(String) // &#123;&quot;1&quot;:[1],&quot;2&quot;:[2],&quot;3&quot;:[3]&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>2.<a
href="https://leetcode.cn/problems/sort-by/description/?envType=study-plan-v2&amp;envId=30-days-of-javascript">排序方式</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort</span></span><br><span class="line"><span class="comment">  * sort(compareFn)</span></span><br><span class="line"><span class="comment">  * compareFn 可选</span></span><br><span class="line"><span class="comment">  * 定义排序顺序的函数。返回值应该是一个数字，其正负性表示两个元素的相对顺序。该函数使用以下参数调用：</span></span><br><span class="line"><span class="comment">  function compareFn(a, b) &#123;</span></span><br><span class="line"><span class="comment">  if (根据排序标准，a 小于 b) &#123;</span></span><br><span class="line"><span class="comment">    return -1;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  if (根据排序标准，a 大于 b) &#123;</span></span><br><span class="line"><span class="comment">    return 1;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  // a 一定等于 b</span></span><br><span class="line"><span class="comment">  return 0;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">var</span> sortBy = <span class="keyword">function</span> (<span class="params">arr, fn</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> arr.<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> <span class="title function_">fn</span>(a) - <span class="title function_">fn</span>(b));</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
        <tag>分组</tag>
        <tag>排序方法</tag>
      </tags>
  </entry>
  <entry>
    <title>git stage 和 git stash</title>
    <url>/2023/08/28/git-stage-%E5%92%8C-git-stash/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p><code>git stage</code> 和 <code>git stash</code> 是 Git
中用于处理工作目录中的更改的两个不同的机制，它们有各自的用途和区别。</p>
<p><strong><code>git stage</code>（也称为
<code>git add</code>）</strong>:</p>
<ul>
<li><p><strong>用途</strong>：<code>git stage</code> 或
<code>git add</code> 用于将工作目录中的更改添加到暂存区（Staging
Area）中，以便之后可以提交到版本控制系统。</p></li>
<li><p><strong>操作</strong>：你可以使用 <code>git add</code>
命令来选择性地添加文件或更改到暂存区。例如，<code>git add file1.txt</code>
将添加名为 <code>file1.txt</code> 的文件的更改到暂存区。</p></li>
<li><p><strong>持久性</strong>：暂存区的内容是持久的，它们会一直保留，直到你执行
<code>git commit</code> 命令将它们提交到版本控制仓库。</p></li>
<li><p><strong>用例</strong>：<code>git stage</code>
用于将更改准备好以便提交到版本控制系统。通常在你认为一组更改完成并准备好提交时使用。</p></li>
<li><span id="more"></span>
<p><strong><code>git stash</code></strong>:</p></li>
<li><p><strong>用途</strong>：<code>git stash</code>
用于将工作目录中的未提交更改（包括已经 <code>git add</code>
过的更改）保存到一个临时的存储区，以便你可以在工作目录变得干净后进行其他操作，然后再回到之前保存的更改。</p></li>
<li><p><strong>操作</strong>：<code>git stash</code>
命令用于保存当前的工作目录状态，包括已修改但未提交的文件，然后将工作目录重置为上一个提交的状态。你可以使用
<code>git stash apply</code> 或 <code>git stash pop</code>
来重新应用之前保存的更改到工作目录。</p></li>
<li><p><strong>持久性</strong>：<code>git stash</code>
是临时的，保存的更改可以随时重新应用或丢弃。一般不会一直保留，除非你明确决定保留它。</p></li>
<li><p><strong>用例</strong>：<code>git stash</code>
用于临时保存当前的工作进度，以便你可以在分支切换、bug
修复或其他任务之间切换而不必提交未完成的更改。这是一种在工作目录变得干净时保存进度的方法。</p></li>
</ul>
<p><strong>区别</strong>:</p>
<ol type="1">
<li><p><strong>目的</strong>:</p>
<ul>
<li><code>git stage</code>
的主要目的是将更改准备好提交到版本控制系统。</li>
<li><code>git stash</code>
的主要目的是保存未提交的更改，以便稍后重新应用。</li>
</ul></li>
<li><p><strong>处理方式</strong>:</p>
<ul>
<li><code>git stage</code> 将更改添加到暂存区，以备提交。</li>
<li><code>git stash</code>
将未提交的更改保存到一个临时的存储区，然后重置工作目录。</li>
</ul></li>
<li><p><strong>持久性</strong>:</p>
<ul>
<li>暂存区的内容是持久的，它们会一直保留，直到你执行
<code>git commit</code> 命令将它们提交到版本控制仓库。</li>
<li><code>git stash</code>
是临时的，保存的更改可以随时重新应用或丢弃。</li>
</ul></li>
</ol>
<p>选择使用哪个命令取决于你的需求。如果你要提交更改到版本控制系统，使用
<code>git stage</code>。如果你需要保存未提交的更改以进行其他任务，使用
<code>git stash</code>。通常，这两个命令可以在不同情况下一起使用以帮助你有效地管理工作目录中的更改。</p>
<p><code>git stage</code> 和 <code>git stash</code> 的常用命令：</p>
<p><strong><code>git stage</code> (或 <code>git add</code>)
常用命令</strong>:</p>
<ol type="1">
<li><p><strong><code>git add &lt;file&gt;</code></strong>：将指定文件的更改添加到暂存区。例如，<code>git add myfile.txt</code>
将 <code>myfile.txt</code> 中的更改添加到暂存区。</p></li>
<li><p><strong><code>git add .</code></strong>：将当前目录下所有文件的更改添加到暂存区。</p></li>
<li><p><strong><code>git add -A</code></strong> 或
<strong><code>git add --all</code></strong>：将所有未跟踪的文件和已跟踪的更改都添加到暂存区。</p></li>
<li><p><strong><code>git reset &lt;file&gt;</code></strong>：从暂存区中移除指定文件的更改，但保留在工作目录中。这个命令通常用于取消暂存的更改。</p></li>
</ol>
<p><strong><code>git stash</code> 常用命令</strong>:</p>
<ol type="1">
<li><p><strong><code>git stash</code></strong>：将工作目录中的未提交更改保存到一个新的
stash 中，然后重置工作目录为上一个提交的状态。</p></li>
<li><p><strong><code>git stash save "stash_message"</code></strong>：除了保存
stash，还可以提供一个描述性的消息来标识 stash
的用途。例如，<code>git stash save "Work in progress on feature X"</code>。</p></li>
<li><p><strong><code>git stash list</code></strong>：列出所有保存的
stash，显示 stash 标识符和消息。</p></li>
<li><p><strong><code>git stash apply</code></strong>：将最新的 stash
应用到工作目录，但不会从 stash 列表中删除它。你也可以指定一个特定的
stash，例如 <code>git stash apply stash@&#123;2&#125;</code>。</p></li>
<li><p><strong><code>git stash pop</code></strong>：将最新的 stash
应用到工作目录，并从 stash 列表中删除它。</p></li>
<li><p><strong><code>git stash drop</code></strong>：删除指定的
stash。你需要指定 stash 标识符，例如
<code>git stash drop stash@&#123;1&#125;</code>。</p></li>
<li><p><strong><code>git stash clear</code></strong>：删除所有保存的
stash。</p></li>
<li><p><strong><code>git stash branch &lt;new_branch_name&gt;</code></strong>：创建一个新分支并将最新的
stash
应用到这个新分支上。这在你需要在不同分支上继续工作时很有用。</p></li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>stage</tag>
        <tag>stash</tag>
      </tags>
  </entry>
  <entry>
    <title>无重复字符的最长子串</title>
    <url>/2023/08/28/%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<a
href="https://leetcode.cn/problems/longest-substring-without-repeating-characters/description/">题目描述</a></p>
<p>2.思路：</p>
<p>右指针在往右滑的过程中，如果满足条件，就一直滑
一旦右指针不满足条件，则滑动左指针，直到右指针满足条件可以继续滑
这个过程中，左右指针之间的距离忽大忽小，在这个过程中就能得到最大长度 <a
href="https://www.bilibili.com/video/BV113411v7Ak/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">视频讲解
1</a> <a
href="https://www.bilibili.com/video/BV1As4y1D7iJ/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">视频讲解
2</a></p>
<span id="more"></span>
<p>3.代码:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">s</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> lengthOfLongestSubstring = <span class="keyword">function</span> (<span class="params">s</span>) &#123;</span><br><span class="line">  <span class="comment">// 用于存储当前窗口中的字符</span></span><br><span class="line">  <span class="keyword">const</span> charSet = <span class="keyword">new</span> <span class="title class_">Set</span>();</span><br><span class="line">  <span class="comment">// 窗口左指针</span></span><br><span class="line">  <span class="keyword">let</span> left = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// 最长子串长度</span></span><br><span class="line">  <span class="keyword">let</span> maxLength = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> right = <span class="number">0</span>; right &lt; s.<span class="property">length</span>; right++) &#123;</span><br><span class="line">    <span class="keyword">while</span> (charSet.<span class="title function_">has</span>(s[right])) &#123;</span><br><span class="line">      <span class="comment">// 移动左指针，移除左侧重复的字符</span></span><br><span class="line">      charSet.<span class="title function_">delete</span>(s[left]);</span><br><span class="line">      <span class="comment">// 重复此步骤直到右指针所在的字符不在子串当中</span></span><br><span class="line">      left++;</span><br><span class="line">    &#125;</span><br><span class="line">    charSet.<span class="title function_">add</span>(s[right]);</span><br><span class="line">    maxLength = <span class="title class_">Math</span>.<span class="title function_">max</span>(maxLength, right - left + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> maxLength;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>根据 id 合并数组</title>
    <url>/2023/08/29/%E6%A0%B9%E6%8D%AE-id-%E5%90%88%E5%B9%B6%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<a
href="https://leetcode.cn/problems/join-two-arrays-by-id/?envType=study-plan-v2&amp;envId=30-days-of-javascript">题目描述</a></p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> join = <span class="keyword">function</span> (<span class="params">arr1, arr2</span>) &#123;</span><br><span class="line">  <span class="comment">// 保存重构的 arr1 数据</span></span><br><span class="line">  <span class="keyword">let</span> <span class="title class_">IdObject</span> = &#123;&#125;;</span><br><span class="line">  <span class="comment">// 重构 arr1 的数据结构，将 id 提取出来作为键存储 arr1 中的对象</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> obj <span class="keyword">of</span> arr1) &#123;</span><br><span class="line">    <span class="title class_">IdObject</span>[obj.<span class="property">id</span>] = obj;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 遍历 arr2 中的对象</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> obj <span class="keyword">of</span> arr2) &#123;</span><br><span class="line">    <span class="comment">// 如果 arr1 中存在正在遍历的 id，则合并 id 相同的属性</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">IdObject</span>[obj.<span class="property">id</span>]) &#123;</span><br><span class="line">      <span class="comment">// Object.assign() 静态方法将一个或者多个源对象中所有可枚举的自有属性复制到目标对象，并返回修改后的目标对象。</span></span><br><span class="line">      <span class="comment">// 如果目标对象与源对象具有相同的键（属性名），则目标对象中的属性将被源对象中的属性覆盖，后面的源对象的属性将类似地覆盖前面的源对象的同名属性。</span></span><br><span class="line">      <span class="title class_">Object</span>.<span class="title function_">assign</span>(<span class="title class_">IdObject</span>[obj.<span class="property">id</span>], obj);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 如果 arr1 中不存在正在遍历的 id，则添加改对象</span></span><br><span class="line">      <span class="title class_">IdObject</span>[obj.<span class="property">id</span>] = obj;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 将结果升序排序</span></span><br><span class="line">  <span class="keyword">const</span> sortedObject = <span class="title class_">Object</span>.<span class="title function_">values</span>(<span class="title class_">IdObject</span>).<span class="title function_">sort</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> &#123;</span><br><span class="line">    a.<span class="property">id</span> - b.<span class="property">id</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> sortedObject;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">arr1 = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">x</span>: <span class="number">1</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">9</span> &#125;,</span><br><span class="line">];</span><br><span class="line">arr2 = [&#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">x</span>: <span class="number">5</span> &#125;];</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">join</span>(arr1, arr2));</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;end&quot;</span>);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>2705. 精简对象</title>
    <url>/2023/08/31/2705-%E7%B2%BE%E7%AE%80%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<a
href="https://leetcode.cn/problems/compact-object/?envType=study-plan-v2&amp;envId=30-days-of-javascript">题目描述</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> compactObject = <span class="keyword">function</span> (<span class="params">obj</span>) &#123;</span><br><span class="line">  <span class="comment">// 函数首先检查 obj 是否是数组</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(obj)) &#123;</span><br><span class="line">    <span class="comment">// 如果是数组，它会递归处理数组中的每个元素，并使用 filter(Boolean) 来过滤掉数组中的假值元素</span></span><br><span class="line">    <span class="keyword">return</span> obj.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> <span class="title function_">compactObject</span>(item)).<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 检查 obj 是否是对象</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> obj === <span class="string">&quot;object&quot;</span> &amp;&amp; obj !== <span class="literal">null</span>) &#123;</span><br><span class="line">    <span class="comment">// 创建一个新的空对象 result，用于存储精简后的属性</span></span><br><span class="line">    <span class="keyword">const</span> result = &#123;&#125;;</span><br><span class="line">    <span class="comment">// 接下来，函数遍历 obj 的所有属性，并将精简后的属性值存储在 result 中，前提是这个属性值不是假值。</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">      <span class="comment">// 确保只检查 obj 自身的属性，而不受原型链上属性的影响</span></span><br><span class="line">      <span class="keyword">if</span> (<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(obj, key)) &#123;</span><br><span class="line">        <span class="comment">// 递归处理每个属性值</span></span><br><span class="line">        <span class="keyword">const</span> compactedValue = <span class="title function_">compactObject</span>(obj[key]);</span><br><span class="line">        <span class="comment">// 如果属性值为真</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Boolean</span>(compactedValue)) &#123;</span><br><span class="line">          <span class="comment">// 保存真值属性</span></span><br><span class="line">          result[key] = compactedValue;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 最后，函数检查 result 对象，如果该对象至少包含一个属性，就返回它；否则返回 &#123;&#125;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Object</span>.<span class="title function_">keys</span>(result).<span class="property">length</span> &gt; <span class="number">0</span> ? result : &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>知识点补充：</p>
<p>1.<a
href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map#%E5%B0%9D%E8%AF%95%E4%B8%80%E4%B8%8B">Array.prototype.map()</a></p>
<p>map() 方法是一个迭代方法。它为数组中的每个元素调用一次提供的
callbackFn 函数，并用结果构建一个新数组。</p>
<p>map(callbackFn) map(callbackFn, thisArg)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> array1 = [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// Pass a function to map</span></span><br><span class="line"><span class="keyword">const</span> map1 = array1.<span class="title function_">map</span>(<span class="function">(<span class="params">x</span>) =&gt;</span> x * <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(map1);</span><br><span class="line"><span class="comment">// Expected output: Array [2, 8, 18, 32]</span></span><br></pre></td></tr></table></figure>
<p>2.<a
href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">Array.prototype.filter()</a></p>
<p>filter()
方法创建给定数组一部分的浅拷贝，其包含通过所提供函数实现的测试的所有元素。</p>
<p>filter(callbackFn) filter(callbackFn, thisArg)</p>
<p>callbackFn
为数组中的每个元素执行的函数。它应该返回一个真值以将元素保留在结果数组中，否则返回一个假值。该函数被调用时将传入以下参数：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isBigEnough</span>(<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> value &gt;= <span class="number">10</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> filtered = [<span class="number">12</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">130</span>, <span class="number">44</span>].<span class="title function_">filter</span>(isBigEnough);</span><br><span class="line"><span class="comment">// filtered is [12, 130, 44]</span></span><br></pre></td></tr></table></figure>
<p>3.<a
href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty">Object.prototype.hasOwnProperty()</a></p>
<p>如果指定的属性是对象的直接属性——即使值为 null 或者
undefined，hasOwnProperty() 方法也会返回
true。如果属性是继承的，或者根本没有声明该属性，则该方法返回 false。与
in 运算符不同的是，该方法不会在对象原型链中检查指定的属性。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> object1 = &#123;&#125;;</span><br><span class="line">object1.<span class="property">property1</span> = <span class="number">42</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object1.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;property1&quot;</span>));</span><br><span class="line"><span class="comment">// Expected output: true</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object1.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;toString&quot;</span>));</span><br><span class="line"><span class="comment">// Expected output: false</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(object1.<span class="title function_">hasOwnProperty</span>(<span class="string">&quot;hasOwnProperty&quot;</span>));</span><br><span class="line"><span class="comment">// Expected output: false</span></span><br></pre></td></tr></table></figure>
<p>使用 Object.prototype.hasOwnProperty.call(obj, key)
是为了确保属性的访问不会受到原型链上的属性影响。</p>
<p>考虑以下情况：如果 obj 对象的原型链上有一个属性和你要检查的属性 key
同名，那么直接使用 obj.hasOwnProperty(key)
可能会返回错误的结果，因为它可能会返回原型链上的属性而不是 obj
对象自身的属性。</p>
<p>通过 Object.prototype.hasOwnProperty.call(obj, key)，我们使用 call
方法来确保 hasOwnProperty 方法在 obj
上被调用，而不是在原型链上。这样，我们可以确保只检查 obj
自身的属性，而不受原型链上属性的影响。</p>
<p>这是一种严谨的做法，特别是当处理复杂对象时，以确保属性检查是针对对象自身的属性。这对于在实现一些自定义逻辑时非常有用，因为你可以避免因原型链上的属性而引入潜在的错误。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>2625.扁平化嵌套数组</title>
    <url>/2023/08/30/2625-%E6%89%81%E5%B9%B3%E5%8C%96%E5%B5%8C%E5%A5%97%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p><a
href="https://www.educative.io/answers/spread-operator-vs-arrayprototypeconcat-in-javascript">Spread
operator(…) vs Array.prototype.concat() in JavaScript</a></p>
<p><a
href="https://stackoverflow.com/questions/48865710/spread-operator-vs-array-concat">spread
operator vs array.concat()</a></p>
<p>网上查了一下 concat 比展开运算法的效率更高，但是程序里面一开始用
concat 就提示超时无法通过，换成展开运算符就可以了。
暂时还没搞明白这点，先 mark 一下。</p>
<span id="more"></span>
<figure class="highlight javascript"><figcaption><span>[]</span></figcaption><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">any[]</span>&#125; <span class="variable">arr</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">depth</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">any[]</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">var</span> flat = <span class="keyword">function</span> (<span class="params">arr, n</span>) &#123;</span><br><span class="line">  <span class="comment">// 首先，我们检查深度 n 是否小于等于 0 或者输入数组 arr 是否为空。如果是，直接返回原数组，因为不需要进行扁平化操作。</span></span><br><span class="line">  <span class="keyword">if</span> (n &lt;= <span class="number">0</span> || arr.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 对于非空且深度 n 大于 0 的情况，我们创建一个空数组 result 来存储扁平化后的结果。</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="comment">// 我们遍历输入数组 arr 中的每个元素 item。</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="comment">// 如果 item 是一个数组，我们递归调用 flattenArray 函数，并将深度 n 减去 1，以便在下一层继续扁平化。然后，将递归结果与 result 数组连接起来。</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(i)) &#123;</span><br><span class="line">      <span class="comment">// 用 concat 有一个测试用例会超时</span></span><br><span class="line">      <span class="comment">//result = result.concat(flattenArray(item, n - 1));</span></span><br><span class="line">      <span class="comment">// 换成展开运算符通过</span></span><br><span class="line">      result.<span class="title function_">push</span>(...<span class="title function_">flat</span>(i, n - <span class="number">1</span>));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 如果 item 不是数组，说明它是一个基本元素，直接将其添加到 result 数组中。</span></span><br><span class="line">      result.<span class="title function_">push</span>(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 最后，返回 result 数组作为扁平化后的结果。</span></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>解决 vue 使用 background-image 无法加载图片的问题</title>
    <url>/2023/09/07/%E8%A7%A3%E5%86%B3-vue-%E4%BD%BF%E7%94%A8-background-image-%E6%97%A0%E6%B3%95%E5%8A%A0%E8%BD%BD%E5%9B%BE%E7%89%87%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>下面这样写无法正确加载背景图片：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;container&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">name</span>: <span class="string">&#x27;component&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"><span class="selector-class">.container</span> &#123;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">height</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">width</span>: <span class="number">40px</span>;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&#x27;@/assets/image.svg&#x27;</span>);</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml">&#125;</span></span></span><br><span class="line"><span class="language-css"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>正确的做法 url
应该这样写：<code>url('~@/assets/image.svg')</code></p>
<p>References<br />
<a
href="https://stackoverflow.com/questions/51812496/vue-cli-3-use-background-image-in-style-tag/54030632#54030632">vue
cli 3 – use background image in style tag</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>vue</tag>
        <tag>background image</tag>
        <tag>url</tag>
      </tags>
  </entry>
  <entry>
    <title>2694. 事件发射器</title>
    <url>/2023/09/04/2694-%E4%BA%8B%E4%BB%B6%E5%8F%91%E5%B0%84%E5%99%A8/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<a
href="https://leetcode.cn/problems/event-emitter/description/">题目描述</a></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">EventEmitter</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 创建一个空对象 events，用于存储事件名称和对应的回调函数数组</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">events</span> = &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 接受两个参数，eventName 事件名称，callback 回调函数</span></span><br><span class="line">  <span class="title function_">subscribe</span>(<span class="params">eventName, callback</span>) &#123;</span><br><span class="line">    <span class="comment">// 如果 evnets 对象中不存在 eventName 对应的数组，则创建一个空数组</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">events</span>[eventName]) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">events</span>[eventName] = [];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将回调函数添加到对应事件的数组中</span></span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">events</span>[eventName].<span class="title function_">push</span>(callback);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 返回一个包含 unsubscribe 方法的对象，以允许用户取消订阅</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">unsubscribe</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      <span class="keyword">const</span> index = <span class="variable language_">this</span>.<span class="property">events</span>[eventName].<span class="title function_">indexOf</span>(callback);</span><br><span class="line">      <span class="keyword">if</span> (index !== -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">events</span>[eventName].<span class="title function_">splice</span>(index, <span class="number">1</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123; unsubscribe &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 接受两个参数，eventName 事件名称和可选的 args 参数数组</span></span><br><span class="line">  <span class="title function_">emit</span>(<span class="params">eventName, args = []</span>) &#123;</span><br><span class="line">    <span class="comment">// 首先检查 events 对象中是否存在 eventName 对应的数组，如果不存在则返回一个空数组</span></span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">events</span>[eventName]) &#123;</span><br><span class="line">      <span class="keyword">return</span> [];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> results = [];</span><br><span class="line">    <span class="comment">// 遍历 eventName 对应的数组，依次调用每个回调函数，并将 args 作为参数传递给它们</span></span><br><span class="line">    <span class="comment">// 将每个回调函数的返回值添加到一个结果数组中</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> callback <span class="keyword">of</span> <span class="variable language_">this</span>.<span class="property">events</span>[eventName]) &#123;</span><br><span class="line">      results.<span class="title function_">push</span>(<span class="title function_">callback</span>(...args));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 返回结果数组</span></span><br><span class="line">    <span class="keyword">return</span> results;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例用法</span></span><br><span class="line"><span class="keyword">const</span> emitter = <span class="keyword">new</span> <span class="title class_">EventEmitter</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 订阅事件 &quot;myEvent&quot;</span></span><br><span class="line"><span class="keyword">const</span> subscription1 = emitter.<span class="title function_">subscribe</span>(<span class="string">&quot;myEvent&quot;</span>, <span class="function">(<span class="params">arg1, arg2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Callback 1: <span class="subst">$&#123;arg1&#125;</span>, <span class="subst">$&#123;arg2&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 另一个订阅同一个事件</span></span><br><span class="line"><span class="keyword">const</span> subscription2 = emitter.<span class="title function_">subscribe</span>(<span class="string">&quot;myEvent&quot;</span>, <span class="function">(<span class="params">arg1, arg2</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Callback 2: <span class="subst">$&#123;arg1&#125;</span>, <span class="subst">$&#123;arg2&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发事件 &quot;myEvent&quot;，并传递参数</span></span><br><span class="line"><span class="keyword">const</span> results = emitter.<span class="title function_">emit</span>(<span class="string">&quot;myEvent&quot;</span>, [<span class="string">&quot;Hello&quot;</span>, <span class="string">&quot;World&quot;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(results); <span class="comment">// 输出结果数组</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 取消订阅第一个回调函数</span></span><br><span class="line">subscription1.<span class="title function_">unsubscribe</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 再次触发事件 &quot;myEvent&quot;</span></span><br><span class="line">emitter.<span class="title function_">emit</span>(<span class="string">&quot;myEvent&quot;</span>, [<span class="string">&quot;Goodbye&quot;</span>, <span class="string">&quot;EventEmitter&quot;</span>]);</span><br></pre></td></tr></table></figure>
<span id="more"></span>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>自我管理</title>
    <url>/2023/09/15/%E8%87%AA%E6%88%91%E7%AE%A1%E7%90%86/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="列清单">列清单</h1>
<h2 id="列清单的准备工作">列清单的准备工作</h2>
<blockquote>
<p>没有执行力的清单：</p>
</blockquote>
<ul>
<li>列在脑袋里</li>
<li>只列重要的、怕忘的</li>
<li>太理想化</li>
</ul>
<blockquote>
<p>有执行力的清单</p>
</blockquote>
<ul>
<li><p>把脑袋里的事情都写下来</p></li>
<li><p>明确下一步行动</p></li>
<li><p>分清轻重缓急</p></li>
<li><p>每天检视计划执行情况</p>
<span id="more"></span></li>
</ul>
<blockquote>
<p>好工具的三个标准</p>
</blockquote>
<ul>
<li><strong>3 秒</strong>进入录入状态</li>
<li><strong>随时</strong>可以拿出来</li>
<li>不超过<strong>2 个</strong></li>
</ul>
<blockquote>
<p>列清单的时间</p>
</blockquote>
<ul>
<li>基本不会被打扰</li>
<li>前一天晚上或者当天早晨</li>
<li>至少需要 10 分钟</li>
</ul>
<h2 id="如何列清单">如何列清单</h2>
<blockquote>
<p>用流程图列清单</p>
</blockquote>
<img src="/2023/09/15/%E8%87%AA%E6%88%91%E7%AE%A1%E7%90%86/GTD.png" class="">
<h2 id="列清单需要绕开的坑">列清单需要绕开的坑</h2>
<p>坑一：不想做清单上的事。<br />
跳坑：不想做的原因是只列出了想法，而不是行动。列出具体的行动。</p>
<p>坑二：时间紧，任务重。 跳坑：发散 -&gt; 归纳 -&gt; 呈现。</p>
<img src="/2023/09/15/%E8%87%AA%E6%88%91%E7%AE%A1%E7%90%86/2.png" class="">
<p>坑三：总是被打扰。 跳坑：</p>
<blockquote>
<p>内部打扰</p>
</blockquote>
<ul>
<li>突然想到的事情记录在旁边的纸上。</li>
</ul>
<img src="/2023/09/15/%E8%87%AA%E6%88%91%E7%AE%A1%E7%90%86/3.png" class="">
<blockquote>
<p>外部打扰</p>
</blockquote>
<ul>
<li>拒绝：说事实，谈感受与，给建议。</li>
<li>协商</li>
<li>中断</li>
</ul>
<h1 id="战胜拖延">战胜拖延</h1>
<blockquote>
<p>烂开始</p>
</blockquote>
<ul>
<li>不怕慢，就怕站</li>
<li>与其在原地纠结，不如先走出一小步！</li>
<li>从不完美开始，先做，再完善</li>
<li>碎片时间思考，大块时间执行</li>
</ul>
<blockquote>
<p>番茄工作法</p>
</blockquote>
<p>选择一个行动 -&gt; 倒计时 25 分钟 -&gt; 休息 5 分钟 -&gt; 继续
PS：每四个番茄钟休息 15 分钟 建议：</p>
<ul>
<li>行动，而不是想法</li>
<li>根据精力设置倒计时</li>
<li>休息时：改变状态，切换情境</li>
</ul>
<img src="/2023/09/15/%E8%87%AA%E6%88%91%E7%AE%A1%E7%90%86/4.png" class="">
<h1 id="应对突发事件">应对突发事件</h1>
<p>建议一，计划时明确下一步行动。</p>
<img src="/2023/09/15/%E8%87%AA%E6%88%91%E7%AE%A1%E7%90%86/5.png" class="">
<h1 id="应对被动做事">应对被动做事</h1>
<p>做事靠系统，不是考感觉。</p>
<h1 id="自然计划法">自然计划法</h1>
<p>自然计划法 5 步骤：</p>
<ul>
<li>目标与原则
<ul>
<li>原则：界定选择的标准</li>
<li>目标：清晰方向(SMART 原则)</li>
</ul></li>
<li>展望成果
<ul>
<li>看到……听到……尝到……收获到……</li>
</ul></li>
<li>头脑风暴</li>
<li>组织整理
<ul>
<li>整理分类 -&gt; 先后顺序 -&gt; 重要程序 -&gt; 甘特图</li>
</ul></li>
<li>行动选择</li>
</ul>
<h1 id="时间日志">时间日志</h1>
<ul>
<li>记录时间日志，每天什么时间做了什么事花了多长时间</li>
<li>分析统计</li>
<li>修正调整</li>
</ul>
<h1 id="工作树">工作树</h1>
<p>第一步：画出工作树</p>
<img src="/2023/09/15/%E8%87%AA%E6%88%91%E7%AE%A1%E7%90%86/6.png" class="">
<p>第二步：标出时间黑洞和贡献价值部分</p>
<ul>
<li>你现在大部分时间都是花在哪里？</li>
<li>你觉得自己最能贡献价值的地方在哪里？</li>
<li>你有没有把大部分时间花在最能贡献价值的地方？</li>
</ul>
<p>第三步：建立系统，通过授权把自己解放出来</p>
<p>新人-&gt;项目管理的转变</p>
<p>从事必躬亲 -&gt; 到授权别人<br />
从考虑细节 -&gt; 到关注进度<br />
从埋头做事 -&gt; 到多做沟通</p>
<h1 id="制作年度计划">制作年度计划</h1>
<ul>
<li>给五年后的自己写一封信</li>
<li>平衡人生的九宫格</li>
<li>让目标更 SMART</li>
<li>目标落地为项目和习惯</li>
<li>用晨间日记串联年度计划</li>
</ul>
<h1 id="references">References</h1>
<p><a
href="https://www.bilibili.com/video/BV1Nt411r74j?p=1&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">回归人性的自我管理</a><br />
记得 N 年前看过他的《小强升职记》，作者真·时间管理大师！</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>自我管理</tag>
        <tag>精进</tag>
      </tags>
  </entry>
  <entry>
    <title>清华大学：管理沟通的逻辑</title>
    <url>/2023/09/18/%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%EF%BC%9A%E7%AE%A1%E7%90%86%E6%B2%9F%E9%80%9A%E7%9A%84%E9%80%BB%E8%BE%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="管理即是沟通">管理即是沟通</h1>
<p><strong>管理的四大基本职能</strong>：计划、组织、领导、控制</p>
<p><strong>四个关键动作都需要沟通</strong>：收集信息、达成共识、做出决策、推动执行</p>
<p>管理就是通过他人去完成任务的学问。</p>
<p><strong>四共团队</strong>：共识、共鸣、共振、共赢</p>
<p>领导力就是动员大家为了共同的愿景努力奋斗的艺术。</p>
<span id="more"></span>
<h1 id="管理沟通的五大要素">管理沟通的五大要素</h1>
<img src="/2023/09/18/%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%EF%BC%9A%E7%AE%A1%E7%90%86%E6%B2%9F%E9%80%9A%E7%9A%84%E9%80%BB%E8%BE%91/1.png" class="">
<h2 id="沟通者">沟通者：</h2>
<ul>
<li>目的：信息通报、工作汇报、销售说服、商务谈判、面试、例会</li>
<li>方式：陈述、说服、征询、参与</li>
<li>三个标准：
<ul>
<li>足够信息</li>
<li>不需要他人意见</li>
<li>想要自己控制信息</li>
</ul></li>
<li>可信度：了解、信任、信心</li>
<li>要素：
<ul>
<li>身份</li>
<li>良好意愿</li>
<li>专业知识</li>
<li>形象声誉</li>
<li>共同基础</li>
</ul></li>
</ul>
<h2 id="沟通对象">沟通对象</h2>
<ul>
<li>谁？</li>
<li>了解并期待什么？</li>
<li>感觉如何？</li>
<li>如何说服他们：利益点是什么？</li>
</ul>
<h2 id="信息策略">信息策略</h2>
<ul>
<li>信息结构：开始与结尾：过程管理，吸引，题目，观点，要点</li>
<li>信息组织：金字塔原理</li>
<li>记忆：记忆力</li>
<li>故事：抽象的事情具体化、生动化</li>
</ul>
<p>思维的框架：金字塔结构-思维的逻辑 <img src="/2023/09/18/%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%EF%BC%9A%E7%AE%A1%E7%90%86%E6%B2%9F%E9%80%9A%E7%9A%84%E9%80%BB%E8%BE%91/2.png" class=""></p>
<h2 id="渠道策略">渠道策略</h2>
<ul>
<li>纯文字沟通：邮件、短信、微信</li>
<li>纯口头沟通：电话、电话会议、语音、表达、混合渠道</li>
<li>混合式沟通</li>
</ul>
<h2 id="文化背景">文化背景</h2>
<ul>
<li>时间：上班，周一</li>
<li>创业偏好：创业型无限可能，大企业</li>
<li>沟通方式：集权型组织，民主</li>
<li>可信度：信任的氛围</li>
<li>沟通对象选择：相关者</li>
<li>说服：有的文化喜欢说服</li>
<li>信息结构：有的领导喜欢书面</li>
<li>渠道选择：部门偏好，技术与市场</li>
<li>非语言行为</li>
<li>地点与空间：办公室、会议室、咖啡厅、非正式</li>
</ul>
<p><strong>沟通的四大目标</strong>：</p>
<ul>
<li>被听到</li>
<li>被理解</li>
<li>被感受</li>
<li>使对方采取行动（改变行为或者态度）</li>
</ul>
<h1 id="沟通的四项基本原则">沟通的四项基本原则</h1>
<p><strong>沟通的四个基本原则</strong>：</p>
<ul>
<li>先人后事</li>
<li>目的导向</li>
<li>互动参与</li>
<li>3R 原则（恰当的时间、恰当的地点、恰当的方式）</li>
</ul>
<h1 id="沟通的四种基本类型">沟通的四种基本类型</h1>
<h2 id="沟通的结构化思维">沟通的结构化思维</h2>
<ul>
<li><p>说：演讲与表达</p>
<p>SUCCESS（成功） 模型<br />
<img src="/2023/09/18/%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%EF%BC%9A%E7%AE%A1%E7%90%86%E6%B2%9F%E9%80%9A%E7%9A%84%E9%80%BB%E8%BE%91/3.png" class=""></p></li>
<li><p>听:3F 倾听</p>
<ul>
<li>Fact，事实</li>
<li>Feeling，感受（情绪）</li>
<li>Focus，意图</li>
</ul></li>
<li><p>写：高级能力，思路清晰、文字能力</p>
<ul>
<li>计划：工作计划、项目计划</li>
<li>总结：项目总结、月度总结、季度总结、年度总结</li>
<li>汇报：项目汇报</li>
<li>结构：主题、观点、结构、论据、案例，数据</li>
</ul>
<img src="/2023/09/18/%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%EF%BC%9A%E7%AE%A1%E7%90%86%E6%B2%9F%E9%80%9A%E7%9A%84%E9%80%BB%E8%BE%91/4.png" class=""></li>
<li><p>读</p>
<p>沟通三要素： <img src="/2023/09/18/%E6%B8%85%E5%8D%8E%E5%A4%A7%E5%AD%A6%EF%BC%9A%E7%AE%A1%E7%90%86%E6%B2%9F%E9%80%9A%E7%9A%84%E9%80%BB%E8%BE%91/5.png" class=""></p>
<p>From tell to ask</p></li>
</ul>
<h1 id="references">References</h1>
<p><a
href="https://www.bilibili.com/list/watchlater?oid=644640093&amp;bvid=BV1ha4y1f7Rn&amp;spm_id_from=333.788.top_right_bar_window_view_later.content.click">清华大学：管理沟通的逻辑（全
8 讲）</a></p>
<h1 id="todo">TODO</h1>
<p>课程中提到的书籍需要后续阅读：</p>
<ul>
<li>[] 1.《会演讲的人成功机会多两倍》</li>
<li>[] 2.《卓有成效的管理者》</li>
<li>[] 3.《金字塔原理》</li>
<li>[] 4.《战略地图》</li>
<li>[] 5.《领导力教练》</li>
<li>[] 6.《高绩效教练》</li>
</ul>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>管理</tag>
        <tag>沟通</tag>
      </tags>
  </entry>
  <entry>
    <title>修改 Element input 输入建议对象中用于显示的键名</title>
    <url>/2023/09/18/%E4%BF%AE%E6%94%B9-Element-input-%E8%BE%93%E5%85%A5%E5%BB%BA%E8%AE%AE%E5%AF%B9%E8%B1%A1%E4%B8%AD%E7%94%A8%E4%BA%8E%E6%98%BE%E7%A4%BA%E7%9A%84%E9%94%AE%E5%90%8D/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>只需要给 <code>el-autocomplete</code> 新增一个属性
<code>value-key = "address"</code>，就可以指定键名了。</p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;el-row <span class="keyword">class</span>=<span class="string">&quot;demo-autocomplete&quot;</span>&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;sub-title&quot;</span>&gt;</span>激活即列出输入建议<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-autocomplete</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">class</span>=<span class="string">&quot;inline-input&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">v-model</span>=<span class="string">&quot;state1&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">value-key</span> = <span class="string">&quot;address&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">:fetch-suggestions</span>=<span class="string">&quot;querySearch&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      <span class="attr">placeholder</span>=<span class="string">&quot;请输入内容&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">      @<span class="attr">select</span>=<span class="string">&quot;handleSelect&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">    &gt;</span><span class="tag">&lt;/<span class="name">el-autocomplete</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-col</span>&gt;</span></span></span><br><span class="line">&lt;/el-row&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">restaurants</span>: [],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">state1</span>: <span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">state2</span>: <span class="string">&#x27;&#x27;</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">querySearch</span>(<span class="params">queryString, cb</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> restaurants = <span class="variable language_">this</span>.<span class="property">restaurants</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> results = queryString ? restaurants.<span class="title function_">filter</span>(<span class="variable language_">this</span>.<span class="title function_">createFilter</span>(queryString)) : restaurants;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="comment">// 调用 callback 返回建议列表的数据</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="title function_">cb</span>(results);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">createFilter</span>(<span class="params">queryString</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> <span class="function">(<span class="params">restaurant</span>) =&gt;</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> (restaurant.<span class="property">value</span>.<span class="title function_">toLowerCase</span>().<span class="title function_">indexOf</span>(queryString.<span class="title function_">toLowerCase</span>()) === <span class="number">0</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">loadAll</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">return</span> [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;三全鲜食（北新泾店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;长宁区新渔路144号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;Hot honey 首尔炸鸡（仙霞路）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区淞虹路661号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;新旺角茶餐厅&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市普陀区真北路988号创邑金沙谷6号楼113&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;泷千家(天山西路店)&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;天山西路438号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;胖仙女纸杯蛋糕（上海凌空店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区金钟路968号1幢18号楼一层商铺18-101&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;贡茶&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区金钟路633号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;豪大大香鸡排超级奶爸&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市嘉定区曹安公路曹安路1685号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;茶芝兰（奶茶，手抓饼）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市普陀区同普路1435号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;十二泷町&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市北翟路1444弄81号B幢-107&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;星移浓缩咖啡&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市嘉定区新郁路817号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;阿姨奶茶/豪大大&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;嘉定区曹安路1611号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;新麦甜四季甜品炸鸡&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;嘉定区曹安公路2383弄55号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;Monica摩托主题咖啡店&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;嘉定区江桥镇曹安公路2409号1F，2383弄62号1F&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;浮生若茶（凌空soho店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海长宁区金钟路968号9号楼地下一层&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;NONO JUICE  鲜榨果汁&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区天山西路119号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;CoCo都可(北新泾店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区仙霞西路&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;快乐柠檬（神州智慧店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区天山西路567号1层R117号店铺&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;Merci Paul cafe&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市普陀区光复西路丹巴路28弄6号楼819&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;猫山王（西郊百联店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区仙霞西路88号第一层G05-F01-1-306&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;枪会山&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市普陀区棕榈路&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;纵食&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;元丰天山花园(东门) 双流路267号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;钱记&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区天山西路&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;壹杯加&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区通协路&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;唦哇嘀咖&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区新泾镇金钟路999号2幢（B幢）第01层第1-02A单元&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;爱茜茜里(西郊百联)&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;长宁区仙霞西路88号1305室&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;爱茜茜里(近铁广场)&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市普陀区真北路818号近铁城市广场北区地下二楼N-B2-O2-C商铺&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;鲜果榨汁（金沙江路和美广店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;普陀区金沙江路2239号金沙和美广场B1-10-6&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;开心丽果（缤谷店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区威宁路天山路341号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;超级鸡车（丰庄路店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市嘉定区丰庄路240号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;妙生活果园（北新泾店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;长宁区新渔路144号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;香宜度麻辣香锅&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;长宁区淞虹路148号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;凡仔汉堡（老真北路店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市普陀区老真北路160号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;港式小铺&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区金钟路968号15楼15-105室&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;蜀香源麻辣香锅（剑河路店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;剑河路443-1&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;北京饺子馆&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;长宁区北新泾街道天山西路490-1号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;饭典*新简餐（凌空SOHO店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区金钟路968号9号楼地下一层9-83室&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;焦耳·川式快餐（金钟路店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市金钟路633号地下一层甲部&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;动力鸡车&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;长宁区仙霞西路299弄3号101B&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;浏阳蒸菜&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;天山西路430号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;四海游龙（天山西路店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区天山西路&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;樱花食堂（凌空店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区金钟路968号15楼15-105室&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;壹分米客家传统调制米粉(天山店)&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;天山西路428号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;福荣祥烧腊（平溪路店）&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区协和路福泉路255弄57-73号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;速记黄焖鸡米饭&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区北新泾街道金钟路180号1层01号摊位&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;红辣椒麻辣烫&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;上海市长宁区天山西路492号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;(小杨生煎)西郊百联餐厅&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;长宁区仙霞西路88号百联2楼&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;阳阳麻辣烫&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;天山西路389号&quot;</span> &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#123; <span class="string">&quot;value&quot;</span>: <span class="string">&quot;南拳妈妈龙虾盖浇饭&quot;</span>, <span class="string">&quot;address&quot;</span>: <span class="string">&quot;普陀区金沙江路1699号鑫乐惠美食广场A13&quot;</span> &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        ];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">handleSelect</span>(<span class="params">item</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">console</span>.<span class="title function_">log</span>(item);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">mounted</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">restaurants</span> = <span class="variable language_">this</span>.<span class="title function_">loadAll</span>();</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>References<br />
<a
href="https://blog.csdn.net/sven_chen93/article/details/110880675">el-table
表格数据变化，页面不更新问题</a> <a
href="https://element.eleme.cn/#/zh-CN/component/input">Input
输入框</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Element</tag>
        <tag>Vue</tag>
        <tag>input</tag>
        <tag>输入建议</tag>
        <tag>键名</tag>
      </tags>
  </entry>
  <entry>
    <title>vue2.x 项目报错 vuex.esm.js sub is not function</title>
    <url>/2023/09/08/vue2-x-%E9%A1%B9%E7%9B%AE%E6%8A%A5%E9%94%99-vuex-esm-js-sub-is-not-function/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>此问题是 chrome vue.js devtools 插件引起的。 我的插件版本号是：
Vue.js devtools 6.5.0 操作系统：win7 解决办法： F12 打开调试控制台 -&gt;
点击 Vue -&gt; 点击右上角竖排三个点 -&gt; 选择 Devtools plugins -&gt;
点击控制台中间的 Vue2 -&gt; 在最右侧 Plugin settings 开启 Legacy Actions
开关</p>
<span id="more"></span>
<p>References<br />
<a href="https://juejin.cn/post/7097157803478876168">vue2.x 项目报错
vuex.esm.js sub is not function</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Vuex</tag>
        <tag>devtools</tag>
      </tags>
  </entry>
  <entry>
    <title>自然笔记写作指南</title>
    <url>/2023/09/18/%E8%87%AA%E7%84%B6%E7%AC%94%E8%AE%B0%E5%86%99%E4%BD%9C%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>自然笔记是用来记录对自然的观察和思考，它可以帮助我们更多地了解自然，认识自己。这也是鼓励孩子们培养学习能力和好奇心的一种绝佳方法，同时能唤醒他们对科学和艺术的兴趣，培养和提升写作技能。</p>
<span id="more"></span>
<h1 id="确定想写的自然笔记类型">确定想写的自然笔记类型</h1>
<p>你可以根据个人喜好和所处的自然环境，以各种酷炫的方式写自然笔记。自然笔记有以下几种类型：</p>
<ul>
<li>简单记录每次远足，把看到的、感受到的和注意到的都写下来。</li>
<li>写一本只关注某个地方或某种生物的自然笔记，如河流、公园，后院隐藏的秘密灌木丛或者红杉树、蝴蝶等。</li>
<li>写一本记录一次旅行的自然笔记。</li>
<li>还有一类笔记通常用于科学研究。</li>
</ul>
<h1 id="带上所需的其他装备">带上所需的其他装备</h1>
<p>如果你只是计划写写画画，一个笔记本和一只铅笔就足够了。如果你想多画一些彩图，可以选用蜡笔，彩铅或者水彩画笔。还可以准备一些胶粘剂或标签，把照片或捡到的东西粘贴到笔记本上。</p>
<h1 id="观察你周围的世界">观察你周围的世界</h1>
<p>与其说创作自然笔记是写写画画，不如说是一种观察。无论你住在哪里，都能以某种形式观察大自然。你可以出去看看、静静地坐着，或悠闲地散步，对周围的环境或选择的对象进行研究和分析。不要基于落笔，只要观察就好。</p>
<h1 id="现场写作">现场写作</h1>
<p>自然笔记最有价值的地方在于：一边实地观察，以便记录观察结果。假如回家后依赖记忆写笔记，可能会不够准确。</p>
<h1 id="给笔记标注地点日期和时间">给笔记标注地点，日期和时间</h1>
<p>像任何笔记一样，我们都希望在回顾时，直到所写的每一篇笔记的确切时间和地点。如果你的笔记是以科学研究为目的，还需要写的非常具体，比如天气等细节。</p>
<h1 id="用图画或绘图记录观察结果">用图画或绘图记录观察结果</h1>
<p>无论绘画能力如何，你至少应该尝试画一些观察到的植物、动物或场景的草图。准确地描绘（或尽力描绘）某种事物有助于更深入地观察它。举个例子，画一株植物，你会观察叶子的形状、颜色，不同叶子之间的区别，以及其他容易被忽略的细节。因此，画的怎么样并不是特别重要，画画会帮助你去更好地观察。相信随着时间的推移和多加练习，你会画得越来越好。你也可以把观察对象拍下来，不过还是要尝试画画。</p>
<h1 id="记下你的观察">记下你的观察</h1>
<p><strong>描述所见之物</strong>。尝试忽略你对所见之物的了解，想象自己第一次看到它，把它写下来，尽你所能去描述它。这样一百年后，当有人拿起你的笔记，会想象你所描述的鸟，并且试着去了解它。这听起来有点傻，但是你要知道，古老的自然笔记已经为我们提供了很多有关灭绝动物的知识。</p>
<p><strong>记下你的感受</strong>。如果一座山让你肃然起敬，或者一只蜜蜂停在一朵花上让你内心平静，不要犹豫，把这些感受都记下来。自然笔记给你了一个回应打字人的机会，写下回应能帮助你认识自己——甚至认识你在宇宙中所处的位置。</p>
<p><strong>不要边记笔记边编制</strong>。放任你的思想在纸上自由地流淌。</p>
<p><strong>选择自己的风格</strong>。为每一条笔记创立一种风格，或者随心选择不同风格来描写和勾画。有人喜欢把笔记写得像给朋友或自己写信，有人则喜欢在笔记中加入诗歌或小故事。动笔写就很好。</p>
<h1 id="了解更多你所看到的事物">了解更多你所看到的事物</h1>
<p>笔记可以成为学习的催化剂。出门观察过自然之后，你就可以回家或者去图书馆查阅更多资料，特别是那些你感兴趣或者悬而未决的问题。例如，当你看到一种不熟悉的植物，你就可以带上所画的植物草图和写下的文字描述，去查阅该植物更多地信息。</p>
<p>记得写下你的疑问，比如，当那只鸟的头不断上下摆动时，它在做什么？为什么山这边的草长得那么矮……试着去找到这些问题的答案。</p>
<h1 id="回顾以前的笔记">回顾以前的笔记</h1>
<p>翻阅以往的自然笔记是很棒的学习体验。通过翻笔记，可以重温逝去的时光，或者用数据对比观察结果。你还会观察到自己的写作风格是如何随着时间的推移而改变的。</p>
<h1 id="tips">TIPS</h1>
<ul>
<li>把本子放在触手可及之处，这回促使你更加频繁地记笔记。每次散步时带上笔记本，看到有趣的东西，就记下来或画出来。</li>
<li>如果你缺乏灵感，试着自我提问。例如，看到一只鸟，问问自己：它吃什么？它为什么出现在这里？</li>
<li>有些人会将发现的东西（比如树叶、羽毛）粘贴到笔记中，也有一些人会选择摹绘，这些都会让自然笔记充满生机。记住，不要采挖植物或惊扰动物。</li>
<li>你的笔记不必很“完美”。如果笔记中有涂改的文字或未完成的图画，没关系。写自然笔记给你提供了一个随心所欲创作的机会，让你的思想可以自然地流淌。记住，不要为了整洁而妨碍记笔记的体验。</li>
<li>如果你仍然不知道该怎么记笔记，可以在互联网上搜索，也可以去图书馆查阅，找到其他人的自然笔记作参考。</li>
</ul>
<h1 id="references">References</h1>
<p>《去郊游-我们的自然探索之旅》 趣味实践小游戏，自然笔记写作指南<br />
TIPS 来源 <a
href="https://www.wikihow.com/Main-Page">wikiHow</a>，常妮妮译</p>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>自然笔记</tag>
      </tags>
  </entry>
  <entry>
    <title>解决 Axios get 请求数组参数的问题</title>
    <url>/2023/09/11/%E8%A7%A3%E5%86%B3-Axios-get-%E8%AF%B7%E6%B1%82%E6%95%B0%E7%BB%84%E5%8F%82%E6%95%B0%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.问题：get
请求参数为数组时，自动添加了[]，导致后台没有收到请求参数。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">axios.<span class="title function_">get</span>(url, &#123;</span><br><span class="line">  <span class="attr">params</span>: &#123;</span><br><span class="line">    <span class="attr">tag</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// ...tag[]=1&amp;tag[]=2&amp;tag[]=3&amp;tag[]=4</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>2.解决方案：在 Axios 拦截器中新增如下配置。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">&quot;qs&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (config.<span class="property">method</span> === <span class="string">&quot;get&quot;</span>) &#123;</span><br><span class="line">  <span class="comment">// 如果是get请求，且params是数组类型如arr=[1,2]，则转换成arr=1&amp;arr=2</span></span><br><span class="line">  config.<span class="property">paramsSerializer</span> = <span class="keyword">function</span> (<span class="params">params</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> qs.<span class="title function_">stringify</span>(params, &#123; <span class="attr">arrayFormat</span>: <span class="string">&quot;repeat&quot;</span> &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>References<br />
<a href="https://juejin.cn/post/6995362880996507656">axios
传递数组参数，后台接收不到填坑之旅</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Axios</tag>
        <tag>get</tag>
        <tag>数组参数</tag>
      </tags>
  </entry>
  <entry>
    <title>JS 数组常用方法汇总</title>
    <url>/2023/09/19/JS-%E6%95%B0%E7%BB%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="两个数组对象求差集">两个数组对象求差集</h1>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 定义一个名为 arrayDifference 的函数，接受两个数组作为参数</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">arrayDifference</span>(<span class="params">arr1, arr2</span>) &#123;</span><br><span class="line">  <span class="comment">// 创建一个空数组，用于存储 arr2 中包含的 id</span></span><br><span class="line">  <span class="keyword">const</span> ids2 = arr2.<span class="title function_">map</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> item.<span class="property">id</span>);</span><br><span class="line">  <span class="comment">// 使用 filter() 方法过滤 arr1 中的元素，以排除 arr2 中的元素</span></span><br><span class="line">  <span class="keyword">const</span> difference = arr1.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> !ids2.<span class="title function_">includes</span>(item.<span class="property">id</span>));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> difference;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例：</span></span><br><span class="line"><span class="keyword">const</span> array1 = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">name</span>: <span class="string">&quot;A&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;B&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&quot;C&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"><span class="keyword">const</span> array2 = [</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&quot;B&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">id</span>: <span class="number">3</span>, <span class="attr">name</span>: <span class="string">&quot;C&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = <span class="title function_">arrayDifference</span>(array1, array2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(result); <span class="comment">// 输出: [&#123; id: 1, name: &#x27;A&#x27; &#125;]</span></span><br></pre></td></tr></table></figure>
<p>这段代码首先从每个数组对象中提取 id 属性，然后使用 filter 函数找出在
array1 中存在但不在 array2 中的对象，从而得到它们的差集。最后，result
将包含差集的数组对象。</p>
<span id="more"></span>
<h1 id="连个数组对象求并集">连个数组对象求并集</h1>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">mergeArrays</span>(<span class="params">arr1, arr2</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> arr1.<span class="title function_">map</span>(<span class="function">(<span class="params">item1</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> matchingItem = arr2.<span class="title function_">find</span>(<span class="function">(<span class="params">item2</span>) =&gt;</span> item2.<span class="property">id</span> === item1.<span class="property">id</span>);</span><br><span class="line">    <span class="keyword">if</span> (matchingItem) &#123;</span><br><span class="line">      <span class="comment">// 如果在 arr2 中找到匹配的项，将两个对象合并</span></span><br><span class="line">      <span class="keyword">return</span> &#123; ...item1, ...matchingItem &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> item1; <span class="comment">// 如果没有匹配项，保留 item1 不做合并</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array1 = [</span><br><span class="line">  <span class="comment">// 第一个数组对象的内容</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> array2 = [</span><br><span class="line">  <span class="comment">// 第二个数组对象的内容</span></span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> mergedArray = <span class="title function_">mergeArrays</span>(array1, array2);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(mergedArray);</span><br></pre></td></tr></table></figure>
<p>在这个示例中，mergeArrays 函数遍历 array1 中的每个对象，并使用 find
方法在 array2 中查找具有相同 id
值的对象。如果找到匹配项，它会将两个对象合并，并返回合并后的对象。如果没有找到匹配项，它会保持
array1 中的对象不做合并。</p>
<p>最后，mergedArray
将包含两个数组对象的合并结果。请根据你的实际需求和对象字段进行适当的调整。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>数组对象</tag>
        <tag>Array</tag>
        <tag>差集</tag>
        <tag>并集</tag>
      </tags>
  </entry>
  <entry>
    <title>解决 el-table 表格数据变化，页面不更新问题</title>
    <url>/2023/09/18/%E8%A7%A3%E5%86%B3-el-table-%E8%A1%A8%E6%A0%BC%E6%95%B0%E6%8D%AE%E5%8F%98%E5%8C%96%EF%BC%8C%E9%A1%B5%E9%9D%A2%E4%B8%8D%E6%9B%B4%E6%96%B0%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>解决办法:</p>
<p>给表格添加 <code>:key="tableKey"</code>，然后在获取到表格数据以后更新
key 值 <code>this.tableKey = Math.random()</code></p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">el-table</span> <span class="attr">:data</span>=<span class="string">&quot;tableData&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;tableKey&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;date&quot;</span> <span class="attr">label</span>=<span class="string">&quot;日期&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span> <span class="attr">label</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">width</span>=<span class="string">&quot;180&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-table-column</span> <span class="attr">prop</span>=<span class="string">&quot;address&quot;</span> <span class="attr">label</span>=<span class="string">&quot;地址&quot;</span>&gt;</span> <span class="tag">&lt;/<span class="name">el-table-column</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">el-table</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">tableData</span>: [</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">tableKey</span>:<span class="string">&#x27;&#x27;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">date</span>: <span class="string">&quot;2016-05-02&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">name</span>: <span class="string">&quot;王小虎&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">address</span>: <span class="string">&quot;上海市普陀区金沙江路 1518 弄&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">date</span>: <span class="string">&quot;2016-05-04&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">name</span>: <span class="string">&quot;王小虎&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">address</span>: <span class="string">&quot;上海市普陀区金沙江路 1517 弄&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">date</span>: <span class="string">&quot;2016-05-01&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">name</span>: <span class="string">&quot;王小虎&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">address</span>: <span class="string">&quot;上海市普陀区金沙江路 1519 弄&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">date</span>: <span class="string">&quot;2016-05-03&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">name</span>: <span class="string">&quot;王小虎&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="attr">address</span>: <span class="string">&quot;上海市普陀区金沙江路 1516 弄&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      ],</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="attr">tableKey</span>: <span class="string">&quot;&quot;</span>,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="attr">methods</span>:&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">updateTableData</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 此处省略 Axios 获取表格数据代码</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 更新 tableKey ，使 Vue 重新渲染页面</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="variable language_">this</span>.<span class="property">tableKey</span> = <span class="title class_">Math</span>.<span class="title function_">random</span>()</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">&#125;;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>References<br />
<a
href="https://blog.csdn.net/sven_chen93/article/details/110880675">el-table
表格数据变化，页面不更新问题</a> <a
href="https://element.eleme.cn/#/zh-CN/component/table">Table
表格</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Element</tag>
        <tag>Vue</tag>
        <tag>el-table</tag>
      </tags>
  </entry>
  <entry>
    <title>ECharts 版本升级</title>
    <url>/2023/09/20/ECharts-%E7%89%88%E6%9C%AC%E5%8D%87%E7%BA%A7/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>将 ECharts 从 4.9.0 升级到 5.4.0。</p>
<p>如果项目中使用了 ECharts 的地图，注意升级前需要将
<code>node_modules</code> 文件夹下的 <code>echarts</code> 文件夹下的
<code>map</code> 文件夹备份，升级后再复制到该目录下。</p>
<p>注意升级后 ECharts 的引入方式改变了，将之前的引入方式修改为：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> * <span class="keyword">as</span> echarts <span class="keyword">from</span> <span class="string">&quot;echarts&quot;</span>;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="references">References</h1>
<p><a
href="https://blog.csdn.net/weixin_44275820/article/details/120064183">引入
echars5.0 报错“export ‘default‘ (imported as ‘echarts‘) was not found in
‘echarts‘解决方案</a> <a
href="https://zhuanlan.zhihu.com/p/513629308?utm_id=0">echarts
画中国地图及省份切换</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>ECharts</tag>
      </tags>
  </entry>
  <entry>
    <title>ECharts 图表配置</title>
    <url>/2023/09/20/ECharts-%E5%9B%BE%E8%A1%A8%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="折线图配置详解">折线图配置详解</h1>
<p>下面配置的是大数量多条折线图。</p>
<span id="more"></span>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 后端返回的数据格式</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> list = [</span><br><span class="line">  [<span class="string">&quot;时间&quot;</span>, <span class="string">&quot;回风温度&quot;</span>, <span class="string">&quot;回风湿度&quot;</span>],</span><br><span class="line">  [<span class="string">&quot;2023-09-20 10:32:20&quot;</span>, <span class="number">26.7</span>, <span class="number">61</span>],</span><br><span class="line">  [<span class="string">&quot;2023-09-20 10:32:23&quot;</span>, <span class="number">26.7</span>, <span class="number">61</span>],</span><br><span class="line">  [<span class="string">&quot;2023-09-20 10:32:26&quot;</span>, <span class="number">26.7</span>, <span class="number">61</span>],</span><br><span class="line">  [<span class="string">&quot;2023-09-20 10:32:29&quot;</span>, <span class="number">26.7</span>, <span class="number">61</span>],</span><br><span class="line">  [<span class="string">&quot;2023-09-20 10:32:32&quot;</span>, <span class="number">26.7</span>, <span class="number">61</span>],</span><br><span class="line">  [<span class="string">&quot;2023-09-20 10:32:35&quot;</span>, <span class="number">26.7</span>, <span class="number">61</span>],</span><br><span class="line">  [<span class="string">&quot;2023-09-20 10:32:38&quot;</span>, <span class="number">26.7</span>, <span class="number">61</span>],</span><br><span class="line">  [<span class="string">&quot;2023-09-20 10:32:41&quot;</span>, <span class="number">26.7</span>, <span class="number">61</span>],</span><br><span class="line">  [<span class="string">&quot;2023-09-20 10:32:44&quot;</span>, <span class="number">26.7</span>, <span class="number">61</span>],</span><br><span class="line">  [<span class="string">&quot;2023-09-20 10:32:47&quot;</span>, <span class="number">26.7</span>, <span class="number">61</span>],</span><br><span class="line">  [<span class="string">&quot;2023-09-20 10:32:50&quot;</span>, <span class="number">26.7</span>, <span class="number">61</span>],</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 配置 series，注意 series 的长度和上面 list 每一行的长度相等</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> series = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">    <span class="attr">seriesLayoutBy</span>: <span class="string">&quot;column&quot;</span>,</span><br><span class="line">    <span class="attr">smooth</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">      <span class="attr">rotate</span>: <span class="number">90</span>,</span><br><span class="line">      <span class="attr">interval</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;line&quot;</span>,</span><br><span class="line">    <span class="attr">seriesLayoutBy</span>: <span class="string">&quot;column&quot;</span>,</span><br><span class="line">    <span class="attr">smooth</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">axisLabel</span>: &#123;</span><br><span class="line">      <span class="attr">rotate</span>: <span class="number">90</span>,</span><br><span class="line">      <span class="attr">interval</span>: <span class="number">0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 折线图配置</span></span><br><span class="line"><span class="keyword">const</span> option = &#123;</span><br><span class="line">  <span class="attr">legend</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">tooltip</span>: &#123;</span><br><span class="line">    <span class="attr">trigger</span>: <span class="string">&quot;axis&quot;</span>,</span><br><span class="line">    <span class="attr">order</span>: <span class="string">&quot;valueDesc&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 当已经设置了图表容器为 100%宽度，但是图表宽度还是比容器小，需要设置这个属性</span></span><br><span class="line">  <span class="attr">grid</span>: &#123;</span><br><span class="line">    <span class="attr">top</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="attr">left</span>: <span class="string">&quot;2%&quot;</span>,</span><br><span class="line">    <span class="attr">right</span>: <span class="string">&quot;2%&quot;</span>,</span><br><span class="line">    <span class="attr">bottom</span>: <span class="string">&quot;12%&quot;</span>,</span><br><span class="line">    <span class="attr">containLabel</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">dataset</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">dimensions</span>: list[<span class="number">0</span>],</span><br><span class="line">      <span class="attr">source</span>: list,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">xAxis</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;category&quot;</span>,</span><br><span class="line">    <span class="attr">nameLocation</span>: <span class="string">&quot;middle&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">yAxis</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">dataZoom</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">type</span>: <span class="string">&quot;inside&quot;</span>,</span><br><span class="line">      <span class="attr">start</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">end</span>: <span class="number">20</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">start</span>: <span class="number">0</span>,</span><br><span class="line">      <span class="attr">end</span>: <span class="number">20</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">series</span>: series,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1
id="监听图表容器的大小并改变图表大小">监听图表容器的大小并改变图表大小</h1>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在 Vue 中监听图表容器的大小并改变图表大小</span></span><br><span class="line"><span class="title function_">activated</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 页面宽度改变重绘表格</span></span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">onresize</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">statusChart</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">statusChart</span>.<span class="title function_">resize</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="title function_">getWebIdNames</span>();</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<h1 id="销毁容器节点">销毁容器节点</h1>
<p>假设页面中存在多个标签页，每个标签页都包含一些图表。当选中一个标签页的时候，其他标签页的内容在
DOM
中被移除了。这样，当用户再选中这些标签页的时候，就会发现图表“不见”了。</p>
<p>本质上，这是由于图表的容器节点被移除导致的。即使之后该节点被重新添加，图表所在的节点也已经不存在了。</p>
<p>正确的做法是，在图表容器被销毁之后，调用
<code>echartsInstance.dispose</code>
销毁实例，在图表容器重新被添加后再次调用 <code>echarts.init</code>
初始化。</p>
<blockquote>
<p>小贴士：在容器节点被销毁时，总是应调用 echartsInstance.dispose
以销毁实例释放资源，避免内存泄漏。</p>
</blockquote>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 在 Vue 中容器节点被销毁以及被重建时</span></span><br><span class="line"><span class="title function_">deactivated</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">statusChart</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">statusChart</span>.<span class="title function_">dispose</span>();</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">statusChart</span> = <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="references">References</h1>
<p><a href="https://echarts.apache.org/zh/index.html">Apache ECharts</a>
<a
href="https://echarts.apache.org/handbook/zh/concepts/chart-size/#%E6%8C%87%E5%AE%9A%E5%9B%BE%E8%A1%A8%E7%9A%84%E5%A4%A7%E5%B0%8F">监听图表容器的大小并改变图表大小</a>
<a
href="https://echarts.apache.org/handbook/zh/concepts/chart-size/#%E6%8C%87%E5%AE%9A%E5%9B%BE%E8%A1%A8%E7%9A%84%E5%A4%A7%E5%B0%8F">容器节点被销毁以及被重建时</a>
<a
href="https://blog.csdn.net/gaoxiaoba/article/details/119931075">Echarts
折线图超详细超细节配置</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>ECharts</tag>
      </tags>
  </entry>
  <entry>
    <title>艺术创意涂鸦期</title>
    <url>/2023/09/20/%E8%89%BA%E6%9C%AF%E5%88%9B%E6%84%8F%E6%B6%82%E9%B8%A6%E6%9C%9F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="l1-l4">L1-L4</h1>
<ul>
<li>观察方法与绘画表达</li>
<li>认知图形与形状探索</li>
<li>色彩认知与颜色运用</li>
<li>色彩的变化与感受</li>
</ul>
<h1 id="l5-l8">L5-L8</h1>
<ul>
<li>绘画方法与画面节奏</li>
<li>图形组合与形状表现</li>
<li>色彩进阶与色调认知</li>
<li>绘画中的秩序与规律</li>
</ul>
<h1 id="l9-l12">L9-L12</h1>
<ul>
<li>视觉感受与色彩搭配</li>
<li>形色创意与联想</li>
<li>质感与肌理表现</li>
<li>艺术风格与材料运用 <span id="more"></span></li>
</ul>
<h1 id="阶段描述">阶段描述</h1>
<p>这个阶段的孩子对于尽兴涂抹，玩味材料，有极高的兴趣，这些兴趣和能力是人类与生俱来的；他们对外界的事物逐步进行着探索和认知，画画成为他们表达的重要途径。通过本阶段的学习，孩子可以从基本的图形与色彩认知，逐步进阶到相对复杂的图形运用、色彩知识和基础技法；在绘画过程中尝试更多有趣新奇的绘画工具及材料，通过丰富有趣的创作题材，激发孩子天马行空的想象力与创作兴趣；在引导孩子观察与感受生活的同时，培养动手能力，体会绘画的乐趣，在绘画过程中提升自信心，并勇于表达自己的想法。</p>
<h1 id="收获与成长">收获与成长</h1>
<ul>
<li>认识常用颜色及基础图形，并运用到绘画中</li>
<li>通过混色了解简单的常用色调和方法</li>
<li>体验撕、贴、拍、团、揉、捏等操作技巧，锻炼动手能力，促进协调发展</li>
<li>认识点、线的大小、粗细、长短、曲直等并进行组合运用</li>
<li>了解故事元素，通过表现人物、场景等创作故事画面</li>
<li>感受多种材料的变化应用</li>
<li>了解常见的构图形式，提高审美素养</li>
<li>了解世界多地的人文，欣赏多种艺术风格</li>
</ul>
<h1 id="reference">Reference</h1>
<p><a href="https://www.xiaoxiongmeishu.com/">小熊美术</a></p>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>美育</tag>
      </tags>
  </entry>
  <entry>
    <title>英语启蒙秘籍</title>
    <url>/2023/09/20/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E7%A7%98%E7%B1%8D/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="绝对不可以踩的坑">绝对不可以踩的坑</h1>
<blockquote>
<p>1.学英语的关键，不是孩子记住多少种类的单词，而是首先要感兴趣。</p>
</blockquote>
<p>不在乎孩子的兴趣，就知道背单词，自然拼和音标，孩子会有两个结果，要么讨厌英语，要么聋哑英语。</p>
<blockquote>
<p>2.学英语的关键，不是你问孩子，苹果，香蕉用英语怎么说，他都能说出来，而是听到了
apple 了，立刻反应苹果的画面。</p>
</blockquote>
<ul>
<li>翻译性思维，导致孩子每次说英语，都要先想汉语，再翻译过来，反应迟钝，无法用英语沟通。
X</li>
<li>英语思维，图像直接对应单词，条件反射，用英语直接思考。 √</li>
</ul>
<blockquote>
<p>3.学英语的关键，不是宝妈焦虑为什么我的孩子还不说英语，而是宝妈耐得住寂寞。</p>
</blockquote>
<p>语言是有沉默期的，沉默期在 6 个月—12
个月，孩子都能听得懂，就是不说，是在正常的语言沉默期内，逼，只会延长这个时期，甚至孩子决定“闭嘴一辈子”。</p>
<span id="more"></span>
<blockquote>
<p>4.学英语的关键，不是孩子能说多少“斤”个单词和句子，而是孩子听了多少“吨”单词和句子。</p>
</blockquote>
<p>决定语言输出的关键是，大量的有效输入量，如果你每天给你的孩子只有 10
分钟，20 分钟的输入量，启蒙 10 年也不会有结果的。</p>
<blockquote>
<p>5.学英语关键，不是孩子会唱多少首英文歌，而是他理解了多少内容，用了多少内容在自己的小生活中。</p>
</blockquote>
<p>儿歌的唯一功能就是提高韵律感，很多家长把儿歌的效果妖魔化了，不可理解的背景儿歌输入，孩子学不到词汇，培养不出语感，更带不来辨音能力。</p>
<blockquote>
<p>6.学英语的关键，不是宝妈囤了多少绘本，而是孩子能用出多少。</p>
</blockquote>
<p>绘本的用词随意性太强，常用低频词，时态复杂，句子不够规整，孩子无法内化，最终融入生活。</p>
<blockquote>
<p>7.学英语的关键，不是听了多少难的单词和句子，而是理解的多少简单的单词和句子。</p>
</blockquote>
<p>原理：语言学习，要遵循 i+1 理论，（i 就是孩子的基础，1
就是比孩子的基础高一点点），不可理解的内容就是噪音，无用，听着还烦躁。</p>
<blockquote>
<p>8.我孩子现在连话还说不明白了，等能说话了，在启蒙吧。</p>
</blockquote>
<p>原理：语言沉默期（没说话之前）输入，爆发期就可以直接输出汉语和英语了，和汉语的学习原理一样。等孩子语言爆发期再开始启蒙英语，就会出现启蒙的阻力，孩子的自主意识强了，就会产生对另一种语言的抗拒。</p>
<h1 id="英语启蒙的底层逻辑">英语启蒙的底层逻辑</h1>
<p>所以语言的学习，一开始就是听说，然后才是读写。一开始是生活中自然地习得，无意识的输入。后面的有意识的学的，刻意的学习读、写和语法。</p>
<ul>
<li>听说，就是无意识学习，自然而然的在生活中融入。</li>
<li>读写就是，有意识地学习，学汉语拼音，学写字，学语法，做题。</li>
</ul>
<blockquote>
<p>0-6 岁的小龄孩子，100%的无意识学习，就能掌握这门语言。</p>
</blockquote>
<blockquote>
<p>6-8
岁的中龄孩子，80%的无意识学习+20%的有意识学习，才能彻底掌握这门外语。</p>
</blockquote>
<blockquote>
<p>8
岁以上的大龄孩子，50%的无意识学习+50%的有意识学习，才能把这门外语学的理想。</p>
</blockquote>
<h1 id="动画片怎么用">动画片怎么用</h1>
<blockquote>
<p>推荐动画 《big muzzy》</p>
</blockquote>
<blockquote>
<p>看动画片计划</p>
</blockquote>
<p>动画执行计划</p>
<blockquote>
<p>计划 1：一天看一集（11-15 分钟），一集重看三天，5 周看完 12 集。</p>
</blockquote>
<p>计划 1 适合没有自主意识的 2
岁之前的孩子，（考虑到孩子视力问题，每次只看 10-15 分钟，是 1 集）。
原理：低龄孩子的学习方式就是重复，孩子喜欢这种精看的方式，语言本身，精看，可以锻炼耳朵的辩音能力，一举两得。</p>
<blockquote>
<p>计划 2：每天看一集新内容，2 周看完，重复 5 周。</p>
</blockquote>
<p>计划 2 适合有一定的自主意识的 3 岁之后的孩子，不愿意重复，但是 2
周过后，重新再来一遍，对之前的内容淡忘又稍许有点印象，孩子对熟悉的东西，就更加愿意看了，还是一举两得。</p>
<blockquote>
<p>裸听计划</p>
</blockquote>
<ul>
<li>早上起床：播放相对应的当天的那集动画片音频进行裸听，一遍（1
集，10-15 分钟）；</li>
<li>晚上睡觉：播放相对应的当天的那集动画片音频进行裸听，一遍（1
集，10-15 分钟）；</li>
<li>午觉之后：观看当天的那集动画片，以及相对应音频裸听，一遍（1
集，10-15 分钟）。</li>
<li>同步动画片执行计划。 每天的数量保证在 MP3:15m（早）+ 15m（中）+
15m（晚）+ MP4:15m = 1h</li>
</ul>
<h1 id="英语分级怎么用">英语分级怎么用</h1>
<p>把 RAZ
当成是主干读物，给孩子打下基础，但是因为趣味性稍差，辅助海尼曼作为补充。</p>
<p>按照我说的 big muzzy 动画片的执行，我们的孩子可以积累至少 500
个听力词汇量，在这个基础上。 RAZ 入手 B 级别，海尼曼入手的
G1，牛津树入手的 3—5（不用一下子买齐，看完了再买）</p>
<blockquote>
<p>分级阅读每日计划</p>
</blockquote>
<blockquote>
<p>A 计划：</p>
</blockquote>
<p>拿出 6 本作为本周的亲子共读内容（每晚 3 到 6 本，这一周反复读这 6
本），其他的要收拾起来（否则，读到最后，所有的书籍掺杂在一起，你也不知道哪本读了几遍，心里无序了，也不会执行好）。</p>
<p>A 计划适合没有自主意识的 2
岁之前的孩子。原理：低龄孩子的学习方式就是重复，孩子喜欢这种精看的方式，语言本身，精看，可以锻炼耳朵的辩音能力，一举两得。</p>
<blockquote>
<p>B 计划：</p>
</blockquote>
<p>每天看两本新内容，一周（6 天）看 12 本，第二周把第一周第一天看的 2
本作为第二周第一天的开始。</p>
<p>B 计划适合有一定的自主意识的 3 岁之后的孩子，不愿意重复。但是 1
周过后，重新再来一遍，对之前的内容淡忘又稍许有点印象，孩子对熟悉的东西，就更加愿意看了，还是一举两得。</p>
<h1 id="references">References</h1>
<p>《伊森妈妈英语启蒙秘籍》</p>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>英语启蒙</tag>
      </tags>
  </entry>
  <entry>
    <title>英语水平能力测试</title>
    <url>/2023/09/22/%E8%8B%B1%E8%AF%AD%E6%B0%B4%E5%B9%B3%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="测试结果">测试结果</h1>
<p>欧洲共同语言参考标准（The Common European Framework of Reference for
Languages，简称
CEFR）是被国际认可的描述语言能力和水平的标准。在欧洲，CEFR
被广泛接受，并且越来越多的运用到欧洲以外的世界范围内。</p>
<p>EF SET 英语测试是现在世界上唯一一套针对所有 CEFR 英语水平等级（从 A1
到 C2 六个级别）设计的试题，可以精确判断出测试者的英文能力属于哪个 CEFR
级别。托福和雅思一般只能判断 B2 及以上，而不是所有的英语程度。</p>
<p>下面是今天的 15 分钟快测结果，记录一下后续用来对比：</p>
<img src="/2023/09/22/%E8%8B%B1%E8%AF%AD%E6%B0%B4%E5%B9%B3%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%95/1.png" class="">
<p>可以进一步提高的方法：</p>
<img src="/2023/09/22/%E8%8B%B1%E8%AF%AD%E6%B0%B4%E5%B9%B3%E8%83%BD%E5%8A%9B%E6%B5%8B%E8%AF%95/2.png" class="">
<span id="more"></span>
<h1 id="references">References</h1>
<p><a href="https://www.efset.org/zh/cefr/">CEFR 及 EF SET</a>
书：《英语自学手册（郝海龙）》</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>英语</tag>
        <tag>能力测试</tag>
      </tags>
  </entry>
  <entry>
    <title>Git commit message 格式</title>
    <url>/2023/09/22/Git-commit-message-%E6%A0%BC%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="提交规范">提交规范</h1>
<p>格式: <code>type (scope): subject</code></p>
<span id="more"></span>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">- type</span><br><span class="line">  - 用于说明 <span class="string">`commit`</span> 的类别，只允许使用下面<span class="number">10</span>个标识。</span><br><span class="line">    - feat：新功能（feature）</span><br><span class="line">    - fix：修补bug</span><br><span class="line">    - docs：文档（documentation）</span><br><span class="line">    - style： 格式（不影响代码运行的变动）</span><br><span class="line">    - refactor：重构（即不是新增功能，也不是修改bug的代码变动）</span><br><span class="line">    - perf：性能优化</span><br><span class="line">    - test：增加测试</span><br><span class="line">    - chore：构建过程或辅助工具的变动</span><br><span class="line">    - revert：回退</span><br><span class="line">    - build：打包</span><br><span class="line">- <span class="title function_">scope</span>(可选)</span><br><span class="line">  - 用于说明 <span class="string">`commit`</span> 影响的范围，比如<span class="title class_">Button</span>组件、store、首页、路由等等，视项目不同而不同。</span><br><span class="line">- <span class="title function_">subject</span>(可选))</span><br><span class="line">  - 是 <span class="string">`commit`</span> 目的的简短描述，不超过<span class="number">50</span>个字符。</span><br><span class="line">    - 以动词开头，使用第一人称现在时，比如change，而不是changed或changes</span><br><span class="line">    - 第一个字母小写</span><br><span class="line">    - 结尾不加句号（.）</span><br></pre></td></tr></table></figure>
<h1 id="reference">Reference</h1>
<p><a href="https://jdf2e.github.io/jdc_fe_guide/docs/git/commit">JDC
前端代码规范</a> <a
href="https://www.conventionalcommits.org/zh-hans/v1.0.0/#%e7%ba%a6%e5%ae%9a%e5%bc%8f%e6%8f%90%e4%ba%a4%e8%a7%84%e8%8c%83">约定式提交</a>
<a
href="https://juejin.cn/post/7114673069293043719">自动生成变更日志及规范
git 提交记录(release-it+husky+ commitizen+ commitlint)</a> <a
href="https://semver.org/lang/zh-CN/">语义化版本 2.0.0</a>
1697080977000</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>commit</tag>
        <tag>格式</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue 给对象添加新属性时视图不更新</title>
    <url>/2023/09/21/Vue-%E7%BB%99%E5%AF%B9%E8%B1%A1%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%B1%9E%E6%80%A7%E6%97%B6%E8%A7%86%E5%9B%BE%E4%B8%8D%E6%9B%B4%E6%96%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="vue2.x-的响应式">vue2.x 的响应式</h1>
<ul>
<li><p>实现原理：</p>
<ul>
<li><p>对象类型：通过 <code>Object.defineProperty()</code>
对属性的读取、修改进行拦截（数据劫持）。</p></li>
<li><p>数组类型：通过重写更新数组的一系列方法来实现拦截。（对数组的变更方法进行了包裹）。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(data, <span class="string">&quot;count&quot;</span>, &#123;</span><br><span class="line">  <span class="title function_">get</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">  <span class="title function_">set</span>(<span class="params"></span>) &#123;&#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
</ul></li>
<li><p>存在问题：</p>
<ul>
<li>新增属性、删除属性, 界面不会更新。</li>
<li>直接通过下标修改数组, 界面不会自动更新。</li>
</ul></li>
</ul>
<h1 id="vue3.0-的响应式">Vue3.0 的响应式</h1>
<ul>
<li><p>实现原理:</p>
<ul>
<li><p>通过 Proxy（代理）: 拦截对象中任意属性的变化,
包括：属性值的读写、属性的添加、属性的删除等。</p></li>
<li><p>通过 Reflect（反射）: 对源对象的属性进行操作。</p></li>
<li><p>MDN 文档中描述的 Proxy 与 Reflect：</p>
<ul>
<li><p>Proxy：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy</p></li>
<li><p>Reflect：https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Proxy</span>(data, &#123;</span><br><span class="line">  <span class="comment">// 拦截读取属性值</span></span><br><span class="line">  <span class="title function_">get</span>(<span class="params">target, prop</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">get</span>(target, prop);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 拦截设置属性值或添加新属性</span></span><br><span class="line">  <span class="title function_">set</span>(<span class="params">target, prop, value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">set</span>(target, prop, value);</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 拦截删除属性</span></span><br><span class="line">  <span class="title function_">deleteProperty</span>(<span class="params">target, prop</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Reflect</span>.<span class="title function_">deleteProperty</span>(target, prop);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">proxy.<span class="property">name</span> = <span class="string">&quot;tom&quot;</span>;</span><br></pre></td></tr></table></figure></li>
</ul></li>
</ul></li>
</ul>
<h1 id="解决办法">解决办法</h1>
<p>在 Vue 2 中，当你向一个对象添加新属性时，Vue
不会自动触发视图的更新，因为 Vue
只会追踪已经存在于数据对象中的属性。如果你需要在视图中响应新属性的变化，你可以使用
Vue 的 <code>$set</code> 方法或 JavaScript 的 <code>Object.assign</code>
来更新对象，从而触发视图的刷新。</p>
<span id="more"></span>
<ol type="1">
<li><p><strong>使用 Vue 的 <code>$set</code> 方法</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 假设你有一个名为 object 的数据对象</span></span><br><span class="line"><span class="variable language_">this</span>.$set(object, <span class="string">&quot;newProperty&quot;</span>, <span class="string">&quot;new value&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>上面的代码将在 <code>object</code> 对象上添加一个新属性
<code>newProperty</code>，并设置其值为
<code>'new value'</code>，同时会触发视图的更新。</p></li>
<li><p><strong>使用 JavaScript 的
<code>Object.assign</code></strong>：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 假设你有一个名为 object 的数据对象</span></span><br><span class="line">object = <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, object, &#123; <span class="attr">newProperty</span>: <span class="string">&quot;new value&quot;</span> &#125;);</span><br></pre></td></tr></table></figure>
<p>这将创建一个新对象，包含 <code>object</code> 中的所有属性以及新属性
<code>newProperty</code>，然后将新对象分配给
<code>object</code>，这也会触发视图的更新。</p></li>
<li><p><code>$forceUpdate</code></p>
<p>请注意，<code>$forceUpdate</code> 应该谨慎使用，因为它会绕过 Vue
的响应式系统，可能会导致性能问题和难以维护的代码。在大多数情况下，应该遵循
Vue 的响应式数据规则，让 Vue 自动处理视图的更新。</p></li>
</ol>
<p>无论哪种方法，都可以让 Vue
检测到对象属性的变化并更新视图。确保在操作对象属性之前，你需要确保 Vue
已经响应式地跟踪了该对象，或者使用上述方法来添加新属性。</p>
<h1 id="reference">Reference</h1>
<p><a
href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty">Object.defineProperty()</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>对象</tag>
        <tag>Vue 2</tag>
        <tag>响应式</tag>
      </tags>
  </entry>
  <entry>
    <title>英语阅读之辅助精读法</title>
    <url>/2023/09/26/%E8%8B%B1%E8%AF%AD%E9%98%85%E8%AF%BB%E4%B9%8B%E8%BE%85%E5%8A%A9%E7%B2%BE%E8%AF%BB%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>从第一篇训练文章开始，要让每一篇英文文章读起来就像读汉语一样。通常来说，至少要把一篇文章读七遍。</p>
<h1 id="第一遍">第一遍</h1>
<ul>
<li>把握文章大意</li>
<li>标记所有生词</li>
</ul>
<p>阅读中尽可能推测单词意思，不查词典。</p>
<p>第一遍读完之后，一次性查出所有生词，并用纸记录下来，只记中文释义，只记当前语境下的意思，而且胡乱的写在纸上。</p>
<h1 id="第二遍">第二遍</h1>
<ul>
<li>修正生词释义</li>
<li>假如忘记生词</li>
</ul>
<p>努力回想，如果实在想不起来就去刚才那张纸上去找。</p>
<span id="more"></span>
<h1 id="第三遍">第三遍</h1>
<p>第三遍和第二遍一致，如果有单词还是没记住，就去刚才那张纸上寻找。</p>
<h1 id="第四遍">第四遍</h1>
<p>对读不懂的句子做句法分析。</p>
<h1 id="第五遍">第五遍</h1>
<p>通过查阅语法书，彻底弄清楚面前的语法现象，并把这种语法现象和相应的句子记录下来。</p>
<h1 id="第六遍">第六遍</h1>
<p>从头到尾再读一遍，这一边可能还会有点磕磕绊绊。</p>
<h1 id="第七遍">第七遍</h1>
<p>最后再读一遍，这一遍会比上面更加顺利。</p>
<h1 id="第七遍读完后">第七遍读完后</h1>
<p>将生单词全部记录在生词本上（背单词软件），纳入到自己背单词的任务中。
将第五遍查阅到的语法现象也记录到记忆软件中，在背词时，一并复习。</p>
<h1 id="tips">TIPS</h1>
<ul>
<li>七遍请尽量整块时间一次性完成，最好每天练习一篇。</li>
<li>每练 25 篇文章，你会觉得阅读能力有明显的提升。</li>
<li>训练时忽略阅读速度。</li>
<li>如果今天学会的生词和语法现象你又忘了，没关系，继续在学一遍就好了。</li>
</ul>
<h1 id="reference">Reference</h1>
<p>书：《英语自学手册（郝海龙）》</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>英文</tag>
        <tag>精读</tag>
      </tags>
  </entry>
  <entry>
    <title>2695. 包装数组</title>
    <url>/2023/09/04/2695-%E5%8C%85%E8%A3%85%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.<a
href="https://leetcode.cn/problems/array-wrapper/description/">题目描述</a></p>
<span id="more"></span>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">ArrayWrapper</span> = <span class="keyword">function</span> (<span class="params">nums</span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">nums</span> = nums;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 重写valueOf方法，使对象可以通过+运算符相加</span></span><br><span class="line"><span class="title class_">ArrayWrapper</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">valueOf</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">nums</span>.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">nums</span>.<span class="title function_">reduce</span>(<span class="function">(<span class="params">sum, num</span>) =&gt;</span> sum + num, <span class="number">0</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 重写 toString 方法，使对象在使用 String() 函数时返回逗号分隔的字符串</span></span><br><span class="line"><span class="title class_">ArrayWrapper</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">toString</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`[<span class="subst">$&#123;<span class="variable language_">this</span>.nums.join(<span class="string">&quot;,&quot;</span>)&#125;</span>]`</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 示例用法</span></span><br><span class="line"><span class="keyword">const</span> obj1 = <span class="keyword">new</span> <span class="title class_">ArrayWrapper</span>([<span class="number">1</span>, <span class="number">2</span>]);</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="keyword">new</span> <span class="title class_">ArrayWrapper</span>([<span class="number">3</span>, <span class="number">4</span>]);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj1 + obj2); <span class="comment">// 输出：10</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">String</span>(obj1)); <span class="comment">// 输出：&quot;[1,2]&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj3 = <span class="keyword">new</span> <span class="title class_">ArrayWrapper</span>([<span class="number">23</span>, <span class="number">98</span>, <span class="number">42</span>, <span class="number">70</span>]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">String</span>(obj3)); <span class="comment">// 输出：&quot;[23,98,42,70]&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj4 = <span class="keyword">new</span> <span class="title class_">ArrayWrapper</span>([]);</span><br><span class="line"><span class="keyword">const</span> obj5 = <span class="keyword">new</span> <span class="title class_">ArrayWrapper</span>([]);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(obj4 + obj5); <span class="comment">// 输出：0</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>算法</tag>
      </tags>
  </entry>
  <entry>
    <title>学前语文怎么学</title>
    <url>/2023/09/27/%E5%AD%A6%E5%89%8D%E8%AF%AD%E6%96%87%E6%80%8E%E4%B9%88%E5%AD%A6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="学前语文怎么学">学前语文怎么学</h1>
<ul>
<li>不要太早学识字、拼音和背古诗</li>
<li>2-5 岁属于读图期
<ul>
<li>此阶段重点培养孩子的读图能力</li>
</ul></li>
<li>真正拉开差距的是语文理解力和表达力
<ul>
<li>越往上，两级分化越明显</li>
</ul></li>
<li>阅读不是与生俱来的能力
<ul>
<li>必须不断地学习与练习，才能掌握此项技能</li>
<li>阅读量 != 阅读能力</li>
<li>提问很重要</li>
</ul></li>
</ul>
<span id="more"></span>
<h1 id="提问的重要性">提问的重要性</h1>
<p>提问可以让每个人的大脑处于一个检测和检索、归纳信息的状态，有效的提问就意味着有效的思考。</p>
<p>学会提问，和孩子进行有意义的讨论，这是最好的提升孩子思维能力的方法。</p>
<p>思考，不是为了追求答案，讨论过程本身就足够有意义。</p>
<p>孩子要在听懂故事大致内容的基础上，提取信息，并恰当地组织语言来回答你的问题，对幼儿来说，这不是一件容易的事情。</p>
<p>思维训练就是在这样一次又一次的互动中进行的，孩子的阅读理解力和表达力也是在这样一次又一次的被提问中提升的。</p>
<h1 id="在真实的生活中进行启蒙">在真实的生活中进行启蒙</h1>
<p>启蒙应当在生活中进行。其实不仅是语文启蒙，任何启蒙都应在生活中进行，在生活中开展的启蒙才是行之有效且效能持久的。</p>
<p>春天，带孩子去郊外踏青，带他感受花红柳绿、草长莺飞，去看一看早春的杨柳，一起吟诵“不知细叶谁裁出，二月春风似剪刀”；</p>
<p>夏天，带孩子去荷花池欣赏满池荷叶，在实境体验中感受什么叫“莲叶何田田”“小荷才露尖尖角，早有蜻蜓立上头”；</p>
<p>秋天到了，带孩子去采摘，教他“种瓜得瓜，种豆得豆”的道理，感受收获时节五谷丰登、果实累累的喜悦；</p>
<p>冬天来了，雪花纷飞，告诉孩子什么叫“瑞雪兆丰年”，雪中赏梅时还可以吟诵“墙角数枝梅，凌寒独自开”，感受梅花不惧严寒、傲然开放的精神。</p>
<p>只有亲眼所见、亲耳所闻，浸润其间，才会让这些优秀的古诗词在孩子的心里种下一颗小小的美好的种子，继而生根发芽。</p>
<h1 id="注重通识教育">注重通识教育</h1>
<p>通识教育最终的目的是培养出完全、完整的人。</p>
<p>自然人文、古今之事，皆可涉猎。</p>
<p>这是一种人文教育，它超越了功利性与实用性。全学科陪玩，就是一种最好的渗透方式。</p>
<p>幼儿的心理发展具有很强的滞后性，这些付出和渗透，都不是立竿见影的。</p>
<p>所有那些现在看似“无用”的，将来对孩子的人生必会产生大作用。</p>
<p>哪怕我们现在渗透的内容他一知半解，但那些不明白的地方自然会随着他年纪的增长、阅历的增多而慢慢融会贯通。</p>
<h1 id="reference">Reference</h1>
<p>群文件《大语文时代》</p>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>大语文</tag>
      </tags>
  </entry>
  <entry>
    <title>辅助精读法之 100 篇打卡计划</title>
    <url>/2023/09/26/%E8%BE%85%E5%8A%A9%E7%B2%BE%E5%BA%A6%E6%B3%95%E4%B9%8B-100-%E7%AF%87%E6%89%93%E5%8D%A1%E8%AE%A1%E5%88%92/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="英语阅读打卡">英语阅读打卡</h1>
<p>20230926 开始，每工作日精读一篇，精读方法参见<a
href="https://toypipi.github.io/2023/09/26/%E8%8B%B1%E8%AF%AD%E9%98%85%E8%AF%BB%E4%B9%8B%E8%BE%85%E5%8A%A9%E7%B2%BE%E8%AF%BB%E6%B3%95/">英语阅读之辅助精读法</a>，精读内容来自<a
href="https://web.shanbay.com/reading/web-news/articles">扇贝阅读</a>，难度暂定：中高阶（六级/考研）。</p>
<p>使用扇贝阅读的好处：</p>
<ul>
<li>网页端阅读体验更好</li>
<li>生词可以直接在线查词，并点击添加到生词本</li>
</ul>
<p>语法现象使用 anki 记录。</p>
<p>开始吧！！！</p>
<hr />
<h1 id="第一次打卡总结">第一次打卡总结</h1>
<p>文章还是比较有难度的，生词也比较多，光阅读和查词就花费差不多一个小时时间，才读了两遍
::&gt;_&lt;::</p>
<p>后面改成两天读一篇：</p>
<ul>
<li>第一天读三遍
<ul>
<li>第一遍通读，掌握文章大意</li>
<li>第二遍精读，查询所有生词，添加到生词本</li>
<li>第三遍精读，查漏补缺生词</li>
</ul></li>
<li>第二天读三遍
<ul>
<li>第一遍精读，使用 chatGPT 查询所有不懂的长难句</li>
<li>第二遍精读，查漏补缺不懂的语法现象</li>
<li>第三遍精读</li>
</ul></li>
</ul>
<hr />
<span id="more"></span>
<h1 id="打卡记录">打卡记录</h1>
<ul class="task-list">
<li><label><input type="checkbox" checked="" />1.20200926 <a
href="https://fe.ecool.fun/topic-answer/a88670ef-a898-4676-a272-cabf8bdfade7?orderBy=updateTime&amp;order=desc&amp;tagId=14">Your
Circle of Competence: Stick Within It or Step Outside of
It</a></label></li>
</ul>
<h1 id="复盘">2024.5.16 复盘</h1>
<p>现在没有按照上面的精读方法阅读了，改为阅读分级材料，目前在读 [Magic
Tree House]，分级读物查询可以下载 APP 英语帮。</p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>英文阅读</tag>
      </tags>
  </entry>
  <entry>
    <title>完整的 DevOps 流程解决方案</title>
    <url>/2023/09/27/%E5%AE%8C%E6%95%B4%E7%9A%84-DevOps-%E6%B5%81%E7%A8%8B%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="完整的-devops-流程解决方案流程">完整的 DevOps
流程解决方案流程</h1>
<img src="/2023/09/27/%E5%AE%8C%E6%95%B4%E7%9A%84-DevOps-%E6%B5%81%E7%A8%8B%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/1.png" class="">
<span id="more"></span>
<h1 id="网页请求关键链路">网页请求关键链路</h1>
<img src="/2023/09/27/%E5%AE%8C%E6%95%B4%E7%9A%84-DevOps-%E6%B5%81%E7%A8%8B%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/2.png" class="">
<h1 id="vue-组件库建设实践">Vue 组件库建设实践</h1>
<ul>
<li>[]《程序员修炼之道》</li>
<li>DRY 原则：Don’t repeat yourself</li>
<li>Rule of three 《重构》改善已有代码段额设计
<ul>
<li>Rule of three
称为”三次原则”，指的是当某个功能第三次出现时，才进行”抽象化”。
这是软件开发大家 Martin Fowler 在《Refactoring》一书中提出的。
它的涵义是，第一次用到某个功能时，你写一个特定的解决方法；第二次又用到的时候，你拷贝上一次的代码；第三次出现的时候，你才着手”抽象化”，写出通用的解决方法。</li>
</ul></li>
<li>CRP 共同复用原则（The Common Reuse Principle）
<ul>
<li>共同复用原则（CRP）是指，如果某个功能被多个项目使用，那么应该把它抽象成公共组件，而不是在每个项目中都写一遍。</li>
</ul></li>
<li>SRP 单一职责原则（The Single Responsibility Principle）
<ul>
<li>单一职责原则（SRP）是指，每个组件只负责一个功能领域中的相应职责。</li>
</ul></li>
<li>CCP 公用封闭原则（The Common Closed Principle）
<ul>
<li>公用封闭原则（CCP）是指，如果某个功能被多个项目使用，那么这个功能应该保持稳定，不要随意修改。</li>
<li>一个组件不应该包含多个引起它变化的原因</li>
</ul></li>
<li>代码的可维护性大于复用性</li>
<li>SDP 稳定依赖原则（The Stable Dependency Principle）
<ul>
<li>稳定依赖原则（SDP）是指，如果某个功能被多个项目使用，那么这个功能应该保持稳定，不要随意修改。</li>
</ul></li>
<li>SAP 稳定抽象原则（The Stable Abstractions Principle）
<ul>
<li>一个稳定的组件应该时抽象的</li>
</ul></li>
<li>[]《DevOps 实践指南》</li>
</ul>
<h1 id="reference">Reference</h1>
<p>《大厂前端案例》PPT</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>DevOps</tag>
      </tags>
  </entry>
  <entry>
    <title>Chrome 浏览器修改定位</title>
    <url>/2023/09/28/Chrome-%E6%B5%8F%E8%A7%88%E5%99%A8%E4%BF%AE%E6%94%B9%E5%AE%9A%E4%BD%8D/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="插件">插件</h1>
<p>Chrome 应用商店安装 <a
href="https://chrome.google.com/webstore/detail/location-guard/cfohepagpmnodfdmjliccbbigdkfcgia?hl=zh-CN">Location
Guard</a></p>
<h1 id="chrome-开发者工具">Chrome 开发者工具</h1>
<p>F12 打开开发者工具 -&gt; 点击右上角竖排 三个点 -&gt; More tools
-&gt;Sensors -&gt; Location -&gt; 选择地址或输入定位</p>
<span id="more"></span>
<h1 id="reference">Reference</h1>
<p><a
href="https://tw.imyfone.com/change-location/chrome-location-spoofer/#3.3">最佳
Chrome 更改定位工具，一鍵將谷歌定位修改！</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Chrome</tag>
        <tag>Location</tag>
      </tags>
  </entry>
  <entry>
    <title>学会倾听</title>
    <url>/2023/10/07/%E5%AD%A6%E4%BC%9A%E5%80%BE%E5%90%AC/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="倾听的绊脚石">倾听的绊脚石</h1>
<ul>
<li>先入为主、急于表达、擅下结论</li>
<li>给解决方案、急于解决问题</li>
<li>一味的安慰、劝解，希望对方快点好起来</li>
<li>说教、急于让对方从中吸取教训、学习</li>
</ul>
<h1 id="倾听的状态">倾听的状态</h1>
<ul>
<li>我愿意去了解你的感受的心情</li>
<li>我接纳你的情绪和状态</li>
<li>我尊重你分享的意愿</li>
<li>如果你想说，我听，如果你不想说，我在</li>
</ul>
<span id="more"></span>
<h1 id="倾听的方法">倾听的方法</h1>
<p>根据实际情况、组合使用：</p>
<ul>
<li>被动式倾听：不评判、不抢白、不说话、听</li>
<li>反射式倾听：重复对方的信息，让对方知道我在听</li>
<li>门把手式倾听：一句真诚的邀请，请对方分享</li>
<li>好奇式提问：提出一些问题，请对方分享</li>
<li>积极倾听：将自己对对方的理解表达出来、反馈给对方，让他知道，我理解你</li>
</ul>
<h1 id="reference">Reference</h1>
<p>《徐桂凤亲子养育年课》</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>倾听</tag>
      </tags>
  </entry>
  <entry>
    <title>一些比较好的编程方式总结</title>
    <url>/2023/09/28/%E4%B8%80%E4%BA%9B%E6%AF%94%E8%BE%83%E5%A5%BD%E7%9A%84%E7%BC%96%E7%A8%8B%E6%96%B9%E5%BC%8F%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="属性检查">属性检查</h1>
<p>以下是 vue
中定义的一个获取表格数据的函数，注意获取表格数据时，需要判断表格数据是否存在，如果不存在，则使用空数组。</p>
<p>可选链运算符（?.）允许读取位于连接对象链深处的属性的值，而不必明确验证链中的每个引用是否有效。?.
运算符的功能类似于 . 链式运算符，不同之处在于，在引用为空 (nullish )
(null 或者 undefined) 的情况下不会引起错误，该表达式短路返回值是
undefined。与函数调用一起使用时，如果给定的函数不存在，则返回
undefined。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title function_">getTableData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">tableData</span> = [];</span><br><span class="line">  <span class="keyword">const</span> params = &#123;</span><br><span class="line">    <span class="attr">page</span>: <span class="variable language_">this</span>.<span class="property">currentPage</span>,</span><br><span class="line">    <span class="attr">size</span>: <span class="variable language_">this</span>.<span class="property">currentPageSize</span></span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">getCondition</span>(<span class="title function_">getToken</span>(<span class="string">&quot;productId&quot;</span>), params).<span class="title function_">then</span>(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 从响应中提取数据，如果数据不存在，则使用空数组</span></span><br><span class="line">    <span class="comment">// 可选链运算符使表达式更短，更简明</span></span><br><span class="line">    <span class="keyword">const</span> data = res.<span class="property">data</span>?.<span class="property">data</span>?.<span class="property">list</span> || [];</span><br><span class="line">    <span class="comment">// 遍历数据并构造表格行对象</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> data) &#123;</span><br><span class="line">      <span class="keyword">const</span> temp = &#123;</span><br><span class="line">        <span class="attr">id</span>: item.<span class="property">id</span>,</span><br><span class="line">        <span class="attr">name</span>: item.<span class="property">name</span>,</span><br><span class="line">        <span class="attr">remark</span>: item.<span class="property">remark</span>,</span><br><span class="line">        <span class="attr">time</span>: <span class="title function_">tampToTime</span>(item.<span class="property">createDate</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">tableData</span>.<span class="title function_">push</span>(temp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">total</span> = <span class="variable language_">this</span>.<span class="property">tableData</span>.<span class="property">length</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<span id="more"></span>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>编程习惯</tag>
      </tags>
  </entry>
  <entry>
    <title>社交技巧小 tips</title>
    <url>/2023/10/07/%E7%A4%BE%E4%BA%A4%E6%8A%80%E5%B7%A7%E5%B0%8F-tips/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="破冰技巧">破冰技巧</h1>
<ul>
<li>直接询问”我可以加入吗？“</li>
<li>观察他人的游戏、并找机会融入</li>
<li>分享自己的玩具或者兴趣爱好、开启交流</li>
<li>和大人或者熟悉的小伙伴开启一个游戏、吸引其他人或小伙伴加入</li>
</ul>
<h1 id="维持良好关系技巧">维持良好关系技巧</h1>
<ul>
<li>互相分享、包括分享玩具、食物和自已的经历、心情;不强迫、但可以让孩子理解、当我们互相分享的
时候友谊会流动起来</li>
<li>看到其他人的优点、真诚的赞美</li>
<li>尊重其他人的感受和身体边界</li>
<li>邀请相约、可以相约做客、在小区玩、去露营等</li>
</ul>
<span id="more"></span>
<h1 id="冲突解决技巧">冲突解决技巧</h1>
<ul>
<li>预防、在游戏前可以先约定游戏规则</li>
<li>停下来的魔法，约定一个魔法词、当发生冲突的时候可以喊这个词代表要停下来</li>
<li>脱离场景、大家都很激动的时候钱先脱离场景</li>
<li>事后复盘、如有需要、真诚的道歉</li>
</ul>
<h1 id="reference">Reference</h1>
<p>《徐桂凤亲子养育年课》</p>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>社交</tag>
      </tags>
  </entry>
  <entry>
    <title>建立冷静角</title>
    <url>/2023/10/07/%E5%BB%BA%E7%AB%8B%E5%86%B7%E9%9D%99%E8%A7%92/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="给冷静角起一个自己喜欢的名字">给冷静角起一个自己喜欢的名字</h1>
<h1 id="目的">目的</h1>
<p>当自己感到难受的时候，待在那里会感到安心，舒服，会慢慢好起来。</p>
<h1 id="注意">注意</h1>
<p>去冷静角待一会，不是面壁思过，不是惩罚。</p>
<h1 id="可以放">可以放</h1>
<p>书籍、解压球、解压玩偶、小枕头、纸笔颜料、视觉提醒海报、能让自己放松的物件</p>
<h1 id="不要放">不要放</h1>
<p>很多玩具、游戏机、会让人情绪高涨的物件、会让人觉得讨厌的物件</p>
<span id="more"></span>
<h1 id="不要忘记">不要忘记</h1>
<p>去看看自己或者孩子背后的需求是什么，忽略了需求，冷静角可能反而会强化一些行为的出现，例如不想做作业就发脾气，这样就可以去冷静角待着而不用做作业了，如果不去正视做作业过程中的问题，可能这个问题就会逐步加深。</p>
<h1 id="reference">Reference</h1>
<p>《徐桂凤亲子养育年课》</p>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>冷静角</tag>
      </tags>
  </entry>
  <entry>
    <title>返回给定字符串中元音的数量</title>
    <url>/2023/10/08/%E8%BF%94%E5%9B%9E%E7%BB%99%E5%AE%9A%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E5%85%83%E9%9F%B3%E7%9A%84%E6%95%B0%E9%87%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="description">DESCRIPTION</h1>
<p>Return the number (count) of vowels in the given string.</p>
<p>We will consider a, e, i, o, u as vowels for this Kata (but not
y).</p>
<p>The input string will only consist of lower case letters and/or
spaces.</p>
<h1 id="solution">SOLUTION</h1>
<ul>
<li>方法一：数组的 <code>includes()</code> 方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getCount</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">let</span> strArray = str.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  strArray.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> ([<span class="string">&quot;a&quot;</span>, <span class="string">&quot;e&quot;</span>, <span class="string">&quot;i&quot;</span>, <span class="string">&quot;o&quot;</span>, <span class="string">&quot;u&quot;</span>].<span class="title function_">includes</span>(item)) &#123;</span><br><span class="line">      count++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ul>
<li>方法二：利用正则表达式</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getCount</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (str.<span class="title function_">match</span>(<span class="regexp">/[aeiou]/gi</span>) || []).<span class="property">length</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>方法三：<code>filter()</code> 方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">getCount</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>).<span class="title function_">filter</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> <span class="string">&quot;aeiouAEIOU&quot;</span>.<span class="title function_">includes</span>(c)).<span class="property">length</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.codewars.com/kata/54ff3102c1bad923760001f3/javascript">Vowel
Count</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>每日一练</tag>
        <tag>字符串查找</tag>
      </tags>
  </entry>
  <entry>
    <title>Element tabs 切换组件钩子函数未调用</title>
    <url>/2023/10/09/Element-tabs-%E5%88%87%E6%8D%A2%E7%BB%84%E4%BB%B6%E9%92%A9%E5%AD%90%E5%87%BD%E6%95%B0%E6%9C%AA%E8%B0%83%E7%94%A8/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>分析原因应该是点击切换标签页时，组件没有销毁。 解决办法：给组件添加
<code>v-if</code> 判断，使组件真正的创建和销毁。然后就在组件中定义的
<code>mounted</code> 和 <code>destoryed</code>
钩子函数就可以被正常调用了。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;app-container&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-tabs</span> <span class="attr">v-model</span>=<span class="string">&quot;activeName&quot;</span> @<span class="attr">tab-click</span>=<span class="string">&quot;handleClick&quot;</span> <span class="attr">type</span>=<span class="string">&quot;border-card&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!--实时状态--&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">&quot;realTimeState&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;label&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-time&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 实时状态<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">realTimeState</span> <span class="attr">v-if</span>=<span class="string">&quot;activeName === &#x27;realTimeState&#x27;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!--历史状态--&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">&quot;historyData&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;label&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-document&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 历史状态<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">historyData</span> <span class="attr">v-if</span>=<span class="string">&quot;activeName === &#x27;historyData&#x27;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!--基本信息--&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">&quot;basicInfo&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;label&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-info&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 基本信息<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">basicInfo</span> <span class="attr">v-if</span>=<span class="string">&quot;activeName === &#x27;basicInfo&#x27;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!--状态导出--&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">&quot;exportData&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;label&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-download&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 状态导出<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">exportData</span> <span class="attr">v-if</span>=<span class="string">&quot;activeName === &#x27;exportData&#x27;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!--故障查询--&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">&quot;error&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;label&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-error&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 故障查询<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">error</span> <span class="attr">v-if</span>=<span class="string">&quot;activeName === &#x27;error&#x27;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="comment">&lt;!--预警监测--&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">el-tab-pane</span> <span class="attr">name</span>=<span class="string">&quot;statusPicture&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">&quot;label&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-picture&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span> 预警监测<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">statusPicture</span> <span class="attr">v-if</span>=<span class="string">&quot;activeName === &#x27;statusPicture&#x27;&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">el-tab-pane</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">el-tabs</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="reference">Reference</h1>
<p><a href="https://juejin.cn/post/7035158064177086494">tabs +
组件使用会导致什么呢？</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Element</tag>
        <tag>tabs</tag>
        <tag>组件</tag>
        <tag>钩子函数</tag>
      </tags>
  </entry>
  <entry>
    <title>判断一个数字是否是平方数</title>
    <url>/2023/10/17/%E5%88%A4%E6%96%AD%E4%B8%80%E4%B8%AA%E6%95%B0%E5%AD%97%E6%98%AF%E5%90%A6%E6%98%AF%E5%B9%B3%E6%96%B9%E6%95%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="description">DESCRIPTION</h1>
<p>Given an integral number, determine if it’s a square number:</p>
<blockquote>
<p>In mathematics, a square number or perfect square is an integer that
is the square of an integer; in other words, it is the product of some
integer with itself.</p>
</blockquote>
<p>The tests will always use some integral number, so don’t worry about
that in dynamic typed languages.</p>
<p>Examples</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">-<span class="number">1</span>  =&gt;  <span class="literal">false</span></span><br><span class="line"> <span class="number">0</span>  =&gt;  <span class="literal">true</span></span><br><span class="line"> <span class="number">3</span>  =&gt;  <span class="literal">false</span></span><br><span class="line"> <span class="number">4</span>  =&gt;  <span class="literal">true</span></span><br><span class="line"><span class="number">25</span>  =&gt;  <span class="literal">true</span></span><br><span class="line"><span class="number">26</span>  =&gt;  <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<h1 id="solution">SOLUTION</h1>
<ul>
<li>方法一：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isSquare = <span class="keyword">function</span> (<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="comment">// 求平方根并取整</span></span><br><span class="line">  <span class="keyword">let</span> roundSqrt = <span class="title class_">Math</span>.<span class="title function_">round</span>(<span class="title class_">Math</span>.<span class="title function_">sqrt</span>(n));</span><br><span class="line">  <span class="comment">// 判断平方根相乘的结果是否与传入的数值相等</span></span><br><span class="line">  <span class="keyword">return</span> n === roundSqrt * roundSqrt;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ul>
<li>方法二：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isSquare</span>(<span class="params">n</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">sqrt</span>(n) % <span class="number">1</span> === <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.codewars.com/kata/54c27a33fb7da0db0100040e">You’re a
square!</a></p>
]]></content>
  </entry>
  <entry>
    <title>删除字符串中的原音字符</title>
    <url>/2023/10/13/%E5%88%A0%E9%99%A4%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E7%9A%84%E5%8E%9F%E9%9F%B3%E5%AD%97%E7%AC%A6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="description">DESCRIPTION</h1>
<p>Trolls are attacking your comment section!</p>
<p>A common way to deal with this situation is to remove all of the
vowels from the trolls’ comments, neutralizing the threat.</p>
<p>Your task is to write a function that takes a string and return a new
string with all vowels removed.</p>
<p>For example, the string “This website is for losers LOL!” would
become “Ths wbst s fr lsrs LL!”.</p>
<p>Note: for this kata y isn’t considered a vowel.</p>
<h1 id="solution">SOLUTION</h1>
<ul>
<li>方法一：字符串的 <code>replace()</code> 和 <code>replaceAll()</code>
方法都可，这两个方法都是返回一个新的字符串。</li>
</ul>
<p><code>replace()</code>
字符串模式只会被替换一次。要执行全局搜索和替换，请使用带有 g
标志的正则表达式或使用 replaceAll()。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">disemvowel</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> regex = <span class="regexp">/aeiou/gi</span>;</span><br><span class="line">  <span class="keyword">let</span> result = str.<span class="title function_">replace</span>(regex, <span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="comment">// let result = str.replaceAll(regex, &quot;&quot;);</span></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ul>
<li>方法二：全部写在一行！</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">disemvowel</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">replace</span>(<span class="regexp">/[aeiou]/gi</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>方法三：箭头函数。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">disemvowel = <span class="function">(<span class="params">str</span>) =&gt;</span> str.<span class="title function_">replace</span>(<span class="regexp">/[aeiou]/gi</span>, <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>
<h1 id="tips">Tips</h1>
<p>正则表达式:</p>
<p>元字符 [xyz] 字符集合。匹配所包含的任意一个字符。例如， ‘[abc]’
可以匹配 “plain” 中的 ‘a’。 修饰符 i ignore - 不区分大小写
将匹配设置为不区分大小写，搜索时不区分大小写: A 和 a 没有区别。 修饰符 g
global - 全局匹配 查找所有的匹配项。</p>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.codewars.com/kata/52fba66badcd10859f00097e/train/javascript">Disemvowel
Trolls</a> <a
href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace">String.prototype.replace()</a>
<a
href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replaceAll">String.prototype.replaceAll()</a>
<a href="runoob.com/regexp/regexp-metachar.html">正则表达式 - 元字符</a>
<a href="https://www.runoob.com/regexp/regexp-flags.html">正则表达式 -
修饰符（标记）</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>每日一练</tag>
        <tag>replace</tag>
        <tag>replaceAll</tag>
      </tags>
  </entry>
  <entry>
    <title>Javascript for...in</title>
    <url>/2023/10/13/Javascript-for-in/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>for…in 语句以任意顺序迭代一个对象的除 Symbol
以外的可枚举属性，包括继承的可枚举属性。</p>
<h1 id="语法">语法</h1>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">for</span> (variable <span class="keyword">in</span> object) &#123;</span><br><span class="line">  <span class="keyword">if</span>(object.<span class="title function_">hasOwnProperty</span>(<span class="params">variable</span>) &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>variable</code> 在每次迭代时，variable
会被赋值为不同的属性名。</p>
<p><code>object</code> 非 Symbol 类型的可枚举属性被迭代的对象。</p>
<span id="more"></span>
<h1 id="仅迭代自身的属性">仅迭代自身的属性</h1>
<p>如果你只要考虑对象本身的属性，而不是它的原型，那么使用
getOwnPropertyNames() 或执行 hasOwnProperty()
来确定某属性是否是对象本身的属性（也能使用
propertyIsEnumerable）。或者，如果你知道不会有任何外部代码干扰，你可以使用检查方法扩展内置原型。</p>
<p>下面的函数说明了 hasOwnProperty()的用法：继承的属性不显示。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> triangle = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: <span class="number">2</span>, <span class="attr">c</span>: <span class="number">3</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">ColoredTriangle</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">color</span> = <span class="string">&quot;red&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">ColoredTriangle</span>.<span class="property"><span class="keyword">prototype</span></span> = triangle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> obj = <span class="keyword">new</span> <span class="title class_">ColoredTriangle</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">var</span> prop <span class="keyword">in</span> obj) &#123;</span><br><span class="line">  <span class="keyword">if</span> (obj.<span class="title function_">hasOwnProperty</span>(prop)) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`obj.<span class="subst">$&#123;prop&#125;</span> = <span class="subst">$&#123;obj[prop]&#125;</span>`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Output:</span></span><br><span class="line"><span class="comment">// &quot;obj.color = red&quot;</span></span><br></pre></td></tr></table></figure>
<h1 id="为什么用-for-in">为什么用 for … in?</h1>
<p>for … in 是为遍历对象属性而构建的，不建议与数组一起使用，数组可以用
Array.prototype.forEach()和 for … of，那么 for … in
的到底有什么用呢？</p>
<p>它最常用的地方应该是用于调试，可以更方便的去检查对象属性（通过输出到控制台或其他方式）。尽管对于处理存储数据，数组更实用些，但是你在处理有
key-value
数据（比如属性用作“键”），需要检查其中的任何键是否为某值的情况时，还是推荐用
for … in</p>
<h1 id="reference">Reference</h1>
<p><a
href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/for...in">for…in</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>遍历对象属性</tag>
        <tag>for...in</tag>
      </tags>
  </entry>
  <entry>
    <title>List Filtering</title>
    <url>/2023/10/16/List-Filtering/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="description">DESCRIPTION</h1>
<p>In this kata you will create a function that takes a list of
non-negative integers and strings and returns a new list with the
strings filtered out.</p>
<p>Example</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">filter_list</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>]) == [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line"><span class="title function_">filter_list</span>([<span class="number">1</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;b&quot;</span>, <span class="number">0</span>, <span class="number">15</span>]) == [<span class="number">1</span>, <span class="number">0</span>, <span class="number">15</span>];</span><br><span class="line"><span class="title function_">filter_list</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="string">&quot;aasf&quot;</span>, <span class="string">&quot;1&quot;</span>, <span class="string">&quot;123&quot;</span>, <span class="number">123</span>]) == [<span class="number">1</span>, <span class="number">2</span>, <span class="number">123</span>];</span><br></pre></td></tr></table></figure>
<h1 id="solution">SOLUTION</h1>
<ul>
<li>数组的 <code>filter()</code> 方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">filter_list</span>(<span class="params">l</span>) &#123;</span><br><span class="line">  <span class="comment">// Return a new array with the strings filtered out</span></span><br><span class="line">  <span class="keyword">return</span> l.<span class="title function_">filter</span>(<span class="function">(<span class="params">word</span>) =&gt;</span> <span class="keyword">typeof</span> word === <span class="string">&quot;number&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.codewars.com/kata/53dbd5315a3c69eed20002dd/javascript">List
Filtering</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>每日一练</tag>
        <tag>列表筛选</tag>
      </tags>
  </entry>
  <entry>
    <title>Array.diff</title>
    <url>/2023/10/18/Array-diff/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="description">DESCRIPTION</h1>
<p>Your goal in this kata is to implement a difference function, which
subtracts one list from another and returns the result.</p>
<p>It should remove all values from list a, which are present in list b
keeping their order.</p>
<p><code>arrayDiff([1,2],[1]) == [2]</code></p>
<p>If a value is present in b, all of its occurrences must be removed
from the other:</p>
<p><code>arrayDiff([1,2,2,2,3],[2]) == [1,3]</code></p>
<h1 id="solution">SOLUTION</h1>
<ul>
<li>方法一：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">arrDiff</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a.<span class="title function_">filter</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> !b.<span class="title function_">includes</span>(item));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.codewars.com/kata/523f5d21c841566fde000009/javascript">Array.diff</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>每日一练</tag>
      </tags>
  </entry>
  <entry>
    <title>Create Phone Number</title>
    <url>/2023/10/19/Create-Phone-Number/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="description">DESCRIPTION</h1>
<p>Write a function that accepts an array of 10 integers (between 0 and
9), that returns a string of those numbers in the form of a phone
number.</p>
<p>Example</p>
<p><code>createPhoneNumber([1, 2, 3, 4, 5, 6, 7, 8, 9, 0]) // =&gt; returns "(123) 456-7890"</code></p>
<p>The returned format must be correct in order to complete this
challenge.</p>
<p>Don’t forget the space after the closing parentheses!</p>
<h1 id="solution">SOLUTION</h1>
<ul>
<li>方法一：数组的 <code>slice()</code> 方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createPhoneNumber</span>(<span class="params">numbers</span>) &#123;</span><br><span class="line">  <span class="comment">// Create an array of the different parts of the phone number</span></span><br><span class="line">  <span class="keyword">const</span> areaCode = <span class="string">`(<span class="subst">$&#123;numbers.slice(<span class="number">0</span>, <span class="number">3</span>).join(<span class="string">&quot;&quot;</span>)&#125;</span>)`</span>;</span><br><span class="line">  <span class="keyword">const</span> prefix = numbers.<span class="title function_">slice</span>(<span class="number">3</span>, <span class="number">6</span>).<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> suffix = numbers.<span class="title function_">slice</span>(<span class="number">6</span>, <span class="number">10</span>).<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Combine the parts into the final phone number string</span></span><br><span class="line">  <span class="keyword">const</span> phoneNumber = <span class="string">`<span class="subst">$&#123;areaCode&#125;</span> <span class="subst">$&#123;prefix&#125;</span>-<span class="subst">$&#123;suffix&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> phoneNumber;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ul>
<li>方法二：字符串的 <code>replace()</code> 方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createPhoneNumber</span>(<span class="params">numbers</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> format = <span class="string">&quot;(xxx) xxx-xxxx&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; numbers.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    format = format.<span class="title function_">replace</span>(<span class="string">&quot;x&quot;</span>, numbers[i]);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> format;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>方法三：正则表达式</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createPhoneNumber</span>(<span class="params">numbers</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> numbers.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>).<span class="title function_">replace</span>(<span class="regexp">/(\d&#123;3&#125;)(\d&#123;3&#125;)(\d&#123;4&#125;)/</span>, <span class="string">&quot;($1) $2-$3&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.codewars.com/kata/525f50e3b73515a6db000b83/solutions/javascript?filter=all&amp;sort=best_practice&amp;invalids=false">Create
Phone Number</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>每日一练</tag>
      </tags>
  </entry>
  <entry>
    <title>Roman Numerals Decoder</title>
    <url>/2023/10/24/Roman-Numerals-Decoder/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="description">DESCRIPTION</h1>
<p>Create a function that takes a Roman numeral as its argument and
returns its value as a numeric decimal integer. You don’t need to
validate the form of the Roman numeral.</p>
<p>Modern Roman numerals are written by expressing each decimal digit of
the number to be encoded separately, starting with the leftmost digit
and skipping any 0s. So 1990 is rendered “MCMXC” (1000 = M, 900 = CM, 90
= XC) and 2008 is rendered “MMVIII” (2000 = MM, 8 = VIII). The Roman
numeral for 1666, “MDCLXVI”, uses each letter in descending order.</p>
<p>注意一点：题目没有描述，当较小的值出现在较大的值之前时，将从较大的值中减去该值。可参考文末的引用链接。</p>
<h1 id="solution">SOLUTION</h1>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">solution</span>(<span class="params">roman</span>) &#123;</span><br><span class="line">  <span class="comment">// 定义一个罗马数字到整数的映射</span></span><br><span class="line">  <span class="keyword">const</span> romanMap = &#123;</span><br><span class="line">    <span class="attr">I</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="attr">V</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="attr">X</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">L</span>: <span class="number">50</span>,</span><br><span class="line">    <span class="attr">C</span>: <span class="number">100</span>,</span><br><span class="line">    <span class="attr">D</span>: <span class="number">500</span>,</span><br><span class="line">    <span class="attr">M</span>: <span class="number">1000</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 初始化结果变量，以存储罗马数字的最终值</span></span><br><span class="line">  <span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// 遍历罗马数字</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; roman.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// 获取当前字母和下一个字母</span></span><br><span class="line">    <span class="keyword">let</span> letter = roman[i];</span><br><span class="line">    <span class="keyword">let</span> letterAfter = roman[i + <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// 如果当前字母小于后一个字母，则从结果中减去当前字母的值</span></span><br><span class="line">    <span class="keyword">if</span> (romanMap[letter] &lt; romanMap[letterAfter]) &#123;</span><br><span class="line">      result -= romanMap[letter];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 如果当前字母大于后一个字母，则从结果中加上当前字母的值</span></span><br><span class="line">      result += romanMap[letter];</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 返回罗马数字的最终值</span></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.codewars.com/kata/51b6249c4612257ac0000005/javascript">Roman
Numerals Decoder</a> <a
href="https://jagathishsaravanan.medium.com/converting-decimal-numbers-to-roman-numerals-with-javascript-a-step-by-step-guide-4a5197d51c2">Converting
Decimal Numbers to Roman Numerals with JavaScript: A step-by-step
guide</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>每日一练</tag>
      </tags>
  </entry>
  <entry>
    <title>Directions Reduction</title>
    <url>/2023/10/20/Directions-Reduction/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="description">DESCRIPTION</h1>
<p>Write a function dirReduc which will take an array of strings and
returns an array of strings with the needless directions removed
(W&lt;-&gt;E or S&lt;-&gt;N side by side).</p>
<p>The Haskell version takes a list of directions with data Direction =
North | East | West | South. The Clojure version returns nil when the
path is reduced to nothing. The Rust version takes a slice of enum
Direction {North, East, West, South}.</p>
<p>详细描述可以查看文档底部的引用链接。</p>
<h1 id="solution">SOLUTION</h1>
<ul>
<li>方法一：模拟栈的方式。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">dirReduc</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> opposites = &#123;</span><br><span class="line">    <span class="attr">NORTH</span>: <span class="string">&quot;SOUTH&quot;</span>,</span><br><span class="line">    <span class="attr">SOUTH</span>: <span class="string">&quot;NORTH&quot;</span>,</span><br><span class="line">    <span class="attr">EAST</span>: <span class="string">&quot;WEST&quot;</span>,</span><br><span class="line">    <span class="attr">WEST</span>: <span class="string">&quot;EAST&quot;</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="comment">// 创建一个数组用来模拟一个栈，用于跟踪方向</span></span><br><span class="line">  <span class="keyword">const</span> stack = [];</span><br><span class="line">  <span class="comment">// 遍历输入的方向数组</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> direction <span class="keyword">of</span> arr) &#123;</span><br><span class="line">    <span class="comment">// 获取当前方向的反方向</span></span><br><span class="line">    <span class="keyword">const</span> opposite = opposites[direction];</span><br><span class="line">    <span class="comment">// 如果栈顶方向等于当前方向的反方向，则弹出栈顶方向</span></span><br><span class="line">    <span class="keyword">if</span> (stack[stack.<span class="property">length</span> - <span class="number">1</span>] === opposite) &#123;</span><br><span class="line">      stack.<span class="title function_">pop</span>();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 否则，将当前方向压入栈顶</span></span><br><span class="line">      stack.<span class="title function_">push</span>(direction);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 最终，栈中剩下的方向就是去掉不必要的相反方向后的结果</span></span><br><span class="line">  <span class="keyword">return</span> stack;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ul>
<li>方法二：正则表达式 + <code>while</code> 循环。</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">dirReduc</span>(<span class="params">arr</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> str = arr.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>),</span><br><span class="line">    pattern = <span class="regexp">/NORTHSOUTH|EASTWEST|SOUTHNORTH|WESTEAST/</span>;</span><br><span class="line">  <span class="keyword">while</span> (pattern.<span class="title function_">test</span>(str)) str = str.<span class="title function_">replace</span>(pattern, <span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">match</span>(<span class="regexp">/(NORTH|SOUTH|EAST|WEST)/g</span>) || [];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.codewars.com/kata/550f22f4d758534c1100025a/javascript">Directions
Reduction</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>每日一练</tag>
      </tags>
  </entry>
  <entry>
    <title>The Hashtag Generator</title>
    <url>/2023/10/26/The-Hashtag-Generator/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="the-hashtag-generator">The Hashtag Generator</h1>
<p>The marketing team is spending way too much time typing in hashtags.
Let’s help them with our own Hashtag Generator!</p>
<p>Here’s the deal:</p>
<p>It must start with a hashtag (#). All words must have their first
letter capitalized. If the final result is longer than 140 chars it must
return false. If the input or the result is an empty string it must
return false.</p>
<h1 id="solution">SOLUTION</h1>
<ul>
<li>方法一：普通循环</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">generateHashtag</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="comment">// 判断是否是空字符串，或只包含多个空格的字符串</span></span><br><span class="line">  <span class="keyword">if</span> (str.<span class="property">length</span> === <span class="number">0</span> || str.<span class="title function_">replace</span>(<span class="regexp">/\s+/g</span>, <span class="string">&quot;&quot;</span>).<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 将每个单词的首字母大写</span></span><br><span class="line">  <span class="keyword">let</span> words = str.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; words.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    words[i] = words[i].<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + words[i].<span class="title function_">slice</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 拼接 #</span></span><br><span class="line">  <span class="keyword">let</span> result = <span class="string">&quot;#&quot;</span> + words.<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> result.<span class="property">length</span> &gt; <span class="number">140</span> ? <span class="literal">false</span> : result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ul>
<li>方法二：<code>reduce()</code> 方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">generateHashtag</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> hashtag = str.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>).<span class="title function_">reduce</span>(<span class="keyword">function</span> (<span class="params">tag, word</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> tag + word.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + word.<span class="title function_">substring</span>(<span class="number">1</span>);</span><br><span class="line">  &#125;, <span class="string">&quot;#&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> hashtag.<span class="property">length</span> == <span class="number">1</span> || hashtag.<span class="property">length</span> &gt; <span class="number">140</span> ? <span class="literal">false</span> : hashtag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>方法三：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">generateHashtag</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!str.<span class="title function_">trim</span>()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> result =</span><br><span class="line">    <span class="string">&quot;#&quot;</span> +</span><br><span class="line">    str</span><br><span class="line">      .<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>)</span><br><span class="line">      .<span class="title function_">map</span>(<span class="function">(<span class="params">l</span>) =&gt;</span> l.<span class="title function_">charAt</span>(<span class="number">0</span>).<span class="title function_">toUpperCase</span>() + l.<span class="title function_">slice</span>(<span class="number">1</span>))</span><br><span class="line">      .<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result.<span class="property">length</span> &gt; <span class="number">140</span> ? <span class="literal">false</span> : result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="判断回文数">判断回文数</h1>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> isPalindrome = <span class="keyword">function</span> (<span class="params">x</span>) &#123;</span><br><span class="line">  <span class="comment">// 小于零肯定不是回文数</span></span><br><span class="line">  <span class="keyword">if</span> (x &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 反转数字</span></span><br><span class="line">  <span class="keyword">const</span> revertedX = x.<span class="title function_">toString</span>().<span class="title function_">split</span>(<span class="string">&quot;&quot;</span>).<span class="title function_">reverse</span>().<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="comment">// 比较反转后的数字是否相等</span></span><br><span class="line">  <span class="keyword">return</span> x === <span class="built_in">parseInt</span>(revertedX, <span class="number">10</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.codewars.com/kata/52449b062fb80683ec000024/solutions/javascript?filter=me&amp;sort=best_practice&amp;invalids=false">The
Hashtag Generator</a> <a
href="https://leetcode.cn/problems/palindrome-number/">9. 回文数</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>每日一练</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScirpt 垃圾回收机制</title>
    <url>/2023/10/27/JavaScirpt-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="垃圾回收机制">垃圾回收机制</h1>
<p>JavaScript
的垃圾回收机制是自动的，也就是说，开发者不需要手动释放内存。JavaScript
引擎会自动跟踪内存中所有对象的引用，并在对象没有被引用时自动释放其占用的内存空间。</p>
<p>垃圾回收器会定期扫描内存中的对象，并标记那些被引用的对象。然后，它会删除那些没有被标记的对象，并将它们占用的内存空间释放回系统。这个过程被称为垃圾回收。</p>
<p>JavaScript 中的垃圾回收器使用的是基于标记和清除（Mark and
Sweep）算法的垃圾回收机制。这个算法的基本思想是，通过遍历所有的对象，标记那些仍然被引用的对象，然后删除那些没有被标记的对象。</p>
<p>这个算法有一个缺点，就是在执行标记和清除算法的过程中会暂停 JavaScript
的执行。这个暂停时间的长短取决于需要清理的内存空间的大小。为了解决这个问题，现代浏览器使用了一些优化算法，如增量标记和清除、分代回收等，来减少垃圾回收的暂停时间。</p>
<p>总的来说，JavaScript
的垃圾回收机制是非常高效和自动化的，开发者不需要手动管理内存。但是，开发者仍然需要注意一些内存泄漏的情况，如循环引用、全局变量等，以避免浪费内存和影响性能。</p>
<span id="more"></span>
<h1 id="如何避免内存泄漏">如何避免内存泄漏</h1>
<ul>
<li><p>及时清除不再使用的对象和变量：在 JavaScript
中，变量和对象的引用关系是自动管理的，但是如果开发者在代码中使用了全局变量或者闭包，就需要手动清除这些变量或对象的引用，否则它们会一直存在于内存中，占用内存空间。</p></li>
<li><p>避免循环引用：循环引用指的是两个或多个对象之间相互引用，从而导致它们无法被垃圾回收器识别和清除。为避免循环引用，可以使用弱引用或者手动清除引用。</p></li>
<li><p>使用事件委托：在 JavaScript
中，事件委托可以避免为每个子元素添加事件处理程序而导致的内存泄漏。事件委托是将事件处理程序绑定到父元素上，当事件被触发时，事件处理程序会根据事件的目标元素来执行相应的操作。</p></li>
<li><p>避免使用过多的定时器和回调函数：定时器和回调函数会在内存中创建新的对象，如果使用不当，会导致内存泄漏。为避免这种情况，开发者可以使用节流和防抖等技术来优化代码，减少定时器和回调函数的使用。</p></li>
<li><p>使用 Chrome 开发者工具进行内存分析：Chrome
开发者工具提供了内存分析工具，可以帮助开发者识别和调试内存泄漏问题。开发者可以使用
Heap Profiler
工具来查看内存使用情况和对象分配情况，从而找出内存泄漏的原因。</p></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>垃圾回收</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue 2.x 的 diff 算法</title>
    <url>/2023/10/27/Vue-2-x-%E7%9A%84-diff-%E7%AE%97%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>Vue 2.x 的虚拟 DOM 采用的是基于 Snabbdom 库实现的 diff
算法。其基本思想是通过比较新旧节点，找出它们之间的差异，然后将这些差异应用于真实
DOM 上，从而最小化 DOM 操作次数，提高渲染效率。</p>
<p>Vue 2.x 的 diff 算法主要分为以下几个步骤：</p>
<ol type="1">
<li><p>新旧节点的比较：首先比较新旧节点的类型和标签名，如果不同，则直接替换整个节点；如果相同，则继续比较节点的属性和子节点。</p></li>
<li><p>属性的比较：对于同一节点，比较它们的属性是否相同，如果不同，则更新属性值。</p></li>
<li><p>子节点的比较：对于同一节点，比较它们的子节点是否相同，如果不同，则递归地对子节点进行比较。</p></li>
<li><p>列表的比较：对于列表节点，比较它们的子节点是否相同，如果不同，则使用
diff 算法找出它们之间的差异，然后更新列表。</p></li>
<li><p>键值的比较：在进行列表比较时，如果节点具有 key 值，则通过 key
值来快速定位节点，从而提高比较效率。</p></li>
</ol>
<p>总的来说，Vue 2.x 的 diff 算法是一种高效的算法，可以最小化 DOM
操作次数，提高渲染效率。但是，开发者仍然需要注意一些性能问题，如避免过多的嵌套组件、避免重复渲染等，以优化应用程序的性能。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>diff 算法</tag>
      </tags>
  </entry>
  <entry>
    <title>HTTP 1.0、1.1、2.0、HTTPS 协议的特性及区别</title>
    <url>/2023/11/02/HTTP-1-0%E3%80%811-1%E3%80%812-0%E3%80%81HTTPS-%E5%8D%8F%E8%AE%AE%E7%9A%84%E7%89%B9%E6%80%A7%E5%8F%8A%E5%8C%BA%E5%88%AB/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>HTTP（Hypertext Transfer
Protocol）是用于传输超文本的应用层协议，它被用于在客户端和服务器之间传输和呈现超文本。</p>
<ol type="1">
<li><p><strong>HTTP 1.0</strong>：</p>
<ul>
<li><strong>特性</strong>：
<ul>
<li>使用明文传输数据，不提供数据加密。</li>
<li>请求-响应模型，每个请求都需要服务器单独响应。</li>
<li>不支持持久连接，每个请求/响应都需要建立新的 TCP 连接。</li>
<li>无法复用连接，每个请求都会在单独的连接上处理。</li>
<li>不支持请求的优先级，请求之间平等对待。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>性能较差，多次连接建立和拆除的开销。</li>
<li>安全性差，数据明文传输容易被窃听和篡改。</li>
</ul></li>
</ul></li>
<li><p><strong>HTTP 1.1</strong>：</p>
<ul>
<li><strong>特性</strong>：
<ul>
<li>引入持久连接，减少了连接的建立和拆除开销。</li>
<li>引入请求的优先级，可以根据需求标识请求的优先级。</li>
<li>支持管道化，允许多个请求/响应在一个连接上同时处理。</li>
<li>引入分块传输编码，允许数据分块传输。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>依然使用明文传输，存在安全风险。</li>
<li>性能提升有限，管道化和请求优先级的支持不够强大。</li>
</ul></li>
</ul></li>
</ol>
<span id="more"></span>
<ol type="1">
<li><p><strong>HTTP 2.0</strong>：</p>
<ul>
<li><strong>特性</strong>：
<ul>
<li>使用二进制格式传输数据，减少了传输数据的开销。</li>
<li>多路复用，多个请求/响应可以在一个连接上同时处理。</li>
<li>头部压缩，减少了头部信息的传输开销。</li>
<li>服务器推送，服务器可以在客户端请求之前主动推送数据。</li>
<li>支持数据流优先级，可以更好地管理多个数据流。</li>
</ul></li>
<li><strong>缺点</strong>：
<ul>
<li>需要 HTTPS，否则不支持。</li>
<li>需要现代的服务器和客户端支持。</li>
</ul></li>
</ul></li>
<li><p><strong>HTTPS</strong>： SSL（Secure Sockets
Layer）译为「安全套接字协议」，TLS（Transport Layer
Security）译为「传输层安全性协议」。 SSL/TLS
协议处于「传输层」和「应用层」之间，主要作用是对网络连接进行加解密，如下图：
</p>
<p>SSL/TLS 四次握手:</p>
<ol type="1">
<li>客户端向服务端所有证书。</li>
<li>服务端发送证书。</li>
<li>客户端验证证书，提取公钥，发送对称加密的密钥。</li>
<li>服务端收到密钥，响应 OK。</li>
</ol>

<p>HTTPS=HTTP+SSL/TLS</p>

<ul>
<li><strong>特性</strong>：
<ul>
<li>基于 HTTP 协议，但使用 TLS/SSL 加密保护数据传输。</li>
<li>提供数据的机密性和完整性，防止窃听和篡改。</li>
<li>使用加密证书，验证服务器的身份。</li>
<li>需要额外的计算和加密开销，对性能有一定影响。</li>
</ul></li>
<li><strong>优点</strong>：
<ul>
<li>更高的安全性，数据加密传输。</li>
<li>更可信的身份验证。</li>
<li>保护用户隐私。</li>
</ul></li>
</ul></li>
</ol>
<p><strong>区别</strong>：</p>
<ul>
<li>HTTP 1.0 到 HTTP 1.1
的升级主要关注性能和复用连接，但仍然使用明文传输。</li>
<li>HTTP 2.0
引入了二进制传输、多路复用、头部压缩和服务器推送等特性，但需要使用
HTTPS。</li>
<li>HTTPS 是一种安全协议，它在 HTTP
的基础上增加了数据加密和身份验证，用于保护数据的安全性和完整性。</li>
</ul>
<p>总之，HTTP 2.0 和 HTTPS 是在性能和安全性方面的较大改进，特别是 HTTP
2.0 引入了多路复用和头部压缩等功能，从而提高了性能。HTTPS
提供了更高级别的安全性，通过加密和身份验证来保护数据。</p>
<h1 id="references">References</h1>
<p><a
href="https://juejin.cn/post/6963931777962344455">HTTP1.0、1.1、2.0
协议的特性及区别</a> <a
href="https://juejin.cn/post/6952056937349382181">HTTPS
是如何保证数据传输安全的？</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>HTTP</tag>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title>从 URL 中提取域名</title>
    <url>/2023/10/27/%E4%BB%8E-URL-%E4%B8%AD%E6%8F%90%E5%8F%96%E5%9F%9F%E5%90%8D/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="description">DESCRIPTION</h1>
<p>Write a function that when given a URL as a string, parses out just
the domain name and returns it as a string.</p>
<h1 id="solution">SOLUTION</h1>
<ul>
<li>方法一：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">domainName</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> domain;</span><br><span class="line">  <span class="comment">// find &amp; remove protocol (http, ftp, etc.) and get domain</span></span><br><span class="line">  <span class="keyword">if</span> (url.<span class="title function_">indexOf</span>(<span class="string">&quot;://&quot;</span>) &gt; -<span class="number">1</span>) &#123;</span><br><span class="line">    domain = url.<span class="title function_">split</span>(<span class="string">&quot;/&quot;</span>)[<span class="number">2</span>];</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    domain = url.<span class="title function_">split</span>(<span class="string">&quot;/&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// remove port number if any</span></span><br><span class="line">  domain = domain.<span class="title function_">split</span>(<span class="string">&quot;:&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">  <span class="comment">// remove www if any</span></span><br><span class="line">  domain = domain.<span class="title function_">replace</span>(<span class="string">&quot;www.&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="comment">// remove .com if any</span></span><br><span class="line">  domain = domain.<span class="title function_">replace</span>(<span class="string">&quot;.com&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> domain.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ul>
<li>方法二：先删除域名前的字符串然后根据 <code>.</code>
分割，第一个就是我们要的域名啦！</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">domainName</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  url = url.<span class="title function_">replace</span>(<span class="string">&quot;https://&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">  url = url.<span class="title function_">replace</span>(<span class="string">&quot;http://&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">  url = url.<span class="title function_">replace</span>(<span class="string">&quot;www.&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">return</span> url.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>)[<span class="number">0</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.codewars.com/kata/514a024011ea4fb54200004b/solutions/javascript?filter=me&amp;sort=best_practice&amp;invalids=false">Extract
the domain name from a URL</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>每日一练</tag>
      </tags>
  </entry>
  <entry>
    <title>Echarts map 删除香港、澳门和台湾显示</title>
    <url>/2023/10/30/Echarts-map-%E5%88%A0%E9%99%A4%E9%A6%99%E6%B8%AF%E3%80%81%E6%BE%B3%E9%97%A8%E5%92%8C%E5%8F%B0%E6%B9%BE%E6%98%BE%E7%A4%BA/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>修改 map option，将香港、澳门和台湾的透明度设置为
0，同时不显示标签名：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">series</span>: [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&quot;map&quot;</span>,</span><br><span class="line">    <span class="attr">map</span>: <span class="string">&quot;china&quot;</span>,</span><br><span class="line">    <span class="attr">roam</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">      <span class="attr">label</span>: &#123; <span class="attr">show</span>: <span class="literal">true</span>, <span class="attr">areaColor</span>: <span class="string">&quot;#b4e8fe&quot;</span> &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">emphasis</span>: &#123; <span class="attr">label</span>: &#123; <span class="attr">show</span>: <span class="literal">true</span> &#125; &#125;,</span><br><span class="line">    <span class="attr">data</span>: [</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;北京&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">110000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;天津&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">120000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;上海&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">310000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;重庆&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">500000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;河北&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">130000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;河南&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">410000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;云南&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">530000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;辽宁&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">210000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;黑龙江&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">230000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;湖南&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">430000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;安徽&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">340000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;山东&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">370000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;新疆&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">650000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;江苏&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">320000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;浙江&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">330000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;江西&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">360000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;湖北&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">420000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;广西&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">450000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;甘肃&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">620000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;山西&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">140000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;内蒙古&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">150000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;陕西&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">610000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;吉林&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">220000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;福建&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">350000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;贵州&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">520000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;广东&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">440000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;青海&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">630000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;西藏&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">540000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;四川&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">510000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;宁夏&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">640000</span> &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;海南&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">460000</span> &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;香港&quot;</span>,</span><br><span class="line">        <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">          <span class="attr">normal</span>: &#123; <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">label</span>: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;澳门&quot;</span>,</span><br><span class="line">        <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">          <span class="attr">normal</span>: &#123; <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">label</span>: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;台湾&quot;</span>,</span><br><span class="line">        <span class="attr">itemStyle</span>: &#123;</span><br><span class="line">          <span class="attr">normal</span>: &#123; <span class="attr">opacity</span>: <span class="number">0</span> &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">label</span>: &#123; <span class="attr">show</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123; <span class="attr">name</span>: <span class="string">&quot;南海诸岛&quot;</span>, <span class="attr">value</span>: <span class="number">0</span>, <span class="attr">id</span>: <span class="number">460324</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">label</span>: &#123;</span><br><span class="line">      <span class="attr">show</span>: <span class="literal">true</span>,</span><br><span class="line">      <span class="attr">fontSize</span>: <span class="number">12</span>,</span><br><span class="line">      <span class="attr">color</span>: <span class="string">&quot;#dcdcdc&quot;</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">zoom</span>: <span class="number">1.25</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="reference">Reference</h1>
<p><a
href="https://blog.csdn.net/xieamy/article/details/70256542">echart
怎么让南海诸岛不显示或隐藏部分省市名称</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Echarts</tag>
        <tag>map</tag>
      </tags>
  </entry>
  <entry>
    <title>Range Extraction</title>
    <url>/2023/10/30/Range-Extraction/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="description">DESCRIPTION</h1>
<h1 id="solution">SOLUTION</h1>
<ul>
<li>方法一：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">solution</span>(<span class="params">list</span>) &#123;</span><br><span class="line">  <span class="comment">// 检查是否为空</span></span><br><span class="line">  <span class="keyword">if</span> (list.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 定义 result 保存最终结果的数组</span></span><br><span class="line">  <span class="keyword">let</span> result = [];</span><br><span class="line">  <span class="comment">// 记录连续数字开始值</span></span><br><span class="line">  <span class="keyword">let</span> start = list[<span class="number">0</span>];</span><br><span class="line">  <span class="comment">// 记录连续数字结束值</span></span><br><span class="line">  <span class="keyword">let</span> end = list[<span class="number">0</span>];</span><br><span class="line">  <span class="comment">// 从第二个元素开始遍历 list 中的元素</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> num <span class="keyword">of</span> list.<span class="title function_">slice</span>(<span class="number">1</span>)) &#123;</span><br><span class="line">    <span class="comment">// 如果 num 等于 end + 1,则 num 与前一个元素连续，将 end 更新为 num</span></span><br><span class="line">    <span class="keyword">if</span> (num === end + <span class="number">1</span>) &#123;</span><br><span class="line">      end = num;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 处理连续的 3 个数字或以上，如果 end - start &gt;= 2,则将 `$&#123;start&#125;-$&#123;end&#125;` 添加到 result 中</span></span><br><span class="line">      <span class="keyword">if</span> (end - start &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">        result.<span class="title function_">push</span>(<span class="string">`<span class="subst">$&#123;start&#125;</span>-<span class="subst">$&#123;end&#125;</span>`</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 连个数字以下</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> j = start; j &lt;= end; j++) &#123;</span><br><span class="line">          result.<span class="title function_">push</span>(j.<span class="title function_">toString</span>());</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 更新 start 和 end 值</span></span><br><span class="line">      start = end = num;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 处理循环结束的最后一组连续数字</span></span><br><span class="line">  <span class="keyword">if</span> (end - start &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">    result.<span class="title function_">push</span>(<span class="string">`<span class="subst">$&#123;start&#125;</span>-<span class="subst">$&#123;end&#125;</span>`</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> j = start; j &lt;= end; j++) &#123;</span><br><span class="line">      result.<span class="title function_">push</span>(j.<span class="title function_">toString</span>());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result.<span class="title function_">join</span>(<span class="string">&quot;,&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ul>
<li>方法二：</li>
</ul>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">solution</span>(<span class="params">list</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">var</span> j = i;</span><br><span class="line">    <span class="keyword">while</span> (list[j] - list[j + <span class="number">1</span>] == -<span class="number">1</span>) j++;</span><br><span class="line">    <span class="keyword">if</span> (j != i &amp;&amp; j - i &gt; <span class="number">1</span>) list.<span class="title function_">splice</span>(i, j - i + <span class="number">1</span>, list[i] + <span class="string">&quot;-&quot;</span> + list[j]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> list.<span class="title function_">join</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.codewars.com/kata/51ba717bb08c1cd60f00002f/solutions/javascript">Range
Extraction</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>每日一练</tag>
      </tags>
  </entry>
  <entry>
    <title>设计模式-适配器模式</title>
    <url>/2023/11/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="定义">定义</h1>
<p>适配器模式（Adapter
Pattern）是一种结构性设计模式，它用于将一个类的接口转换成客户端代码期望的另一个接口。这使得原本不兼容的接口能够一起工作。适配器模式通常用于以下情况：</p>
<p>系统需要使用一些已存在的类，但这些类的接口与系统要求的接口不匹配。</p>
<p>系统需要一个可以重用的类，这个类能够与其他类或者系统一起工作，但这个类的接口不符合系统的要求。</p>
<p>适配器模式包括以下几种类型：</p>
<p>对象适配器模式：在这种模式中，适配器类继承自已存在的类，同时实现目标接口。这种方式使用了组合，将一个对象包含在适配器中。</p>
<p>类适配器模式：在这种模式中，适配器类同时继承自已存在的类和实现目标接口。这是使用多重继承的一种方式，通常在静态编程语言中较难实现。</p>
<h1 id="真实世界中的适配器">真实世界中的适配器</h1>
<ul>
<li>电源适配器（电脑，手机……）</li>
<li>iPhone 手机的 3.5 毫米耳机插口转接头</li>
</ul>
<span id="more"></span>
<img src="/2023/11/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/1.png" class="">
<img src="/2023/11/02/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/2.png" class="">
<h1 id="适配器模式可以解决什么问题">适配器模式可以解决什么问题</h1>
<p>将不兼容的源接口和目标接口进行了协调，使得客户端可以通过目标接口来访问源接口的方法，从而实现了更高的代码灵活性和可重用性。</p>
<p>当系统中某个接口的结构已经无法满足我们现在的业务需求，但又不能改动这个接口，因为可能原来的系统很多功能都依赖于这个接口，改动接口会牵扯到太多文件。因此应对这种场景，我们可以很快地想到可以用适配器模式来解决这个问题。</p>
<p>目的是复用已有的功能，而不是来实现新的接口。也就是说，访问者需要的功能应该是已经实现好了的，不需要适配器模式来实现，适配器模式主要是负责把不兼容的接口转换成访问者期望的格式而已。</p>
<p>在类似场景中，这些例子有以下特点：</p>
<ol type="1">
<li><p>旧有接口格式已经不满足现在的需要；</p></li>
<li><p>通过增加适配器来更好地使用旧有接口；</p></li>
</ol>
<h1 id="适配器模式的优缺点">适配器模式的优缺点</h1>
<p>适配器模式的优点：</p>
<ol type="1">
<li>已有的功能如果只是接口不兼容，使用适配器适配已有功能，可以使原有逻辑得到更好的复用，有助于避免大规模改写现有代码；</li>
<li>可扩展性良好，在实现适配器功能的时候，可以调用自己开发的功能，从而方便地扩展系统的功能；</li>
<li>灵活性好，因为适配器并没有对原有对象的功能有所影响，如果不想使用适配器了，那么直接删掉即可，不会对使用原有对象的代码有影响；</li>
</ol>
<p>适配器模式的缺点：会让系统变得零乱，明明调用 A，却被适配到了
B，如果系统中这样的情况很多，那么对可阅读性不太友好。如果没必要使用适配器模式的话，可以考虑重构，如果使用的话，可以考虑尽量把文档完善。</p>
<h1 id="代码实现">代码实现</h1>
<p>代码实现一：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 目标接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TargetInterface</span> &#123;</span><br><span class="line">  <span class="title function_">request</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;This method should be overridden&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 已存在的类，需要适配成目标接口</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Adaptee</span> &#123;</span><br><span class="line">  <span class="title function_">specificRequest</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;Adaptee&#x27;s specific request&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象适配器</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Adapter</span> <span class="keyword">extends</span> <span class="title class_ inherited__">TargetInterface</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">adaptee</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">adaptee</span> = adaptee;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">request</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> specific = <span class="variable language_">this</span>.<span class="property">adaptee</span>.<span class="title function_">specificRequest</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`Adapter: Transformed <span class="subst">$&#123;specific&#125;</span> to a common request`</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用适配器</span></span><br><span class="line"><span class="keyword">const</span> adaptee = <span class="keyword">new</span> <span class="title class_">Adaptee</span>();</span><br><span class="line"><span class="keyword">const</span> adapter = <span class="keyword">new</span> <span class="title class_">Adapter</span>(adaptee);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(adapter.<span class="title function_">request</span>()); <span class="comment">// 输出：Adapter: Transformed Adaptee&#x27;s specific request to a common request</span></span><br></pre></td></tr></table></figure>
<p>代码实现二：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> googleMap = &#123;</span><br><span class="line">  <span class="attr">show</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 1.0 版本</span></span><br><span class="line"><span class="comment">// var baiduMap = &#123;</span></span><br><span class="line"><span class="comment">//   show: function () &#123;</span></span><br><span class="line"><span class="comment">//     console.log(&quot;1&quot;);</span></span><br><span class="line"><span class="comment">//   &#125;,</span></span><br><span class="line"><span class="comment">// &#125;;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.0 版本，此时 show 方法已经修改为 display</span></span><br><span class="line"><span class="keyword">var</span> baiduMap = &#123;</span><br><span class="line">  <span class="attr">display</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 定义一个适配器，使得 rendMap 调用方式不变</span></span><br><span class="line"><span class="keyword">var</span> baiduMapAdapter = &#123;</span><br><span class="line">  <span class="attr">show</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> baiduMap.<span class="title function_">display</span>();</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> rendMap = <span class="keyword">function</span> (<span class="params">map</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (map.<span class="property">show</span> <span class="keyword">instanceof</span> <span class="title class_">Function</span>) &#123;</span><br><span class="line">    map.<span class="title function_">show</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="title function_">rendMap</span>(googleMap);</span><br><span class="line"><span class="title function_">rendMap</span>(baiduMapAdapter);</span><br></pre></td></tr></table></figure>
<p>代码实现三：</p>
<p>Vue 中的计算属性也是一个适配器模式的实例。 data
中的数据不满足当前的要求，通过计算属性的规则来适配成我们需要的格式，对原有数据并没有改变，只改变了原有数据的表现形式。</p>
<h1 id="references">References</h1>
<p><a
href="https://refactoringguru.cn/design-patterns/adapter">适配器模式</a><br />
<a
href="https://www.bilibili.com/video/BV1rk4y1T77B/?from=search&amp;seid=2192116027457142129&amp;spm_id_from=333.337.0.0&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">【JS
设计模式】适配器模式</a><br />
<a
href="https://www.bilibili.com/video/BV1aa411d7VU/?from=search&amp;seid=2192116027457142129&amp;spm_id_from=333.337.0.0&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">【IT
老齐 205】设计模式之适配器模式 Adapter</a><br />
<a
href="https://www.bilibili.com/video/BV1UL4y1h7W9/?p=12&amp;spm_id_from=pageDriver&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">前端
13 种常用设计模式详解合集</a><br />
很多实战案例：<a
href="https://cloud.tencent.com/developer/article/1753396">JavaScript
设计模式学习第十三篇－适配器模式</a> <a
href="https://www.youtube.com/watch?v=2PKQtcJjYvc">Adapter Pattern –
Design Patterns (ep 8)****</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>设计模式</tag>
        <tag>适配器模式</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 树形结构数据平铺展开</title>
    <url>/2023/11/02/JavaScript-%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%93%BA%E5%B1%95%E5%BC%80/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="代码">代码</h1>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 原来的树形结构</span></span><br><span class="line"><span class="keyword">const</span> oldTreeData = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;总部&quot;</span>,</span><br><span class="line">    <span class="attr">place</span>: <span class="string">&quot;一楼&quot;</span>,</span><br><span class="line">    <span class="attr">children</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;财务部&quot;</span>,</span><br><span class="line">        <span class="attr">place</span>: <span class="string">&quot;二楼&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;生产部&quot;</span>,</span><br><span class="line">        <span class="attr">place</span>: <span class="string">&quot;三楼&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;开发部&quot;</span>,</span><br><span class="line">        <span class="attr">place</span>: <span class="string">&quot;三楼&quot;</span>,</span><br><span class="line">        <span class="attr">children</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;软件部&quot;</span>,</span><br><span class="line">            <span class="attr">place</span>: <span class="string">&quot;四楼&quot;</span>,</span><br><span class="line">            <span class="attr">children</span>: [</span><br><span class="line">              &#123; <span class="attr">name</span>: <span class="string">&quot;后端部&quot;</span>, <span class="attr">place</span>: <span class="string">&quot;五楼&quot;</span> &#125;,</span><br><span class="line">              &#123; <span class="attr">name</span>: <span class="string">&quot;前端部&quot;</span>, <span class="attr">place</span>: <span class="string">&quot;七楼&quot;</span> &#125;,</span><br><span class="line">              &#123; <span class="attr">name</span>: <span class="string">&quot;技术部&quot;</span>, <span class="attr">place</span>: <span class="string">&quot;六楼&quot;</span> &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&quot;硬件部&quot;</span>,</span><br><span class="line">            <span class="attr">place</span>: <span class="string">&quot;四楼&quot;</span>,</span><br><span class="line">            <span class="attr">children</span>: [</span><br><span class="line">              &#123; <span class="attr">name</span>: <span class="string">&quot;DSP部&quot;</span>, <span class="attr">place</span>: <span class="string">&quot;八楼&quot;</span> &#125;,</span><br><span class="line">              &#123; <span class="attr">name</span>: <span class="string">&quot;ARM部&quot;</span>, <span class="attr">place</span>: <span class="string">&quot;二楼&quot;</span> &#125;,</span><br><span class="line">              &#123; <span class="attr">name</span>: <span class="string">&quot;调试部&quot;</span>, <span class="attr">place</span>: <span class="string">&quot;三楼&quot;</span> &#125;,</span><br><span class="line">            ],</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 树形结构平铺</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">treeDataAdapter</span>(<span class="params">treeData, lastArrayData = []</span>) &#123;</span><br><span class="line">  treeData.<span class="title function_">forEach</span>(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (item.<span class="property">children</span>) &#123;</span><br><span class="line">      <span class="title function_">treeDataAdapter</span>(item.<span class="property">children</span>, lastArrayData);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> &#123; name, place &#125; = item;</span><br><span class="line">    lastArrayData.<span class="title function_">push</span>(&#123; name, place &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> lastArrayData;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 返回平铺的组织结构</span></span><br><span class="line"><span class="keyword">var</span> data = <span class="title function_">treeDataAdapter</span>(oldTreeData);</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="reference">Reference</h1>
<p><a
href="https://cloud.tencent.com/developer/article/1753396">JavaScript
设计模式学习第十三篇－适配器模式</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>数据转化</tag>
      </tags>
  </entry>
  <entry>
    <title>英语学习方法</title>
    <url>/2023/11/09/%E8%8B%B1%E8%AF%AD%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>最近看了一系列英语学习方法的书籍、文章和视频，包括刘晓光的《把你的英语用起来》，郝海龙的《英语自学手册》，github
上的《离谱的英语学习指南》和《A Programmer’s Guide to
English》。究其大意都是相通的，总结一下学习方法：</p>
<ul>
<li>可理解性输入，难度适中，遵循 i + 1 理论</li>
<li>大量的阅读输入，找自己感兴趣的书籍阅读，在阅读中增加词汇量</li>
<li>大量的听力输入，可以使用 每日英语听力 软件</li>
<li>大量的跟读模仿</li>
</ul>
<span id="more"></span>
<blockquote>
<p>输入假说</p>
</blockquote>
<p>输入假说（the input hypothesis）。克拉申认为，第二语言学习的根本在于
input（输入），缺乏足够的输入就不可能学好任何一门外语。</p>
<blockquote>
<p>i + 1 理论</p>
</blockquote>
<p>“i+1”公式。也叫作“可理解性输入假说”，这条理论和上面的输入假说是最核心的两条理论。也就是说，在你认同输入假说的基础上进行输入练习时，一定要遵循
i+1 的原则，“i” 即你现在的水平，“1” 即比你现在稍微高一点点的难度。</p>
<blockquote>
<p>背单词相关</p>
</blockquote>
<ul>
<li>单词的记忆标准
<ul>
<li>当你看到一个英文单词时，能够立即想到它的一个中文意思，就可以认为这个单词你记住了。</li>
</ul></li>
<li>最好每天背上百个单词
<ul>
<li>背的多忘得多记得也多，背单词的关键在于重复</li>
</ul></li>
<li>每个单词背几秒就可以了，每次背只需要记住一个中文意思
<ul>
<li>背单词时只需要记住一个中文意思，当你在阅读中遇到这个单词的其他意思时再去查，再去记另外一个意思</li>
</ul></li>
</ul>
<p>就像郝海龙老师在书里说的，背单词是世界上最简单的事情，但却不容易。英语学习也是这样，如果你中途放下也没关系，只要再捡起来就行！</p>
<p>语言学习不是一朝一夕就能看到效果的，坚持正确的方法，相信自己一定可以做到，至少坚持一个月，那时候再回首，你一定会为自己取得的进步而骄傲！</p>
<p>推荐以下英语学习资料，写的特别好，非常实用！</p>
<h1 id="参考文档">参考文档</h1>
<p><a href="https://sspai.com/series/77">英语自学手册</a><br />
<a
href="https://www.amazon.com/%E7%94%9F%E5%91%BD%E7%9A%84%E8%BF%9C%E6%96%B9-%E5%88%98%E6%99%93%E5%85%89/dp/B0725PC739/ref=sr_1_2?crid=1K9WRYFB4POJ1&amp;keywords=%E6%8A%8A%E4%BD%A0%E7%9A%84%E8%8B%B1%E8%AF%AD%E7%94%A8%E8%B5%B7%E6%9D%A5&amp;qid=1699491038&amp;s=books&amp;sprefix=%E6%8A%8A%E4%BD%A0%E7%9A%84%E8%8B%B1%E8%AF%AD%E7%94%A8%E8%B5%B7%E6%9D%A5%2Cstripbooks-intl-ship%2C335&amp;sr=1-2">把你的英语用起来</a><br />
<a
href="https://github.com/byoungd/English-level-up-tips">离谱的英语学习指南</a><br />
<a
href="https://github.com/yujiangshui/A-Programmers-Guide-to-English">A
Programmer’s Guide to English</a><br />
<a
href="https://www.bilibili.com/video/BV1aD4y127GE/?spm_id_from=333.999.0.0&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">这个视频将会颠覆你对英语学习的认知——总述·阅读篇</a><br />
<a
href="https://www.bilibili.com/video/BV1tf4y1s7NN/?spm_id_from=333.999.0.0&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">这个视频将会颠覆你对英语学习的认知——听说篇</a><br />
<a
href="https://github.com/RealKai42/qwerty-learner">为键盘工作者设计的单词记忆与英语肌肉记忆锻炼软件</a>
<a
href="https://www.bilibili.com/read/cv7695133/">【终极英文书单】闲书原著推荐
—— 从入门到进阶</a></p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>英语学习</tag>
      </tags>
  </entry>
  <entry>
    <title>Git 团队协作最佳实践</title>
    <url>/2023/11/06/Git-%E5%9B%A2%E9%98%9F%E5%8D%8F%E4%BD%9C%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="一个开发人员典型的提交流程">一个开发人员典型的提交流程：</h1>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">//新建分支</span><br><span class="line">git checkout develop</span><br><span class="line">git pull origin develop</span><br><span class="line">git checkout -b myfeature</span><br><span class="line"></span><br><span class="line">//在分支上开发</span><br><span class="line">git add ***</span><br><span class="line">git commit -m <span class="string">&quot;*****&quot;</span></span><br><span class="line"></span><br><span class="line">//在分支开发过程中合并develop分支到本分支（先把自己的工作commit到本地）</span><br><span class="line">git checkout develop</span><br><span class="line">git pull origin develop</span><br><span class="line">git checkout myfeature</span><br><span class="line">git merge develop</span><br><span class="line"></span><br><span class="line">（如果没有冲突，就继续开发，如果有冲突，执行下面过程）</span><br><span class="line">首先在本地解决冲突，再把冲突解决commit</span><br><span class="line">git add ***</span><br><span class="line">git commit -m <span class="string">&quot;*****&quot;</span></span><br><span class="line"></span><br><span class="line">//在分支开发结束，需要将本分支合并到develop分支（先把自己的工作commit到本地）</span><br><span class="line">git checkout develop</span><br><span class="line">git pull origin develop</span><br><span class="line">git merge myfeature</span><br><span class="line"></span><br><span class="line">（如果没有冲突，就推送到远程）</span><br><span class="line">git push origin develop</span><br><span class="line">（如果有冲突，则解决冲突，再commit，并推送到远程：）</span><br><span class="line">git add ***</span><br><span class="line">git commit -m <span class="string">&quot;*****&quot;</span></span><br><span class="line">git push origin develop</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="references">References:</h1>
<p><a href="https://developer.aliyun.com/article/387756">Git Flow，Git
团队协作最佳实践</a> <a
href="https://coding.net/help/docs/ci/lint/markdown-code-lang.html">Markdown
代码块编程语言清单</a> <a
href="https://docs.github.com/en/get-started/quickstart/github-flow">GitHub
flow</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>i18n 国际化报错 Could not read source map for file:///D……</title>
    <url>/2023/11/14/i18n-%E5%9B%BD%E9%99%85%E5%8C%96%E6%8A%A5%E9%94%99-Could-not-read-source-map-for-file-D%E2%80%A6%E2%80%A6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在 VSCode 中打开原生 HTML 项目，会报错
<code>Could not read source map for file:///D</code>，此时安装一个
<code>Live Server</code> 的插件，然后使用
<code>Open with Live Server</code> 就可以了。</p>
<span id="more"></span>
<h1 id="references">References</h1>
<p><a href="https://blog.csdn.net/q_qman/article/details/96160906">前端
jq 实现中英文切换（i18n 国际化方式，apicloud 打包后也适用）</a> <a
href="https://zhuanlan.zhihu.com/p/359884170">加载本地文件出现跨域解决方案</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>i18n</tag>
        <tag>Live Server</tag>
        <tag>跨域</tag>
      </tags>
  </entry>
  <entry>
    <title>Echarts 柱状图下钻两层</title>
    <url>/2023/11/29/Echarts-%E6%9F%B1%E7%8A%B6%E5%9B%BE%E4%B8%8B%E9%92%BB%E4%B8%A4%E5%B1%82/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="功能">功能</h1>
<p>后台返回数据包含年，月和日，希望实现一个柱状图，当点击年数据时，下钻到月数据，点击月数据时，下钻到日数据。并包含返回功能。</p>
<h1 id="思路">思路</h1>
<p>通过重绘图表的方式实现，实现思路如下：</p>
<ol type="1">
<li>默认显示年数据</li>
<li>当点击年数据柱子时，销毁图例，使用月数据重绘图表，下钻月数据类似</li>
<li>增加一个按钮用来返回上层图表，使用相对定位定位在图表右上方</li>
</ol>
<span id="more"></span>
<h1 id="关键代码">关键代码</h1>
<p>本项目使用 jQuery + zui 实现，以下为关键代码：</p>
<p>index.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;boxall&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 5rem&quot;</span> <span class="attr">style</span>=<span class="string">&quot;position: relative&quot;</span>&gt;</span></span><br><span class="line">  // 柱状图</span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;BatteryReportChart&quot;</span> <span class="attr">style</span>=<span class="string">&quot;height: 4rem; margin-top: 20px&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  // 返回标签</span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-info ring-button&quot;</span> <span class="attr">id</span>=<span class="string">&quot;onBack&quot;</span>&gt;</span>Back<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>css 文件：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.ring-button</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">10%</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">17%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>index.js 文件：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 全局变量，用于保存显示年、月还是日数据柱状图</span></span><br><span class="line"><span class="keyword">let</span> dayMonthYear = <span class="string">&quot;year&quot;</span>;</span><br><span class="line"><span class="comment">// 保存点击的年和月柱子数据，用于向后端请求数据和图表标题显示</span></span><br><span class="line"><span class="keyword">let</span> globalYear = <span class="string">&quot;&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> globalMonth = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 点击返回按钮重绘表格</span></span><br><span class="line">$(<span class="string">&quot;#onBack&quot;</span>).<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (dayMonthYear === <span class="string">&quot;day&quot;</span>) &#123;</span><br><span class="line">    dayMonthYear = <span class="string">&quot;month&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dayMonthYear === <span class="string">&quot;month&quot;</span>) &#123;</span><br><span class="line">    dayMonthYear = <span class="string">&quot;year&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">getChartData</span>(dayMonthYear, globalYear, globalMonth);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getChartData</span>(<span class="params">dayMonthYear, globalYear, globalMonth</span>) &#123;</span><br><span class="line">  <span class="comment">// 该函数根据 dayMonthYear, globalYear, globalMonth 参数向后端请求数据并构造图表需要的 option</span></span><br><span class="line">  <span class="comment">// 具体实现过程省略</span></span><br><span class="line">  <span class="title class_">BatteryReport</span>(option);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 销毁图表并重绘</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">BatteryReport</span>(<span class="params">option</span>) &#123;</span><br><span class="line">  <span class="comment">// 销毁 ECharts 实例</span></span><br><span class="line">  <span class="title class_">BatteryReportChart</span>.<span class="title function_">dispose</span>();</span><br><span class="line">  <span class="title class_">BatteryReportChart</span> = echarts.<span class="title function_">init</span>(</span><br><span class="line">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;BatteryReportChart&quot;</span>)</span><br><span class="line">  );</span><br><span class="line">  <span class="title class_">BatteryReportChart</span>.<span class="title function_">setOption</span>(option);</span><br><span class="line">  <span class="comment">// 图表下钻</span></span><br><span class="line">  <span class="title class_">BatteryReportChart</span>.<span class="title function_">on</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">function</span> (<span class="params">params</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (dayMonthYear === <span class="string">&quot;year&quot;</span>) &#123;</span><br><span class="line">      dayMonthYear = <span class="string">&quot;month&quot;</span>;</span><br><span class="line">      globalYear = params.<span class="property">name</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dayMonthYear === <span class="string">&quot;month&quot;</span>) &#123;</span><br><span class="line">      dayMonthYear = <span class="string">&quot;day&quot;</span>;</span><br><span class="line">      globalMonth = params.<span class="property">name</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">getChartData</span>(dayMonthYear, globalYear, globalMonth);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">BatteryReportChart</span>.<span class="title function_">resize</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="references">References</h1>
<p><a href="https://juejin.cn/post/7092768830983766023">echarts
饼图下钻（下钻+可返回版本）</a> <a
href="https://echarts.apache.org/examples/zh/editor.html?c=bar-drilldown">ECharts
官网下钻一层的示例</a> <a
href="https://www.bilibili.com/video/BV1FY4y1k7y3/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">数据可视化】echarts
数据下钻</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>ECharts</tag>
        <tag>柱状图</tag>
        <tag>下钻</tag>
      </tags>
  </entry>
  <entry>
    <title>合并音频和视频文件</title>
    <url>/2023/11/27/%E5%90%88%E5%B9%B6%E9%9F%B3%E9%A2%91%E5%92%8C%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>今天用暴力猴脚本下载的 youtube
视频音频和视频是分开的，查找了一下解决办法，记录一下：</p>
<ol type="1">
<li>首先，win7 安装
ffmpeg。注意配置环境变量，如果环境变量不生效，最好把用户环境变量也配置一下。</li>
<li>将需要合并的音频和视频文件放在同一个目录下，打开 cmd，输入
<code>ffmpeg -i 1.mp4 -i 2.mp4  -vcodec copy -acodec copy output.mp4</code>
其中，<code>1.mp4</code> 和 <code>2.mp4</code>
为需要合并的文件名，<code>output.mp4</code>
为输出文件名，可任意修改。</li>
<li>执行命令后，合并后的文件保存在当前目录下。</li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>ffmpeg</tag>
      </tags>
  </entry>
  <entry>
    <title>flex 布局</title>
    <url>/2023/12/06/flex-%E5%B8%83%E5%B1%80/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="简介">简介</h1>
<p>FLEXBOX CSS3
中的一种布局模式，它可以帮助开发者更加方便地实现自适应布局和响应式设计。FLEXBOX
基于弹性盒子模型，通过对容器和容器内元素的属性设置来实现灵活的布局。</p>
<p>在 FLEXBOX 中，容器是指设置了 display:flex 或 display:inline-flex
属性的元素，容器内的元素则是指容器的子元素。通过设置容器和容器内元素的属性，可以实现以下功能：</p>
<ol type="1">
<li><p>弹性布局：容器内的元素可以根据容器的大小和方向自动调整位置和大小，从而实现弹性布局。</p></li>
<li><p>对齐方式：可以通过设置 justify-content 和 align-items
属性来实现容器内元素的水平和垂直对齐。</p></li>
<li><p>排列方式：可以通过设置 flex-direction
属性来实现容器内元素的排列方式，包括水平排列和垂直排列。</p></li>
<li><p>元素间距：可以通过设置 justify-content 和 align-items
属性来实现容器内元素的间距和间隔。</p></li>
<li><p>元素排序：可以通过设置 order
属性来实现容器内元素的排序，从而实现元素的前后顺序调整。</p></li>
</ol>
<h1 id="基本概念">基本概念</h1>
<ul>
<li>主轴（main axis）是沿着 flex
元素放置的方向延伸的轴（比如页面上的横向的行、纵向的列）。该轴的开始和结束被称为
main start 和 main end。</li>
<li>交叉轴（cross axis）是垂直于 flex
元素放置方向的轴。该轴的开始和结束被称为 cross start 和 cross end。</li>
<li>设置了 display: flex 的父元素被称之为 flex 容器（flex
container）。</li>
<li>在 flex 容器中表现为弹性的盒子的元素被称之为 flex 项（flex
item）。</li>
</ul>
<img src="/2023/12/06/flex-%E5%B8%83%E5%B1%80/flex_terms.png" class="">
<span id="more"></span>
<h1 id="常见用法">常见用法</h1>
<h2 id="父容器设置">父容器设置</h2>
<h3
id="首先需要选择将哪些元素设置为弹性盒子给些元素的父元素设置">首先，需要选择将哪些元素设置为弹性盒子，给些元素的父元素设置</h3>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">display</span>:flex</span><br><span class="line"><span class="comment">/* 或者 */</span></span><br><span class="line">display:inline-flex</span><br></pre></td></tr></table></figure>
<h3 id="设置主轴的方向">设置主轴的方向</h3>
<ul>
<li>默认主轴方向就是 x 轴方向，水平向右</li>
<li>默认侧轴方向就是 y 轴方向，水平向下</li>
<li>注意： 主轴和侧轴是会变化的，就看 flex-direction
设置谁为主轴，剩下的就是侧轴。而我们的子元素是跟着主轴来排列的</li>
</ul>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex-direction</span>: column;</span><br></pre></td></tr></table></figure>
<h3 id="换行">换行</h3>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex-wrap</span>: wrap;</span><br></pre></td></tr></table></figure>
<h3 id="缩写">缩写</h3>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex-direction</span>: row;</span><br><span class="line"><span class="attribute">flex-wrap</span>: wrap;</span><br></pre></td></tr></table></figure>
<p>等价于</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="attribute">flex-flow</span>: row wrap;</span><br></pre></td></tr></table></figure>
<h3
id="justify-content-设置主轴上的子元素排列方式常用配置如下"><code>justify-content</code>
设置主轴上的子元素排列方式，常用配置如下：</h3>
<ul>
<li>flex-start: 子元素沿主轴起点对齐。</li>
<li>flex-end: 子元素沿主轴终点对齐。</li>
<li>center: 子元素在容器内居中对齐。</li>
<li>space-between:
子元素沿主轴均匀分布，第一个元素与容器起点对齐，最后一个元素与容器终点对齐。</li>
<li>space-around: 子元素沿主轴均匀分布，每个元素周围有相等的空间。</li>
<li>space-evenly：子元素沿主轴均匀分布，每个元素之间和周围的空间相等。</li>
</ul>
<h3
id="align-items-设置侧轴上的子元素排列方式单行子项不换行"><code>align-items</code>
设置侧轴上的子元素排列方式（单行，子项不换行）</h3>
<ul>
<li>stretch：默认值，子元素沿侧轴拉伸以填充容器。</li>
<li>flex-start：子元素沿侧轴起点对齐。</li>
<li>flex-end：子元素沿侧轴终点对齐。</li>
<li>center：子元素在侧轴上居中对齐。</li>
<li>baseline：子元素沿基线对齐。</li>
</ul>
<h3
id="align-content-设置侧轴上的子元素的排列方式多行子项换行"><code>align-content</code>
设置侧轴上的子元素的排列方式（多行，子项换行）</h3>
<ul>
<li>stretch：默认值，子元素沿侧轴拉伸以填充容器。</li>
<li>flex-start：子元素沿侧轴起点对齐。</li>
<li>flex-end：子元素沿侧轴终点对齐。</li>
<li>center：子元素在侧轴上居中对齐。</li>
<li>space-between：子元素沿侧轴均匀分布，第一行子元素与容器起点对齐，最后一行子元素与容器终点对齐，行与行之间相等的空间。</li>
<li>space-around：子元素沿侧轴均匀分布，每一行周围有相等的空间。</li>
<li>space-evenly：子元素沿侧轴均匀分布，每一行之间和周围的空间相等。</li>
</ul>
<h2 id="子项设置">子项设置</h2>
<h3
id="flex-属性定义子项目分配剩余空间用-flex-来表示占多少份数"><code>flex</code>
属性定义子项目分配剩余空间，用 flex 来表示占多少份数</h3>
<p>flex 属性用于定义子项目分配剩余空间的比例，它是
flex-grow，flex-shrink 和 flex-basis 这三个属性的缩写。其中：</p>
<ul>
<li>flex-grow：定义项目的放大比例，默认为
0，即如果存在剩余空间，也不放大。</li>
<li>flex-shrink：定义项目的缩小比例，默认为
1，即如果空间不足，该项目将缩小。</li>
<li>flex-basis：定义项目在分配多余空间之前，占据的主轴空间（主轴方向的大小），默认值为
auto，即元素本来的大小。</li>
</ul>
<h3
id="align-self-控制子项自己在侧轴上的排列方式"><code>align-self</code>
控制子项自己在侧轴上的排列方式</h3>
<p>align-self 属性用于控制子项自己在侧轴上的排列方式，它可以覆盖父容器的
align-items 属性。常用的配置如下：</p>
<ul>
<li>auto：默认值，继承父容器的 align-items 属性。</li>
<li>stretch：子项沿侧轴拉伸以填充容器。</li>
<li>flex-start：子项沿侧轴起点对齐。</li>
<li>flex-end：子项沿侧轴终点对齐。</li>
<li>center：子项在侧轴上居中对齐。</li>
<li>baseline：子项沿基线对齐。</li>
</ul>
<h3 id="order-属性定义项目的排列顺序"><code>order</code>
属性定义项目的排列顺序</h3>
<p>order 属性接受整数值，负数值和小数值。默认值为
0。值越小，项目排列越靠前，值越大，项目排列越靠后。如果两个项目的 order
值相同，则它们按照它们在源代码中出现的顺序排列。</p>
<h1 id="图解-flexbox">图解 FLEXBOX</h1>
<img src="/2023/12/06/flex-%E5%B8%83%E5%B1%80/css-flexbox-poster.png" class="">
<h1 id="references">References</h1>
<p><a
href="https://developer.mozilla.org/zh-CN/docs/Learn/CSS/CSS_layout/Flexbox">弹性盒子</a>
<a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">A
Complete Guide to Flexbox</a> 超级有趣的小游戏：<a
href="https://flexboxfroggy.com/">FLEXBOX FROGGY</a> <a
href="https://scrimba.com/learn/flexbox">Learn Flexbox</a> <a
href="https://www.bilibili.com/video/BV1N54y1i7dG/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">CSS3-flex
布局</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>flex</tag>
        <tag>FLEXBO</tag>
      </tags>
  </entry>
  <entry>
    <title>livp or heic 到 jpeg 格式的批量转换</title>
    <url>/2023/12/18/livp-or-heic-%E5%88%B0-jpeg-%E6%A0%BC%E5%BC%8F%E7%9A%84%E6%89%B9%E9%87%8F%E8%BD%AC%E6%8D%A2/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<ol type="1">
<li>首先将 <code>.livp</code> 格式的文件修改后缀名为
<code>.zip</code>。可以使用一个批处理文件（<code>.bat</code>
文件）来完成这个操作。在任意一个文本编辑器中新建一个文件，输入以下命令：</li>
</ol>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ren</span> *.livp *.zip</span><br></pre></td></tr></table></figure>
<p>然后将这个文件保存为 <code>.bat</code> 格式，例如
<code>rename_to_zip.bat</code>。将这个文件放到需要修改后缀名的文件夹中，双击运行即可。</p>
<ol start="2" type="1">
<li><p>使用 WinRAR 软件批量解压缩 <code>.zip</code>
格式的文件。下载并安装 WinRAR
软件，然后选中需要解压缩的文件夹，右键点击选择“解压到指定文件夹”，选择目标文件夹，点击“确定”即可完成批量解压缩。</p></li>
<li><p>使用 HEIC Utility 软件批量将 <code>.heic</code> 格式的文件转换为
<code>.jpeg</code> 格式。下载并安装 HEIC Utility
软件，打开软件，在菜单栏选择 更多 -&gt; 批量转换，点击右上角的
<code>+</code> 号，选择上一步解压的文件夹里的所有 <code>.heic</code>
格式的文件，在左下角设置输出目录和输出质量，最后点击“开始转换”按钮即可完成批量转换。</p></li>
</ol>
<span id="more"></span>
<h1 id="reference">Reference</h1>
<p><a
href="https://blog.csdn.net/goodgoodstudy___/article/details/125294762">livp到
jpeg 格式的批量转换</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>livp</tag>
        <tag>heic</tag>
        <tag>jpeg</tag>
        <tag>批量转换</tag>
      </tags>
  </entry>
  <entry>
    <title>禁止别人调试自己前端代码的 5 种方法</title>
    <url>/2023/12/14/%E7%A6%81%E6%AD%A2%E5%88%AB%E4%BA%BA%E8%B0%83%E8%AF%95%E8%87%AA%E5%B7%B1%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81%E7%9A%84-5-%E7%A7%8D%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>本文转载自 <a
href="https://mp.weixin.qq.com/s?__biz=Mzk0NTI2NDgxNQ==&amp;mid=2247489707&amp;idx=1&amp;sn=e1c00785af7bb6983ae03229247398a6&amp;chksm=c319596bf46ed07de2de6b9dc540a8c24e6f2d5bfdf39cac9b5f77db3d3e9356f7bac6cc8a1c&amp;token=1211258579&amp;lang=zh_CN#rd">如何禁止别人调试自己的前端代码</a>，此处仅作记录。</p>
<h1 id="无限-debugger">无限 debugger</h1>
<p>前端页面防止调试的方法主要是通过不断 debugger 来疯狂输出断点，因为
debugger 在控制台被打开的时候就会执行。由于程序被 debugger
阻止，所以无法进行断点调试，所以网页的请求也是看不到的。 以下是使用无限
debugger 方式阻止代码调试的示例：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 基础禁止调试代码</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">ban</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">debugger</span>;</span><br><span class="line">    &#125;, <span class="number">50</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="title function_">ban</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>不过，如果仅仅是加上面那么简单的代码，对于一些技术人员而言作用不大。可以通过控制台中的
Deactivate breakpoints 按钮或者使用快捷键 Ctrl + F8 关闭无限
debugger。这种方式虽然能去掉碍眼的 debugger，但是无法通过左侧的行号添加
breakpoint。</p>
<h1 id="禁止断点的对策">禁止断点的对策</h1>
<p>如果将 setInterval 中的代码写在一行，就能禁止用户断点，即使添加
logpoint 为 false
也无用。当然即使有些人想到用左下角的格式化代码，将其变成多行也是没用的。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">ban</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">debugger</span>;</span><br><span class="line">    &#125;, <span class="number">50</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="title function_">ban</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h1 id="忽略执行的代码">忽略执行的代码</h1>
<p>可以通过添加 add script ignore list
需要忽略执行代码行或文件，也可以达到禁止无限 debugger。
不过，我们可以通过将 debugger 改写成 Function(“debugger”)();
的形式来应对，Function 构造器生成的 debugger
会在每一次执行时开启一个临时 js
文件。当然使用的时候，为了更加的安全，最好使用加密后的脚本。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 加密前</span></span><br><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">ban</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="title class_">Function</span>(<span class="string">&quot;debugger&quot;</span>)();</span><br><span class="line">    &#125;, <span class="number">50</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="title function_">ban</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;&#125;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 加密后</span></span><br><span class="line"><span class="built_in">eval</span>(</span><br><span class="line">  (<span class="keyword">function</span> (<span class="params">c, g, a, b, d, e</span>) &#123;</span><br><span class="line">    d = <span class="title class_">String</span>;</span><br><span class="line">    <span class="keyword">if</span> (!<span class="string">&quot;&quot;</span>.<span class="title function_">replace</span>(<span class="regexp">/^/</span>, <span class="title class_">String</span>)) &#123;</span><br><span class="line">      <span class="keyword">for</span> (; a--; ) e[a] = b[a] || a;</span><br><span class="line">      b = [</span><br><span class="line">        <span class="keyword">function</span> (<span class="params">f</span>) &#123;</span><br><span class="line">          <span class="keyword">return</span> e[f];</span><br><span class="line">        &#125;,</span><br><span class="line">      ];</span><br><span class="line">      d = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;w+&quot;</span>;</span><br><span class="line">      &#125;;</span><br><span class="line">      a = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (; a--; )</span><br><span class="line">      b[a] &amp;&amp; (c = c.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;\b&quot;</span> + <span class="title function_">d</span>(a) + <span class="string">&quot;\b&quot;</span>, <span class="string">&quot;g&quot;</span>), b[a]));</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">  &#125;)(</span><br><span class="line">    <span class="string">&#x27;(()=&gt;&#123;1 0()&#123;2(()=&gt;&#123;3(&quot;4&quot;)()&#125;,5)&#125;6&#123;0()&#125;7(8)&#123;&#125;&#125;)();&#x27;</span>,</span><br><span class="line">    <span class="number">9</span>,</span><br><span class="line">    <span class="number">9</span>,</span><br><span class="line">    <span class="string">&quot;block function setInterval Function debugger 50 try catch err&quot;</span>.<span class="title function_">split</span>(<span class="string">&quot; &quot;</span>),</span><br><span class="line">    <span class="number">0</span>,</span><br><span class="line">    &#123;&#125;</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h1 id="终极增强防调试">终极增强防调试</h1>
<p>为了让自己写出来的代码更加的晦涩难懂，需要对上面的代码再优化一下：将
Function(‘debugger’).call() 改成 (function(){return false;})<a
href="debugger">‘constructor’</a>[‘call’]();
并且添加条件，当窗口外部宽高和内部宽高的差值大于一定的值 ，我把 body
里的内容换成指定内容，当然使用的时候，为了更加的安全，最好加密后再使用。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">block</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">outerHeight</span> - <span class="variable language_">window</span>.<span class="property">innerHeight</span> &gt; <span class="number">200</span> ||</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">outerWidth</span> - <span class="variable language_">window</span>.<span class="property">innerWidth</span> &gt; <span class="number">200</span></span><br><span class="line">    ) &#123;</span><br><span class="line">      <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">innerHTML</span> = <span class="string">&quot;检测到非法调试,请关闭后刷新重试!&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;)</span><br><span class="line">        [<span class="string">&quot;constructor&quot;</span>](<span class="string">&quot;debugger&quot;</span>)</span><br><span class="line">        [<span class="string">&quot;call&quot;</span>]();</span><br><span class="line">    &#125;, <span class="number">50</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="title function_">block</span>();</span><br><span class="line">  &#125; <span class="keyword">catch</span> (err) &#123;&#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<h1 id="其他防调试技术">其他防调试技术</h1>
<p>除此之外，我们还可以通过【禁止右键菜单】、【禁止 F12
快捷键】、【检测开发者工具】等手段来禁止调试。</p>
<p>##　禁止右键菜单</p>
<p>禁止右键菜单是目前比较常见的一种禁止调试的方法，因为浏览器默认右键菜单是可以调出开发者工具的。可以通过以下
JS 代码实现：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">oncontextmenu</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这样一来，当用户在富文本编辑器的区域内右键时，就不会弹出菜单，从而避免了用户调出开发者工具的情况。</p>
<h2 id="禁止-f12-快捷键">禁止 F12 快捷键</h2>
<p>F12
快捷键是打开开发者工具的常用快捷键，禁止这个快捷键也是一种禁止调试的方法。可以通过以下
JS 代码实现：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="property">onkeydown</span> = <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (e.<span class="property">keyCode</span> === <span class="number">123</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这样一来，当用户按下 F12
键时，就会被拦截，从而避免了用户打开开发者工具的情况。</p>
<h2 id="检测开发者工具">检测开发者工具</h2>
<p>还有一种方法是通过检测开发者工具是否打开来实现禁止调试的目的，可以通过以下
JS 代码实现：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="variable language_">console</span>.<span class="property">clear</span> !== <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">    location.<span class="title function_">reload</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>
<p>这段代码会每隔 1
秒检测一次当前页面是否打开了开发者工具，如果发现开发者工具已经打开，则会刷新当前页面，从而避免用户使用开发者工具对页面进行调试。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>调试</tag>
      </tags>
  </entry>
  <entry>
    <title>2024 年单词量测试</title>
    <url>/2024/01/02/2024-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>去年测过，忘记记录结果了，好像是两千多还是三千多，今年打算每三个月测试一下，并记录结果，以检验学习成果。
测试网站 <a
href="https://preply.com/en/learn/english/test-your-vocab">Test your
English vocabulary</a> 20240102 测试结果： <img src="/2024/01/02/2024-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/1.png" class=""></p>
<span id="more"></span>
<p>20240301 测试结果： <img src="/2024/01/02/2024-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/2.png" class=""> 20240603 测试结果： <img src="/2024/01/02/2024-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/3.png" class="">
20240902 测试结果： <img src="/2024/01/02/2024-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/4.png" class=""> 20241231 测试结果： <img src="/2024/01/02/2024-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/5.png" class=""></p>
<p>2024 年完美结束，英语听、读方面都得到了很大的进步。2025
年要继续努力，争取词汇量突破 10000。并且提高自己的口语能力。</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>英语</tag>
        <tag>单词量</tag>
      </tags>
  </entry>
  <entry>
    <title>win7 修改系统环境变量 PATH 批处理脚本</title>
    <url>/2024/01/04/win7-%E4%BF%AE%E6%94%B9%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F-PATH-%E6%89%B9%E5%A4%84%E7%90%86%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="node-版本切换">node 版本切换</h1>
<p>事情的起因是办公电脑是 win7 操作系统，不支持 node
最新版本，根据网上教程安装了 node 18 版本，但是老项目用的是 node 13
版本，需要在这两个版本之间来回切换，需要修改系统环境变量。之前是手动点击计算机-&gt;属性-&gt;高级系统设置-&gt;环境变量，找到
Path 变量，点击编辑，在变量值中添加 node 18 或 13
安装路径，然后保存。太麻烦。</p>
<p>昨天突然想到可以用 bat 来自动执行，求助了
GPT，当当当，只需要点击对应的脚本就可以切换到对应的版本！脚本如下：</p>
<p>切换 node 13 点击下面这个脚本：</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line">setx <span class="built_in">PATH</span> &quot;……D:\ProgramFiles\v13&quot; /m</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> Node V13</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>切换 node 18 点击下面这个脚本：</p>
<figure class="highlight bat"><table><tr><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"></span><br><span class="line">setx <span class="built_in">PATH</span> &quot;……D:\ProgramFiles\v18&quot; /m</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> Node V18</span><br></pre></td></tr></table></figure>
<p>省略号其他路径配置，根据自己电脑情况修改即可。</p>
<h1 id="hexo-博客配置">hexo 博客配置</h1>
<p>在 package.json 文件中添加如下代码：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;build&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo generate&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;clean&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;deploy&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo deploy&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;server&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo server&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;localhost&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean &amp; hexo g &amp; hexo s&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;prod&quot;</span><span class="punctuation">:</span> <span class="string">&quot;hexo clean &amp; hexo g &amp; hexo d&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure>
<p>然后执行 <code>npm run prod</code> 就可以直接部署了。</p>
<h1 id="reference">Reference</h1>
<p><a href="https://blog.zhheo.com/p/ae839a7c.html">通过 alias
自定义终端命令实现 Hexo 博客的高效使用</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>win7</tag>
        <tag>批处理脚本</tag>
        <tag>bat</tag>
        <tag>环境变量</tag>
        <tag>PATH</tag>
      </tags>
  </entry>
  <entry>
    <title>2024 年度目标</title>
    <url>/2024/01/02/2024-%E5%B9%B4%E5%BA%A6%E7%9B%AE%E6%A0%87/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>2024
年希望自己保持积极乐观的心态，多学习，多运动，多阅读，多思考，多实践，多总结。
管理好自己的情绪，停止内耗，全力以赴追求自己想要的生活！</p>
<ul class="task-list">
<li><label><input type="checkbox" />1.通过软考高项</label>
<ul class="task-list">
<li><label><input
type="checkbox" />按照课程进度听课并做练习题</label></li>
</ul></li>
<li><label><input type="checkbox" />2.前端技术精进</label>
<ul class="task-list">
<li><label><input type="checkbox" />Vue 3 项目实战</label></li>
<li><label><input type="checkbox" />React 18 项目实战</label></li>
<li><label><input type="checkbox" checked="" />uni-app
项目实战</label></li>
<li><label><input type="checkbox" />小程序项目实战</label></li>
<li><label><input type="checkbox" />ts 项目实战</label></li>
</ul></li>
<li><label><input type="checkbox"
checked="" />3.提高词汇量，坚持英文原版书籍阅读</label>
<ul class="task-list">
<li><label><input type="checkbox"
checked="" />每天背单词打卡</label></li>
<li><label><input type="checkbox"
checked="" />每天英语听力打卡</label></li>
<li><label><input type="checkbox"
checked="" />阅读英文原版书籍半小时</label></li>
<li><label><input type="checkbox" checked="" />每三个月测试词汇量
<span id="more"></span></label></li>
</ul></li>
<li><label><input type="checkbox" />4.阅读</label>
<ul class="task-list">
<li><label><input
type="checkbox" />每月至少阅读两本书（一本技术书籍一本兴趣爱好）</label></li>
<li><label><input type="checkbox" />年度目标读完 30 本书</label></li>
</ul></li>
<li><label><input type="checkbox" />5.用心陪伴家人和朋友</label>
<ul class="task-list">
<li><label><input
type="checkbox" />平时多给爸妈打电话，回家一趟看望父母</label></li>
<li><label><input type="checkbox"
checked="" />孩子大了可以一起去旅游了，每年安排一到两次长途旅游，周末可以在周边城市游玩</label></li>
<li><label><input type="checkbox"
checked="" />坚持给孩子读绘本，英语启蒙</label></li>
</ul></li>
<li><label><input
type="checkbox" />6.坚持锻炼身体，带着孩子们一起运动</label>
<ul class="task-list">
<li><label><input
type="checkbox" />平时晚上回家可以带孩子一起跳操、跳舞，练习敏捷梯</label></li>
<li><label><input
type="checkbox" />周末可以一起爬山，徒步，打球，夏天可以去游泳</label></li>
</ul></li>
</ul>
<hr />
<p>2024 年总结：
感觉今年过的特别快，一晃儿又到了尾声。不知道为什么，有了孩子以后，感觉时间很不够用。前几天在朋友圈看到一个开民宿的老板说了一句话：</p>
<blockquote>
<p>“平庸者最大的问题是缺乏独立思考能力，第二个特征就是怕，怕麻烦怕风险、怕累怕忙怕苦，一个怕字让自己永远原地踏步，第三个特征就是脑子懒，根本不会深度思考，只能用身体勤奋代替脑袋的勤奋，没有方向的勤奋只会让你停留在原地，甚至被其他人取而代之，因为人才对于企业更重要，而不是勤奋的普通人。”</p>
</blockquote>
<p>其中“第二个特征就是怕，怕麻烦怕风险、怕累怕忙怕苦”这句话特别触动我，我感觉自己做事情就有点前怕狼后怕虎，比如说带孩子出门玩怕酒店选的不好，怕孩子一直要抱导致腰疼等。怕换了工作离家远，通勤时间长等，因而错失很多机会。还有就是总爱给自己找借口拖延，比如说想跳槽找工作，然后没有准备高项考试，结果高项考试改版了，错过了考试时间。工作也没换成。2025
年一定要改进这两个缺点，不怕麻烦，想到就做，勇敢冲！</p>
<p>复盘下年终定的几个目标：</p>
<p>1.现在想不起来为什么五月份没有准备高项考试了。看了每日工作笔记，可能是因为自己今年想换工作，所以把时间花在了面试刷题上。当时计划上半年换工作，
11 月份再准备高项考试，结果高项在 2024
年改版了，改成一年只考一次了。工作也没有换成。虽然下半年准备了系统架构师的考试，也没有通过。总结原因，自己在看视频上花了太多时间，应该多花时间刷题，这样才能记忆深刻。</p>
<p>所以明年的规划是上半年准备高项，下半年准备系统架构师。明年还准备考教师资格证，3
月份要考三门，考完教资再准备高项不知道来不来得及。</p>
<p>其实现在的工作什么都好，就是有些不对口，待遇太低。但是工作难度不高，个人时间比较多。所以今年不打算将换工作放在首位了，后续主要将精力放在考证上，搞搞副业也是不错的。对于本职工作要认真对待，提升业务能力还要放在首位，后面说不定还有新的机会。</p>
<p>今年唯一比较满意的是普通话等级考试达到了自己的预期，二级甲等。小小开心一下，哈哈。</p>
<p>2.前端技术这块 Vue 3、React 18 和 ts 这块都看了教程，实战只做了一个
uni-app 的小程序，Vue3 项目 12
月才开始做，还没有做完。不实际做项目，记忆就不深刻，看了忘忘了看。总结下自己的项目输出还是太少，导致很多知识点学了就忘。2025
年一定要以项目为导向，每个技术都要输出项目，手敲代码，并在 GitHub
上提交。</p>
<p>3.今年英语这块倒是完成的不错，坚持每日背单词，每日英文阅读打卡，每日听力打卡。阅读和听力都得到了极大的提升，现在可以无痛看英文
MOOC 视频了，也算是实现了多年前的愿望。明年的目标是突破单词量
10000，同时提高自己的口语水平。</p>
<p>4.英文阅读完成的还不错，今年完成了 49
本原版书的阅读。前期读的都是童书，词汇量上来以后直接扇贝阅读每日 5
篇全部读完，难度从高考到雅思都有。中文书籍阅读 14
本。强推《灿烂千阳》、《杀死一只知更鸟》和《一个叫维欧的男人决定去死》，这三本看得我眼泪哗哗的流。《夜晚的潜水艇》也非常非常好看。微信读书排行榜神作的书都非常不错。我太爱看书了，由于备考、刷题，现在看书也变成了一种奢侈的享受。</p>
<p>5.今年十一带孩子们回老家了一趟，家里面就是舒服，有各种好吃的，吃的还便宜。孩子们在一起玩的也开心。平时周末也带会孩子去公园啊，海边玩。等妹妹再大一点，就可以去更远一点的地方了。</p>
<p>我家姐姐非常爱看书，有时候早晨起床梳头发都要拿着点读笔在那里读。最近迷上西游记了，老是说我们一家都当蜘蛛精，我内心：你是不是对蜘蛛精有什么误解？哈哈哈哈。妹妹在姐姐的影响下，也喜欢拿本书在那里翻呀翻。我从小就喜欢读书，阅读的好处太多了。所以我尽量满足孩子们的阅读需求，晚上回去下班再晚也要回家给她读书，讲的真是口干舌燥。今年中文阅读
100+ 本，孩子还不识字，主要以绘本阅读为主。英文阅读 96
天，还是太少了。明年英语阅读至少要打卡 300 天。</p>
<p>6.十二月才开始跑步，每周四跑，每次 30
分钟。以前总觉得要多陪伴孩子，回去就围着孩子转，导致没有一点自己的时间。长期如此自己很累很累，难免有坏情绪会发泄出来。我不想像我的母亲那样，变成一个怨妇（虽然我很爱很爱我的妈妈，但是事实也确实如此，我知道她有她的难处，尤其是自己当了妈妈以后更加体谅她的不容易）。所以我觉得要对自己好一点，多爱护自己，只有自己成为一个快乐的妈妈，才能更好的爱孩子。跑步后首先是小腹平坦了，皮肤状态也得到了极大的改善，其次运动完超级开心。明年还要坚持锻炼，有一个好身体才能更加的专注。</p>
<p>明年也要更多的记录呀，就像记账一样，如果不记账，都不知道钱花到哪里去了。2025
开启我的时光记录之旅吧。加油！</p>
<p>附录： 2024 年英文阅读记录： <img src="/2024/01/02/2024-%E5%B9%B4%E5%BA%A6%E7%9B%AE%E6%A0%87/1.png" class=""> 2024
年扇贝打卡、每日英语听力打卡记录： <img src="/2024/01/02/2024-%E5%B9%B4%E5%BA%A6%E7%9B%AE%E6%A0%87/5.png" class=""> 2024 年中文阅读记录：
<img src="/2024/01/02/2024-%E5%B9%B4%E5%BA%A6%E7%9B%AE%E6%A0%87/2.jpg" class=""> 2024 年普通话等级考试记录 <img src="/2024/01/02/2024-%E5%B9%B4%E5%BA%A6%E7%9B%AE%E6%A0%87/3.png" class=""> 2024
英文绘本阅读打卡记录： <img src="/2024/01/02/2024-%E5%B9%B4%E5%BA%A6%E7%9B%AE%E6%A0%87/4.png" class=""></p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>年度目标</tag>
      </tags>
  </entry>
  <entry>
    <title>十大管理输入输出工具和技术思维导图</title>
    <url>/2024/01/24/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8A%80%E6%9C%AF%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>整理了软考高级信息系统项目管理师第四版教材，十大管理的输入输出工具与技术的思维导图，论文必考，思维导图容易阅读与记忆。</p>
<h1 id="整合管理">整合管理</h1>
<img src="/2024/01/24/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8A%80%E6%9C%AF%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/1.%E6%95%B4%E5%90%88%E7%AE%A1%E7%90%86.png" class="">
<span id="more"></span>
<h1 id="范围管理">范围管理</h1>
<img src="/2024/01/24/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8A%80%E6%9C%AF%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/2.%E8%8C%83%E5%9B%B4%E7%AE%A1%E7%90%86.png" class="">
<h1 id="进度管理">进度管理</h1>
<img src="/2024/01/24/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8A%80%E6%9C%AF%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/3.%E8%BF%9B%E5%BA%A6%E7%AE%A1%E7%90%86.png" class="">
<h1 id="成本管理">成本管理</h1>
<img src="/2024/01/24/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8A%80%E6%9C%AF%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/4.%E6%88%90%E6%9C%AC%E7%AE%A1%E7%90%86.png" class="">
<h1 id="质量管理">质量管理</h1>
<img src="/2024/01/24/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8A%80%E6%9C%AF%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/5.%E8%B4%A8%E9%87%8F%E7%AE%A1%E7%90%86.png" class="">
<h1 id="资源管理">资源管理</h1>
<img src="/2024/01/24/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8A%80%E6%9C%AF%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/6.%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86.png" class="">
<h1 id="沟通管理">沟通管理</h1>
<img src="/2024/01/24/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8A%80%E6%9C%AF%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/7.%E6%B2%9F%E9%80%9A%E7%AE%A1%E7%90%86.png" class="">
<h1 id="风险管理">风险管理</h1>
<img src="/2024/01/24/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8A%80%E6%9C%AF%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/8.%E9%A3%8E%E9%99%A9%E7%AE%A1%E7%90%86.png" class="">
<h1 id="采购管理">采购管理</h1>
<img src="/2024/01/24/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8A%80%E6%9C%AF%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/9.%E9%87%87%E8%B4%AD%E7%AE%A1%E7%90%86.png" class="">
<h1 id="干系人管理">干系人管理</h1>
<img src="/2024/01/24/%E5%8D%81%E5%A4%A7%E7%AE%A1%E7%90%86%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%B7%A5%E5%85%B7%E5%92%8C%E6%8A%80%E6%9C%AF%E6%80%9D%E7%BB%B4%E5%AF%BC%E5%9B%BE/10.%E5%B9%B2%E7%B3%BB%E4%BA%BA%E7%AE%A1%E7%90%86.png" class="">
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>思维导图</tag>
        <tag>信息系统项目管理师</tag>
        <tag>十大管理</tag>
        <tag>输入输出工具与技术</tag>
      </tags>
  </entry>
  <entry>
    <title>搜索技术总结</title>
    <url>/2024/01/04/%E6%90%9C%E7%B4%A2%E6%8A%80%E6%9C%AF%E6%80%BB%E7%BB%93/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>你想做的事情，99.99%
被人都做过，而且做的比你好。你要做的就是，搜到它，学习它，利用它，避开它，超过它。</p>
<h1 id="可运用搜索语法提升效率">可运用搜索语法提升效率:</h1>
<pre><code>(1) 限定关键词:用双引号&quot;&quot;包裹
(2) 限定标题:intitle
(3) 限定内容:intext
(4) 限定网址:inurl
(5) 限定网站:site
(6) 限定图片大小:imagesize
(7) 限定文件类型:filetype</code></pre>
<h1 id="寻找类似网站">寻找类似网站</h1>
<p><a href="https://www.similarsites.com/">similarsites</a></p>
<h1 id="视频创作用到的网站">视频创作用到的网站</h1>
<h2 id="视频素材">视频素材</h2>
<span id="more"></span>
<p>可以用 google 这样搜：best sites for free stock videos<br />
免费正版高清视频素材库：<a href="https://pixabay.com/">pixabay</a><br />
Free stock video footage：<a
href="https://www.videvo.net/">videvo</a><br />
Free assets for your next video project：<a
href="https://mixkit.co/">mixkit</a></p>
<p>youtube 视频下载技巧： 在想要下载的视频 url 地址栏 youtube 前面输入
9x，直接跳转到 <a href="https://9xbuddy.in/">9xbuddy</a> 网站下载</p>
<h2 id="音频素材">音频素材</h2>
<p>可以用 google 这样搜：best sites for free bgm</p>
<h2 id="图片素材">图片素材</h2>
<p>The best free stock photos, royalty free images &amp; videos shared
by creators：<a href="https://www.pexels.com/">pexels</a><br />
<a href="https://unsplash.com/">Unsplash</a><br />
<a href="https://www.gettyimages.com/">gettyimages</a><br />
<a
href="https://steptodown.com/getty-images-downloader/">GettyImages Downloader</a></p>
<p>gif 动图这样搜：best gif sites</p>
<h1 id="ppt-相关">ppt 相关</h1>
<p><a href="https://www.islide.cc/">islide</a><br />
<a href="https://www.canva.com/">canva</a></p>
<h1 id="搜索类似的软件">搜索类似的软件</h1>
<p><a href="https://alternativeto.net/">alternativeto</a></p>
<h1 id="reference">Reference</h1>
<p><a
href="https://www.youtube.com/watch?v=tiN6T1LewmQ&amp;t=2440s&amp;ab_channel=%E6%AA%80%E4%B8%9C%E4%B8%9C%C2%B7Tango">搜索技术，普通人变强的唯一外挂。全套详细宝藏教程~</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>搜索</tag>
      </tags>
  </entry>
  <entry>
    <title>英语启蒙资源汇总</title>
    <url>/2024/05/13/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="我的启蒙方法">我的启蒙方法</h1>
<p>用 <code>绘本阅读</code> APP 阅读英语分级，目前在读牛津树
1，后面计划把同级别（RAZ、海尼曼、红火箭等）的都刷一遍跳第二级别，每天早晨起床看十分钟英文动画，有时间就听看过的绘本磨耳朵。
以下是一些英语启蒙资源，供大家参考。</p>
<h1 id="小程序">小程序</h1>
<p>微信小程序搜索对应的小程序名称即可获取。</p>
<h2 id="分级阅读助手">分级阅读助手</h2>
<p>可以查询牛津树、RAZ、红火箭和海尼曼，不同级别之间的对应关系，便于横向扩展。
<img src="/2024/05/13/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/1.jpg" class="" width="200" height="400"></p>
<span id="more"></span>
<h2 id="绘本阅读">绘本阅读</h2>
<p>英语绘本资源 7000+，中文绘本
1700+。包含分级阅读、桥梁书、章节书，绘本阅读，这一个小程序就够了，也有
APP。目前推广期，分享可以送会员。
里面的英语启蒙方法建议一定要读一下，按照这个方法基本就没错了，然后就是长期的坚持。
<img src="/2024/05/13/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/2.jpg" class="" width="200" height="400"> <img src="/2024/05/13/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/3.jpg" class="" width="200" height="400"> <img src="/2024/05/13/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/4.jpg" class="" width="200" height="400"> <img src="/2024/05/13/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/5.jpg" class="" width="200" height="400"></p>
<h1 id="公众号">公众号</h1>
<h2 id="一起攀过的山">一起攀过的山</h2>
<p>精选国外英语原版儿童杂志、绘本、文学、科学，以及各类英语学习资料等进行分享，资源齐全，会不断地更新。
一般都存放在百度网盘。点击文末：阅读原文，直接下载。因微信自动回复限制，所有资料的链接保留
7 天，如果不能及时保存，可以通过转发或者赞赏获得过期资源。</p>
<img src="/2024/05/13/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/6.jpg" class="" width="200" height="400">
<h1 id="app">APP</h1>
<h2 id="khan-kids">Khan Kids</h2>
<p>大名鼎鼎的可汗学院为 2 到 8
岁孩子们提供的教育资源，包括动画、游戏、课程、测验等，全部免费，强烈推荐！</p>
<img src="/2024/05/13/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/7.png" class="" width="400" height="200">
<h2 id="盖世小宝">盖世小宝</h2>
<p>分龄设计，适合看动画，磨耳朵。部分资源 VIP 可用。</p>
<img src="/2024/05/13/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/8.png" class="" width="200" height="400">
<h2 id="大象英语绘本">大象英语绘本</h2>
<p>英语分级阅读软件，与上面的<code>绘本阅读</code>类似，但是资源没有上面多，重在年费便宜，会员推荐咸鱼看看，会有意外的惊喜。</p>
<img src="/2024/05/13/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/9.jpg" class="" width="400" height="200">
<h2 id="小小优趣">小小优趣</h2>
<p>热门中英语动画宝库，覆盖全球精选 7000 +
的中英语启蒙动画，英文动画片全部原版引进！高清画质 + 超棒音质 +
正版翻译，带给孩子超棒的视听感受！</p>
<img src="/2024/05/13/%E8%8B%B1%E8%AF%AD%E5%90%AF%E8%92%99%E8%B5%84%E6%BA%90%E6%B1%87%E6%80%BB/10.png" class="" width="200" height="400">
<h1 id="百度网盘">百度网盘</h1>
<p>主要是我自己收集的一些英语启蒙资源，有需要的可以加我获取哦~</p>
]]></content>
      <categories>
        <category>育儿</category>
      </categories>
      <tags>
        <tag>英语启蒙</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo 部署博客 github 报错 Connection time out 的解决办法</title>
    <url>/2024/01/24/hexo-%E9%83%A8%E7%BD%B2%E5%8D%9A%E5%AE%A2-github-%E6%8A%A5%E9%94%99-Connection-time-out-%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>今天在部署 hexo 博客时，发现 github 报错 Connection time
out，查了下资料，解决办法如下：</p>
<ol type="1">
<li>在 Git Bash 中输入：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh -T -p 443 git@ssh.github.com</span><br></pre></td></tr></table></figure>
<p>如果看到以下提示信息 ① 表示可用：</p>
<blockquote>
<p>Hi toypipi! You’ve successfully authenticated, but GitHub does not
provide shell access.</p>
</blockquote>
<ol start="2" type="1">
<li>在 Git Bash 中输入 <code>vim ~/.ssh/config</code>,
并添加以下内容：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Host github.com</span><br><span class="line">Hostname ssh.github.com</span><br><span class="line">Port 443</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<ol start="3" type="1">
<li><p>再次测试 <code>ssh -T git@github.com</code>，如果看到上述提示信息
①，表明配置成功。</p></li>
<li><p>最后部署博客，成功！</p></li>
</ol>
<h1 id="reference">Reference</h1>
<p><a href="https://www.jianshu.com/p/c3aac5024877">解决 git-ssh:
connect to host github.com port 22: Connection timed out</a> <a
href="https://blog.csdn.net/YR_112233/article/details/122436258">连接
github 报错“ssh: connect to host github.com port 22: Connection timed
out”</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo 部署</tag>
        <tag>github 连接超时</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo 增加脚注功能</title>
    <url>/2024/05/10/hexo-%E5%A2%9E%E5%8A%A0%E8%84%9A%E6%B3%A8%E5%8A%9F%E8%83%BD/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>1.打开 hexo 官方插件页面 <a
href="https://hexo.io/plugins/">Plugins</a><br />
2.搜索 <code>footnotes</code> 并安装 <a
href="https://github.com/kchen0x/hexo-reference">hexo-reference</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-reference --save</span><br></pre></td></tr></table></figure>
<p>配置根目录 <code>_config.yml</code> 文件，新增一下内容：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">plugins:</span><br><span class="line">  - hexo-reference</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>3.效果</p>
<p>鼠标移动到数字<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="这里是脚注内容
">[1]</span></a></sup>上，即可显示脚注内容。</p>
<h1 id="注意事项">注意事项</h1>
<ol type="1">
<li>脚注内容不能包含 <code>""</code> 符号，否则会报错。</li>
</ol>
<h1 id="参考文档">参考文档</h1>
<p><a href="https://kchen.cc/2016/11/10/footnotes-in-hexo/#fnref:4">Hexo
里的脚注插件</a></p>
<h1 id="脚注">脚注</h1>
<div id="footnotes">
<hr>
<div id="footnotelist">
<ol style="list-style: none; padding-left: 0; margin-left: 40px">
<li id="fn:1">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">这里是脚注内容<a href="#fnref:1" rev="footnote">
↩︎</a></span>
</li>
</ol>
</div>
</div>
</div>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>脚注</tag>
        <tag>footnote</tag>
      </tags>
  </entry>
  <entry>
    <title>自定义 VSCode Snippets</title>
    <url>/2024/05/16/%E8%87%AA%E5%AE%9A%E4%B9%89-VSCode-Snippets/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>我的博客使用 Hexo
生成，博文里面的图片地址是相对地址本地引用，使用标签插件的语法引入，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 本地图片资源，限制图片尺寸</span><br><span class="line">&#123;% asset_img image.jpg 200 400 %&#125;</span><br></pre></td></tr></table></figure>
<p>每次输入有点麻烦，可以借助 VSCode Snippets 实现更加快捷的输入。</p>
<p>具体使用方法如下：</p>
<ol type="1">
<li>打开
VSCode，点击<code>File</code>菜单，选择<code>Preferences</code>，然后点击<code>Configure User Snippets</code>。</li>
<li>输入<code>Markdown</code>，点击回车。</li>
<li>在弹出的窗口中，添加一个新的 snippets，如下： <span id="more"></span></li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;img&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;img&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;body&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="string">&quot;&#123;% asset_img $&#123;0&#125; %&#125;&quot;</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;img&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line"><span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line"> <span class="attr">&quot;prefix&quot;</span><span class="punctuation">:</span> <span class="string">&quot;code&quot;</span><span class="punctuation">,</span>  <span class="comment">// 触发词</span></span><br><span class="line"> <span class="attr">&quot;body&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span>  <span class="comment">// 补全内容</span></span><br><span class="line">   <span class="string">&quot;```js&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="string">&quot;$1&quot;</span><span class="punctuation">,</span>  <span class="comment">// 光标停留位置</span></span><br><span class="line">    <span class="string">&quot;```&quot;</span></span><br><span class="line"> <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line"> <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Add js code block&quot;</span>  <span class="comment">// 注释</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<ol start="4" type="1">
<li>打开 VSCode，点击 <code>File</code> 菜单，选择
<code>Preferences</code>，然后点击
<code>Settings</code>，点击右上角分页左边的按钮
<code>Open Settings(JSON)</code>，输入如下文字：</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;[markdown]&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;editor.quickSuggestions&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<ol start="5" type="1">
<li>保存，然后在博文里面输入<code>img</code>，即可自动补全。</li>
</ol>
<h1 id="参考文档">参考文档</h1>
<p><a
href="https://code.visualstudio.com/docs/editor/userdefinedsnippets#_create-your-own-snippets">Snippets
in Visual Studio Code</a> <a
href="https://snippet-generator.app/?description=&amp;tabtrigger=&amp;snippet=&amp;mode=vscode">snippet-generator</a>
<a href="https://juejin.cn/post/6844904089680085006">VSCode 设置
Markdown 自定义补全</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>VSCode Snippets</tag>
        <tag>markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>OBS Failed to open NVENC Codec: Function not implemented</title>
    <url>/2024/05/16/OBS-Failed-to-open-NVENC-Codec-Function-not-implemented/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>今天打算开始我的视频剪辑之旅，首先需要下载一个 win7 支持的 OBS
版本，别问为什么是 win7，问就是公司电脑……申请新电脑及装系统贼麻烦
o(╥﹏╥)o<br />
我下载的是<code>OBS-Studio-27.2.4.exe</code>
版本，如果找不到可以留言获取哦~</p>
<p>安装完成后打开软件开始录制，发现软件报错：</p>
<img src="/2024/05/16/OBS-Failed-to-open-NVENC-Codec-Function-not-implemented/1.png" class="">
<span id="more"></span>
<p>google 一下你就知道 😁 第一条就是解决办法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. Open OBS</span><br><span class="line">2. Click Settings in the lower right.</span><br><span class="line">3. Click Output, then look for the &quot;Recording&quot; box.</span><br><span class="line">4. Click &quot;Encoder&quot; and switch it to Software instead of NVENC, then apply.</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>大功告成 🎉</p>
<h1 id="参考文档">参考文档</h1>
<p><a
href="https://obsproject.com/forum/threads/obs-failed-to-open-nvenc-codec-function-not-implemented.124430/">OBS
Failed to open NVENC Codec: Function not implemented</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>OBS</tag>
        <tag>NVENC Codec</tag>
      </tags>
  </entry>
  <entry>
    <title>《从不会说话到演讲高手》读书笔记</title>
    <url>/2024/05/16/%E4%BB%8E%E4%B8%8D%E4%BC%9A%E8%AF%B4%E8%AF%9D%E5%88%B0%E6%BC%94%E8%AE%B2%E9%AB%98%E6%89%8B-%E8%AF%BB%E5%90%8E%E6%84%9F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<img src="/2024/05/16/%E4%BB%8E%E4%B8%8D%E4%BC%9A%E8%AF%B4%E8%AF%9D%E5%88%B0%E6%BC%94%E8%AE%B2%E9%AB%98%E6%89%8B-%E8%AF%BB%E5%90%8E%E6%84%9F/1.jpg" class="" width="400" height="400">
<p>本书适合所有 “不会说话”
且渴望改变自我的读者。说话是一门艺术，同一件事，通过不同的表达方式，结果可能截然不同。</p>
<p>特别是在职场中，光会做事而不会表达，即使做得再好，领导也难以看到你的成绩，功劳可能被他人抢走，最终只能默默承受委屈。</p>
<p>尽管本书篇幅不大，但涵盖了各种演讲场景，并提供了具体的练习方法。以下是对我启发最深的几个知识点：</p>
<span id="more"></span>
<ul>
<li>你想成为谁，就像谁那样思考与表达。</li>
<li>把每一条微信语音和每一通电话都当做一场小的演讲，像对方那样去思考，随时随地训练自己的口语表达能力语言整理能力。在微信聊天中把自己置顶，然后给自己发语音。</li>
<li>保持社群活跃度的三个秘诀：
<ul>
<li>① 要让成员有存在感，有同频发声的伙伴；</li>
<li>② 社群要提供实用的内容干活；</li>
<li>③ 社群要提供人脉资源和链接。</li>
</ul></li>
<li>练习发表意见可以从学会评论开始，问自己三个问题：
<ul>
<li>① 我为什么会产生这样的情绪；</li>
<li>② 我为什么想转发它；</li>
<li>③ 我希望其他人看到这篇文章后能得到什么。</li>
</ul></li>
<li>会议表达意见的五个要点：
<ul>
<li>① 放弃追求“正确”；</li>
<li>② 尊重差异；</li>
<li>③ 积极表达；</li>
<li>④ 不要吵架；</li>
<li>⑤ 有理有据表达意见。</li>
</ul></li>
<li>谁能情绪稳定的应对与表达，谁就是胜利者。</li>
<li>五句话进行一个完整的、有理有据、有观点和感受的描述，比如推荐一部电影：
<ul>
<li>① 一句话描述观看的时间；</li>
<li>② 描述这部电影给你带来的感受；</li>
<li>③ 做一个剧情简介；</li>
<li>④ 阐述一个印象深刻的细节；</li>
<li>⑤ 说明让你印象深刻的原因。</li>
</ul></li>
<li>准时是应该被奖励的，迟到不需要被迁就。</li>
<li>随时随地自言自语。</li>
</ul>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>沟通</tag>
        <tag>读后感</tag>
        <tag>演讲与表达</tag>
        <tag>职场</tag>
      </tags>
  </entry>
  <entry>
    <title>WebSockets、服务器发送事件、长轮询、WebRTC、WebTransport[译]</title>
    <url>/2024/05/10/WebSockets%E3%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%E4%BA%8B%E4%BB%B6%E3%80%81%E9%95%BF%E8%BD%AE%E8%AF%A2%E3%80%81WebRTC%E3%80%81WebTransport-%E7%BF%BB%E8%AF%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>对于现代实时 Web
应用程序来说，将事件从服务器发送到客户端的能力是必不可少的。多年来，这种必要性导致了多种方法的发展，每种方法都有自己的优点和缺点。最初，长轮询是唯一可用的选择。随后
WebSockets 继承了它，为双向通信提供了更强大的解决方案。继 WebSocket
之后，服务器发送事件 (SSE)
提供了一种更简单的方法，用于从服务器到客户端的单向通信。展望未来，WebTransport
协议有望通过提供更高效、灵活和可扩展的方法来进一步彻底改变这一格局。对于利基用例<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="“利基”是指用例或应用程序的专门或特定子集。它表明，WebRTC 可能不常用于一般 Web 开发场景中的服务器-客户端事件，但在其功能与应用程序的要求非常吻合的特定、专门情况下可能会发现特别有用或相关性。因此，这里的“利基”意味着更狭窄、更集中的使用领域，而不是广泛或主流的使用领域。（来自 ChatGPT）
">[1]</span></a></sup>，WebRTC 也可能被考虑用于服务器-客户端事件。</p>
<p>本文旨在深入研究这些技术，比较它们的性能，强调它们的优点和局限性，并为各种用例提供建议，以帮助开发人员在构建实时
Web 应用程序时做出明智的决策。这是我在实现 RxDB
复制协议以兼容各种后端技术时收集的经验的浓缩总结。</p>
<h1 id="什么是长轮询">什么是长轮询？​</h1>
<p>长轮询是第一个启用服务器-客户端消息传递方法的“妙招”，该方法可以通过
HTTP 在浏览器中使用。该技术通过正常的
XHR<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="XML Http Request
">[2]</span></a></sup>
请求模拟服务器推送通信。与传统轮询（客户端定期从服务器重复请求数据）不同，长轮询会建立与服务器的连接，该连接在新数据可用之前保持打开状态。一旦服务器有新的信息，它就会向客户端发送响应，并关闭连接。客户端收到服务器的响应后立即发起新的请求，如此循环往复。此方法允许更即时的数据更新并减少不必要的网络流量和服务器负载。但是，它仍然会导致通信延迟，并且效率低于
WebSocket 等其他实时技术。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// JavaScript客户端中的长轮询</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">longPoll</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">fetch</span>(<span class="string">&quot;http://example.com/poll&quot;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">response</span>) =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Received data:&quot;</span>, data);</span><br><span class="line">      <span class="title function_">longPoll</span>(); <span class="comment">// 立即建立一个新的长轮询请求</span></span><br><span class="line">    &#125;)</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">/**</span></span><br><span class="line"><span class="comment">       * 在正常情况下，当连接超时或客户端离线时可能会出现错误。出现错误时，我们只需在一段延迟之后重新启动轮询。</span></span><br><span class="line"><span class="comment">       */</span></span><br><span class="line">      <span class="built_in">setTimeout</span>(longPoll, <span class="number">10000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">longPoll</span>(); <span class="comment">// 发起长轮询</span></span><br></pre></td></tr></table></figure>
<p>在客户端实现长轮询非常简单，如上面的代码所示。然而，在后端，要确保客户端接收所有事件并且在客户端当前重新连接时不会错过更新，可能存在多种困难。</p>
<span id="more"></span>
<h1 id="什么是-websocket">什么是 WebSocket？​</h1>
<p>WebSockets
通过客户端和服务器之间的单个长连接提供全双工通信通道。该技术使浏览器和服务器能够交换数据，而无需
HTTP
请求响应周期的开销，从而促进实时聊天、游戏或金融交易平台等应用程序的实时数据传输。
WebSocket 相对于传统 HTTP
来说是一个重大进步，它允许双方在建立连接后独立发送数据，非常适合需要低延迟和高频更新的场景。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//  JavaScript 客户端中的 WebSocket</span></span><br><span class="line"><span class="keyword">const</span> socket = <span class="keyword">new</span> <span class="title class_">WebSocket</span>(<span class="string">&quot;ws://example.com&quot;</span>);</span><br><span class="line"></span><br><span class="line">socket.<span class="property">onopen</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Connection established&quot;</span>);</span><br><span class="line">  <span class="comment">// 向服务器发送消息</span></span><br><span class="line">  socket.<span class="title function_">send</span>(<span class="string">&quot;Hello Server!&quot;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">socket.<span class="property">onmessage</span> = <span class="keyword">function</span> (<span class="params">event</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;Message from server:&quot;</span>, event.<span class="property">data</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>虽然 WebSocket API
的基础知识很容易使用，但在生产中却显得相当复杂。套接字可能会断开连接，并且必须相应地重新创建。特别是检测连接是否仍然可用，可能非常棘手。大多数情况下，您会添加乒乓心跳<sup id="fnref:3"><a href="#fn:3" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="[Pings and Pongs: The Heartbeat of WebSockets](https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#pings_and_pongs_the_heartbeat_of_websockets)握手后的任何时刻，客户端或服务器都可以选择向对方发送 ping。收到 ping 后，接收者必须尽快发回 pong。例如，您可以使用它来确保客户端仍然处于连接状态。
">[3]</span></a></sup>以确保打开的连接不会关闭。这种复杂性就是为什么大多数人使用
WebSocket 之上的库（例如 <a
href="https://socket.io/">Socket.IO</a>）来处理所有这些情况，甚至在需要时提供长轮询的回退。</p>
<h1 id="什么是服务器发送事件">什么是服务器发送事件？​</h1>
<p>服务器发送事件 (SSE) 提供了一种通过 HTTP
将服务器更新推送到客户端的标准方法。与 WebSocket 不同，SSE
专为从服务器到客户端的单向通信而设计，这使得它们非常适合实时新闻提要、体育比分或客户端需要实时更新而不向服务器发送数据的任何情况。</p>
<p>您可以将 Server-Sent-Events 视为单个 HTTP
请求，后端不会立即发送整个请求体，而是保持连接打开，并通过每次需要向客户端发送事件时发送单个行来逐步传输数据。</p>
<p>使用 SSE
创建接收事件连接非常简单。在浏览器中的客户端侧，使用服务器端生成事件的脚本的
URL 初始化一个 <a
href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource">EventSource</a>
实例。</p>
<p>侦听消息涉及将事件处理程序直接附加到 EventSource 实例。 该 API
区分通用消息事件和具名事件，从而实现更加结构化的通信。以下是在
JavaScript 中进行设置的方法：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 连接到服务器端的事件流</span></span><br><span class="line"><span class="keyword">const</span> evtSource = <span class="keyword">new</span> <span class="title class_">EventSource</span>(<span class="string">&quot;https://example.com/events&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 处理通用消息事件</span></span><br><span class="line">evtSource.<span class="property">onmessage</span> = <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;got message: &quot;</span> + event.<span class="property">data</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>与 WebSocket 不同，EventSource 将在连接丢失时自动重新连接。</p>
<p>在服务器端，您的脚本必须将 <code>Content-Type</code> 标头设置为
<code>text/event-stream</code> 并根据 <a
href="https://www.w3.org/TR/2012/WD-eventsource-20120426/">SSE
规范</a>格式化每条消息。这包括指定事件类型、数据有效负载以及事件 ID
和重试计时等可选字段。</p>
<p>以下是如何在 Node.js Express 应用程序中设置简单的 SSE 端点：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> express <span class="keyword">from</span> <span class="string">&quot;express&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> app = <span class="title function_">express</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">PORT</span> = process.<span class="property">env</span>.<span class="property">PORT</span> || <span class="number">3000</span>;</span><br><span class="line"></span><br><span class="line">app.<span class="title function_">get</span>(<span class="string">&quot;/events&quot;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">  res.<span class="title function_">writeHead</span>(<span class="number">200</span>, &#123;</span><br><span class="line">    <span class="string">&quot;Content-Type&quot;</span>: <span class="string">&quot;text/event-stream&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Cache-Control&quot;</span>: <span class="string">&quot;no-cache&quot;</span>,</span><br><span class="line">    <span class="title class_">Connection</span>: <span class="string">&quot;keep-alive&quot;</span>,</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">sendEvent</span> = (<span class="params">data</span>) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 所有消息行都必须以 &quot;data:&quot; 为前缀</span></span><br><span class="line">    <span class="keyword">const</span> formattedData = <span class="string">`data: <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(data)&#125;</span>\n\n`</span>;</span><br><span class="line">    res.<span class="title function_">write</span>(formattedData);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 每 2 秒发送一个事件</span></span><br><span class="line">  <span class="keyword">const</span> intervalId = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> message = &#123;</span><br><span class="line">      <span class="attr">time</span>: <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toTimeString</span>(),</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;Hello from the server!&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="title function_">sendEvent</span>(message);</span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 关闭连接时清理定时器</span></span><br><span class="line">  req.<span class="title function_">on</span>(<span class="string">&quot;close&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">clearInterval</span>(intervalId);</span><br><span class="line">    res.<span class="title function_">end</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">app.<span class="title function_">listen</span>(<span class="variable constant_">PORT</span>, <span class="function">() =&gt;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Server running on http://localhost:<span class="subst">$&#123;PORT&#125;</span>`</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h1 id="什么是-webtransport-api">什么是 WebTransport API？​</h1>
<p>WebTransport 是一种前沿 API，旨在实现 Web
客户端和服务器之间高效、低延迟的通信。它利用 <a
href="https://en.wikipedia.org/wiki/HTTP/3">HTTP/3 QUIC
协议</a>来实现各种数据传输功能，例如以可靠和不可靠的方式通过多个流发送数据，甚至允许乱序发送数据。这使得
WebTransport
成为需要高性能网络的应用程序的强大工具，例如实时游戏、直播和协作平台。然而，值得注意的是，WebTransport
目前只是一个工作草案，尚未得到广泛采用。截至目前（2024 年 3
月），WebTransport 仍处于<a
href="https://w3c.github.io/webtransport/">工作草案</a>中，尚未得到广泛支持。您还无法在
<a href="https://caniuse.com/webtransport">Safari 浏览器</a>中使用
WebTransport，并且 <a
href="https://github.com/w3c/webtransport/issues/511">Node.js</a>
中也没有本机支持。这限制了它在不同平台和环境中的可用性。</p>
<p>即使 WebTransport 将得到广泛支持，其 API
使用起来也非常复杂，并且人们很可能会在 WebTransport
之上构建库，而不是直接在应用程序的源代码中使用它。</p>
<h1 id="什么是-webrtc">什么是 WebRTC？​</h1>
<p><a href="https://webrtc.org/">WebRTC</a>（Web
实时通信）是一个开源项目和 API 标准，可直接在 Web
浏览器和移动应用程序中实现实时通信 (RTC)
功能，无需复杂的服务器基础设施或安装其他插件。它支持点对点连接，以便在浏览器之间传输音频、视频和数据交换。
WebRTC 旨在通过 NAT 和防火墙工作，利用 ICE、STUN 和 TURN
等协议在对等点之间建立连接。</p>
<p>虽然 WebRTC
旨在用于客户端与客户端的交互，但它也可以用于服务器与客户端的通信，其中服务器可以模拟为客户端。这种方法仅对利基用例有意义，这就是为什么在下面的
WebRTC 将作为一个选项被忽略的原因。</p>
<p>问题是，要使 WebRTC
工作，您无论如何都需要一个信令服务器，然后该服务器将再次在
websockets、SSE 或 WebTransport 上运行。这违背了使用 WebRTC
替代这些技术的目的。</p>
<h1 id="技术的局限性">技术的局限性 ​</h1>
<h2 id="双向发送数据">双向发送数据 ​</h2>
<p>只有 WebSocket 和 WebTransport
允许双向发送数据，以便您可以通过同一连接接收服务器数据和发送客户端数据。</p>
<p>虽然理论上长轮询也是可能的，但不建议这样做，因为将 “新”
数据发送到现有的长轮询连接无论如何都需要执行额外的 http
请求。因此，您可以使用额外的 http
请求将数据直接从客户端发送到服务器，而无需中断长轮询连接。</p>
<p>Server-Sent-Events
不支持向服务器发送任何附加数据。您只能执行初始请求，即使在初始请求中，默认情况下也无法使用本机
<a
href="https://developer.mozilla.org/en-US/docs/Web/API/EventSource">EventSource
API</a> 在 http-body 中发送类似 POST 的数据。相反，您必须将所有数据放入
url
参数中，这被认为是一种不好的安全做法，因为用户的身份验证信息可能会泄漏到服务器日志、代理和缓存中。为了解决这个问题，<a
href="https://rxdb.info/">RxDB</a> 使用 <a
href="https://github.com/EventSource/eventsource">eventsource
polyfill</a> 而不是原生的 <code>EventSource API</code>
。该库添加了其他功能，例如发送<code>自定义 http 标头</code>。微软还有<a
href="https://github.com/Azure/fetch-event-source">一个库</a>，它允许发送正文数据并使用
<code>POST</code> 请求而不是 <code>GET</code> 。</p>
<h2 id="每个域限制-6-个请求">每个域限制 6 个请求 ​</h2>
<p>大多数现代浏览器允许每个域有六个连接，这限制了所有稳定的服务器到客户端消息传递方法的可用性。六个连接的限制甚至在浏览器选项卡之间共享，因此当您在多个选项卡中打开同一页面时，它们必须彼此共享六个连接池。此限制是
HTTP/1.1-RFC 的一部分（其甚至定义了仅两个连接的较低数量）。</p>
<div class="note default"><p>引自 <a
href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.4">RFC
2616 – 第 8.1.4
节</a>：“使用持久连接的客户端应该限制它们与给定服务器保持的同时连接的数量。单用户客户端不应与任何服务器或代理保持超过
2 个连接。代理应该使用最多 2*N 个连接到另一个服务器或代理，其中 N
是同时活动用户的数量。这些准则旨在缩短 HTTP 响应时间并避免拥塞。”</p>
</div>
<p>虽然该策略对于防止网站所有者使用 D-DOS
访问其他网站来说是有意义的，但当需要多个连接来处理合法用例的服务器客户端通信时，这可能是一个大问题。要解决此限制，您必须使用
HTTP/2 或
HTTP/3，浏览器将仅为每个域打开一个连接，然后使用多路复用通过单个连接传输所有数据。虽然这为您提供了几乎无限数量的并行连接，但有一个
<a
href="https://www.rfc-editor.org/rfc/rfc7540#section-6.5.2">SETTINGS_MAX_CONCURRENT_STREAMS</a>
设置限制了实际连接数量。对于大多数配置，默认值为 100 个并发流。</p>
<p>理论上，浏览器也可以增加连接限制，至少对于像 EventSource 这样的特定
API 来说是这样，但这些问题已被 <a
href="https://issues.chromium.org/issues/40329530">chromium</a> 和 <a
href="https://bugzilla.mozilla.org/show_bug.cgi?id=906896">firefox</a>
标记为 “无法修复”。</p>
<div class="note default"><p>减少浏览器应用程序中的连接量</p>
<p>当您构建浏览器应用程序时，您必须假设您的用户不仅会使用该应用程序一次，而且还会在多个浏览器选项卡中并行使用该应用程序。默认情况下，您可能会为每个选项卡打开一个服务器流连接，但这通常根本没有必要。相反，无论打开多少个选项卡，您都只打开一个连接并在选项卡之间共享它。
<a href="https://rxdb.info/">RxDB</a> 通过<a
href="https://github.com/pubkey/broadcast-channel">broadcast-channel npm
包</a> 中的 <a
href="https://rxdb.info/leader-election.html">LeaderElection</a>
来实现这一点，以便在服务器和客户端之间只有一个复制流。您可以将该包独立使用（无需
RxDB）于任何类型的应用程序。</p>
</div>
<h2
id="移动应用程序上的连接不会保持打开状态">移动应用程序上的连接不会保持打开状态
​</h2>
<p>在 Android 和 iOS
等操作系统上运行的移动应用程序中，维护开放连接（例如用于 WebSocket
等的连接）带来了重大挑战。移动操作系统旨在在一段时间不活动后自动将应用程序移至后台，从而有效地关闭任何打开的连接。此行为是操作系统资源管理策略的一部分，旨在节省电池并优化性能。因此，开发人员通常依赖<strong>移动推送通知</strong>作为将数据从服务器发送到客户端的有效且可靠的方法。推送通知允许服务器向应用程序发出新数据报警，提示操作或更新，而无需持续打开连接。</p>
<h2 id="代理和防火墙">代理和防火墙</h2>
<p>通过咨询许多 <a href="https://rxdb.info/">RxDB</a>
用户，结果表明，在企业环境（也称为 “工作”）中，通常很难在基础设施中实现
WebSocket 服务器，因为许多代理和防火墙会阻止非 HTTP
连接。因此，使用服务器发送事件提供了更简单的企业集成方式。此外，长轮询仅使用普通
HTTP 请求，或许也是一个选择。</p>
<h1 id="性能比较">性能比较</h1>
<p>比较 WebSocket、服务器发送事件 (SSE)、长轮询和 WebTransport
的性能涉及评估各种条件下的关键方面，例如延迟、吞吐量、服务器负载和可扩展性。</p>
<p>首先让我们看一下原始数据。在<a
href="https://github.com/Sh3b0/realtime-web?tab=readme-ov-file#demos">此存储库</a>中可以找到良好的性能比较，该存储库测试了
<a href="https://go.dev/">Go Lang</a>
服务器实现的消息时间。这里我们可以看到 WebSockets、WebRTC 和
WebTransport 的性能是相当的：</p>
<img src="/2024/05/10/WebSockets%E3%80%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%8F%91%E9%80%81%E4%BA%8B%E4%BB%B6%E3%80%81%E9%95%BF%E8%BD%AE%E8%AF%A2%E3%80%81WebRTC%E3%80%81WebTransport-%E7%BF%BB%E8%AF%91/1.png" class="">
<div class="note default"><p>注意</p>
<p>请记住，WebTransport 是一项基于新的 HTTP/3 协议的全新技术。未来（2024
年 3 月之后）可能会有更多性能优化。此外，WebTransport
还经过优化，可以使用更少的功率，但该指标尚未测试。</p>
</div>
<p>我们还可以比较延迟、吞吐量和可扩展性：</p>
<h2 id="延迟">延迟：</h2>
<ul>
<li><strong>WebSockets</strong>：由于其通过单个持久连接进行全双工通信，因此可提供最低的延迟。非常适合即时数据交换至关重要的实时应用程序。</li>
<li><strong>服务器发送事件(SSE)</strong>：也为服务器到客户端的通信提供低延迟，但如果没有额外的
HTTP 请求，则无法将客户端消息发送回服务器。</li>
<li><strong>长轮询</strong>：由于每次数据传输都依赖于建立新的 HTTP
连接，因此会产生较高的延迟，从而降低实时更新的效率。当服务器想要发送事件，而客户端仍在打开新连接的过程中时。在这种情况下，延迟会明显变大。</li>
<li><strong>WebTransport</strong>：承诺提供类似于 WebSocket
的低延迟，并具有利用 HTTP/3
协议实现更高效的多路复用和拥塞控制的额外优势。</li>
</ul>
<h2 id="吞吐量">吞吐量</h2>
<ul>
<li><strong>WebSockets</strong>：由于其持久连接而能够实现高吞吐量，但吞吐量可能会受到<a
href="https://chromestatus.com/feature/5189728691290112">背压</a><sup id="fnref:4"><a href="#fn:4" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="在计算机科学和网络通信中，backpressure 是一种流量控制机制，指的是当数据接收方（客户端）处理数据的速度低于发送方（服务器）发送数据的速度时，系统会采取措施减慢数据的发送速度，以防止接收方被数据流压垮。具体来说，backpressure 旨在避免数据溢出和资源耗尽，确保系统稳定性和数据传输效率。
">[4]</span></a></sup>的影响，因为客户端处理数据的速度无法与服务器发送数据的速度一样快。</li>
<li><strong>服务器发送事件(SSE)</strong>：能够有效地将消息广播到许多客户端，并且开销比
WebSocket 更少，从而可能提高单向服务器到客户端通信的吞吐量。</li>
<li><strong>长轮询</strong>：由于频繁打开和关闭连接的开销，通常会提供较低的吞吐量，这会消耗更多的服务器资源。</li>
<li><strong>WebTransport</strong>：预计在单个连接内支持单向和双向流的高吞吐量，在需要多个流的场景中优于
WebSocket。</li>
</ul>
<h2 id="可扩展性和服务器负载">可扩展性和服务器负载</h2>
<ul>
<li><strong>WebSockets</strong>：维护大量 WebSocket
连接会显著增加服务器负载，可能会影响具有大量用户的应用程序的可扩展性。</li>
<li><strong>服务器发送事件(SSE)</strong>：在主要需要从服务器到客户端进行更新的场景中，更具可扩展性。与
WebSockets 相比，SSE 使用的连接开销较少，因为它使用的是 “普通” HTTP
请求，而不需要像 WebSockets 那样进行协议升级等操作。</li>
<li><strong>长轮询</strong>：由于频繁建立连接会产生高服务器负载，因此可扩展性最差，因此仅适合作为后备机制。</li>
<li><strong>WebTransport</strong>：旨在具有高度可扩展性，受益于 HTTP/3
在处理连接和流方面的高效性，与 WebSocket 和 SSE
相比，可能会减少服务器负载。</li>
</ul>
<h1 id="建议和用例适用性">建议和用例适用性</h1>
<p>在服务器 -
客户端通信技术领域，每种技术都有其独特的优势和用例适用性。<strong>服务器发送事件
(SSE)</strong> 成为最直接的实施选项，利用与传统 Web 请求相同的 HTTP/S
协议，从而规避企业防火墙限制和其他协议可能出现的其他技术问题。它可以轻松集成到
Node.js
和其他服务器框架中，使其成为需要频繁服务器到客户端更新的应用程序的理想选择，例如新闻订阅、股票行情和实时事件流。</p>
<p>另一方面，<strong>WebSocket</strong>
在需要持续双向通信的场景中表现出色。它支持持续交互的能力使其成为浏览器游戏、聊天应用程序和体育直播更新的首选。</p>
<p>然而，尽管 <strong>WebTransport</strong>
具有潜力，但采用它仍面临挑战。它没有得到<a
href="https://github.com/w3c/webtransport/issues/511">包括 Node.js</a>
在内的服务器框架的广泛支持，并且缺乏与 <a
href="https://caniuse.com/webtransport">safari</a> 的兼容性。此外，它对
HTTP/3 的依赖进一步限制了它的直接适用性，因为许多 Web 服务器（如
nginx）仅具有<a href="https://nginx.org/en/docs/quic.html">实验性</a>的
HTTP/3 支持。虽然 WebTransport
支持可靠和不可靠的数据传输，有望为未来的应用带来希望，但对于大多数用例来说，WebTransport
还不是一个可行的选择。</p>
<p><strong>长轮询</strong>曾经是一种常见技术，但由于其效率低下以及重复建立新
HTTP 连接的高开销，现在基本上已经过时了。尽管它可以作为缺乏 WebSockets
或 SSE
支持的环境中的后备方案，但由于显着的性能限制，通常不鼓励使用它。</p>
<h1 id="已知问题">已知问题</h1>
<p>对于所有实时流技术，都存在已知的问题。当你在它们之上构建任何东西时，请记住以下这些问题。</p>
<h2
id="客户端重新连接时可能会错过事件">客户端重新连接时可能会错过事件</h2>
<p>当客户端正在连接、重新连接或离线时，它可能会错过服务器上发生但无法流式传输到客户端的事件。无论如何，当服务器每次都流式传输完整内容时（例如实时更新股票行情），这种错过的事件并不相关。但是，当后端流式传输部分结果时，您必须考虑错过的事件。在后端修复这个问题非常糟糕，因为后端必须记住每个客户端哪些事件已经成功发送。相反，这应该使用客户端逻辑来实现。</p>
<p>例如，<a href="https://rxdb.info/replication.html">RxDB
复制协议</a>为此使用了两种操作模式。一种是<a
href="https://rxdb.info/replication.html#checkpoint-iteration">检查点迭代模式</a>，其中使用普通的
http 请求来迭代后端数据，直到客户端再次同步。然后它可以切换到<a
href="https://rxdb.info/replication.html#event-observation">事件观察模式</a>，其中来自实时流的更新用于保持客户端同步。每当客户端断开连接或出现任何错误时，复制都会立即切换到<a
href="https://rxdb.info/replication.html#checkpoint-iteration">检查点迭代模式</a>，直到客户端再次同步。此方法可以解决错过的事件，并确保客户端始终可以同步到服务器的完全相同的状态。</p>
<h2 id="公司防火墙可能会导致问题">公司防火墙可能会导致问题 ​</h2>
<p>使用任何流媒体技术时，公司基础设施都存在许多已知问题。代理和防火墙可能会阻止流量或无意中中断请求和响应。每当您在此类基础设施中实现实时应用程序时，请确保首先测试该技术本身是否适合您。</p>
<h1 id="查看更多">查看更多</h1>
<ul>
<li>查看<a href="https://news.ycombinator.com/item?id=39745993">本文的
hackernews 讨论</a></li>
<li>分享 / 点赞我的 [X]
推文(https://twitter.com/rxdbjs/status/1769507055298064818)</li>
<li>了解如何使用 Server-Sent-Events <a
href="https://rxdb.info/replication-http.html#pullstream-for-ongoing-changes">通过后端复制客户端
RxDB 数据库</a>。</li>
<li>通过 <a href="https://rxdb.info/quickstart.html">RxDB
快速入门</a>了解如何使用 RxDB</li>
<li>查看 <a href="https://github.com/pubkey/rxdb">RxDB github
存储库</a>并留下一颗星 ⭐</li>
</ul>
<h1 id="参考文档">参考文档</h1>
<p><a
href="https://rxdb.info/articles/websockets-sse-polling-webrtc-webtransport.html">WebSockets
vs Server-Sent-Events vs Long-Polling vs WebRTC vs WebTransport</a>
本文是以上链接的中文翻译，感谢原文作者。更多信息请点击以上链接获取。</p>
<div id="footnotes">
<hr>
<div id="footnotelist">
<ol style="list-style: none; padding-left: 0; margin-left: 40px">
<li id="fn:1">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">“利基”是指用例或应用程序的专门或特定子集。它表明，WebRTC
可能不常用于一般 Web
开发场景中的服务器-客户端事件，但在其功能与应用程序的要求非常吻合的特定、专门情况下可能会发现特别有用或相关性。因此，这里的“利基”意味着更狭窄、更集中的使用领域，而不是广泛或主流的使用领域。（来自
ChatGPT）<a href="#fnref:1" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:2">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">XML
Http Request<a href="#fnref:2" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:3">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;"><a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSockets_API/Writing_WebSocket_servers#pings_and_pongs_the_heartbeat_of_websockets">Pings
and Pongs: The Heartbeat of
WebSockets</a>握手后的任何时刻，客户端或服务器都可以选择向对方发送
ping。收到 ping 后，接收者必须尽快发回
pong。例如，您可以使用它来确保客户端仍然处于连接状态。<a href="#fnref:3" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:4">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">4.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">在计算机科学和网络通信中，backpressure
是一种流量控制机制，指的是当数据接收方（客户端）处理数据的速度低于发送方（服务器）发送数据的速度时，系统会采取措施减慢数据的发送速度，以防止接收方被数据流压垮。具体来说，backpressure
旨在避免数据溢出和资源耗尽，确保系统稳定性和数据传输效率。<a href="#fnref:4" rev="footnote">
↩︎</a></span>
</li>
</ol>
</div>
</div>
</div>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>技术文档翻译</tag>
        <tag>消息获取</tag>
        <tag>WebSockets</tag>
        <tag>SSE</tag>
        <tag>长轮询</tag>
        <tag>WebRTC</tag>
        <tag>WebTransport</tag>
      </tags>
  </entry>
  <entry>
    <title>布尔表达式又长又复杂[译]</title>
    <url>/2024/06/07/%E5%B8%83%E5%B0%94%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%8F%88%E9%95%BF%E5%8F%88%E5%A4%8D%E6%9D%82-%E8%AF%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>这是我们 <a
href="https://testing.googleblog.com/2017/04/code-health-googles-internal-code.html">代码健康</a>
系列中的另一篇文章。此文章的一个版本最初作为“Google <a
href="https://testing.googleblog.com/2007/01/introducing-testing-on-toilet.html">马桶测试</a>”
系列的一集出现在全球的 Google 浴室中。您可以下载 <a
href="https://docs.google.com/document/d/11nk0lxX6DHBq8AJtMtJnnLKf5CG3KTcntUBhVTKWRLg/edit">适合打印的版本</a><sup id="fnref:1"><a href="#fn:1" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="Google 的马桶声名在外，不仅仅因为技术含量高，还因为从 2006 年开始，它们就被用来确保 Google 的产品完美无瑕，工程师们还会将软件测试题打印出来贴在厕所里，这是被内部员工称为 “马桶上的测试” 的企业文化。  
">[1]</span></a></sup> 以在办公室中显示。</p>
<p>作者 孙一鸣</p>
<p>您可能在代码库中遇到过一些复杂、难以阅读的布尔表达式，并希望它们更容易理解。例如，假设我们想要确定披萨是否美味：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Decide whether this pizza is fantastic.</span></span><br><span class="line"><span class="comment">// 判断这个披萨是否美味。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> ((!pepperoniService.<span class="title function_">empty</span>() || sausages.<span class="title function_">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">    &amp;&amp; (useOnionFlag.<span class="title function_">get</span>() || <span class="title function_">hasMushroom</span>(<span class="variable constant_">ENOKI</span>, <span class="variable constant_">PORTOBELLO</span>)) &amp;&amp; <span class="title function_">hasCheese</span>()) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p><font color=#FF0000>改进这一点的第一步是将条件表达式提取到一个命名良好的变量中：</font></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">boolean isPizzaFantastic =</span><br><span class="line">    (!pepperoniService.<span class="title function_">empty</span>() || sausages.<span class="title function_">size</span>() &gt; <span class="number">0</span>)</span><br><span class="line">    &amp;&amp; (useOnionFlag.<span class="title function_">get</span>() || <span class="title function_">hasMushroom</span>(<span class="variable constant_">ENOKI</span>, <span class="variable constant_">PORTOBELLO</span>)) &amp;&amp; <span class="title function_">hasCheese</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isPizzaFantastic) &#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然而，布尔表达式仍然太复杂。<font color=#FF0000>从给定的一组输入计算
isPizzaFantastic
的值可能会令人困惑。</font>您可能需要拿起笔和纸，或者在本地启动服务器并设置断点以调试代码。</p>
<p>取而代之的是，尝试将<font color=#FF0000>细节分组到提供有意义、抽象的中间布尔值中</font>。下面的每个布尔值代表一个明确定义的条件，您可以避免在一个表达式中混合使用
&amp;&amp; 和 ||
操作符。在不更改业务逻辑的情况下，您可以更轻松地了解布尔值之间的相互关系：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">boolean hasGoodMeat = !pepperoniService.<span class="title function_">empty</span>() || sausages.<span class="title function_">size</span>() &gt; <span class="number">0</span>;</span><br><span class="line">boolean hasGoodVeggies = useOnionFlag.<span class="title function_">get</span>() || <span class="title function_">hasMushroom</span>(<span class="variable constant_">ENOKI</span>, <span class="variable constant_">PORTOBELLO</span>);</span><br><span class="line">boolean isPizzaFantastic = hasGoodMeat &amp;&amp; hasGoodVeggies &amp;&amp; <span class="title function_">hasCheese</span>();</span><br></pre></td></tr></table></figure>
<p><font color=#FF0000>另一种选择是将逻辑隐藏在单独的方法中</font>。这也提供了使用
<a
href="https://testing.googleblog.com/2017/06/code-health-reduce-nesting-reduce.html">保护子句</a>
提前返回的可能性，进一步减少了跟踪中间状态的需要：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">boolean <span class="title function_">isPizzaFantastic</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">hasCheese</span>()) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (pepperoniService.<span class="title function_">empty</span>() &amp;&amp; sausages.<span class="title function_">size</span>() == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> useOnionFlag.<span class="title function_">get</span>() || <span class="title function_">hasMushroom</span>(<span class="variable constant_">ENOKI</span>, <span class="variable constant_">PORTOBELLO</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="延伸阅读">延伸阅读</h1>
<p><a
href="https://www.leiphone.com/category/a-eye/RIbtW1cYPJvMtjvG.html">Google
厕所文化：在马桶上测试程序</a></p>
<h1 id="参考文档">参考文档</h1>
<p>本文是 <a
href="https://testing.googleblog.com/2024/04/isbooleantoolongandcomplex.html">isBooleanTooLongAndComplex</a>
的中文翻译，感谢原文作者。更多信息请点击链接获取。</p>
<strong>以下内容为译者注</strong>：
<div id="footnotes">
<hr>
<div id="footnotelist">
<ol style="list-style: none; padding-left: 0; margin-left: 40px">
<li id="fn:1">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">Google
的马桶声名在外，不仅仅因为技术含量高，还因为从 2006
年开始，它们就被用来确保 Google
的产品完美无瑕，工程师们还会将软件测试题打印出来贴在厕所里，这是被内部员工称为
“马桶上的测试” 的企业文化。<a href="#fnref:1" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:2">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">"guard
clause（保护子句）"
是指在方法的开头使用条件语句来提前返回，从而避免继续执行后续代码。通过这种方式，可以在满足某些条件时立即退出方法，而不需要处理剩余的逻辑。这种方法可以简化代码结构，减少对中间状态的跟踪需求，提高代码的可读性和维护性。<a href="#fnref:2" rev="footnote">
↩︎</a></span>
</li>
</ol>
</div>
</div>
</div>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>布尔表达式</tag>
        <tag>可读性</tag>
        <tag>代码规范</tag>
        <tag>代码健康</tag>
      </tags>
  </entry>
  <entry>
    <title>停止学习[译]</title>
    <url>/2024/05/20/%E5%81%9C%E6%AD%A2%E5%AD%A6%E4%B9%A0-%E7%BF%BB%E8%AF%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>如果我选择你和你的一个朋友，并让你可以接触巴黎的城市规划者、巴黎最著名的建筑师的
Instagram
账号，这样你就可以私信他们……而且我会确保他们会回复你。我给你提供这个城市最详细的地图，完全不像
Apple
地图那样。我为你带来关于巴黎的所有百科全书条目，所有书籍和所有旅游指南。而对你的朋友？我只是让她直接置身于巴黎，任务是探索每一个角落。</p>
<p>两个月后，你们谁会成为更好的巴黎人？你们谁会更了解巴黎？</p>
<p>我最近读完了<a
href="https://www.amazon.in/Turning-Pro-Inner-Power-Create/dp/1936891034/ref=as_li_ss_tl?keywords=turning+pro&amp;qid=1554130709&amp;s=gateway&amp;sr=8-1&amp;linkCode=sl1&amp;tag=nashvail-21&amp;linkId=281c0fc73d35854dea4f940122fc9f05&amp;language=en_IN">《Turning
Pro》</a>。书中有一个想法让我在合上书后思考了很长时间。我想和你讨论一下这个想法。</p>
<span id="more"></span>
<img src="/2024/05/20/%E5%81%9C%E6%AD%A2%E5%AD%A6%E4%B9%A0-%E7%BF%BB%E8%AF%91/1.png" class="" width="400" height="400">
<p>在《Turning Pro》中，作者 Steven Pressfield
谈到了所谓的无能。无能始于成瘾。成瘾不仅仅指物质上的成瘾，还包括对爱情、分心、性、失败、金钱或麻烦的成瘾。书中的原话是：</p>
<p>所有成瘾行为都有两个主要特质：</p>
<ol type="1">
<li>它们体现了重复而没有进步。</li>
<li>它们以无能为代价。</li>
</ol>
<p>以麻烦为例。那些对麻烦上瘾的人永远无法脱离牢狱，因为在牢狱里他们更安全。当你在监狱里时，你不必面对存在的痛苦问题，也不必拥抱和实现你的梦想和愿景。对囚犯来说，身处牢狱带来了无能。</p>
<p>许多人，包括我个人认识的一些人，执着于追求爱情。他们在内心深处知道，他们真正追求的是意义。他们选择从爱情中提取这种意义，从一个失败的关系跳到另一个失败的关系。因为当你忙于寻找那种能够为你的存在带来意义的爱情时，你就不必担心花费艰苦的时间磨练你的技艺或改善你的事业，或者在某些只有你自己能够掌控的事情中找到意义。这种行为表现出对爱情的成瘾，这并不是说爱情是坏的，但对其成瘾绝对是坏的。这种成瘾产生了无能。</p>
<p>当你将这种成瘾放在互联网无尽的信息流背景下时，你会看到类似的模式。在互联网上，或由于互联网，人们会对学习上瘾，一个教程接一个教程，一个课程接一个课程，一篇文章接一篇文章，一个“微/分/纳米学位”<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="Udacity 使用 “微”、“分” 和 “纳米” 这些术语来表示其课程的相对规模和深度。微学位是最小且最专注的，而纳米学位则更大、更全面。
">[1]</span></a></sup>接一个又一个，但这些只会带来无能和没有任何实质进步的重复。</p>
<p>我记得手头有项目要写、设计和建造。但很多时候，我选择了上一个在线课程、看教程，或者阅读一篇文章，这些都是教我如何完成那个项目的。</p>
<p>那么为什么这不好呢？你看，这并不是说学习不好，但当你已经知道足够多的东西时继续学习就成了问题。即使你有能力立即开始项目并在过程中解决问题，你还是继续拖延。开始新事物是不舒服的，因此你选择阅读一篇文章或上一个课程，只是为了告诉自己你在工作，但实际上你只是在循环，没有在项目上取得任何进展。</p>
<p>你可以坐在后座上去一个地方一百次，但直到你坐上驾驶座，你才会真是认识那条路。你必须在某个时候停止听从指示，自己去探索。只有当你亲自动手时，魔法才会发生。</p>
<p>从这个角度来看，稍微偏离一下，你会同意报名上大学实际上是为自己买了 4
年的无能。在大学里，你不必担心强行进入你的行业，建立人脉或找到一份令人满意的工作。你在校园里是安全的，因为你在攻读一个学位，这个学位将以某种方式神奇地为你带来上述的东西，但剧透一下……</p>
<p>如果你还不知道自己想做什么，那么大学会给你足够的喘息时间来弄清楚这一点，但如果你知道了自己想做什么却仍然选择上大学，你就是个拥抱无能的懦夫。好吧，这有点太极端了，不要听我的大学建议，我只是因为没完成大学而感到不爽。现在，回到正题。</p>
<p>对于我一开始提出的问题，你的答案是什么？谁会成为更好的巴黎人？是认真读书的你还是在巴黎街头漫游的你的朋友。常识告诉我们，要了解巴黎，你必须身处巴黎，在街上吃灰。因为如果你不这样做，你会错过在竞技场中发生的协同效应<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="在这里，”synergy“（协同效应）指的是在实际参与和经历某个过程时所产生的独特而积极的效果。这种效果是通过不同元素之间的相互作用而产生的，单独存在时无法达到。具体来说，就是当你亲身投入到实际环境中时，所能体验到的那种综合的、互相促进的力量和奇妙感受。（来自 ChatGPT）
">[2]</span></a></sup>和魔法。你必须走出去。</p>
<img src="/2024/05/20/%E5%81%9C%E6%AD%A2%E5%AD%A6%E4%B9%A0-%E7%BF%BB%E8%AF%91/2.png" class="" width="400" height="400">
<p>我经常需要面试工程和设计岗位的人。通常他们的简历上都是 Udacity
的纳米学位、大学学位、Udemy
课程证书和一堆其他证书，但却没有任何实际项目。这时我知道这个人已经深陷无能。他们不会承担责任，他们不够勇敢去面对开始的困扰，去创造新东西并把它推向世界。</p>
<p>你对学习上瘾吗？问问你自己。是时候施展魔法了，关掉浏览器，离开海岸，跳下悬崖，剪断绳子，拔掉销子<sup id="fnref:3"><a href="#fn:3" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="pull the pin in American English. informal. to end a relationship, project, program, or the like, because of lack of continuing interest, success, funds, etc.">[3]</span></a></sup>，拿起笔，打开日记本。停止学习。开始行动。</p>
<h1 id="参考文档">参考文档</h1>
<p>本文是<a href="https://www.nashvail.me/blog/stop-learning">Stop
learning</a>的中文翻译，感谢原文作者。更多信息请点击链接获取。</p>
<p><em>以下内容为译者注：</em></p>
<a
href="https://www.collinsdictionary.com/dictionary/english/pull-the-pin#:~:text=pull%20the%20pin%20in%20American,full%20dictionary%20entry%20for%20pin">Definition
of ‘pull the pin’</a>
<div id="footnotes">
<hr>
<div id="footnotelist">
<ol style="list-style: none; padding-left: 0; margin-left: 40px">
<li id="fn:1">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">Udacity
使用 “微”、“分” 和 “纳米”
这些术语来表示其课程的相对规模和深度。微学位是最小且最专注的，而纳米学位则更大、更全面。<a href="#fnref:1" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:2">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">在这里，”synergy“（协同效应）指的是在实际参与和经历某个过程时所产生的独特而积极的效果。这种效果是通过不同元素之间的相互作用而产生的，单独存在时无法达到。具体来说，就是当你亲身投入到实际环境中时，所能体验到的那种综合的、互相促进的力量和奇妙感受。（来自
ChatGPT）<a href="#fnref:2" rev="footnote"> ↩︎</a></span>
</li>
<li id="fn:3">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">pull
the pin in American English. informal. to end a relationship, project,
program, or the like, because of lack of continuing interest, success,
funds, etc.<a href="#fnref:3" rev="footnote"> ↩︎</a></span>
</li>
</ol>
</div>
</div>
</div>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>无能</tag>
        <tag>成瘾</tag>
        <tag>停止学习</tag>
        <tag>开始行动</tag>
      </tags>
  </entry>
  <entry>
    <title>《我在 100 天内自学英文翻转人生》读书笔记</title>
    <url>/2024/06/06/%E3%80%8A%E6%88%91%E5%9C%A8-100-%E5%A4%A9%E5%86%85%E8%87%AA%E5%AD%A6%E8%8B%B1%E6%96%87%E7%BF%BB%E8%BD%AC%E4%BA%BA%E7%94%9F%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>本书内容总结如下，其余内容都是作者打鸡血的鸡汤文，不看也罢。</p>
<p>作者分享的方法是通过反复观看一部电影，模仿跟读 100
遍，其实就是把台词都背下来，结合场景，可以做到脱口而出。和之前看到的<a
href="https://toypipi.github.io/2023/11/09/d6021f53d529/">英语学习方法</a>类似。</p>
<p>按照之前总结的学习方法，听力和阅读水平正在稳步提高，但是口语一直没有练习，没有进步。打算按照作者介绍的方法开始练习口语，不过暂时不选影片作为练习材料。还是采用之前听过的
EnglishPod 作为练习材料，每天下班回去跟读，坚持打卡。</p>
<p>学英语没有捷径，踏踏实实，不浮躁，只要你花时间付出，就一定能有回报。延伸阅读的视频可以看一下。</p>
<p>钟道隆，浙江浦江人，中国人民解放军少将、通信工程专家、逆向英语创始人、复读机发明者。上大学是优等生，工作是优秀科技工作者，管教学是学生的良师诤友，退休后是优秀退休干部。45
岁自学英语，一年后成为翻译。从视频中可以看出钟老是那种喜欢钻研的人，有问题喜欢刨根问底，一直琢磨，我和他老人家这点还挺像，哈哈哈。</p>
<p>他学英语的时候，克服任何困难，每天学习七八个小时。当你坚持不了，想要放弃时，回头再看看这个视频，可以让你重拾信心。</p>
<span id="more"></span>
<h1 id="ls-十一大成功法则">100LS 十一大成功法则</h1>
<ol type="1">
<li>请舍弃“唯有学好语法，英语才会变好”的错误想法，学英语就跟学母语一样，请务必由“情境”来熟悉。</li>
<li>别靠头脑去理解英语，请用嘴巴和耳朵训练。</li>
<li>用 100 天的时间，观看一部电影 100
遍，之后就是见证奇迹的时刻，演员说的话听起来跟母语没什么两样。</li>
<li>忘掉一直以来你学习外语的顺序，务必遵循“先练听力，再练口语”的步骤。</li>
<li>找一部最能让你乐在其中的电影或剧集，开口跟读台词练满 100 遍。</li>
<li>无法从你口中说出的句子，你也绝对听不懂。请务必反复大声练习，直到你能够朗朗上口。</li>
<li>一部电影一定要重复看或听 100
遍，请善用英语字幕，不要只是默默地听。</li>
<li>请务必通过“情境”学习英语。</li>
<li>学了外语就该实际运用。如果害怕说错而不敢开口，你永远只能回答这句话：“I
can’t speak English very well．”</li>
<li>掌握语感后，再用 TED 演讲影片将中阶英语一网打尽。</li>
<li>想学好高阶英语，务必用当地英语新闻进行 100LS。</li>
</ol>
<h1 id="ls-的五大学习步骤">100LS 的五大学习步骤</h1>
<ol type="1">
<li>关掉所有字幕观看第一遍。</li>
<li>打开中文字幕观看第二遍， 确认之前没看懂的部分。</li>
<li>换成英文字幕， 把刚才没听懂的片段抄下来。</li>
<li>反复练习听不清楚的片段， 听完马上跟读。</li>
<li>关掉所有的字幕，观看剩下的 97 次。</li>
<li>参加外语交流聚会。</li>
<li>套用 100LS 学习模式再看九部电影。</li>
</ol>
<h1 id="ls-七大成功步骤-vs-应用技巧总整理">100LS 七大成功步骤 vs
应用技巧总整理</h1>
<ol type="1">
<li>设立一个你渴望达成的具体目标。当你产生想要放弃的念头时，这个目标将成为你强大的后盾。最好是个在短时间内就能实现的目标。只要你仔细想一下什么东西能够成为你生活中的小确幸，马上就会有答案。</li>
<li>挑一部你热爱的电影，或者有你喜欢的演员演出的电影。这部影片一定要有让你百看不厌的魅力。</li>
<li>电影类型也相当重要，请避开科幻片或战争片。我推荐你看现代爱情电影，影片里充满了贴近日常生活的英语对话。</li>
<li>观看步骤一：关掉所有字幕，一口气看完第一遍。</li>
<li>观看步骤二：打开中文字幕观看第二遍，确认之前没看懂的片段。</li>
<li>观看步骤三：切换成英语字幕，把先前没听懂的片段抄写在笔记本上，并查出它们的意思。</li>
<li>观看步骤四：反复练习听不清楚的片段，多次练习听力和口语（LS），直到你不会结巴卡顿，完全跟上演员说话的速度。</li>
<li>观看步骤五：看着英文字幕练习完电影中的所有片段后，请关掉所有的字幕跟着电影练习
97 次听力和口语，每次练习请二选一观看影片或聆听音频，并跟着复诵，完成
100 次的训练。</li>
<li>步骤六：不时带着你的 100LS
笔记本参加外语交流聚会。结交外国朋友，向他们请教你写下的新单词、句子和用法，培养出你的“英语语感”。</li>
<li>步骤七：为期 100 天，完成单部电影的 100LS
训练后，再挑战下一部电影。每天抽出一小时，采用之前的学习步骤完成 10
部电影的训练。只要历时 1000 天，完成 10 部电影的
100LS，你全身将充满对英语的自信，往后不再需要花时间拼命学习。你将具备拥有再多金钱也买不到的能力。英语这项语言利器已经完完全全属于你，为你创造迈向广阔世界的机会。</li>
</ol>
<h1 id="ls-训练法七大学习重点">100LS 训练法七大学习重点</h1>
<ol type="1">
<li>请先使用 100LS 训练法，完成 10
部电影或剧集。如此一来，将为你的目标外语打下一定的基础。</li>
<li>不要额外看书学习基础动词和语法。写下影片中不懂的单词和句子，查出它们的意思并反复练习。</li>
<li>建议你听该语言的歌曲，让自己更加熟悉这门外语。当你实在没办法完全听清楚歌词，再试着查询歌词内容，这对学习也有很大的帮助。</li>
<li>搜索演讲影片，加强深入对话的能力。</li>
<li>观看新闻报道，累积丰富的表达能力。</li>
<li>你正在学哪种语言，就看以那个语言撰写而成的原文书籍。请先从童话书或页数较少的心灵励志书下手，越薄的书越好。记住，一定要从头到尾好好读完整本书。</li>
<li>列出你的愿望清单，具体写下学好外语后你想做些什么。当你屡次陷入瓶颈时，这份清单能带给你力量，帮助你渡过难关。</li>
</ol>
<h1 id="延伸阅读">延伸阅读</h1>
<p><a
href="https://www.bilibili.com/video/BV1Sb411e7ck?p=1&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">钟道隆
—— 踏踏实实学英语</a></p>
]]></content>
      <categories>
        <category>阅读</category>
      </categories>
      <tags>
        <tag>英语学习</tag>
        <tag>看电影学英语</tag>
        <tag>听说</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo NexT 主题配置</title>
    <url>/2024/06/24/Hexo-NexT-%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>本主题配置依赖如下版本： <div class="note info"><p>node 22.3.0 npm 10.8.1 hexo 7.2.0 NexT 8.20.0</p>
</div></p>
<h1 id="安装-hexo">安装 Hexo</h1>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>安装 Hexo 完成后，请执行下列命令，Hexo
将会在指定文件夹中新建所需要的文件。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<h1 id="配置-hexo">配置 hexo</h1>
<p>您可以在 _config.yml 或 代替配置文件 中修改大部分的配置。<a
href="https://hexo.io/zh-cn/docs/configuration">参考</a></p>
<h1 id="解决-nunjucks-error">解决 Nunjucks Error</h1>
<p>由于我的博客是从老版本 Hexo 迁移过来，很多 md
里面的标签已经不再支持，如：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% note danger %&#125;</span><br><span class="line">&#123;% endnote %&#125;</span><br></pre></td></tr></table></figure>
<p>暂时先把这些标签删除。</p>
<blockquote>
<p>注意：<br />
这里我搞错了，这个其实是 Next 的标签插件，<a
href="https://theme-next.js.org/docs/tag-plugins/note">参考</a>。安装了
NexT 主题后不再报错。</p>
</blockquote>
<h1 id="下载-next">下载 NexT</h1>
<p>打开终端，切换到 Hexo 站点根目录并安装 NexT 主题：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-theme-next@latest</span><br></pre></td></tr></table></figure>
<p>请注意，当您运行 npm install 时，对 node_modules
目录内主题的任何本地更改都将丢失。如果您对主题进行了更改，则应在运行 npm
install 之前备份更改，然后在安装完成后恢复更改。</p>
<p>推荐在站点根目录中创建一个 _config.next.yml 文件，用于配置 NexT
主题文件。</p>
<p>创建空的 _config.next.yml
文件后，您可以将主题文件夹中的默认配置选项复制到其中，以便您可以参考它们进行修改和自定义。根据您的安装方法，NexT
主题的默认配置文件可能位于 themes/next/_config.yml 或
node_modules/hexo-theme-next/_config.yml 中。</p>
<h1 id="配置-next">配置 NexT</h1>
<p>配置文档参见<a
href="https://theme-next.js.org/docs/theme-settings/">主题设置</a>。</p>
<h1 id="安装依赖">安装依赖</h1>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm install</span><br></pre></td></tr></table></figure>
<h1 id="修改博客模板">修改博客模板</h1>
<p>在站点根目录找到 scaffolds 文件夹，找到 post.md
文件，按自己的喜好修改。我修改为： <img src="/2024/06/24/Hexo-NexT-%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE/0.png" class=""></p>
<h1 id="解决-vscode-自动格式化导致的生成博文异常问题">解决 VSCode
自动格式化导致的生成博文异常问题</h1>
<p>Hexo 在生成博文时，会根据博客根目录下的 scaffolds 文件夹中的模板文件
post.md，生成博文。 如果在 VSCode
中，配置了自动格式化，会导致两个大括号之间自动添加一个空格，如下所示。</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">title: &#123; &#123; title &#125; &#125;</span><br><span class="line">date: &#123; &#123; date &#125; &#125;</span><br><span class="line"></span><br><span class="line">……</span><br></pre></td></tr></table></figure>
<p>解决办法是在 settings.json 文件中，添加排除规则。你可以这样配置：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;files.exclude&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;**/scaffolds&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h1 id="启动-hexo">启动 Hexo</h1>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo s</span><br></pre></td></tr></table></figure>
<h1 id="发布-hexo">发布 Hexo</h1>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo clean</span><br><span class="line">$ hexo g</span><br><span class="line">$ hexo d</span><br></pre></td></tr></table></figure>
<h1 id="部署">部署</h1>
<p>hexo 目录下，使用终端输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>
<p>配置文档参考<a
href="https://hexo.io/zh-cn/docs/one-command-deployment">部署</a>。</p>
<h1 id="渲染数学公式">渲染数学公式</h1>
<p>除了必要的渲染器外，任何其他 Hexo
数学插件都是不必要的，也不需要手动导入任何 JS 或 CSS 文件。如果你安装了
hexo-math 或 hexo-katex 等插件，它们可能与 NexT 的内置渲染引擎冲突。</p>
<h2 id="修改-next-配置文件-_config.next.yml">修改 NexT 配置文件
<code>_config.next.yml</code></h2>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">math:</span></span><br><span class="line">  <span class="comment"># Default (false) will load mathjax / katex script on demand.</span></span><br><span class="line">  <span class="comment"># That is it only render those page which has `mathjax: true` in front-matter.</span></span><br><span class="line">  <span class="comment"># If you set it to true, it will load mathjax / katex script EVERY PAGE.</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">  <span class="attr">every_page:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">mathjax:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Available values: none | ams | all</span></span><br><span class="line">    <span class="attr">tags:</span> <span class="string">ams</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">katex:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="comment"># See: https://github.com/KaTeX/KaTeX/tree/master/contrib/copy-tex</span></span><br><span class="line">    <span class="attr">copy_tex:</span> <span class="literal">false</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>tags 需要修改为 ams，如果修改为 none ，会报错。</p>
</blockquote>
<p>every_page 选项控制是否在每个页面上渲染数学公式，关闭后，只有在博文
front-matter 中添加 mathjax: true 选项才会渲染数学公式。</p>
<p>例如：</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: Hello World</span><br><span class="line">date: 2024-06-24 14:55:00</span><br><span class="line"><span class="section">mathjax: true</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
<h2 id="安装-pandoc">安装 pandoc</h2>
<p>下载并安装 <a
href="https://github.com/jgm/pandoc/blob/master/INSTALL.md">pandoc</a>。确保
pandoc 在系统 PATH 中。</p>
<h2
id="卸载原始渲染器-hexo-renderer-marked-并安装-hexo-renderer-pandoc">卸载原始渲染器
hexo-renderer-marked ，并安装 hexo-renderer-pandoc</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ npm un hexo-renderer-marked</span><br><span class="line">$ npm i hexo-renderer-pandoc</span><br></pre></td></tr></table></figure>
<h2 id="重新生成博客">重新生成博客</h2>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g -d</span><br><span class="line"><span class="comment"># or hexo clean &amp;&amp; hexo s</span></span><br></pre></td></tr></table></figure>
<h2 id="公式生成工具">公式生成工具</h2>
<p><a
href="https://zh.wikipedia.org/wiki/Help:%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F">维基百科:
数学公式</a> <a
href="https://webdemo.myscript.com/views/math/index.html">MyScript</a>:
手写转 LaTeX 公式，直接将你需要的数学公式画出来，它会自动将其转换为
LaTeX 公式，然后复制即可。 <a
href="https://www.latexlive.com/home">LaTeX 公式编辑器</a>:
提供公式模板、图片识别 (有次数限制) 等功能，并且支持输出各种格式。 <a
href="https://simpletex.cn/ai/latex_ocr">Simpletex</a>: 支持 LaTex
公式图片识别和手写转公式，且无次数限制，但是需要注册账号。同时也提供了客户端版本。</p>
<h1 id="配置-mermaid">配置 Mermaid</h1>
<p>修改 NexT 主题配置文件，添加以下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Mermaid tag</span></span><br><span class="line"><span class="attr">mermaid:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Available themes: default | dark | forest | neutral</span></span><br><span class="line">  <span class="attr">theme:</span></span><br><span class="line">    <span class="attr">light:</span> <span class="string">default</span></span><br><span class="line">    <span class="attr">dark:</span> <span class="string">dark</span></span><br></pre></td></tr></table></figure>
<p>修改 Hexo 配置文件，添加以下内容：</p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">highlight:</span></span><br><span class="line">  <span class="attr">exclude_languages:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">mermaid</span></span><br></pre></td></tr></table></figure>
<p>用法：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;% mermaid graph TD %&#125;</span><br><span class="line">A[Hard] --&gt;|Text| B(Round)</span><br><span class="line">B --&gt; C&#123;Decision&#125;</span><br><span class="line">C --&gt;|One| D[Result 1]</span><br><span class="line">C --&gt;|Two| E[Result 2]</span><br><span class="line">&#123;% endmermaid %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>或者</p>
<pre><code class="highlight mermaid">graph TD
A[Hard] --&gt;|Text| B(Round)
B --&gt; C&#123;Decision&#125;
C --&gt;|One| D[Result 1]
C --&gt;|Two| E[Result 2]</code></pre>
<h1 id="参考文档">参考文档</h1>
<ul>
<li><a href="https://hexo.io/zh-cn/docs/index.html">Hexo 文档</a></li>
<li><a href="https://theme-next.js.org/docs/getting-started/">NexT
主题文档</a></li>
<li><a
href="https://theme-next.js.org/docs/third-party-services/math-equations">Math
Equations</a></li>
<li><a
href="https://theme-next.js.org/docs/tag-plugins/mermaid.html?highlight=mermaid">NetT
Mermaid Config</a></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo NexT 主题配置 utterances 评论</title>
    <url>/2024/06/21/Hexo-Next-%E4%B8%BB%E9%A2%98%E9%85%8D%E7%BD%AE-utterances-%E8%AF%84%E8%AE%BA/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>最近将操作系统从 win7 升级到 win10 了，然后将 Node
等软件全部升级成最新版，顺便把博客版本也更新一下。在查看 Hexo
升级的相关文档时，碰巧看到了 <a
href="https://utteranc.es/">utterances</a>
，无跟踪、无广告，永远免费，所有数据直接存储在自己的 github
仓库，深得我爱。立马开始部署！</p>
<p>搜索、阅读了大量博客，如 <a
href="https://pengtech.net/hexo/hexo_blog_comments.html">Hexo
博客添加评论功能</a>，都说直接在主题的配置文件下，新增如下配置即可：</p>
<span id="more"></span>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Utterances</span></span><br><span class="line"><span class="comment"># For more information: https://utteranc.es</span></span><br><span class="line"><span class="attr">utterances:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">yoour_github_id/the_repo_name_to_store_comments</span> <span class="comment"># Github repository name</span></span><br><span class="line">  <span class="comment"># Available values: pathname | url | title | og:title</span></span><br><span class="line">  <span class="attr">issue_term:</span> <span class="string">pathname</span></span><br><span class="line">  <span class="comment"># Available values: github-light | github-dark | preferred-color-scheme | github-dark-orange | icy-dark | dark-blue | photon-dark | boxy-light</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">github-light</span></span><br></pre></td></tr></table></figure>
<p><a
href="https://github.com/theme-next/hexo-theme-next/pull/764">NexT</a>
官方仓库也说直接这样配置就行。</p>
<p>我配置了但是没没有生效，搜索了好久终于按照这篇 <a
href="https://nekodaemon.com/2020/05/20/Hexo-Next%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0Utterances%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/">Hexo
Next 主题添加 Utterances 评论系统</a> 搞定了。</p>
<p>究其原因就是我现在用的 NexT 版本：7.8.0 没有集成 utterances 插件（在
VSCode 里面全文搜索 utterance
也搜不到任何内容），所以尽管添加了配置但还是无法显示评论框。</p>
<p>NexT GitHub 仓库的<a
href="https://github.com/theme-next/hexo-theme-next/issues">官方文档</a>
不全，大部分配置可以参照老版本，其他功能只能靠网页搜索。</p>
<h1 id="配置过程">配置过程</h1>
<h2 id="创建-utterances.swig">创建 utterances.swig</h2>
<p>在 layout/_third-party/comments 里创建
utterances.swig，内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;%- if page.comments %&#125;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">NexT.utils.loadComments(document.querySelector(&#x27;#utterances-container&#x27;), () =&gt; &#123;</span><br><span class="line">    // if (typeof parcelRequire === &#x27;function&#x27;) &#123; return; &#125;</span><br><span class="line">    var js = document.createElement(&#x27;script&#x27;);</span><br><span class="line">    js.type = &#x27;text/javascript&#x27;;</span><br><span class="line">    js.src = &#x27;https://utteranc.es/client.js&#x27;;</span><br><span class="line">    js.async = true;</span><br><span class="line">    js.crossorigin = &#x27;anonymous&#x27;;</span><br><span class="line">    js.setAttribute(&#x27;repo&#x27;, &#x27;&#123;&#123; theme.utterances.repo &#125;&#125;&#x27;);</span><br><span class="line">    js.setAttribute(&#x27;issue-term&#x27;, &#x27;&#123;&#123; theme.utterances.issue_term &#125;&#125;&#x27;);</span><br><span class="line">    js.setAttribute(&#x27;theme&#x27;, &#x27;&#123;&#123; theme.utterances.theme &#125;&#125;&#x27;);</span><br><span class="line">    document.getElementById(&#x27;utterances-container&#x27;).appendChild(js);</span><br><span class="line">&#125;);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;%- endif %&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="创建-utterances.js">创建 utterances.js</h2>
<p>在 scripts/filters/comment 下创建 utterances.js，内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/* global hexo */</span><br><span class="line"></span><br><span class="line">&#x27;use strict&#x27;;</span><br><span class="line"></span><br><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line"></span><br><span class="line">// Add comment</span><br><span class="line">hexo.extend.filter.register(&#x27;theme_inject&#x27;, injects =&gt; &#123;</span><br><span class="line">  let theme = hexo.theme.config;</span><br><span class="line">  if (!theme.utterances.enable) return;</span><br><span class="line"></span><br><span class="line">  injects.comment.raw(&#x27;utterances&#x27;, &#x27;&lt;div class=&quot;comments&quot; id=&quot;utterances-container&quot;&gt;&lt;/div&gt;&#x27;, &#123;&#125;, &#123;cache: true&#125;);</span><br><span class="line"></span><br><span class="line">  injects.bodyEnd.file(&#x27;utterances&#x27;, path.join(hexo.theme_dir, &#x27;layout/_third-party/comments/utterances.swig&#x27;));</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="修改主题配置文件">修改主题配置文件</h2>
<p>在主题配置文件中添加：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">utterances:</span><br><span class="line">  enable: true</span><br><span class="line">  repo: owner/repo # 这里需要修改为 你的 GitHub 用户名/刚刚创建的，用户保存博客评论的 GitHub 仓库名</span><br><span class="line">  issue_term: pathname</span><br><span class="line">  theme: github-light</span><br></pre></td></tr></table></figure>
<h2 id="配置-utterances-插件">配置 utterances 插件</h2>
<p>在 GitHub 中创建一个公开仓库用于保存博客的评论，点击 <a
href="https://github.com/apps/utterances">utterances app</a> 安装
utterances 。</p>
<h1 id="后记">后记</h1>
<p>在写作这篇博客的时候又检索到了 NexT 主题已经升级到了 8.20.0
，是在另外一个仓库，这个仓库的文档比较全。接下来再研究下把博客升级到这个版本吧……</p>
<h1 id="参考文档">参考文档</h1>
<ul>
<li><a href="https://github.com/theme-next">NexT</a></li>
<li><a href="https://theme-next.org/docs.html">Documentation</a></li>
<li><a href="https://utteranc.es/">utterances</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Hexo</tag>
        <tag>Next</tag>
        <tag>utterances</tag>
        <tag>评论</tag>
      </tags>
  </entry>
  <entry>
    <title>Visio 使用技巧</title>
    <url>/2024/06/28/Visio-%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>本文配置依赖如下版本： <div class="note info"><p>Winddows 10 Visio 2021</p>
</div></p>
<h1 id="visio-快速给多条连接线添加箭头">Visio
快速给多条连接线添加箭头</h1>
<p>使用 Visio
编辑流程图时，往往需要插入多条连接线，给每一个连接线设置箭头非常麻烦。想要同时给多条连接线设置箭头，可以这样做。</p>
<span id="more"></span>
<p>在 <strong>开始</strong> 菜单栏点击 <strong>选择</strong>：
<img src="/2024/06/28/Visio-%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/0.png" class=""> 在 <strong>弹出框</strong> 中点击
<strong>形状角色(R)</strong> ，勾选 <strong>连接线(C)</strong> 即可。
<img src="/2024/06/28/Visio-%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/1.png" class=""></p>
<h1 id="visio-导出图片">Visio 导出图片</h1>
<p>点击左上角 <strong>文件</strong> 选择 <strong>导出</strong> 选择
<strong>更改文件类型</strong>，选择对应的文件格式即可。
<img src="/2024/06/28/Visio-%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/2.png" class=""></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>技巧</tag>
        <tag>Visio</tag>
        <tag>软件</tag>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>前端构建系统阐述[译]</title>
    <url>/2024/07/26/%E5%89%8D%E7%AB%AF%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F%E9%98%90%E8%BF%B0-%E8%AF%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>开发人员编写 JavaScript 代码；浏览器执行 JavaScript
代码。从根本上说，在前端开发中并不需要构建步骤。那么，为什么现代前端开发中会有构建步骤呢？</p>
<p>随着前端代码库的不断增长，以及开发人员工效变得越来越重要，直接将
JavaScript 源代码发送给客户端会导致两个主要问题：</p>
<p><strong>1. 不支持的语言特性：</strong> 因为 JavaScript
在浏览器中运行，而且市面上有多种版本的浏览器，你使用的每一种语言特性，都会减少能够执行你的
JavaScript 的客户端数量。此外，像 JSX 这样的语言扩展不是有效的
JavaScript，不能在任何浏览器中运行。</p>
<p><strong>2. 性能问题：</strong> 浏览器必须单独请求每个 JavaScript
文件。在大型代码库中，这可能导致需要数千个 HTTP
请求来渲染一个页面。在过去，HTTP/2 出现之前，这还会导致数千次 TLS
握手。</p>
<p>此外，可能还需要几次连续的网络往返才能加载完所有的
JavaScript。例如，如果 <code>index.js</code> 导入了
<code>page.js</code>，而 <code>page.js</code> 又导入了
<code>button.js</code>，那么就需要三次连续的网络往返才能完全加载
JavaScript。这被称为瀑布流问题。</p>
<p>源文件也可能因为长变量名和空白缩进字符而变得不必要地大，增加了带宽使用和网络加载时间。</p>
<p>前端构建系统处理源代码，并输出一个或多个为发送到浏览器而优化的
JavaScript 文件。生成的<em>分发版</em>通常对人类来说是难以理解的。</p>
<span id="more"></span>
<h1 id="构建步骤">1. 构建步骤</h1>
<p>前端构建系统通常包括三个步骤：转译、打包和压缩。</p>
<p>一些应用程序可能不需要所有这三个步骤。例如，较小的代码库可能不需要打包或压缩，开发服务器也可能为了性能而跳过打包和
/ 或压缩。也可以添加其他自定义步骤。</p>
<p>一些工具实现了多个构建步骤。特别是打包器通常实现了所有三个步骤，一个打包器单独使用可能就足以构建简单的应用程序。复杂的应用程序可能需要每个构建步骤的专门工具，以提供更大的功能集。</p>
<h2 id="转译">1.1. 转译</h2>
<p>转译解决了不支持的语言特性问题，它通过将使用现代 JavaScript
标准编写的 JavaScript 转换为较旧版本的 JavaScript 标准。如今，ES6/ES2015
是一个常见的转译目标。</p>
<p>框架和工具也可能引入转译步骤。例如，JSX 语法必须转译为
JavaScript。如果一个库提供了 Babel
插件，那通常意味着它需要一个转译步骤。此外，像 TypeScript、CoffeeScript
和 Elm 这样的语言必须转译为 JavaScript。</p>
<p><a href="https://wiki.commonjs.org/wiki/Modules">CommonJS
模块</a>（CJS）也必须转译为浏览器兼容的模块系统。自 2018
年浏览器普遍支持 <a
href="https://exploringjs.com/es6/ch_modules.html">ES6
模块</a>（ESM）以来，通常推荐转译为 ESM。ESM
更容易优化和摇树（tree-shake），因为它的导入和导出是静态定义的。</p>
<p>现在常用的转译器有 Babel、SWC 和 TypeScript 编译器。</p>
<ol type="1">
<li><p><a href="https://babeljs.io/">Babel</a>（2014
年发布）是标准的转译器：一个用 JavaScript
编写的慢速单线程转译器。许多需要转译的框架和库都通过 Babel
插件来进行转译，这要求 Babel 成为构建过程的一部分。然而，Babel
很难调试，而且常常令人困惑。</p></li>
<li><p><a href="https://swc.rs/">SWC</a>（2020 年发布）是一个用 Rust
编写的快速多线程转译器。它声称比 Babel 快 20
倍；因此，它被较新的框架和构建工具所使用。它支持转译 TypeScript 和
JSX。如果你的应用程序不需要 Babel，SWC 是更好的选择。</p></li>
<li><p><a href="https://github.com/microsoft/TypeScript">TypeScript
编译器（tsc）</a>也支持转译 TypeScript 和 JSX。它是 TypeScript
的参考实现，也是唯一的完全功能的 TypeScript
类型检查器。然而，它非常慢。虽然 TypeScript 应用程序必须使用 TypeScript
编译器进行类型检查，但在构建步骤中，使用另一种转译器会更加高效。</p></li>
</ol>
<p>如果你的代码是纯 JavaScript 并且使用 ES6
模块，也可以跳过转译步骤。</p>
<p>对于不支持语言特性的一个子集，一个替代解决方案是 polyfill。Polyfills
在运行时执行，实现任何缺失的语言特性，然后再执行主应用程序逻辑。然而，这增加了运行时成本，有些语言特性无法
polyfill。参见 <a
href="https://github.com/zloirock/core-js">core-js</a>。</p>
<p>所有打包器本质上也是转译器，因为它们解析多个 JavaScript
源文件并输出一个新的打包 JavaScript
文件。在这样做的过程中，它们可以选择在输出的 JavaScript
文件中使用哪些语言特性。一些打包器还能够解析 TypeScript 和 JSX
源文件。如果你的应用程序有简单的转译需求，你可能不需要单独的转译器。</p>
<h2 id="打包">1.2. 打包</h2>
<p>打包解决了需要进行多次网络请求和瀑布流问题的需求。打包器将多个
JavaScript 源文件合并成一个单一的 JavaScript
输出文件，称为打包文件，而不会改变应用程序的行为。打包文件可以由浏览器在一个单一的往返网络请求中高效加载。</p>
<p>现在常用的打包器有 Webpack、Parcel、Rollup、esbuild 和
Turbopack。</p>
<ol type="1">
<li><p><a href="https://webpack.js.org/">Webpack</a>（2014 年发布）在
2016 年左右获得了显著的流行度，后来成为标准的打包器。与当时常用的
Browserify 不同，Browserify 通常与 Gulp 任务运行器一起使用，Webpack
开创了 “加载器” 的概念，这些加载器在导入时转换源文件，允许 Webpack
协调整个构建流水线。</p>
<p>加载器允许开发者在 JavaScript
文件中透明地(简单、直接的)导入静态资源，将所有源文件和静态资源合并到一个依赖图中。使用
Gulp 时，每种类型的静态资源都需要作为单独的任务构建。Webpack
还支持开箱即用的<a
href="https://sunsetglow.net/posts/frontend-build-systems.html#code-splitting">代码拆分</a>，简化了其设置和配置。</p>
<p>Webpack 是慢速且单线程的，用 JavaScript
编写。它高度可配置，但其许多配置选项可能令人困惑。</p></li>
<li><p><a href="https://rollupjs.org/">Rollup</a>（2016 年发布）利用了
ES6 模块的广泛浏览器支持和它所启用的优化，即<a
href="https://sunsetglow.net/posts/frontend-build-systems.html#tree-shaking">摇树</a>。它产生的打包文件大小远小于
Webpack，导致 Webpack 后来采用了类似的优化。Rollup 是一个用 JavaScript
编写的单线程打包器，性能略高于 Webpack。</p></li>
<li><p><a href="https://parceljs.org/">Parcel</a>（2018
年发布）是一个低配置打包器，设计为
“开箱即用”，为构建过程的所有步骤和开发工具需求提供合理的默认配置。它是多线程的，比
Webpack 和 Rollup 快得多。Parcel 2 在后台使用 SWC。</p></li>
<li><p><a href="https://esbuild.github.io/">Esbuild</a>（2020
年发布）是一个为并行性和最佳性能而构建的打包器，用 Go
语言编写。它的性能比 Webpack、Rollup 和 Parcel 高出几十倍。Esbuild
实现了基本的转译器功能，同时也包含了一个压缩器。然而，它的功能没有其他打包工具那么丰富，提供的插件
API 较为有限，无法直接修改抽象语法树（AST）。与其使用 esbuild
插件来修改源文件，更常见的做法是在将文件传递给 esbuild
之前先对其进行转换。</p></li>
<li><p><a href="https://turbo.build/pack">Turbopack</a>（2022
年发布）是一个快速的 Rust 打包工具，支持增量重建。这个项目由 Vercel
公司开发，由 Webpack 的创建者领导。它目前处于测试阶段，可以在 Next.js
中选择使用。</p></li>
</ol>
<p>如果你的模块非常少或者网络延迟非常低（例如在本地主机上），合理地跳过打包步骤是可行的。一些开发服务器也选择不为开发服务器打包模块。</p>
<h3 id="代码拆分">1.2.1. 代码拆分</h3>
<p>默认情况下，客户端 React
应用程序被转换为一个单一的打包文件。对于具有许多页面和功能的大应用程序，打包文件可能非常大，抵消了打包的原始性能优势。</p>
<p>将打包文件分成几个较小的打包文件，或称为<em>代码拆分</em>，解决了这个问题。一种常见的方法是将每个页面拆分成一个单独的打包文件。有了
HTTP/2，共享依赖项也可以被分解到它们自己的打包文件中，以避免重复，几乎没有成本。此外，大型模块可能会拆分成一个单独的打包文件，并按需延迟加载。</p>
<p>代码拆分后，每个打包文件的文件大小大大减少，但现在需要额外的网络往返，可能会重新引入瀑布流问题。代码拆分是一种权衡。</p>
<p>由 Next.js 推广的文件系统路由器优化了代码拆分的权衡。Next.js
为每个页面创建单独的打包文件，只包括该页面导入的代码。加载页面会并行预加载该页面使用的所有打包文件。这优化了打包文件大小，而没有重新引入瀑布流问题。文件系统路由器通过为每个页面创建一个入口点（<code>pages/**/*.jsx</code>），而不是传统客户端
React 应用程序的单个入口点（index.jsx）来实现这一点。</p>
<h3 id="摇树">1.2.2. 摇树</h3>
<p>一个打包文件（bundle）由多个模块组成，每个模块包含一个或多个导出。通常，一个特定的打包文件只会使用它所导入模块的部分导出。打包工具可以通过一个称为
<em>“树摇”（tree shaking）</em>
的过程来移除模块中未使用的导出。这种方式优化了打包文件的大小，从而改善了加载和解析时间。</p>
<p>摇树依赖于源文件的静态分析，因此当静态分析变得更加具有挑战性时，就会受到阻碍。两个影响摇树的效率主要因素：</p>
<p><strong>1. 模块系统：</strong> ES6 模块具有静态导出和导入，而
CommonJS 模块具有动态导出和导入。因此，打包器在摇树 ES6
模块时可以更加积极和高效。</p>
<p><strong>2. 副作用：</strong> <code>package.json</code> 文件中的
<code>sideEffects</code>
属性声明一个模块在导入时是否有副作用。当存在副作用时，由于静态分析的限制，未使用的模块和未使用的导出可能无法被摇树掉。</p>
<h3 id="静态资源">1.2.3. 静态资源</h3>
<p>静态资源，如
CSS、图像和字体，通常在打包步骤中被添加到分发版中。它们也可能在压缩步骤中被优化以减小文件大小。</p>
<p>在 Webpack
之前，静态资源是作为独立的构建任务与源代码分开构建的。要加载静态资源，应用程序必须通过其在分发版中的最终路径引用它们。因此，通常需要围绕
URL 约定（例如 <code>/assets/css/banner.jpg</code> 和
<code>/assets/fonts/Inter.woff2</code>）仔细组织资源。</p>
<p>Webpack 的 “加载器” 允许从 JavaScript
导入静态资源，将代码和静态资源统一到一个依赖图中。在打包过程中，Webpack
用分发版中的最终路径替换静态资源导入。这个功能使得静态资源可以与源代码中的相关组件一起组织，并为静态分析创造了新的可能性，例如检测不存在的资源。</p>
<p>重要的是要认识到，导入静态资源（非 JavaScript 或转译为 JavaScript
的文件）不是 JavaScript
语言的一部分。它需要一个配置了支持该资源类型的打包工具。幸运的是，继
Webpack 之后的打包器也采用了 “加载器（loaders）”
模式，使这个功能变得普遍。</p>
<h2 id="压缩">1.3. 压缩</h2>
<p>压缩解决了不必要的大文件问题。压缩器在不影响其行为的情况下减小文件的大小。对于
JavaScript 代码和 CSS
资源，压缩器可以缩短变量名、消除空白和注释、删除无用代码，并优化语言特性的使用。对于其他静态资源，压缩器可以执行文件大小优化。压缩器通常在构建过程结束时对打包文件进行处理。</p>
<p>目前常用的几个 JavaScript 压缩器是 Terser、esbuild 和 SWC。<a
href="https://terser.org/">Terser</a> 是从不再维护的 uglify-es
分叉出来的。它用 JavaScript 编写，速度有点慢。<strong>Esbuild</strong>
和之前提到的 <strong>SWC</strong> 除了其他功能外还实现了压缩器，并且比
Terser 快。</p>
<p>目前常用的几个 CSS 压缩器是 cssnano、csso 和 Lightning CSS。<a
href="https://cssnano.github.io/cssnano/">Cssnano</a> 和 <a
href="https://github.com/css/csso">csso</a> 是用 JavaScript 编写的纯 CSS
压缩器，因此速度有点慢。<a href="https://lightningcss.dev/">Lightning
CSS</a> 是用 Rust 编写的，声称比 cssnano 快 100 倍。Lightning CSS 还支持
CSS 转换和打包。</p>
<h1 id="开发者工具">2. 开发者工具</h1>
<p>上面描述的基本前端构建流程足以创建一个优化的生产分发包。还有几类工具可以增强基本构建流程并改善开发体验。</p>
<h2 id="元框架meta-frameworks">2.1. 元框架（Meta-Frameworks）</h2>
<p>前端领域以其选择 “正确”
包的挑战而闻名。例如，在上述列出的五个打包器中，你应该选择哪一个？</p>
<p>元框架提供了一组已经选定的包，包括构建工具，它们协同工作并实现专门的应用程序范式。例如，<a
href="https://nextjs.org/">Next.js</a> 专注于服务器端渲染（SSR），而 <a
href="https://nextjs.org/">Remix</a> 专门用于渐进增强。</p>
<p>元框架通常提供一个预配置的构建系统，无需您自己组合一个。它们的构建系统具有适用于生产和开发服务器的配置。</p>
<p>像 <a href="https://vitejs.dev/">Vite</a>
这样的构建工具，与元框架一样，为生产和开发提供了预配置的构建系统。与元框架不同，它们不强制使用专门的应用程序范式。它们适用于通用的前端应用程序。</p>
<h2 id="源映射sourcemaps">2.2. 源映射（Sourcemaps）</h2>
<p>构建流水线输出的分发版对大多数人来说是不可读的。这使得调试任何发生的错误变得困难，因为它们的追踪信息指向了不可读的代码。</p>
<p><a
href="https://developer.chrome.com/blog/sourcemaps/">源映射</a>通过将分发版中的代码映射回源代码中的原始位置来解决这个问题。浏览器和故障排除工具（例如
Sentry）使用源映射来恢复并显示原始源代码。在生产中，源映射通常对浏览器隐藏，并且只上传到故障排除工具以避免公开源代码。</p>
<p>构建流程的每一步都可以输出一个源映射。如果使用多个构建工具构建流水线，源映射将形成一个链（例如
source.js -&gt; transpiler.map -&gt; bundler.map -&gt;
minifier.map）。要确定对应于压缩代码的源代码，必须遍历源映射链。</p>
<p>然而，大多数工具无法解释源映射链；它们期望分发版中每个文件最多有一个源映射。必须将源映射链展平为单个源映射。预配置的构建系统将解决这个问题（见
Vite 的 <a
href="https://github.com/vitejs/vite/blob/feae09fdfab505e58950c915fe5d8dd103d5ffb9/packages/vite/src/node/utils.ts#L831">combineSourcemaps</a>
函数）。</p>
<h2 id="热重载">2.3. 热重载</h2>
<p>开发服务器通常提供热重载功能，它在源代码更改时自动重新构建一个新的打包文件并重新加载浏览器。虽然比手动重建和重新加载要好得多，但它仍然有点慢，并且在重新加载时所有客户端状态都会丢失。</p>
<p><a
href="https://webpack.js.org/concepts/hot-module-replacement/">热模块替换</a>通过在运行中的应用中替换更改的打包文件来改进热重载，这是一种就地更新。它保留了未更改模块的客户端状态，并减少了代码更改和更新应用程序之间的延迟。</p>
<p>然而，每次代码更改都会触发导入它的所有打包文件的重建。这具有与打包文件大小成线性时间复杂度的关系。因此，在大型应用程序中，由于不断增长的重新打包成本，热模块替换可能会变慢。</p>
<p><a href="https://vitejs.dev/guide/why.html">无打包范式</a>，目前由
Vite 倡导，通过不对开发服务器进行打包来应对这个问题。相反，Vite 直接将
ESM
模块，每个模块对应于一个源文件，提供给浏览器。在这种范式中，每次代码更改都会触发前端的单个模块替换。这导致相对于应用程序大小的刷新时间复杂度几乎是恒定的。然而，如果你有很多模块，初始页面加载可能需要花费更长的时间。</p>
<h2 id="单一代码库monorepos">2.4. 单一代码库（Monorepos）</h2>
<p>在拥有多个团队或多个应用程序的组织中，前端代码可能会被分割成多个
JavaScript
包，但这些包仍放在一个代码库里。在这种架构中，每个包都有自己的构建步骤，并且它们共同形成一个包的依赖图。应用程序位于依赖图的顶端。</p>
<p>单一代码库工具协调构建依赖图。它们通常提供增量重建、并行性和远程缓存等功能。有了这些功能，大型代码库可以享受小型代码库的构建时间。</p>
<p>更广泛的行业标准单一代码库工具，如 <a
href="https://bazel.build/">Bazel</a>，支持广泛的语言、复杂的构建图和隔离执行。然而，JavaScript
前端是最难完全集成这些工具的生态系统之一，目前几乎没有先例。</p>
<p>幸运的是，存在几个专门为前端设计的单一代码库工具。不幸的是，它们缺乏
Bazel 等的灵活性和健壮性，最明显的是隔离执行。</p>
<p>目前常用的前端专用单一代码库工具是 <a href="https://nx.dev/">Nx</a>
和 <a href="https://turbo.build/repo">Turborepo</a>。Nx
更成熟、功能更丰富，而 Turborepo 是 Vercel 生态系统的一部分。过去，<a
href="https://lerna.js.org/">Lerna</a> 是将多个 JavaScript
包链接在一起并发布到 NPM 的标准工具。2022 年，Nx 团队接管了 Lerna，Lerna
现在在底层使用 Nx 来驱动构建。</p>
<h1 id="趋势">3. 趋势</h1>
<p>较新的构建工具是用编译语言编写的，并强调性能。前端构建在 2019
年非常慢，但现代工具已经大大加快了速度。然而，现代工具具有较小的功能集，有时与库不兼容，因此旧代码库通常无法轻松切换到它们。</p>
<p>服务器端渲染（SSR）在 Next.js 崛起后变得更受欢迎。SSR
没有为前端构建系统引入任何根本性的差异。SSR 应用程序也必须向浏览器提供
JavaScript，因此它们执行相同的构建步骤。</p>
<h1 id="原文链接">原文链接</h1>
<p><a
href="https://sunsetglow.net/posts/frontend-build-systems.html">Exposition
of Frontend Build Systems</a> 。更多信息请点击链接获取。</p>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>前端构建</tag>
      </tags>
  </entry>
  <entry>
    <title>如何用 JavaScript 快速读取文件[译]</title>
    <url>/2024/06/25/%E5%A6%82%E4%BD%95%E7%94%A8-JavaScript-%E5%BF%AB%E9%80%9F%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6-%E8%AF%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>假设你需要使用 JavaScript 在服务器上读取多个文件。对于像 Node.js
这样的运行时，读取文件的方法有很多种。哪一种方法最好呢？让我们来考虑各种不同的方式。</p>
<h1 id="使用-fs.promises">使用 fs.promises</h1>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs/promises&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> readFile = fs.<span class="property">readFile</span>;</span><br><span class="line"><span class="title function_">readFile</span>(<span class="string">&quot;lipsum.txt&quot;</span>, &#123; <span class="attr">encoding</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;...&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;...&#125;)</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h1 id="使用-fs.readfile-和-util.promisify">使用 fs.readFile 和
util.promisify</h1>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">&#x27;util&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> readFile = util.<span class="title function_">promisify</span>(fs.<span class="property">readFile</span>);</span><br><span class="line"><span class="title function_">readFile</span>(<span class="string">&quot;lipsum.txt&quot;</span>, &#123; <span class="attr">encoding</span>: <span class="string">&#x27;utf-8&#x27;</span> &#125;)</span><br><span class="line">.<span class="title function_">then</span>(<span class="function">(<span class="params">data</span>) =&gt;</span> &#123;...&#125;)</span><br><span class="line">.<span class="title function_">catch</span>(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;...&#125;)</span><br></pre></td></tr></table></figure>
<h1 id="使用-fs.readfilesync">使用 fs.readFileSync</h1>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> readFileSync = fs.<span class="property">readFileSync</span>;</span><br><span class="line"><span class="keyword">var</span> data = <span class="title function_">readFileSync</span>(<span class="string">&quot;lipsum.txt&quot;</span>, &#123; <span class="attr">encoding</span>: <span class="string">&quot;utf-8&quot;</span> &#125;);</span><br></pre></td></tr></table></figure>
<h1 id="使用-await-fs.readfilesync">使用 await fs.readFileSync</h1>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&quot;fs&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> readFileSync = fs.<span class="property">readFileSync</span>;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params">name, options</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">readFileSync</span>(name, options);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="使用-fs.readfile">使用 fs.readFile</h1>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> readFile = fs.<span class="property">readFile</span>;</span><br><span class="line">fs.<span class="title function_">readFile</span>(<span class="string">&#x27;lipsum.txt&#x27;</span>, <span class="keyword">function</span> <span class="title function_">read</span>(<span class="params">err, data</span>) &#123;...&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="基准">基准</h1>
<p><a
href="https://github.com/lemire/Code-used-on-Daniel-Lemire-s-blog/tree/master/2024/03/12">我编写了一个小型基准测试，用于反复从磁盘读取一个文件</a>。这个测试是一个简单的循环，每次都访问同一个文件。我记录了读取该文件
5 万次所需的毫秒数。该文件相对较小，略多于 1
千字节。我使用了一台拥有数十个 Ice Lake Intel
核心和充足内存的大型服务器。所使用的运行时是 Node.js 20.1 和 Bun
1.0.14。<a href="https://bun.sh/">Bun 是一个与 Node.js 竞争的 JavaScript
运行时</a>。</p>
<p>我多次运行了基准测试，并记录了所有情况下的最佳结果。你的结果可能会与我的不同。</p>
<img src="/2024/06/25/%E5%A6%82%E4%BD%95%E7%94%A8-JavaScript-%E5%BF%AB%E9%80%9F%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6-%E8%AF%91/1.png" class="">
<p>至少在我的系统上，在这次测试中使用 Node.js 时，fs.promises
的开销显著高于其他方法。在此次测试中，Bun 运行时比 Node.js 快得多。</p>
<p>从某种意义和上讲，fs.promises 的表现比表面上看起来更糟。因为我发现
readFileSync 使用了 300 毫秒的 CPU 时间，而 fs.promises 使用了 7 秒的
CPU 时间。这是因为在基准测试期间，fs.promises 利用多个 CPU
核心并行执行这些操作。</p>
<p>即使将文件大小增加到例如
32kB，也不会改变结论。如果使用更大的文件，许多 Node.js 的案例会出现
“heap limit Allocation failed” 的错误。而 Bun
即使处理大文件也能继续运行。在我的测试中，使用 Bun 时，fs.readFile
始终表现得更快，即使在处理大文件时。</p>
<p><strong>致谢</strong>。我的基准测试受到 Evgenii Stulnikov
提供的测试用例的启发。</p>
<h1 id="参考">参考</h1>
<p>原文链接 <a
href="https://lemire.me/blog/2024/03/12/how-to-read-files-quickly-in-javascript/">How
to read files quickly in JavaScript</a> 。更多信息请点击链接获取。</p>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>读取文件</tag>
      </tags>
  </entry>
  <entry>
    <title>.git 目录的结构和每个部分的作用[译]</title>
    <url>/2024/09/02/git-%E7%9B%AE%E5%BD%95%E7%9A%84%E7%BB%93%E6%9E%84%E5%92%8C%E6%AF%8F%E4%B8%AA%E9%83%A8%E5%88%86%E7%9A%84%E4%BD%9C%E7%94%A8-%E8%AF%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>想必每个程序员都对 git 非常熟悉，但是你是否知道 .git
目录的结构和每个部分的作用呢？今天我翻译的文章是《Inside .git》，作者是
Julia Evans。<a
href="https://jvns.ca/blog/2024/01/26/inside-git/">文章</a>详细介绍了
Git 版本控制系统中的 .git
目录的结构和每个部分的作用。以下是对文章的全文翻译，为便于理解，部分内容可能稍作修改：</p>
<p>你好！这周我在 Mastodon 上发布了一个关于 <code>.git</code>
目录里有什么内容的漫画，有人想要文字版，于是诞生了这篇文章。我还添加了一些额外的注释。下面是漫画图片。它用大约
15 个词解释了你的 <code>.git</code> 目录的每个部分。</p>

<p>如果你想自己运行这些例子，可以使用
<code>git clone https://github.com/jvns/inside-git</code>。</p>
<span id="more"></span>
<p>这里有一个目录：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">HEAD: .git/head</span><br><span class="line">branch: .git/refs/heads/main</span><br><span class="line">commit: .git/objects/10/93da429…</span><br><span class="line">tree: .git/objects/9f/83ee7550…</span><br><span class="line">blobs: .git/objects/5a/475762c…</span><br><span class="line">reflog: .git/logs/refs/heads/main</span><br><span class="line">remote-tracking branches: .git/refs/remotes/origin/main</span><br><span class="line">tags: .git/refs/tags/v1.0</span><br><span class="line">the stash: .git/refs/stash</span><br><span class="line">.git/config</span><br><span class="line">hooks: .git/hooks/pre-commit</span><br><span class="line">the staging area: .git/index</span><br><span class="line">this isn’t exhaustive</span><br><span class="line">this isn’t meant to completely explain git</span><br></pre></td></tr></table></figure>
<p>前五个部分（HEAD，分支，提交，树，快照）是 git 的核心。</p>
<h1 id="head-.githead">HEAD: .git/head</h1>
<p><code>HEAD</code>
是一个非常小的文件，只包含你当前<strong>分支</strong>的名称。</p>
<p>示例内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> .git/HEAD</span></span><br><span class="line">ref: refs/heads/main</span><br></pre></td></tr></table></figure>
<p><code>HEAD</code> 也可以是一个提交 ID，这被称为 “分离 HEAD
状态(detached HEAD state)”。</p>
<h1 id="分支branch-.gitrefsheadsmain">分支(branch):
.git/refs/heads/main</h1>
<p><strong>分支</strong>也被存储到一个小文件中，只包含一个<strong>提交
ID</strong>。它被存储在名为 <code>refs/heads</code> 的文件夹中。</p>
<p>示例内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> .git/refs/heads/main</span></span><br><span class="line">1093da429f08e0e54cdc2b31526159e745d98ce0</span><br></pre></td></tr></table></figure>
<h1 id="提交commit-.gitobjects1093da429">提交(commit):
.git/objects/10/93da429…</h1>
<p><strong>提交</strong>是一个小文件，包含它的父项、提交信息、<strong>树</strong>和作者。</p>
<p>示例内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git cat-file -p 1093da429f08e0e54cdc2b31526159e745d98ce0</span></span><br><span class="line">tree 9f83ee7550919867e9219a75c23624c92ab5bd83</span><br><span class="line">parent 33a0481b440426f0268c613d036b820bc064cdea</span><br><span class="line">author Julia Evans &lt;julia@example.com&gt; 1706120622 -0500</span><br><span class="line">committer Julia Evans &lt;julia@example.com&gt; 1706120622 -0500</span><br><span class="line"></span><br><span class="line">add hello.py</span><br></pre></td></tr></table></figure>
<p>这些文件是压缩的，查看对象的最佳方式是使用
<code>git cat-file -p HASH</code>。</p>
<h1 id="树tree-.gitobjects9f83ee7550">树(tree):
.git/objects/9f/83ee7550…</h1>
<p><strong>树</strong>是包含目录列表的小文件。其中的文件称为
blob<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="在 Git 版本控制系统中，blob 是 Binary Large Object 的缩写，但在 Git 的上下文中，它通常指的是存储在仓库中的文件内容。在 Git 的对象存储中，blob 代表文件数据，即文件的具体内容。在 Git 的术语中，当你提交（commit）一个文件到仓库时，Git 会将文件的内容存储为一个 blob 对象。这个 blob 对象包含了文件的数据，但不包含文件的元数据（如文件名或目录结构）。然后，这些 blob 对象被引用在一个 tree 对象中，tree 对象相当于一个目录的快照，它记录了文件的名称、类型（是文件还是子目录）以及对应的 blob 或子 tree 的引用。
">[1]</span></a></sup>。</p>
<p>示例内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git cat-file -p 9f83ee7550919867e9219a75c23624c92ab5bd83</span></span><br><span class="line">100644 blob e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 .gitignore</span><br><span class="line">100644 blob 665c637a360874ce43bf74018768a96d2d4d219a hello.py</span><br><span class="line">040000 tree 24420a1530b1f4ec20ddb14c76df8c78c48f76a6 lib</span><br></pre></td></tr></table></figure>
<p>这里的权限<strong>看起来</strong>像是 Unix
权限，但实际上非常受限，只允许 644 和 755。</p>
<h1 id="blob-.gitobjects5a475762c">blob: .git/objects/5a/475762c…</h1>
<p><strong>blob</strong> 是包含你实际代码的那些文件。</p>
<p>示例内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git cat-file -p 665c637a360874ce43bf74018768a96d2d4d219a</span></span><br><span class="line">print(&quot;hello world!&quot;)</span><br></pre></td></tr></table></figure>
<p>每次更改都存储一个新的 blob 可能会使其变得很大，所以 <a
href="https://codewords.recurse.com/issues/three/unpacking-git-packfiles">git
gc</a> 会定期在 <code>.git/objects/pack</code>
中打包它们以提高效率。</p>
<h1 id="引用日志reflog-.gitlogsrefsheadsmain">引用日志(reflog):
.git/logs/refs/heads/main</h1>
<p>引用日志存储每个分支、标签和 HEAD 的历史。对于 <code>.git/refs</code>
中的每个文件，通常在 <code>.git/logs/refs</code>
中都有一个对应的日志文件，但不是绝对的，可能存在一些例外情况。</p>
<p>示例内容，对于 main 分支来说：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">tail</span> -n 1 .git/logs/refs/heads/main</span></span><br><span class="line">33a0481b440426f0268c613d036b820bc064cdea</span><br><span class="line">1093da429f08e0e54cdc2b31526159e745d98ce0</span><br><span class="line">Julia Evans &lt;julia@example.com&gt;</span><br><span class="line">1706119866 -0500</span><br><span class="line">commit: add hello.py</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译者注：tail -n 1 这个命令的意思是显示文件的最后 1 行。</p>
</blockquote>
<p>引用日志的每一行包含：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">提交前后的 ID</span><br><span class="line">用户</span><br><span class="line">时间戳</span><br><span class="line">日志消息</span><br></pre></td></tr></table></figure>
<p>通常它都是一行，我只是为了方便阅读而在这里换行。</p>
<h1 id="远程跟踪分支-.gitrefsremotesoriginmain">远程跟踪分支:
.git/refs/remotes/origin/main</h1>
<p><strong>远程跟踪分支</strong>（remote-tracking
branches）保存了你最后一次从远程仓库获取（fetch）或拉取（pull）时，远程分支上的提交
ID（commit ID）。</p>
<p>示例内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> .git/refs/remotes/origin/main</span></span><br><span class="line">fcdeb177797e8ad8ad4c5381b97fc26bc8ddd5a2</span><br></pre></td></tr></table></figure>
<p>当你运行 git status 命令时，如果 Git 提示 “你与
<code>origin/main</code> 同步” ，Git
只是检查了这个文件。它通常已经过时了，你可以使用
<code>git fetch origin main</code> 来更新该文件。</p>
<h1 id="标签tags-.gitrefstagsv1.0">标签(tags): .git/refs/tags/v1.0</h1>
<p>标签是 <code>.git/refs/tags</code> 中包含提交 ID 的一个小文件。</p>
<p>示例内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash"><span class="built_in">cat</span> .git/refs/tags/v1.0</span></span><br><span class="line">1093da429f08e0e54cdc2b31526159e745d98ce0</span><br></pre></td></tr></table></figure>
<p>与分支不同，当你进行新的提交时，标签不会更新。</p>
<h1 id="stash-.gitrefsstash">stash: .git/refs/stash</h1>
<p>stash 是一个名为 <code>.git/refs/stash</code>
的小文件。它包含当你运行 <code>git stash</code> 时创建的提交 ID。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat .git/refs/stash</span><br><span class="line">62caf3d918112d54bcfa24f3c78a94c224283a78</span><br></pre></td></tr></table></figure>
<p>stash 是一个栈，以前的值存储在
<code>.git/logs/refs/stash</code>（stash 的引用日志）中。</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">cat .git/logs/refs/stash</span><br><span class="line">62caf3d9 e85c950f Julia Evans &lt;julia@example.com&gt; 1706290652 -0500 WIP on main: 1093da4 add hello.py</span><br><span class="line">00000000 62caf3d9 Julia Evans &lt;julia@example.com&gt; 1706290668 -0500 WIP on main: 1093da4 add hello.py</span><br></pre></td></tr></table></figure>
<p>与分支和标签不同，如果你从 stash 中 <code>git stash pop</code>
一个提交，它会从引用日志中删除，所以几乎不可能再次找到它。stash 是 git
中唯一一个被添加后很快就会被删除的引用日志。（在 Git
中，默认情况下，引用日志的条目大约保留 90 天后会被自动清除。）</p>
<p><strong>关于引用的说明</strong>：</p>
<p>到目前为止，你可能已经注意到很多东西（例如分支、远程跟踪分支、标签和
stash）都是 <code>.git/refs</code> 中的提交 ID。它们被称为
“引用(references)” 或 “refs”。每个引用都是一个提交 ID，但是 git
以<strong>非常</strong>不同的方式处理不同类型的引用，即使它们都使用相同的文件格式，我发现将它们分开考虑很有用。例如，git
会从 stash 引用日志中删除日志，但不会删除分支或标签引用日志。</p>
<h1 id="gitconfig">.git/config</h1>
<p><code>.git/config</code>
是存储库的配置文件。这是你配置远程仓库的地方。</p>
<p>示例内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[remote &quot;origin&quot;]</span><br><span class="line">url = git@github.com: jvns/int-exposed</span><br><span class="line">fetch = +refs/heads/_: refs/remotes/origin/_</span><br><span class="line">[branch &quot;main&quot;]</span><br><span class="line">remote = origin</span><br><span class="line">merge refs/heads/main</span><br></pre></td></tr></table></figure>
<p>该配置分为本地和全局设置，本地设置在这里，全局设置在
<code>~/.gitconfig</code> 目录中。</p>
<h1 id="钩子-.githookspre-commit">钩子: .git/hooks/pre-commit</h1>
<p>钩子是可选的脚本，意味着你可以根据需要（例如提交前）选择是否使用它们。</p>
<p>示例内容：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">any-commands-you-want</span><br></pre></td></tr></table></figure>
<p>（这显然不是一个真正的 pre-commit 钩子）</p>
<h1 id="the-staging-area-.gitindex">the staging area: .git/index</h1>
<p>the staging area 存储你准备提交的文件。与 git
中大多数纯文本文件不同的是，它是一个二进制文件。</p>
<p>据我所知，查看索引内容的最佳方式是使用
<code>git ls-files --stage</code>：</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">git ls-files --stage</span></span><br><span class="line">100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0 .gitignore</span><br><span class="line">100644 665c637a360874ce43bf74018768a96d2d4d219a 0 hello.py</span><br><span class="line">100644 e69de29bb2d1d6434b8b29ae775ad8c2e48c5391 0 lib/empty.py</span><br></pre></td></tr></table></figure>
<h1 id="这不是目录中的全部内容">这不是目录中的全部内容</h1>
<p>.git 中还有其他一些东西，比如 FETCH_HEAD、worktrees 和
info。我只包含了那些我认为有助于理解的内容。</p>
<h1 id="这并不意味着完全解释了-git">这并不意味着完全解释了 git</h1>
<p>我听到的关于 git 的最常见的建议之一是“只要学会 .git
目录的结构，然后你就会理解一切！”</p>
<p>我比任何人都更喜欢理解事物的内部，但是“.git
目录的结构”并不能解释<strong>很多</strong>东西，比如：</p>
<ul>
<li>合并(merges)和变基(rebases)是如何工作的，以及它们可能出错的地方（例如这个<a
href="https://jvns.ca/blog/2023/11/06/rebasing-what-can-go-wrong-/">关于变基可能出错</a>的列表）</li>
<li>你的同事是如何使用 git
的，以及你应该遵循什么指导方针才能成功地与他们合作</li>
<li>从其他存储库推送 / 拉取代码是如何工作的</li>
<li>如何处理合并冲突</li>
</ul>
<p>虽然提供的信息可能不全面，不过，希望这些信息对于那些需要它的人是有帮助的。</p>
<h1 id="一些其他参考资料">一些其他参考资料：</h1>
<ul>
<li>詹姆斯・科格兰（James Coglan）的《<a
href="https://shop.jcoglan.com/building-git/">构建
Git</a>》一书（顺便说一句：看起来在一月份的剩余时间里这本书有 <a
href="https://mastodon.social/@jcoglan/111807463940323655">50%
的折扣</a>）</li>
<li>玛丽・罗斯・库克（Mary Rose Cook）的《<a
href="https://maryrosecook.com/blog/post/git-from-the-inside-out">Git
从内到外</a>》</li>
<li>官方 <a
href="https://git-scm.com/docs/gitrepository-layout#Documentation/gitrepository-layout.txt-index">git
存储库布局文档</a></li>
</ul>
<h1 id="译者说">译者说</h1>
<h2
id="在翻译此文过程中使用-hexo-的-reference-的脚注插件发现脚注内容不能包含-双引号否则会渲染异常如下图">在翻译此文过程中，使用
hexo 的 reference 的脚注插件发现，脚注内容不能包含 <code>""</code>
双引号，否则会渲染异常。如下图：</h2>

<h2 id="stash-和-stage-的区别">Stash 和 Stage 的区别</h2>
<h3 id="stash暂存">Stash（暂存）</h3>
<ul>
<li>暂存（Stash）
是一个用于临时保存工作进度的特性。当你在开发过程中需要切换到另一个分支，但你不想立即提交当前的工作（可能是因为它不完整或者你还在工作进行中），你可以使用
<code>git stash</code> 将当前的工作进度保存起来。</li>
<li>被 stash
的更改会从工作目录和暂存区移除，这样你的工作目录就会变得干净，可以进行其他操作，如切换分支或拉取最新的更改。
你可以有多个 stash，每个 stash 都保存了工作进度的不同快照。</li>
<li>通过 <code>git stash list</code> 可以查看所有的 stash，使用
<code>git stash apply</code> 可以重新应用 stash 的更改，或者使用
<code>git stash pop</code> 应用并从列表中移除这个 stash。</li>
</ul>
<h3 id="stage暂存区">Stage（暂存区）</h3>
<ul>
<li>暂存区 是 Git
工作流程中的一个中间步骤，用于准备下一次提交。当你对文件做了更改后，你需要使用
git add 命令将这些更改添加到暂存区。</li>
<li>暂存区是一个文件（.git/index），它记录了你准备在下一次提交中包含的文件列表和这些文件的当前状态。</li>
<li>暂存区的状态可以通过 <code>git status</code>
查看，它会显示哪些文件已经被暂存，哪些文件还在工作目录中等待暂存。</li>
<li>一旦你使用 git commit
提交了更改，暂存区的内容就会被写入一个新的提交，并且暂存区会被清空。</li>
</ul>
<h3 id="区别总结">区别总结</h3>
<ul>
<li>目的不同：Stash 用于临时保存和恢复工作进度，而 Stage
用于准备和审查即将提交的更改。</li>
<li>工作方式不同：Stash 会将更改保存在栈中，可以随时应用或丢弃；Stage
是一个准备区，用于在提交前组织和检查更改。</li>
<li>状态影响不同：使用 Stash 后，工作目录会被清空，而 Stage
后，更改会被标记为待提交，但仍然保留在工作目录中。</li>
</ul>
<h1 id="参考文档">参考文档</h1>
<p><a
href="https://jvns.ca/blog/2024/01/26/inside-git/">原文链接</a></p>
<div id="footnotes">
<hr>
<div id="footnotelist">
<ol style="list-style: none; padding-left: 0; margin-left: 40px">
<li id="fn:1">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">在
Git 版本控制系统中，blob 是 Binary Large Object 的缩写，但在 Git
的上下文中，它通常指的是存储在仓库中的文件内容。在 Git
的对象存储中，blob 代表文件数据，即文件的具体内容。在 Git
的术语中，当你提交（commit）一个文件到仓库时，Git
会将文件的内容存储为一个 blob 对象。这个 blob
对象包含了文件的数据，但不包含文件的元数据（如文件名或目录结构）。然后，这些
blob 对象被引用在一个 tree 对象中，tree
对象相当于一个目录的快照，它记录了文件的名称、类型（是文件还是子目录）以及对应的
blob 或子 tree 的引用。<a href="#fnref:1" rev="footnote"> ↩︎</a></span>
</li>
</ol>
</div>
</div>
</div>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>.git 目录</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript 中的垃圾回收和闭包[译]</title>
    <url>/2024/09/11/JavaScript-%E4%B8%AD%E7%9A%84%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E5%92%8C%E9%97%AD%E5%8C%85-%E8%AF%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在 JavaScript
开发中，垃圾回收和闭包是两个常见但容易被忽视的技术细节。表面上，它们的工作机制看似简单，但在特定情况下，它们可能会导致内存泄漏，甚至影响应用的性能。</p>
<p>作者 Jake Archibald 在 <a
href="https://jakearchibald.com/2024/garbage-collection-and-closures/#an-iife-is-enough-to-trigger-the-leak">《Garbage
collection and
closures》</a>一文中通过真实的代码示例，深入剖析垃圾回收与闭包之间的复杂关系，帮助你了解如何避免内存泄漏，写出更高效、更可靠的代码。</p>
<p>以下是文章的全文翻译：</p>
<p>我和 <a href="https://twitter.com/DasSurma">Surma</a>、<a
href="https://twitter.com/_developit">Jason</a>
一起开发时，发现函数内的垃圾回收并不像我们预期的那样工作。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> bigArrayBuffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">100_000_000</span>);</span><br><span class="line">  <span class="keyword">const</span> id = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(bigArrayBuffer.<span class="property">byteLength</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearTimeout</span>(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">globalThis.<span class="property">cancelDemo</span> = <span class="title function_">demo</span>();</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>在上面的代码中，<code>bigArrayBuffer</code>
会被永远泄漏。我没想到会这样，因为：</p>
<ul>
<li>一秒钟后，引用 <code>bigArrayBuffer</code> 的函数将不能调用。</li>
<li>返回的取消定时函数没有引用 <code>bigArrayBuffer</code>。</li>
</ul>
<p>但这并不重要。原因如下：</p>
<blockquote>
<p><strong>JavaScript 引擎相当智能</strong></p>
</blockquote>
<p>下面这个例子不会发生内存泄漏：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> bigArrayBuffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">100_000_000</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(bigArrayBuffer.<span class="property">byteLength</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">demo</span>();</span><br></pre></td></tr></table></figure>
<p>因为当函数执行后，<code>bigArrayBuffer</code>
就不再需要了，所以它被垃圾回收了。</p>
<p>下面这个例子也不会发生内存泄漏：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> bigArrayBuffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">100_000_000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(bigArrayBuffer.<span class="property">byteLength</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">demo</span>();</span><br></pre></td></tr></table></figure>
<p>在这个例子中：</p>
<ol type="1">
<li>浏览器引擎看到 <code>bigArrayBuffer</code>
被内部函数引用，所以它被保留下来。它与调用 <code>demo()</code>
时创建的作用域关联。</li>
<li>一秒钟后，引用 <code>bigArrayBuffer</code>
的函数不可再次被调用。</li>
<li>由于作用域内没有任何可以调用的函数，<code>bigArrayBuffer</code>可以和作用域一起被回收。</li>
</ol>
<p>下面这个例子也不会有泄漏：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> bigArrayBuffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">100_000_000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> id = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearTimeout</span>(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">globalThis.<span class="property">cancelDemo</span> = <span class="title function_">demo</span>();</span><br></pre></td></tr></table></figure>
<p>在这个例子中，引擎知道它不需要保留
<code>bigArrayBuffer</code>，因为它只是定义了，但是并没有被访问。</p>
<h1 id="问题案例">问题案例</h1>
<p>下面这个案例就比较复杂了：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> bigArrayBuffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">100_000_000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> id = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(bigArrayBuffer.<span class="property">byteLength</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="built_in">clearTimeout</span>(id);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">globalThis.<span class="property">cancelDemo</span> = <span class="title function_">demo</span>();</span><br></pre></td></tr></table></figure>
<p>它会泄漏，因为：</p>
<ol type="1">
<li>浏览器引擎看到 <code>bigArrayBuffer</code>
被内部函数引用，所以它被保留下来。它与调用 <code>demo()</code>
时创建的作用域关联。</li>
<li>一秒钟后，引用 <code>bigArrayBuffer</code> 的函数不能再被调用。</li>
<li>但是，作用域仍然存在，因为 ‘cancel’ 函数仍然可调用。</li>
<li><code>bigArrayBuffer</code>
与作用域关联，所以它仍然保留在内存中。</li>
</ol>
<p>我以为引擎会更智能，即使 <code>bigArrayBuffer</code>
不再可引用，也会进行垃圾回收，但事实并非如此。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">globalThis.<span class="property">cancelDemo</span> = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<p>现在 <code>bigArrayBuffer</code>
可以被垃圾回收了，因为作用域内没有任何可调用的函数。</p>
<p>这个问题并不局限于定时器，可能在其他场景中也会发生。例如：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> bigArrayBuffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">100_000_000</span>);</span><br><span class="line"></span><br><span class="line">  globalThis.<span class="property">innerFunc1</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(bigArrayBuffer.<span class="property">byteLength</span>);</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  globalThis.<span class="property">innerFunc2</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">demo</span>();</span><br><span class="line"><span class="comment">// bigArrayBuffer 被保留，正如预期。</span></span><br><span class="line"></span><br><span class="line">globalThis.<span class="property">innerFunc1</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="comment">// bigArrayBuffer 仍然被保留，这是出乎意料的。</span></span><br><span class="line"></span><br><span class="line">globalThis.<span class="property">innerFunc2</span> = <span class="literal">undefined</span>;</span><br><span class="line"><span class="comment">// bigArrayBuffer 现在可以被回收了。</span></span><br></pre></td></tr></table></figure>
<p>我今天才知道！</p>
<h1 id="更新">更新</h1>
<blockquote>
<p>一个立即执行的函数表达式（IIFE）足以触发泄漏</p>
</blockquote>
<p>我最初认为只有当子函数的生命周期长于其父函数的执行时，才会发生值的捕获，但事实并非如此：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> bigArrayBuffer = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">100_000_000</span>);</span><br><span class="line">  <span class="comment">// 译者注：IIFE 通过闭包捕获了 bigArrayBuffer，即使 demo 函数执行完毕，IIFE 仍然存在（因为它被立即执行），这导致 bigArrayBuffer 仍然被引用，因此不会被垃圾回收。</span></span><br><span class="line">  <span class="comment">// 这意味着，只要闭包中的函数在父函数执行完毕后仍然存在，它们就会捕获并保留父函数中的变量，即使这些变量在父函数中已经不再需要。</span></span><br><span class="line">  (<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(bigArrayBuffer.<span class="property">byteLength</span>);</span><br><span class="line">  &#125;)();</span><br><span class="line"></span><br><span class="line">  globalThis.<span class="property">innerFunc</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">demo</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// bigArrayBuffer 被保留，这是出乎意料的。</span></span><br></pre></td></tr></table></figure>
<p>在这里，内部的立即执行函数表达式足以触发泄漏。</p>
<blockquote>
<p>这是一个跨浏览器的问题</p>
</blockquote>
<p>这个问题在所有浏览器中都存在，并且由于性能问题不太可能被修复。</p>
<ul>
<li><a href="https://issues.chromium.org/issues/41070945">Chromium
相关问题</a></li>
<li><a
href="https://bugzilla.mozilla.org/show_bug.cgi?id=894971">Firefox
相关问题</a></li>
<li><a href="https://bugs.webkit.org/show_bug.cgi?id=224077">WebKit
相关问题</a></li>
</ul>
<blockquote>
<p>我不是第一个写这个问题的人</p>
</blockquote>
<p>Slava Egorov 在 2012 年就这个问题<a
href="https://mrale.ph/blog/2012/09/23/grokking-v8-closures-for-fun.html">进行了深入的探讨</a>。
David Glasser 在 2013 年<a
href="https://point.davidglasser.net/2013/06/27/surprising-javascript-memory-leak.html">发现了这个问题</a>，他是
Meteor 的工程师。 Kevin Schiener 在 2024 年 5 月对它<a
href="https://point.davidglasser.net/2013/06/27/surprising-javascript-memory-leak.html">进行了
React 中的研究</a>。</p>
<blockquote>
<p>不，这不是因为 <code>eval()</code></p>
</blockquote>
<p><a href="https://news.ycombinator.com/item?id=41111062">Hacker
News</a> 和 Twitter 上的人很快指出，这都是因为
<code>eval()</code>，但事实并非如此。</p>
<p>eval 是棘手的，因为它意味着代码可以存在于无法静态分析的作用域中：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> bigArrayBuffer1 = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">100_000_000</span>);</span><br><span class="line">  <span class="keyword">const</span> bigArrayBuffer2 = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">100_000_000</span>);</span><br><span class="line"></span><br><span class="line">  globalThis.<span class="property">innerFunc</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">eval</span>(whatever);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">demo</span>();</span><br></pre></td></tr></table></figure>
<p>是否在 <code>innerFunc</code> 内访问了 <code>bigArrayBuffer1</code>
或者 <code>bigArrayBuffer2</code>？没有办法知道。但浏览器可以静态确定
<code>eval</code>
存在。这会导致去优化(deopt)，然后其父作用域中的所有内容都将被保留。</p>
<blockquote>
<p>译者注： 由于 eval 的存在，浏览器无法确定 <code>innerFunc</code>
内部是否会访问 <code>bigArrayBuffer1</code> 或
<code>bigArrayBuffer2</code>。因此，浏览器必须假设
<code>innerFunc</code> 可能会访问这些变量。</p>
<p>这种不确定性导致浏览器在优化代码时采取保守策略，即不优化可能涉及
<code>eval</code> 的代码。这被称为
“去优化”（deopt），意味着浏览器不会对这部分代码进行某些优化，以确保运行时的正确性。</p>
<p>由于去优化，<code>bigArrayBuffer1</code> 和
<code>bigArrayBuffer2</code> 即使在 <code>demo</code>
函数执行完毕后，也可能不会被垃圾回收，因为浏览器必须保留它们以确保
<code>innerFunc</code> 可以正常访问它们。</p>
</blockquote>
<p>但是下面这个案例中，浏览器可以静态分析，因为 <code>eval</code>
的表现有点像关键字：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> customEval = <span class="built_in">eval</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">demo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> bigArrayBuffer1 = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">100_000_000</span>);</span><br><span class="line">  <span class="keyword">const</span> bigArrayBuffer2 = <span class="keyword">new</span> <span class="title class_">ArrayBuffer</span>(<span class="number">100_000_000</span>);</span><br><span class="line"></span><br><span class="line">  globalThis.<span class="property">innerFunc</span> = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">customEval</span>(whatever);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">demo</span>();</span><br></pre></td></tr></table></figure>
<p>…这个例子中去优化不会发生。因为 <code>eval</code>
关键字没有直接使用，<code>whatever</code> 将在全局作用域中执行，而不是在
<code>innerFunc</code> 作用域内。这被称为“间接 eval”，MDN 上有更多<a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/eval#direct_and_indirect_eval">关于这个话题</a>的信息。</p>
<p>这种行为的存在是为了让浏览器能够将这种去优化限制在可以静态分析的情况下。</p>
<p><a
href="https://github.com/jakearchibald/jakearchibald.com/blob/main/static-build/posts/2024/07/garbage-collection-and-closures/index.md">在
GitHub 上查看此页面</a></p>
<h1 id="译者注">译者注</h1>
<h2 id="iifeimmediately-invoked-function-expression">IIFE(Immediately
Invoked Function Expression)</h2>
<p>IIFE ，中文可以翻译为
“立即调用的函数表达式”。这是一种在定义后立即执行的 JavaScript
函数，它是一种自执行的匿名函数。</p>
<p>IIFE
通常用于创建一个封闭的作用域，这样可以避免变量冲突或污染全局命名空间。它的基本语法如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// 函数体内的代码</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>这个函数没有名字，并且立即执行括号中的代码。由于它立即执行，因此被称为
“立即调用”。</p>
<p>IIFE 还可以接受参数，并且返回值，就像普通的函数一样：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;)(<span class="number">1</span>, <span class="number">2</span>); <span class="comment">// 返回 3</span></span><br></pre></td></tr></table></figure>
<p>在 ES6 引入了箭头函数之后，IIFE 的写法可以更简洁：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 函数体内的代码</span></span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure>
<p>IIFE 是 JavaScript
编程中常用的一种模式，特别是在模块化开发和库的设计中，用于封装代码和创建私有变量。</p>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>垃圾回收</tag>
        <tag>闭包</tag>
      </tags>
  </entry>
  <entry>
    <title>精进 JavaScript 技术，享受乐趣，收获利润[译]</title>
    <url>/2024/09/13/%E7%B2%BE%E8%BF%9B-JavaScript-%E6%8A%80%E6%9C%AF%EF%BC%8C%E4%BA%AB%E5%8F%97%E4%B9%90%E8%B6%A3%EF%BC%8C%E6%94%B6%E8%8E%B7%E5%88%A9%E6%B6%A6-%E8%AF%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>万字长文吐血整理，建议点赞收藏，细细品味。</p>
<p>今天翻译的文章是 <a
href="https://romgrk.com/posts/optimizing-javascript#8-use-strings-carefully">《Optimizing
Javascript for fun and for profit》</a>，作者 Rom Grk。文中深入探讨了 13
个不为人知的 JavaScript
高级优化技巧。通过实际案例和详细的解释，揭示了如何通过深入理解
JavaScript
引擎的工作原理来提升代码性能。同时，强调了基准测试的重要性，并提供了一些工具和策略，帮助开发者进行基准测试。以下是文章的全文翻译：</p>
<p>我常常感觉，如果得到适当的优化，JavaScript
代码通常可以运行得更快。我在这里总结了一些有用的常见优化技术。需要注意的是，性能提升往往以可读性为代价，因此我把在性能和可读性之间做选择的问题留给读者。我还要指出，谈论优化就必然要谈论基准测试。如果一个函数在整体运行时间中只占很小一部分，那么花几个小时对其进行微调，使其运行速度提高
100
倍是没有意义的。如果正在进行性能优化，第一步也是最重要的一步是基准测试。我将在后面的要点中介绍这个话题。同时请注意，微基准测试通常是有缺陷的，这里介绍的也可能包括在内。我已经尽力避免这些陷阱，但在没有基准测试的情况下，不要盲目使用此处提出的任何要点。</p>
<span id="more"></span>
<p>我已经为所有可能的情况提供了可运行的示例。它们默认显示的是我使用 Arch
Linux 系统的 Brave 浏览器（版本
122）<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="Brave 122 on Arch Linux 指的是在 Arch Linux 操作系统上运行的 Brave 浏览器版本 122。Brave 是一款注重隐私保护的网络浏览器，它通过屏蔽广告和追踪器来提高用户的隐私安全和浏览速度。
">[1]</span></a></sup>上得到的结果。尽管我不愿这么说，但 Firefox
在优化方面已经有点落后了，<a
href="https://foundation.mozilla.org/en/?form=donate-header">目前</a>它在浏览器在市场份额（用户使用量）方面只占很小一部分，所以我不推荐将
Firefox 上得到的结果作为评估网站或应用性能的有效指标。</p>
<h1 id="避免工作">0. 避免工作</h1>
<p>这虽然显而易见但是至关重要，因为在优化中没有比这更早的步骤了：如果你正在尝试优化，你应该首先考虑避免工作（译者注：避免工作意味着在可能的情况下，不去执行不必要的计算或操作。这可能涉及到减少函数调用、避免重复计算、或者延迟计算直到真正需要结果的时候）。这包括记忆化（通过存储函数的中间结果，当同样的输入再次出现时，可以直接返回之前计算的结果，避免重复计算。）、惰性（延迟计算，直到结果真正需要时才进行。这样可以避免在某些情况下根本不需要的计算。）和增量计算（只对改变的部分进行计算，而不是重新计算整个结果，从而节省资源。）等概念。这些概念的应用会根据上下文的不同而有所不同。例如，在
React 中，可以使用 memo() 和 useMemo()
等内置函数来避免不必要的组件渲染和计算。memo()
可以用来防止组件在父组件渲染时不必要地重新渲染，而 useMemo()
可以用来记忆计算密集型的结果。</p>
<h1 id="避免字符串比较">1. 避免字符串比较</h1>
<p>JavaScript 可以轻松隐藏字符串比较的实际成本。如果需要在 C
语言中比较字符串，你会使用 <code>strcmp(a, b)</code> 函数。JavaScript
使用 <code>===</code> 代替，所以你看不到 <code>strcmp</code>
函数。但它确实存在，字符串比较通常（但并不总是）需要将一个字符串中的每个字符与另一个字符串中的字符进行比较；字符串比较的时间复杂度是
O(n)。一种需要避免的常见 JavaScript 模式是将字符串用作枚举。但随着
TypeScript 的出现，这种情况因该很容易避免，因为枚举默认是整数。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 不推荐</span></span><br><span class="line">enum <span class="title class_">Position</span> &#123;</span><br><span class="line">  <span class="variable constant_">TOP</span> = <span class="string">&#x27;TOP&#x27;</span>,</span><br><span class="line">  <span class="variable constant_">BOTTOM</span> = <span class="string">&#x27;BOTTOM&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 推荐</span></span><br><span class="line">enum <span class="title class_">Position</span> &#123;</span><br><span class="line">  <span class="variable constant_">TOP</span>, <span class="comment">// = 0</span></span><br><span class="line">  <span class="variable constant_">BOTTOM</span>, <span class="comment">// = 1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面是两者的性能差异：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. string 比较</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Position</span> = &#123;</span><br><span class="line">  <span class="attr">TOP</span>: <span class="string">&quot;TOP&quot;</span>,</span><br><span class="line">  <span class="attr">BOTTOM</span>: <span class="string">&quot;BOTTOM&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> _ = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> current = i % <span class="number">2</span> === <span class="number">0</span> ? <span class="title class_">Position</span>.<span class="property">TOP</span> : <span class="title class_">Position</span>.<span class="property">BOTTOM</span>;</span><br><span class="line">  <span class="keyword">if</span> (current === <span class="title class_">Position</span>.<span class="property">TOP</span>) _ += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. int 比较</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">Position</span> = &#123;</span><br><span class="line">  <span class="attr">TOP</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="attr">BOTTOM</span>: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> _ = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> current = i % <span class="number">2</span> === <span class="number">0</span> ? <span class="title class_">Position</span>.<span class="property">TOP</span> : <span class="title class_">Position</span>.<span class="property">BOTTOM</span>;</span><br><span class="line">  <span class="keyword">if</span> (current === <span class="title class_">Position</span>.<span class="property">TOP</span>) _ += <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，整数比较比字符串比较快了
1 倍左右。</p>
</blockquote>
<blockquote>
<p>关于基准测试 百分比结果表示在 1
秒内完成的操作数量，除以最高得分案例的操作数量。数值越高越好。</p>
</blockquote>
<p>如你所见，差异可能非常显著。差异不一定是由 <code>strcmp</code>
成本造成的，因为引擎有时可以使用字符串池并通过引用进行比较，但这也是因为在
JS
引擎中整数通常按值传递，而字符串总是作为指针传递，内存访问的成本很高（参见第
5 节）。在大量使用字符串的代码中，这可能会产生巨大的影响。</p>
<p>举一个真实世界的例子，我能够让<a
href="https://github.com/json5/json5/pull/278">这个 JSON5 JavaScript
解析器的速度提高 2 倍</a>，仅仅通过将字符串常量替换为数字。</p>
<p>*不幸的是它没有被合并，但开源项目就是如此。</p>
<h1 id="避免不同的形状">2.避免不同的形状</h1>
<p>JavaScript
引擎试图通过假设对象具有特定的形状(shape)来优化代码，并且假设函数将接收具有相同形状的对象。这允许它们一次存储该形状的所有对象的键，并在单独的平面数组中存储值。在
JavaScript 中表示如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> objects = [</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Anthony&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">36</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;Eckhart&quot;</span>,</span><br><span class="line">    <span class="attr">age</span>: <span class="number">42</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 译注：上面的对象可以表示成下面这种结构，将所有键提取出来，将所有值存储在一个数组中</span></span><br><span class="line"><span class="keyword">const</span> shape = [</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;name&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;string&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">name</span>: <span class="string">&quot;age&quot;</span>, <span class="attr">type</span>: <span class="string">&quot;integer&quot;</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> objects = [</span><br><span class="line">  [<span class="string">&quot;Anthony&quot;</span>, <span class="number">36</span>],</span><br><span class="line">  [<span class="string">&quot;Eckhart&quot;</span>, <span class="number">42</span>],</span><br><span class="line">];</span><br></pre></td></tr></table></figure>
<blockquote>
<p>关于术语的解释 我使用了 “形状”
这个词来表达这个概念，但请注意，您可能还看到过使用 “隐藏类（hidden
class）” 或 “映射（map）” 描述它，具体取决于不同的引擎。</p>
</blockquote>
<p>例如，在运行时，如果以下函数接收两个具有形状
<code>&#123; x: number, y: number &#125;</code>
的对象，引擎将推测未来的对象将具有相同的形状，并为该形状生成优化的机器代码。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">x</span>: a.<span class="property">x</span> + b.<span class="property">x</span>,</span><br><span class="line">    <span class="attr">y</span>: a.<span class="property">y</span> + b.<span class="property">y</span>,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果传递的对象不是形状为 <code>&#123; x, y &#125;</code> 而是形状为
<code>&#123; y, x &#125;</code>
的对象，引擎将需要撤销其推测，而且函数将突然变得相当慢。我不会在这里展开解释，因为你应该阅读
<a
href="https://mrale.ph/blog/2015/01/11/whats-up-with-monomorphism.html">mraleph
的优秀文章</a>以获取更多细节，但我要强调的是，尤其是 V8 有 3
种模式，对于访问分别是：单态（1 个形状）、多态（2-4 个形状）和超多态（5
个以上形状）。你真的应该保持代码的单态性，因为一旦代码变成多态或超多态，性能下降会非常严重：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化</span></span><br><span class="line"><span class="keyword">let</span> _ = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 1. 单态</span></span><br><span class="line"><span class="keyword">const</span> o1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o2 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o3 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o4 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o5 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;; <span class="comment">// 所有类型都一样</span></span><br><span class="line"><span class="comment">// 2. 多态</span></span><br><span class="line"><span class="keyword">const</span> o1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o2 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o3 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o4 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o5 = &#123; <span class="attr">b</span>: _, <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;; <span class="comment">// 这个类型与其他类型不同</span></span><br><span class="line"><span class="comment">// 3. 超多态</span></span><br><span class="line"><span class="keyword">const</span> o1 = &#123; <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o2 = &#123; <span class="attr">b</span>: _, <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o3 = &#123; <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">d</span>: _, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o4 = &#123; <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">a</span>: <span class="number">1</span>, <span class="attr">e</span>: _ &#125;;</span><br><span class="line"><span class="keyword">const</span> o5 = &#123; <span class="attr">b</span>: _, <span class="attr">c</span>: _, <span class="attr">d</span>: _, <span class="attr">e</span>: _, <span class="attr">a</span>: <span class="number">1</span> &#125;; <span class="comment">// 所有类型都不一样</span></span><br><span class="line"><span class="comment">// 测试代码</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a1, b1</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a1.<span class="property">a</span> + a1.<span class="property">b</span> + a1.<span class="property">c</span> + a1.<span class="property">d</span> + a1.<span class="property">e</span> + b1.<span class="property">a</span> + b1.<span class="property">b</span> + b1.<span class="property">c</span> + b1.<span class="property">d</span> + b1.<span class="property">e</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">1000000</span>; i++) &#123;</span><br><span class="line">  result += <span class="title function_">add</span>(o1, o2);</span><br><span class="line">  result += <span class="title function_">add</span>(o3, o4);</span><br><span class="line">  result += <span class="title function_">add</span>(o4, o5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，一旦代码变得多态或超多态，性能就会急剧下降。</p>
</blockquote>
<p>应该如何应对这种情况？</p>
<p>说起来容易做起来难，但是：应该<strong>用完全相同的形状创建所有对象</strong>。即使是像<strong>以不同顺序编写
React
组件属性（prop）这样微不足道的事情也可能触发这个问题</strong>。</p>
<p>例如，以下是我在 React 代码库中发现的<a
href="https://github.com/facebook/react/pull/28569">简单案例</a>，但他们几年前就有一个<a
href="https://v8.dev/blog/react-cliff">影响更大的案例</a>，他们首先用整数初始化了一个对象，后来又存储了一个浮点数。是的，改变类型也会改变形状。尽管整数和浮点数都是数字（<code>number</code>）类型，但是它们在底层的表示和处理方式是不同的。开发者需要意识到这个问题，并在编写代码时考虑到这一点。</p>
<blockquote>
<p>数字表示 引擎通常可以将整数编码为值。例如，V8 使用 32
位编码来表示值，整数被编码为紧凑的 <a
href="https://medium.com/fhinkel/v8-internals-how-small-is-a-small-integer-e0badc18b6da">Smi</a>
(SMall Integer) 值，但浮点数和大整数则像字符串和对象一样作为指针传递。
JSC 使用 64 位编码、 双标签（<a
href="https://ktln2.org/2020/08/25/javascriptcore/">double
tagging</a>）来按值传递所有数字，就像 SpiderMonkey
所做的那样，其余的则作为指针传递。</p>
</blockquote>
<h1 id="避免数组-对象方法">3.避免数组 / 对象方法</h1>
<p>我像其他人一样喜欢函数式编程，但除非你使用 Haskell/OCaml/Rust
语言，其函数式代码被编译成高效的机器代码，否则函数式编程总是会比命令式编程慢。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> result = [<span class="number">1.5</span>, <span class="number">3.5</span>, <span class="number">5.0</span>]</span><br><span class="line">  .<span class="title function_">map</span>(<span class="function">(<span class="params">n</span>) =&gt;</span> <span class="title class_">Math</span>.<span class="title function_">round</span>(n))</span><br><span class="line">  .<span class="title function_">filter</span>(<span class="function">(<span class="params">n</span>) =&gt;</span> n % <span class="number">2</span> === <span class="number">0</span>)</span><br><span class="line">  .<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, n</span>) =&gt;</span> a + n, <span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<p>这些方法的问题在于：</p>
<ol type="1">
<li>它们需要完整复制数组，而这些副本后面需要由垃圾收集器释放。我们将在第
5 节更详细地探讨内存 I/O 问题。</li>
<li>它们为 N 个操作循环 N 次，而 for 循环只需要一次循环。</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化:</span></span><br><span class="line"><span class="keyword">const</span> numbers = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">10_000</span> &#125;).<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="title class_">Math</span>.<span class="title function_">random</span>());</span><br><span class="line"><span class="comment">// 1. 函数式</span></span><br><span class="line"><span class="keyword">const</span> result = numbers</span><br><span class="line">  .<span class="title function_">map</span>(<span class="function">(<span class="params">n</span>) =&gt;</span> <span class="title class_">Math</span>.<span class="title function_">round</span>(n * <span class="number">10</span>))</span><br><span class="line">  .<span class="title function_">filter</span>(<span class="function">(<span class="params">n</span>) =&gt;</span> n % <span class="number">2</span> === <span class="number">0</span>)</span><br><span class="line">  .<span class="title function_">reduce</span>(<span class="function">(<span class="params">a, n</span>) =&gt;</span> a + n, <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 2. 命令式</span></span><br><span class="line"><span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; numbers.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">let</span> n = <span class="title class_">Math</span>.<span class="title function_">round</span>(numbers[i] * <span class="number">10</span>);</span><br><span class="line">  <span class="keyword">if</span> (n % <span class="number">2</span> !== <span class="number">0</span>) <span class="keyword">continue</span>;</span><br><span class="line">  result = result + n;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，命令式比函数式快了差不多
3 倍。</p>
</blockquote>
<p>对象方法如 <code>Object.values()</code>、<code>Object.keys()</code>
和
<code>Object.entries()</code>也有类似的问题，因为它们也分配了更多的数据，而内存访问是所有性能问题的根源。真的，我发誓，我将在第
5 节展示给你看。</p>
<h1 id="避免间接访问">4.避免间接访问</h1>
<p>寻找优化增益的另一个地方是任何间接访问，比如下面 3 个主要来源：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> point = &#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.</span></span><br><span class="line"><span class="comment">// 代理对象很难优化，因为它们的 get/set 函数可能运行自定义逻辑，所以引擎不能做出通常的假设。</span></span><br><span class="line"><span class="keyword">const</span> proxy = <span class="keyword">new</span> <span class="title class_">Proxy</span>(point, &#123;</span><br><span class="line">  <span class="attr">get</span>: <span class="function">(<span class="params">t, k</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> t[k];</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 一些引擎可以使代理成本消失，但这些优化的实现是昂贵的，并且可能很脆弱，容易因为 JavaScript 代码的其他变化或引擎的更新而失效。</span></span><br><span class="line"><span class="keyword">const</span> x = proxy.<span class="property">x</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.</span></span><br><span class="line"><span class="comment">// 通常被忽视，但通过 `.` 或 `[]` 访问对象也是间接的。在简单的情况下，引擎可以很好地优化掉这个成本：</span></span><br><span class="line"><span class="keyword">const</span> x = point.<span class="property">x</span>;</span><br><span class="line"><span class="comment">// 但每次额外的访问都会增加成本，并使引擎更难对 `point` 的状态做出假设：</span></span><br><span class="line"><span class="keyword">const</span> x = <span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">circle</span>.<span class="property">center</span>.<span class="property">point</span>.<span class="property">x</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.</span></span><br><span class="line"><span class="comment">// 最后，函数调用也有成本。引擎通常擅长通过内联优化<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="内联（Inlining）是一种优化技术，JavaScript 引擎（如 V8、SpiderMonkey、JavaScriptCore 等）使用这种技术来减少函数调用的开销。通过内联，引擎可以将函数的代码直接插入到调用该函数的地方，从而避免了函数调用的额外开销。内联优化通常在以下情况下效果最好：当函数体较小且被频繁调用时，或者函数调用发生在热点代码（即执行非常频繁的代码段）中时。
">[2]</span></a></sup>来减少这种成本：</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getX</span>(<span class="params">p</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> p.<span class="property">x</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> x = <span class="title function_">getX</span>(p);</span><br><span class="line"><span class="comment">// 但并不能保证他们一定可以。特别是如果函数调用不是来自静态函数而是来自参数：</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Component</span>(<span class="params">&#123; point, getX &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">getX</span>(point);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代理性能基准测试目前对 V8
引擎来说特别具有挑战性。上次我检查的时候，代理对象总是从即时编译器（JIT）<sup id="fnref:3"><a href="#fn:3" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="JIT（Just-In-Time）编译器是一种在程序运行时将源代码编译成机器代码的技术，它可以提高程序的执行速度。解释器（interpreter）是一种逐行或逐句执行源代码的程序，通常比 JIT 编译器慢，因为它没有进行优化的编译过程
">[3]</span></a></sup>回退到解释器，从那些结果来看，现在可能还是这种情况。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 代理访问</span></span><br><span class="line"><span class="keyword">const</span> point = <span class="keyword">new</span> <span class="title class_">Proxy</span>(&#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;, &#123; <span class="attr">get</span>: <span class="function">(<span class="params">t, k</span>) =&gt;</span> t[k] &#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> _ = <span class="number">0</span>, i = <span class="number">0</span>; i &lt; <span class="number">100_000</span>; i++) &#123;</span><br><span class="line">  _ += point.<span class="property">x</span>;</span><br><span class="line">&#125;</span><br><span class="line">javascript;</span><br><span class="line"><span class="comment">// 2. 直接访问</span></span><br><span class="line"><span class="keyword">const</span> point = &#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> x = point.<span class="property">x</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> _ = <span class="number">0</span>, i = <span class="number">0</span>; i &lt; <span class="number">100_000</span>; i++) &#123;</span><br><span class="line">  _ += x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，直接访问比代理访问快了差不多
50 倍。</p>
</blockquote>
<p>我还想要展示访问深层嵌套对象与直接访问对象之间的差异，但引擎非常擅长在存在热循环<sup id="fnref:4"><a href="#fn:4" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="当存在一个 热循环（即执行非常频繁的循环）和一个 常量对象（即对象在循环过程中没有改变）时，引擎可以通过逃逸分析来优化对象的访问。这种优化可能会减少访问对象属性时的性能开销。
">[4]</span></a></sup>和常量对象时，通过逃逸分析<sup id="fnref:5"><a href="#fn:5" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="逃逸分析是 JavaScript 引擎用来确定对象是否在当前作用域之外被引用的一种分析技术。如果一个对象在循环中被频繁访问，且对象本身没有被外部引用（即没有逃逸出当前作用域），引擎可能会对这个对象进行优化。
">[5]</span></a></sup>来优化对象访问。我加入了一些间接访问来防止这种优化。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 1. 嵌套访问</span></span><br><span class="line"><span class="keyword">const</span> a = &#123; <span class="attr">state</span>: &#123; <span class="attr">center</span>: &#123; <span class="attr">point</span>: &#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125; &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> b = &#123; <span class="attr">state</span>: &#123; <span class="attr">center</span>: &#123; <span class="attr">point</span>: &#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">20</span> &#125; &#125; &#125; &#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">get</span> = (<span class="params">i</span>) =&gt; (i % <span class="number">2</span> ? a : b);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100_000</span>; i++) &#123;</span><br><span class="line">  result = result + <span class="title function_">get</span>(i).<span class="property">state</span>.<span class="property">center</span>.<span class="property">point</span>.<span class="property">x</span>;</span><br><span class="line">&#125;</span><br><span class="line">javascript;</span><br><span class="line"><span class="comment">// 2. 直接访问</span></span><br><span class="line"><span class="keyword">const</span> a = &#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;.<span class="property">x</span>;</span><br><span class="line"><span class="keyword">const</span> b = &#123; <span class="attr">x</span>: <span class="number">10</span>, <span class="attr">y</span>: <span class="number">20</span> &#125;.<span class="property">x</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">get</span> = (<span class="params">i</span>) =&gt; (i % <span class="number">2</span> ? a : b);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> result = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100_000</span>; i++) &#123;</span><br><span class="line">  result = result + <span class="title function_">get</span>(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，直接访问比嵌套访问快了差不多
2 倍。</p>
</blockquote>
<h1 id="避免缓存未命中">5.避免缓存未命中</h1>
<p>这一节需要一些底层知识， JavaScript
是一门高级语言，运行在虚拟机或解释器上，但底层的内存访问模式仍然对性能有影响。从
CPU 的角度来看，从 RAM
中检索内存的速度很慢。为了加快速度，它主要使用两种优化技术。</p>
<h2 id="预取">5.1 预取</h2>
<p>第一种是预取技术：它会提前获取更多的内存，希望这些是你接下来会感兴趣的内存。它总是猜测，如果你请求了一个内存地址，你可能会对紧随其后的内存区域感兴趣。所以<strong>顺序访问数据</strong>是关键。在下面的示例中，我们可以观察到以随机顺序访问内存的影响。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化:</span></span><br><span class="line"><span class="keyword">const</span> K = <span class="number">1024</span>;</span><br><span class="line"><span class="keyword">const</span> length = <span class="number">1</span> * K * K;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这些点是依次创建的，因此它们在内存中是顺序分配的。</span></span><br><span class="line"><span class="keyword">const</span> points = <span class="keyword">new</span> <span class="title class_">Array</span>(length);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; points.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  points[i] = &#123; <span class="attr">x</span>: <span class="number">42</span>, <span class="attr">y</span>: <span class="number">0</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 这个数组包含了与上面相同的数据，但是被随机打乱了。</span></span><br><span class="line"><span class="keyword">const</span> shuffledPoints = <span class="title function_">shuffle</span>(points.<span class="title function_">slice</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 顺序</span></span><br><span class="line"><span class="keyword">let</span> _ = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; points.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  _ += points[i].<span class="property">x</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. 随机</span></span><br><span class="line"><span class="keyword">let</span> _ = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; shuffledPoints.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  _ += shuffledPoints[i].<span class="property">x</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，顺序访问比随机访问快了差不多
7 倍。</p>
</blockquote>
<p>应该如何应对这种情况？</p>
<p>这个方面可能是最难实践的，因为 JavaScript
没有一种方式来指定对象在内存中的位置。但是，你可以利用这些知识来发挥优势，就像上面的例子一样，例如在重新排序或排序之前对数据进行操作。你不能假设顺序创建的对象在一段时间后还会保持在相同的位置，因为垃圾回收器可能会四处移动它们。有一个例外，那就是数字数组，，最好是
<code>TypedArray</code> 实例：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 从这样</span></span><br><span class="line"><span class="keyword">const</span> points = [</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">5</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">x</span>: <span class="number">0</span>, <span class="attr">y</span>: <span class="number">10</span> &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 到这样</span></span><br><span class="line"><span class="keyword">const</span> points = <span class="keyword">new</span> <span class="title class_">Int64Array</span>([<span class="number">0</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">10</span>]);</span><br></pre></td></tr></table></figure>
<p>更多详细案例，请参考这个<a
href="https://mrale.ph/blog/2018/02/03/maybe-you-dont-need-rust-to-speed-up-your-js.html#optimizing-parsing---reducing-gc-pressure">链接</a>。</p>
<p>*请注意，虽然它包含一些现已过时的优化，但总体而言仍然准确。</p>
<h2 id="l123-缓存">5.2 L1/2/3 缓存</h2>
<p>CPU 使用的第二种优化是 L1/L2/L3 缓存：这些缓存就像是更快的
RAM，但它们也更昂贵，因此容量要小得多。它们包含了 RAM
中的数据，但像最近最少使用（LRU）缓存一样工作。数据在 “热”
的时候（正在被处理）进入缓存，并在需要空间来装载新的工作数据时被写回主
RAM。所以关键是尽可能少地使用数据，以保持你的工作数据集在快速缓存中。在下面的例子中，我们可以观察到破坏每一个连续缓存的效果。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化:</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">KB</span> = <span class="number">1024</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">MB</span> = <span class="number">1024</span> \* <span class="variable constant_">KB</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 这些是适应这些缓存的大致大小。如果你的机器上没有得到相同的结果，可能是因为你的 L1/L2/L3 大小不同。</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">L1</span>  = <span class="number">256</span> * <span class="variable constant_">KB</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">L2</span>  =   <span class="number">5</span> * <span class="variable constant_">MB</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">L3</span>  =  <span class="number">18</span> * <span class="variable constant_">MB</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">RAM</span> =  <span class="number">32</span> * <span class="variable constant_">MB</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 我们将在所有测试用例中访问同一个缓冲区，但我们只在第一个用例中访问前 0 到 L1 条目，</span></span><br><span class="line"><span class="comment">// 在第二个用例中访问 0 到 L2 条目，依此类推</span></span><br><span class="line"><span class="keyword">const</span> buffer = <span class="keyword">new</span> <span class="title class_">Int8Array</span>(<span class="variable constant_">RAM</span>)</span><br><span class="line">buffer.<span class="title function_">fill</span>(<span class="number">42</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">random</span> = (<span class="params">max</span>) =&gt; <span class="title class_">Math</span>.<span class="title function_">floor</span>(<span class="title class_">Math</span>.<span class="title function_">random</span>() \* max)</span><br><span class="line">javascript</span><br><span class="line"><span class="comment">// 1. L1</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="number">0</span>; <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123; r += buffer[<span class="title function_">random</span>(<span class="variable constant_">L1</span>)] &#125;</span><br><span class="line">javascript</span><br><span class="line"><span class="comment">// 2. L2</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="number">0</span>; <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123; r += buffer[<span class="title function_">random</span>(<span class="variable constant_">L2</span>)] &#125;</span><br><span class="line">javascript</span><br><span class="line"><span class="comment">// 3. L3</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="number">0</span>; <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123; r += buffer[<span class="title function_">random</span>(<span class="variable constant_">L3</span>)] &#125;</span><br><span class="line">javascript</span><br><span class="line"><span class="comment">// 4. RAM</span></span><br><span class="line"><span class="keyword">let</span> r = <span class="number">0</span>; <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100000</span>; i++) &#123; r += buffer[<span class="title function_">random</span>(<span class="variable constant_">RAM</span>)] &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，L1
访问速度最快，RAM 访问速度最慢。</p>
</blockquote>
<p>应该如何应对这种情况？</p>
<p><strong>无情地消除每一个可以消除的数据或内存</strong>分配。你的数据集越小，你的程序运行得越快。内存
I/O 是 95%
程序的瓶颈。另一种好的策略是将你的工作分成块，并确保你一次只处理一个小数据集。</p>
<p>有关 CPU 和内存的更多详细信息，请参阅此<a
href="https://people.freebsd.org/~lstewart/articles/cpumemory.pdf">链接</a>。</p>
<blockquote>
<p>关于不可变数据结构
不可变性对于清晰性和正确性来说非常有用，但在性能方面，更新不可变数据结构意味着创建容器的副本，这就需要更多的内存
I/O，可能会清除你的缓存。在可能的情况下，你应该避免使用不可变数据结构。</p>
</blockquote>
<blockquote>
<p>关于展开运算符 { …spread }
它非常方便，但每次使用它时都会在内存中创建一个新对象。更多内存
I/O，更慢的缓存！</p>
</blockquote>
<h1 id="避免大型对象">6.避免大型对象</h1>
<p>正如第 2
节所解释的，引擎使用形状来优化对象。然而，当形状变得太大时，引擎别无选择，只能使用常规
hashmap （如 <code>Map</code> 对象）。正如我们在第 5
节所看到的，缓存未命中会显著降低性能。Hashmap
由于其数据通常随机且均匀分布在它们所占据的内存区域，因此容易受到这种影响。让我们看看这个按
ID 索引的一些用户的映射如何表现。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化:</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">USERS_LENGTH</span> = <span class="number">1_000</span>;</span><br><span class="line"><span class="comment">// 初始化:</span></span><br><span class="line"><span class="keyword">const</span> byId = &#123;&#125;;</span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="variable constant_">USERS_LENGTH</span> &#125;).<span class="title function_">forEach</span>(<span class="function">(<span class="params">_, id</span>) =&gt;</span> &#123;</span><br><span class="line">  byId[id] = &#123; id, <span class="attr">name</span>: <span class="string">&quot;John&quot;</span> &#125;;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">let</span> _ = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 1. [] 访问</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">keys</span>(byId).<span class="title function_">forEach</span>(<span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">  _ += byId[id].<span class="property">id</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 2. 直接访问</span></span><br><span class="line"><span class="title class_">Object</span>.<span class="title function_">values</span>(byId).<span class="title function_">forEach</span>(<span class="function">(<span class="params">user</span>) =&gt;</span> &#123;</span><br><span class="line">  _ += user.<span class="property">id</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，直接访问比
[] 访问快了差不多 2 倍。</p>
</blockquote>
<p>我们也可以观察到，随着对象大小的增长，性能如何持续下降：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化:</span></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">USERS_LENGTH</span> = <span class="number">100_000</span>;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，当
USERS_LENGTH 的值为 100000 时，直接访问比 [] 访问快了差不多 5 倍。</p>
</blockquote>
<p>应该如何应对这种情况？</p>
<p>如上所述，避免频繁索引大型对象。最好事先将对象转换为数组。将 ID
作为模型的一部分来组织数据会很有帮助，因为你可以直接使用 Object.values()
方法，而不需要通过键映射来获取 ID。</p>
<h1 id="使用-eval">7.使用 eval</h1>
<p>一些 JavaScript 模式对引擎来说很难优化，通过使用 <code>eval()</code>
或其衍生产品，你可以使这些模式消失。在这个例子中，我们可以看到使用
<code>eval()</code> 避免了创建具有动态对象键的对象的成本：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化:</span></span><br><span class="line"><span class="keyword">const</span> key = <span class="string">&quot;requestId&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> values = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">100_000</span> &#125;).<span class="title function_">fill</span>(<span class="number">42</span>);</span><br><span class="line"><span class="comment">// 1. 不使用 eval</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createMessages</span>(<span class="params">key, values</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> messages = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; values.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    messages.<span class="title function_">push</span>(&#123; [key]: values[i] &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> messages;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">createMessages</span>(key, values);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 使用 eval</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createMessages</span>(<span class="params">key, values</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> messages = [];</span><br><span class="line">  <span class="keyword">const</span> createMessage = <span class="keyword">new</span> <span class="title class_">Function</span>(</span><br><span class="line">    <span class="string">&quot;value&quot;</span>,</span><br><span class="line">    <span class="string">`return &#123; <span class="subst">$&#123;<span class="built_in">JSON</span>.stringify(key)&#125;</span>: value &#125;`</span></span><br><span class="line">  );</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; values.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    messages.<span class="title function_">push</span>(<span class="title function_">createMessage</span>(values[i]));</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> messages;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">createMessages</span>(key, values);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，使用
<code>eval</code> 比不使用 <code>eval</code> 快了差不多 2 倍。</p>
</blockquote>
<p>eval
的另一个好的用例是编译一个过滤谓词函数<sup id="fnref:6"><a href="#fn:6" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="谓词函数是一个返回布尔值的函数，通常用于判断某个条件是否满足。
">[6]</span></a></sup>，你可以丢弃那些你知道永远不会执行的分支。一般来说，任何将在热循环<sup id="fnref:7"><a href="#fn:7" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="热循环（hot loop）是指在程序中执行非常频繁的循环。在这种情况下，循环体内的代码性能至关重要。
">[7]</span></a></sup>中运行的函数都适合这种优化。</p>
<p>显然，关于使用 <code>eval()</code>
的常见警告同样适用：不要信任用户输入，净化任何传递给 <code>eval()</code>
代码中的内容，并且不要创建任何跨站脚本攻击
（XSS）可能性。还要注意，有些环境不允许访问
<code>eval()</code>，例如带有内容安全策略(CSP)的浏览器页面。</p>
<h1 id="谨慎使用字符串">8.谨慎使用字符串</h1>
<p>我们已经看到，字符串比它们看起来的成本更高。好吧，我这里有一个好消息和一个坏消息，让我们按逻辑顺序（坏消息优先，好消息其次）讲吧：字符串比它们看起来的更复杂，但如果使用得当，它们也可以非常高效。</p>
<p>由于其使用场景，字符串操作是 JavaScript
的核心部分。为了优化字符串密集型代码，引擎必须具有创造性。我的意思是，它们必须根据不同的用例，在
C++
中以多种字符串表示形式来表示字符串对象。你应该关注两种通用情况，因为它们对于
V8（迄今为止最常用的引擎）是成立的，通常也适用于其他引擎。</p>
<p>首先，使用 +
连接的字符串不会创建两个输入字符串的副本。该操作创建一个指向每个子字符串的指针。如果是在
TypeScript 中，它可能是这样的：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">String</span> &#123;</span><br><span class="line">  abstract <span class="title function_">value</span>(): char[] &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BytesString</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">bytes: char[]</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">bytes</span> = bytes</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">value</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">bytes</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ConcatenatedString</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">left: <span class="built_in">String</span>, right: <span class="built_in">String</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">left</span> = left</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">right</span> = right</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">value</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> [...<span class="variable language_">this</span>.<span class="property">left</span>.<span class="title function_">value</span>(), ...<span class="variable language_">this</span>.<span class="property">right</span>.<span class="title function_">value</span>()]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">concat</span>(<span class="params">left, right</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">ConcatenatedString</span>(left, right)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> first = <span class="keyword">new</span> <span class="title class_">BytesString</span>([<span class="string">&#x27;H&#x27;</span>, <span class="string">&#x27;e&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27; &#x27;</span>])</span><br><span class="line"><span class="keyword">const</span> second = <span class="keyword">new</span> <span class="title class_">BytesString</span>([<span class="string">&#x27;w&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;r&#x27;</span>, <span class="string">&#x27;l&#x27;</span>, <span class="string">&#x27;d&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 看这里, 没有数组复制！</span></span><br><span class="line"><span class="keyword">const</span> message = <span class="title function_">concat</span>(first, second)</span><br></pre></td></tr></table></figure>
<p>其次，字符串切片也不需要创建副本：它们可以简单地指向另一个字符串中的范围。继续上面的示例：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">SlicedString</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">source: <span class="built_in">String</span>, start: number, end: number</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">source</span> = source;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">start</span> = start;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">end</span> = end;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">value</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">source</span>.<span class="title function_">value</span>().<span class="title function_">slice</span>(<span class="variable language_">this</span>.<span class="property">start</span>, <span class="variable language_">this</span>.<span class="property">end</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">substring</span>(<span class="params">source, start, end</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SlicedString</span>(source, start, end);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 结果是 &quot;He&quot;，但它仍然不包含数组副本。</span></span><br><span class="line"><span class="comment">// 它是从 ConcatenatedString 到 SlicedString 的两个 BytesString</span></span><br><span class="line"><span class="keyword">const</span> firstTwoLetters = <span class="title function_">substring</span>(message, <span class="number">0</span>, <span class="number">2</span>);</span><br></pre></td></tr></table></figure>
<p>但问题是：一旦你需要改变这些字节，那就是你开始支付复制成本的时刻。让我们回到我们的
<code>String</code> 类，尝试添加一个<code>.trimEnd</code> 方法：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">String</span> &#123;</span><br><span class="line">  abstract <span class="title function_">value</span>(): char[] &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">trimEnd</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 调用 value() 方法时可能会涉及到一个经过切片（Sliced）、拼接（Concatenated）和两倍字节（2*Bytes）处理的字符串</span></span><br><span class="line">    <span class="keyword">const</span> bytes = <span class="variable language_">this</span>.<span class="title function_">value</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> result = bytes.<span class="title function_">slice</span>()</span><br><span class="line">    <span class="keyword">while</span> (result[result.<span class="property">length</span> - <span class="number">1</span>] === <span class="string">&#x27; &#x27;</span>)</span><br><span class="line">      result.<span class="title function_">pop</span>()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">BytesString</span>(result)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>让我们看这个例子，该例中我们比较使用变异（Mutation）与只使用连接（Concatenation）的操作：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化:</span></span><br><span class="line"><span class="keyword">const</span> classNames = [<span class="string">&quot;primary&quot;</span>, <span class="string">&quot;selected&quot;</span>, <span class="string">&quot;active&quot;</span>, <span class="string">&quot;medium&quot;</span>];</span><br><span class="line"><span class="comment">// 1. 变异</span></span><br><span class="line"><span class="keyword">const</span> result = classNames.<span class="title function_">map</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> <span class="string">`button--<span class="subst">$&#123;c&#125;</span>`</span>).<span class="title function_">join</span>(<span class="string">&quot; &quot;</span>);</span><br><span class="line"><span class="comment">// 2. 连接</span></span><br><span class="line"><span class="keyword">const</span> result = classNames</span><br><span class="line">  .<span class="title function_">map</span>(<span class="function">(<span class="params">c</span>) =&gt;</span> <span class="string">&quot;button--&quot;</span> + c)</span><br><span class="line">  .<span class="title function_">reduce</span>(<span class="function">(<span class="params">acc, c</span>) =&gt;</span> acc + <span class="string">&quot; &quot;</span> + c, <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，使用连接比使用变异快了差不多
3 倍。</p>
</blockquote>
<p>应该如何应对这种情况？</p>
<p>总的来说，尽量<strong>尽可能长时间地避免变异操作</strong>。这包括
<code>.trim()</code>、<code>.replace()</code>
等方法。思考如何可以避免使用这些方法。在一些引擎中，字符串模板也可能比 +
慢。目前在 V8 中是这样，但未来可能不是，所以总是进行基准测试。</p>
<p>关于上面的
<code>SlicedString</code>，你应该注意的是，如果一个非常大的字符串中的一个小子字符串在内存中存活，它可能会阻止垃圾回收集器回收大字符串！如果你正在处理大型文本并从中提取小字符串，你可能会泄露大量的内存。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> large = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">10_000</span> &#125;)</span><br><span class="line">  .<span class="title function_">map</span>(<span class="function">() =&gt;</span> <span class="string">&quot;string&quot;</span>)</span><br><span class="line">  .<span class="title function_">join</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> small = large.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">50</span>);</span><br><span class="line"><span class="comment">// small 将会使 large 保持存活</span></span><br></pre></td></tr></table></figure>
<p>这里的解决方案是使用对我们有利的变异方法。如果我们在
<code>small</code>
上使用其中一个变异方法，它将强制创建一个新的副本，并且指向
<code>large</code> 的旧指针将丢失：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 替换一个不存在的 token</span></span><br><span class="line"><span class="keyword">const</span> small = small.<span class="title function_">replace</span>(<span class="string">&quot;#&quot;</span>.<span class="title function_">repeat</span>(small.<span class="property">length</span> + <span class="number">1</span>), <span class="string">&quot;&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>更多详细信息，请参阅 <a
href="https://github.com/v8/v8/blob/main/src/objects/string.h">V8 上的
string.h</a> 或 <a
href="https://github.com/WebKit/WebKit/blob/main/Source/JavaScriptCore/runtime/JSString.h">JavaScriptCore
上的 JSString.h</a>。</p>
<blockquote>
<p>关于字符串的复杂性
我非常快速地浏览了这些内容，但是有很多实现细节增加了字符串的复杂性。每种字符串表示形式通常都有最小长度限制。例如，连接字符串可能不适用于非常小的字符串。或者有时会有一些限制，比如避免指向一个子串的子串。阅读上面链接的
C++ 文件可以很好地了解这些实现细节，哪怕只是读读注释也好。</p>
</blockquote>
<h1 id="使用专门化">9.使用专门化</h1>
<p>性能优化中的一个重要概念是 <em>专门化</em>
：根据特定用例的约束调整你的逻辑。这通常意味着弄清楚哪些条件对你的案例
<em>可能</em> 是真的，并为这些条件编码。</p>
<p>假设我们是一个商户，有时需要给产品列表添加标签。我们从经验中知道，我们的标签通常是空的。了解到这个信息，我们可以为那个案例专门化我们的函数：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化:</span></span><br><span class="line"><span class="keyword">const</span> descriptions = [<span class="string">&quot;apples&quot;</span>, <span class="string">&quot;oranges&quot;</span>, <span class="string">&quot;bananas&quot;</span>, <span class="string">&quot;seven&quot;</span>];</span><br><span class="line"><span class="keyword">const</span> someTags = &#123;</span><br><span class="line">  <span class="attr">apples</span>: <span class="string">&quot;::promotion::&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> noTags = &#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将产品信息转换为字符串，同时包含可用的标签</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">productsToString</span>(<span class="params">description, tags</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  description.<span class="title function_">forEach</span>(<span class="function">(<span class="params">product</span>) =&gt;</span> &#123;</span><br><span class="line">    result += product;</span><br><span class="line">    <span class="keyword">if</span> (tags[product]) result += tags[product];</span><br><span class="line">    result += <span class="string">&quot;, &quot;</span>;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 将上述代码做专门化处理</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">productsToStringSpecialized</span>(<span class="params">description, tags</span>) &#123;</span><br><span class="line">  <span class="comment">// 我们知道 tags 很可能是空的，所以我们提前检查一次，</span></span><br><span class="line">  <span class="comment">// 然后我们可以在内部循环中移除 if 检查。</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">isEmpty</span>(tags)) &#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    description.<span class="title function_">forEach</span>(<span class="function">(<span class="params">product</span>) =&gt;</span> &#123;</span><br><span class="line">      result += product + <span class="string">&quot;, &quot;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> result = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    description.<span class="title function_">forEach</span>(<span class="function">(<span class="params">product</span>) =&gt;</span> &#123;</span><br><span class="line">      result += product;</span><br><span class="line">      <span class="keyword">if</span> (tags[product]) result += tags[product];</span><br><span class="line">      result += <span class="string">&quot;, &quot;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isEmpty</span>(<span class="params">o</span>) &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> _ <span class="keyword">in</span> o) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. 未作专门化处理</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">  <span class="title function_">productsToString</span>(descriptions, someTags);</span><br><span class="line">  <span class="title function_">productsToString</span>(descriptions, noTags);</span><br><span class="line">  <span class="title function_">productsToString</span>(descriptions, noTags);</span><br><span class="line">  <span class="title function_">productsToString</span>(descriptions, noTags);</span><br><span class="line">  <span class="title function_">productsToString</span>(descriptions, noTags);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. 专门化处理</span></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">  <span class="title function_">productsToStringSpecialized</span>(descriptions, someTags);</span><br><span class="line">  <span class="title function_">productsToStringSpecialized</span>(descriptions, noTags);</span><br><span class="line">  <span class="title function_">productsToStringSpecialized</span>(descriptions, noTags);</span><br><span class="line">  <span class="title function_">productsToStringSpecialized</span>(descriptions, noTags);</span><br><span class="line">  <span class="title function_">productsToStringSpecialized</span>(descriptions, noTags);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，专门化处理后比未作专门化处理快了差不多
1.2 倍。</p>
</blockquote>
<p>虽然这种类型的优化只能提供适度的改进，但这些改进会累积起来。它们是对更重要的优化（如形状和内存
I/O）的一个很好的补充。但请注意，如果条件发生变化，专门化可能会对你不利，所以应该谨慎使用。</p>
<blockquote>
<p>分支预测和无分支代码
对于性能来说，从你的代码中移除分支可以极大地提高效率。要了解更多关于分支预测器的信息，请阅读
Stack Overflow 上的经典回答 <a
href="https://stackoverflow.com/questions/11227809/why-is-processing-a-sorted-array-faster-than-processing-an-unsorted-array">为什么处理一个已排序的数组会更快</a>。</p>
</blockquote>
<h1 id="数据结构">10.数据结构</h1>
<p>我不会详细讨论数据结构，因为这部分内容太多需要单独的帖子。但请注意为你的用例使用错误的数据结构可能会产生比<strong>上述任何优化都更大的影响</strong>。我建议你熟悉像
<code>Map</code> 和 <code>Set</code>
这样的原生数据结构，并且学习链表、优先队列、树（RB 和
B+）并亲自尝试。</p>
<p>举一个简单的例子，让我们比较 <code>Array.includes</code> 与
<code>Set.has</code> 对于一个小列表的表现：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 初始化:</span></span><br><span class="line"><span class="keyword">const</span> userIds = <span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">1_000</span> &#125;).<span class="title function_">map</span>(<span class="function">(<span class="params">_, i</span>) =&gt;</span> i);</span><br><span class="line"><span class="keyword">const</span> adminIdsArray = userIds.<span class="title function_">slice</span>(<span class="number">0</span>, <span class="number">10</span>);</span><br><span class="line"><span class="keyword">const</span> adminIdsSet = <span class="keyword">new</span> <span class="title class_">Set</span>(adminIdsArray);</span><br><span class="line"><span class="comment">// 1. Array</span></span><br><span class="line"><span class="keyword">let</span> _ = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; userIds.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (adminIdsArray.<span class="title function_">includes</span>(userIds[i])) &#123;</span><br><span class="line">    _ += <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. Set</span></span><br><span class="line"><span class="keyword">let</span> _ = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; userIds.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="keyword">if</span> (adminIdsSet.<span class="title function_">has</span>(userIds[i])) &#123;</span><br><span class="line">    _ += <span class="number">1</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>译注：博客原文这里可以直接运行测试代码，此处省略。测试结果表明，Set
比 Array 快了差不多 3 倍。</p>
</blockquote>
<p>如你所见，数据结构的选择会产生非常显著的差异。</p>
<p>作为一个真实世界的例子，我们曾经通过将数组换成链表，<a
href="https://github.com/mui/mui-x/pull/9200">将一个函数的运行时间从 5
秒减少到 22 毫秒</a>。</p>
<h1 id="基准测试">11.基准测试</h1>
<p>我把这部分留到最后有一个原因：我需要用上面有趣的部分建立信誉。现在我希望已经赢得了你的信任，我要告诉你基准测试是优化中最重要的部分。它不仅是最重要的，而且也是
<em>困难的</em> 。即使拥有 20
年的经验，我有时也会创建有缺陷的基准测试，或者错误地使用分析工具。所以无论你做什么，请把<strong>最大的努力放在正确地使用基准测试上</strong>。</p>
<h2 id="从大块开始">11.0 从大块开始</h2>
<p>你应该始终优先优化占你程序运行时间最大部分的函数或代码段。如果你花费时间优化其他非关键部分，那么就是在浪费时间。</p>
<h2 id="避免微基准测试">11.1 避免微基准测试</h2>
<p>在生产模式下运行你的代码，并基于这些观察进行优化。JavaScript
引擎非常复杂，并且在微基准测试<sup id="fnref:8"><a href="#fn:8" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="微基准测试（Microbenchmarking）是一种性能测试方法，它专注于测量代码的非常小片段的执行时间。这种方法通常用于评估和比较特定操作的性能，如函数调用、数据访问、算法实现等。
">[8]</span></a></sup>中的表现通常与在现实场景中不同。例如，看这个微基准测试：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> a = &#123; <span class="attr">type</span>: <span class="string">&quot;div&quot;</span>, <span class="attr">count</span>: <span class="number">5</span> &#125;;</span><br><span class="line"><span class="keyword">const</span> b = &#123; <span class="attr">type</span>: <span class="string">&quot;span&quot;</span>, <span class="attr">count</span>: <span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">typeEquals</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a.<span class="property">type</span> === b.<span class="property">type</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">100_000</span>; i++) &#123;</span><br><span class="line">  <span class="title function_">typeEquals</span>(a, b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果你认真看了上面的内容，你会意识到引擎将为形状
<code>&#123; type: string, count: number &#125;</code>
专门化这个函数。但在你的真实世界用例中，这是否成立？<code>a</code> 和
<code>b</code>
是否总是那种形状，还是会收到任何形状？如果你在生产环境中收到许多形状，这个函数的表现将会不同。</p>
<h2 id="怀疑你结果">11.2 怀疑你结果</h2>
<p>如果你刚刚优化完一个函数，它现在运行立马快了 100
倍，请对此表示怀疑。试着反驳你的结果，试着在生产模式下测试它，尝试传递不同的参数。同时，怀疑你的测试工具。仅仅使用开发工具观察基准测试就可以改变其行为。</p>
<h2 id="选择你的目标">11.3 选择你的目标</h2>
<p>不同的引擎会比其他引擎更好或更差地优化某些模式。你应该为你相关的引擎进行基准测试，并确定哪一个更重要。这是
Babel 的<a
href="https://github.com/babel/babel/pull/16357">一个真实实例</a>，其中改进
V8 意味着降低 JSC 的性能。</p>
<h1 id="分析和工具">12.分析和工具</h1>
<p>关于分析和开发工具的各种评论。</p>
<h2 id="浏览器陷阱">12.1 浏览器陷阱</h2>
<p>如果你在浏览器中进行分析，请确保使用一个干净且空的浏览器配置文件。我甚至为此使用一个单独的浏览器。如果你在分析时启用了浏览器扩展，它们可能会干扰测量结果。特别是
React DevTools 会显著影响结果，使得代码渲染可能比你用户感知的要慢。</p>
<h2 id="采样与结构化分析">12.2 采样与结构化分析</h2>
<p>浏览器分析工具是基于采样的分析器，它们定期对堆栈进行采样。这有一个很大缺点：一些非常小但非常频繁的函数可能在这些样本之间被调用，并且可能在你会得到的堆栈图表中被严重低估。可以使用
Firefox 开发工具自定义采样间隔或 Chrome 开发工具的 CPU
节流来缓解这个问题。</p>
<h2 id="行业工具">12.3 行业工具</h2>
<p>除了常规的浏览器开发工具，了解以下这些选项可能会有所帮助：</p>
<ul>
<li><p>Chrome devtools 有一些非常有用的实验性标志（Experimental
flags），可以帮助你弄清楚为什么事情会变慢。样式失效跟踪器在调试浏览器中的样式
/ 布局重新计算时是无价的。
https://github.com/iamakulov/devtools-perf-features</p></li>
<li><p>deoptexplorer-vscode 扩展允许你加载 V8/chromium
日志文件，以了解你的代码何时触发去优化（deoptimizations），例如当你将不同的形状传递给函数时。你不需要这个扩展来读取日志文件，但使用它会使体验更加愉快。
https://github.com/microsoft/deoptexplorer-vscode</p></li>
<li><p>你可以随时编译每个 JS 引擎的调试
shell，以更详细地了解它的工作原理。这允许你运行 <code>perf</code>
和其他低级工具，还可以检查每个引擎生成的字节码和机器码。 <a
href="https://mrale.ph/blog/2018/02/03/maybe-you-dont-need-rust-to-speed-up-your-js.html#getting-the-code">V8
的示例</a> | <a
href="https://zon8.re/posts/jsc-internals-part1-tracing-js-source-to-bytecode/">JSC
的示例</a> | SpiderMonkey 的示例（缺失）</p></li>
</ul>
<h1 id="后记">后记</h1>
<p>希望你们学到了有用的技巧。如果你有任何评论、更正或疑问，请在页脚的电子邮件中告诉我。我总是乐于收到读者的反馈或问题。</p>
<p>如果你已经读到这里，我邀请你参观 <a
href="https://romgrk.com/castle">The Castle</a>。</p>
<div id="footnotes">
<hr>
<div id="footnotelist">
<ol style="list-style: none; padding-left: 0; margin-left: 40px">
<li id="fn:1">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">Brave
122 on Arch Linux 指的是在 Arch Linux 操作系统上运行的 Brave 浏览器版本
122。Brave
是一款注重隐私保护的网络浏览器，它通过屏蔽广告和追踪器来提高用户的隐私安全和浏览速度。<a href="#fnref:1" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:2">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">内联（Inlining）是一种优化技术，JavaScript
引擎（如 V8、SpiderMonkey、JavaScriptCore
等）使用这种技术来减少函数调用的开销。通过内联，引擎可以将函数的代码直接插入到调用该函数的地方，从而避免了函数调用的额外开销。内联优化通常在以下情况下效果最好：当函数体较小且被频繁调用时，或者函数调用发生在热点代码（即执行非常频繁的代码段）中时。<a href="#fnref:2" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:3">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">JIT（Just-In-Time）编译器是一种在程序运行时将源代码编译成机器代码的技术，它可以提高程序的执行速度。解释器（interpreter）是一种逐行或逐句执行源代码的程序，通常比
JIT
编译器慢，因为它没有进行优化的编译过程<a href="#fnref:3" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:4">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">4.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">当存在一个
热循环（即执行非常频繁的循环）和一个
常量对象（即对象在循环过程中没有改变）时，引擎可以通过逃逸分析来优化对象的访问。这种优化可能会减少访问对象属性时的性能开销。<a href="#fnref:4" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:5">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">5.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">逃逸分析是
JavaScript
引擎用来确定对象是否在当前作用域之外被引用的一种分析技术。如果一个对象在循环中被频繁访问，且对象本身没有被外部引用（即没有逃逸出当前作用域），引擎可能会对这个对象进行优化。<a href="#fnref:5" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:6">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">6.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">谓词函数是一个返回布尔值的函数，通常用于判断某个条件是否满足。<a href="#fnref:6" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:7">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">7.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">热循环（hot
loop）是指在程序中执行非常频繁的循环。在这种情况下，循环体内的代码性能至关重要。<a href="#fnref:7" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:8">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">8.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">微基准测试（Microbenchmarking）是一种性能测试方法，它专注于测量代码的非常小片段的执行时间。这种方法通常用于评估和比较特定操作的性能，如函数调用、数据访问、算法实现等。<a href="#fnref:8" rev="footnote">
↩︎</a></span>
</li>
</ol>
</div>
</div>
</div>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>JavaScript</tag>
        <tag>代码优化</tag>
      </tags>
  </entry>
  <entry>
    <title>黎明前的代码救赎：如何用 Git Bisect 拯救我的演示[译]</title>
    <url>/2024/10/25/%E9%BB%8E%E6%98%8E%E5%89%8D%E7%9A%84%E4%BB%A3%E7%A0%81%E6%95%91%E8%B5%8E-%E8%AF%91/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>那是周一凌晨 2 点，我正在疯狂地调试一个 bug，这个 bug 必须在 7
小时后的演示前解决。我实在想不通为什么会出现这个问题。但我明确知道的是：这个问题在之前的版本中并不存在。</p>
<p>这个项目由两个部分组成：一个运行着我用 C
语言编写的固件的设备，以及一个我用 Swift 语言编写的 iPadOS
应用程序。我相当确定这个 bug 存在于固件方面。</p>
<img src="/2024/10/25/%E9%BB%8E%E6%98%8E%E5%89%8D%E7%9A%84%E4%BB%A3%E7%A0%81%E6%95%91%E8%B5%8E-%E8%AF%91/1.png" class="">
<p>工作版本和有 bug 的版本之间有超过 100
次的提交，因此无法立即看出是什么更改导致了 bug。</p>
<span id="more"></span>
<p>就在这时，我想起了 <strong>git
bisect</strong>。这个命令使用二分搜索算法帮助精确定位引入 bug
的确切提交。是时候让它发挥作用了。</p>
<blockquote>
<p>译注：原文在此处通过动画演示了 Git Bisect 的工作过程。此处省略。</p>
</blockquote>
<p>我首先将当前 HEAD 标记为 “坏的”，将最后一个已知的无故障提交标记为
“好的”：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git bisect start</span><br><span class="line">git bisect bad HEAD</span><br><span class="line">git bisect good v1.0.0</span><br></pre></td></tr></table></figure>
<p>然后 Git
检出这两个点之间的一个中间提交。此时二分搜索的魔力就发挥作用了。<strong>git
bisect</strong> 不是逐一检查每个提交（这会花费很长时间来筛选超过 100
个提交），而是战略性地选择要测试的提交，将每次迭代的搜索空间减半。</p>
<p>幸运的是，这是一个我可以用脚本来验证的
bug。所以，我添加了一个脚本来检查 bug 是否存在，并让 git bisect
为每个提交运行测试。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git bisect run ./test_for_bug.sh</span><br></pre></td></tr></table></figure>
<p>然后它就开始工作了！Git
检出不同的提交，运行我的脚本，并缩小搜索范围。</p>
<p>几秒钟后，Git 宣布：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">b1f3d2c is the first bad commit</span><br><span class="line">commit b1f3d2c5e8a9f0d4c3b2a1098765432100fedcba</span><br><span class="line">Author: Mike Buss &lt;mike@mikebuss.com&gt;</span><br><span class="line">Date:   Fri Jun 9 11:23:45 2024 -0700</span><br><span class="line"></span><br><span class="line">    Added a feature that definitely won’t <span class="built_in">break</span> anything</span><br></pre></td></tr></table></figure>
<p>罪魁祸首找到了。结果发现，在我急于优化内存使用的过程中，我在传感器数据处理例程中引入了一个微妙的
bug。这个优化在大多数情况下工作得很好，但在特定条件下失败了 ——
正是我在演示场景中遇到的那种条件。</p>
<p>识别出有问题的提交后，修复 bug
变得容易多了。我能够精确地定位到导致问题的具体更改，并进行了必要的更正。</p>
<p>到了凌晨 5 点，也就是我演示前四个小时，bug 被修复了。</p>
<p>这次经历再次强调了一个宝贵的教训：了解你的工具和了解你的代码一样重要。<strong>git
bisect</strong> 将可能需要数小时的手动调试变成了一个命令就可以完成。</p>
<p>在浩瀚的代码森林中，正确的工具可以是你的指南针。请记住 <strong>git
bisect</strong>
的强大功能——它可能是你在下一次调试大冒险中的救命稻草。</p>
<h1 id="原文链接">原文链接</h1>
<p><a
href="https://www.mikebuss.com/posts/debugging-till-dawn">Debugging Till
Dawn: How Git Bisect Saved My Demo</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>git</tag>
        <tag>二分查找</tag>
        <tag>git bisect</tag>
      </tags>
  </entry>
  <entry>
    <title>软件架构风格</title>
    <url>/2024/11/06/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E9%A3%8E%E6%A0%BC/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<img src="/2024/11/06/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E9%A3%8E%E6%A0%BC/6.png" class="">
<span id="more"></span>
<h1 id="数据流风格">数据流风格</h1>
<p>没有概念上的程序计数器：指令的可执行性和执行仅基于指令输入参数的可用性来确定。指令执行的顺序是不可预测的，行为是不确定的。
早期编译器就是采用的这种架构。要一步一步处理的，均可考虑采用此架构风格。
<img src="/2024/11/06/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E9%A3%8E%E6%A0%BC/1.png" class=""></p>
<h2 id="批处理">批处理</h2>
<p>构件为一系列固定顺序的计算单元，构件之间只通过数据传递交互。
每个处理步骤是一个独立的程序，每一步必须在其前一步结束后才能开始，数据必须是完整的，以整体的方式传递。</p>
<ul>
<li>场景 1: 日志分析系统 案例：Hadoop MapReduce 处理海量日志数据
特点：按固定顺序处理大量数据，每步必须等待前一步完成</li>
<li>场景 2: ETL 数据处理 案例：银行每日交易数据的清洗、转换和加载
特点：按预定流程处理结构化数据</li>
</ul>
<h2 id="管道过滤器">管道过滤器</h2>
<p>每个构件都有一组输入和输出，构件读输入的数据流，经过内部处理，然后产生输出数据流。这个过程通常是通过对输入数据流的变换或计算来完成的，包括通过计算和增加信息以丰富数据、通过浓缩和删除以精简数据、通过改变记录方式以转化数据和递增地转化数据等。这里的构件称为过滤器，连接件就是数据流传输的管道，将一个过滤器的输出传到另一个过滤器的输入。</p>
<ul>
<li>场景 1: Unix/Linux 命令行处理 案例：cat file.txt | grep “error” |
sort | uniq &gt; output.txt
特点：每个命令作为过滤器，通过管道传递数据</li>
<li>场景 2: 图像处理流水线 案例：Instagram 的图片滤镜处理流程
特点：图片依次经过裁剪、调色、特效等处理环节</li>
</ul>
<h1 id="调用返回风格">调用/返回风格</h1>
<p>构件之间存在互相调用的关系，一般是显式的调用。 <img src="/2024/11/06/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E9%A3%8E%E6%A0%BC/2.png" class=""></p>
<p>优点 ∶
1、这种风格支持基于可增加抽象层的设计，允许将一个复杂问题分解成一个增量步骤序列的实现。
2、不同的层次处于不同的抽象级别：越靠近底层，抽象级别越高；越靠近顶层，抽象级别越低；
3、由于每一层最多只影响两层，同时只要给相邻层提供相同的接口，允许每层用不同的方法实现，同样为软件复用提供了强大的支持。
缺点 ∶ 1、并不是每个系统都可以很容易地划分为分层的模式。
2、很难找到一个合适的、正确的层次抽象方法。</p>
<h2 id="主程序子程序">主程序/子程序</h2>
<p>单线程控制，把问题划分为若干个处理步骤，构件即为主程序和子程序，子程序通常可合成为模块。过程调用作为交互机制，即充当连接件的角色。调用关系具有层次性，其语义逻辑表现为主程序的正确性取决于它调用的子程序的正确性。</p>
<ul>
<li>场景 1: 科学计算软件 案例：MATLAB 的数值计算程序
特点：主程序调用各种数学函数库</li>
<li>场景 2: 办公自动化软件 案例：Microsoft Word 的文档处理功能
特点：主界面程序调用各种文档处理子程序</li>
</ul>
<h2 id="面向对象">面向对象</h2>
<p>构件是对象，对象是抽象数据类型的实例。在抽象数据类型中，数据的表示和它们的相应操作被封装起来，对象的行为体现在其接受和请求的动作。连接件即是对象间交互的方式，对象是通过函数和过程的调用来交互的。</p>
<ul>
<li>场景 1: 游戏开发 案例：Unity3D 游戏引擎
特点：游戏对象之间通过消息传递交互</li>
<li>场景 2: GUI 应用程序 案例：Eclipse IDE
特点：界面组件都是对象，通过方法调用交互</li>
</ul>
<h2 id="层次型体系结构">层次型体系结构</h2>
<p>构件组织成一个层次结构，连接件通过决定层间如何交互的协议来定义。每层为上一层提供服务，使用下一层的服务，只能见到与自己邻接的层。通过层次结构，可以将大的问题分解为若干个渐进的小问题逐步解决，可以隐藏问题的复杂度。修改某一层，最多影响其相邻的两层
(通常只能影响上层)。</p>
<ul>
<li>场景 1: 网络协议栈 案例：TCP/IP 协议实现 特点：分层处理网络通信</li>
<li>场景 2: 企业应用架构 案例：Spring Framework
特点：表现层、业务层、持久层清晰分离</li>
</ul>
<h2 id="客户端服务器">客户端/服务器</h2>
<p>两层 C/S 体系结构有 3
个主要组成部分：数据库服务器、客户应用程序和网络。服务器（后台）负责数据管理，客户机（前台）完成与用户的交互任务，成为“胖客户机，瘦服务器”。</p>
<p>三层 C/S
结构增加了应用服务器。应用逻辑驻留在应用服务器上，只有表示层存在与客户机上，称为“瘦客户机”。应用功能分为表示层、功能层和数据层三层。三层逻辑上独立。</p>
<ul>
<li>场景 1: 网页应用（两层结构） 案例：早期的 QQ 桌面客户端
特点：胖客户端承担大部分业务逻辑</li>
<li>场景 2: 企业级应用（三层结构） 案例：淘宝网的技术架构
特点：表现层、应用层、数据层分离</li>
</ul>
<h1 id="独立构件风格">独立构件风格</h1>
<p>构件之间是互相独立的，不存在显示的调用关系，而是通过某个事件触发、异步的方式来执行。
<img src="/2024/11/06/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E9%A3%8E%E6%A0%BC/3.png" class=""></p>
<h2 id="进程通信">进程通信</h2>
<p>构件是独立的过程，连接件是消息传递。构件通常是命名过程，消息传递的方式可以是点对点、异步或同步方式，以及远程过程
(方法）调用等。</p>
<ul>
<li>场景 1: 分布式系统 案例：Kubernetes 容器编排系统
特点：各组件通过消息队列通信</li>
<li>场景 2: 微服务架构 案例：Netflix 的服务架构 特点：服务间通过 API
网关通信</li>
</ul>
<h2 id="事件驱动系统隐式调用">事件驱动系统（隐式调用）</h2>
<p>构件不直接调用一个过程，而是触发或广播一个或多个事件。构件中的过程在一个或多个事件中注册，当某个事件被触发时，系统自动调用在这个事件中注册的所有过程。一个事件的触发就导致了另一个模块中的过程调用。这种风格中的构件是匿名的过程，它们之间交互的连接件往往是以过程之间的隐式调用来实现的。主要优点是为软件复用提供了强大的支持，为构件的维护和演化带来了方便
; 其缺点是构件放弃了对系统计算的控制。</p>
<ul>
<li>场景 1: GUI 框架 案例：JavaScript 的 DOM 事件系统
特点：用户操作触发事件回调</li>
<li>场景 2: 消息中间件 案例：RabbitMQ 特点：发布者 - 订阅者模式</li>
</ul>
<h1 id="仓库风格以数据为中心">仓库风格（以数据为中心）</h1>
<p>以数据为中心，所有的操作都是围绕建立的数据中心进行的。
仓库风格中构件分两种：一种是中央数据结构，保存系统的当前状态；另一种是独立构件，对中央数据存储进行操作。
现代集成编译环境一般采用这种架构风格。 <img src="/2024/11/06/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E9%A3%8E%E6%A0%BC/5.png" class=""></p>
<h2 id="数据库系统">数据库系统</h2>
<p>MySQL，Oracle 等数据库。</p>
<ul>
<li>场景 1: 企业信息管理 案例：SAP ERP 系统
特点：所有模块共享中央数据库</li>
<li>场景 2: 在线交易系统 案例：证券交易系统
特点：围绕交易数据库进行操作</li>
</ul>
<h2 id="超文本系统">超文本系统</h2>
<p>构件以网状链接方式相互连接，用户可以在构件之间进行按照人类的联想思维方式任意跳转到相关构件。超文本是一种非线性的网状信息组织方法，它以结点为基本单位，链作为结点之间的联想式关联。超文本系统通常应用在互联网领域。</p>
<ul>
<li>场景 1: 在线文档 案例：Wikipedia 维基百科
特点：页面间通过超链接关联</li>
<li>场景 2: 知识管理 案例：Notion 笔记系统
特点：文档块之间可以相互引用</li>
</ul>
<h2
id="黑板风格语音模式识别知识推理">黑板风格（语音、模式识别、知识推理）</h2>
<p>包括知识源、黑板和控制三部分。知识源包括若干独立计算的不同单元，提供解决问题的知识。知识源响应黑板的变化，也只修改黑板；黑板是一个全局数据库，包含问题域解空间的全部状态，是知识源相互作用的唯一媒介；知识源响应是通过黑板状态的变化来控制的。黑板系统通常应用在对于解决问题没有确定性算法的软件中
(信号处理、问题规划和编译器优化等)。</p>
<ul>
<li>场景 1: AI 推理系统 案例：IBM Watson
特点：多个知识源协作解决复杂问题</li>
<li>场景 2: 语音识别 案例：讯飞语音识别系统
特点：多个识别器配合工作</li>
</ul>
<h1 id="虚拟机风格">虚拟机风格</h1>
<p>自定义了一套规则供使用者使用，使用者基于这个规则来开发构件，能够跨平台适配。
<img src="/2024/11/06/%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84%E9%A3%8E%E6%A0%BC/4.png" class=""></p>
<h2 id="解释器">解释器</h2>
<p>解释器通常包括一个完成解释工作的解释引擎、一个包含将被解释的代码的存储区、一个记录解释引擎当前工作状态的数据结构，以及一个记录源代码被解释执行的进度的数据结构。具有解释器风格的软件中含有一个虚拟机，可以仿真硬件的执行过程和一些关键应用，其缺点是执行效率比较低。</p>
<ul>
<li>场景 1: 脚本语言 案例：Python 解释器 特点：逐行解释执行代码</li>
<li>场景 2: 浏览器引擎 案例：V8 JavaScript 引擎
特点：实时解释执行网页脚本</li>
</ul>
<h2 id="基于规则的系统">基于规则的系统</h2>
<p>基于规则的系统包括规则集、规则解释器、规则 /
数据选择器和工作内存，一般用在人工智能领域和 DSS(决策支持系统) 中。</p>
<ul>
<li>场景 1: 专家系统 案例：医疗诊断系统 特点：基于预设规则推理</li>
<li>场景 2: 业务规则引擎 案例：Drools 规则引擎 特点：可配置业务规则</li>
</ul>
<h1 id="其他风格">其他风格</h1>
<h2 id="闭环控制过程控制工控领域">闭环控制（过程控制）工控领域</h2>
<p>当软件被用来操作一个物理系统时，软件与硬件之间可以粗略地表示为一个反馈闭环。这个反馈循环通过接受一定的输入，确定一系列的输出，最终使环境达到一个新的状态。适合于嵌入式系统，涉及连续的动作与状态。</p>
<ul>
<li>场景 1: 工业控制 案例：工业机器人控制系统 特点：实时反馈控制</li>
<li>场景 2: 智能家居 案例：智能恒温器 特点：基于传感器反馈调节</li>
</ul>
<h2 id="c2">C2</h2>
<p>构件和连接件都有一个顶部和一个底部。
构件的顶部要连接到连接件的底部，构件的底部要连接到连接件的顶部，构件之间不允许直连。
一个连接件可以和任意数目的其它构件和连接件连接。
当两个连接件进行直接连接时，必须由其中一个的底部到另一个的顶部。</p>
<ul>
<li>场景 1: 可视化建模工具 案例：UML 建模工具
特点：构件通过连接件分层通信</li>
<li>场景 2: 图形编辑器 案例：Adobe Illustrator
特点：工具栏、画布等构件通过消息总线通信</li>
</ul>
<h1 id="参考文档">参考文档</h1>
<p><a
href="https://blog.csdn.net/qq_33789001/article/details/126058308">软考高级软件架构风格定义以及分类</a>
<a
href="https://cloud.tencent.com/developer/article/2242448">软考系统架构设计师
(六)：软件架构</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>软考</tag>
        <tag>系统架构师</tag>
        <tag>软件架构风格</tag>
      </tags>
  </entry>
  <entry>
    <title>GitHub 更改默认分支</title>
    <url>/2024/12/24/GitHub-%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4%E5%88%86%E6%94%AF/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>在 GitHub 上，导航到存储库的主页面。</p>
<p>在存储库名称下，单击 “设置”。 如果看不到 “设置” 选项卡，请选择 “”
下拉菜单，然后单击 “设置”。</p>
<img src="/2024/12/24/GitHub-%E6%9B%B4%E6%94%B9%E9%BB%98%E8%AE%A4%E5%88%86%E6%94%AF/1.png" class="">
<p>存储库标头的屏幕截图，其中显示了选项卡。
“设置”选项卡以深橙色边框突出显示。 在 “默认分支”
下，在默认分支名称的右侧，单击 。</p>
<p>选择分支下拉菜单，然后单击分支名称。</p>
<p>单击 “更新”。</p>
<p>阅读警告，然后单击 “我了解，请更新默认分支”。</p>
<h1 id="参考文档">参考文档</h1>
<p><a
href="https://docs.github.com/zh/repositories/configuring-branches-and-merges-in-your-repository/managing-branches-in-your-repository/changing-the-default-branch">更改默认分支</a></p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>GitHub</tag>
      </tags>
  </entry>
  <entry>
    <title>系统架构师计算题汇总</title>
    <url>/2024/09/19/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="逻辑地址转换成物理地址">逻辑地址转换成物理地址</h1>
<h2
id="某计算机系统页面大小为-2k进程-p1-的页面变换表如下所示若-p1-要访问数据的逻辑地址为十六进制-1b1ah那么该逻辑地址经过变换后其对应的物理地址应为十六进制231ah">某计算机系统页面大小为
2K，进程 P1 的页面变换表如下所示，若 P1 要访问数据的逻辑地址为十六进制
1B1AH，那么该逻辑地址经过变换后，其对应的物理地址应为十六进制(231AH)。</h2>
<img src="/2024/09/19/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/1.png" class="">
<blockquote>
<p>解题步骤</p>
</blockquote>
<p>将逻辑地址 1B1AH 转换为二进制（H 表示十六进制）: 1B1AH = 0001 1011
0001 1010 (B) 由于页面大小为 2K = 2048 = 2^11 字节，所以页内偏移量占用
11 位，页号占用剩余的位。 页号: 0001 1 (B) = 3 (D) 页内偏移量: 011 0001
1010 (B) = 31AH 根据页面变换表，页号 3 对应的物理块号为 4，4
转换为二进制为 100（B），后面拼接上面的页内偏移量，就可以得出物理地址。
物理地址的计算: 100 011 0001 1010（B）转换为十六进制为 231AH。</p>
<span id="more"></span>
<blockquote>
<p>视频讲解</p>
</blockquote>
<p><a
href="https://www.bilibili.com/video/BV1e34y1676D/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">如何将逻辑地址转换成物理地址</a></p>
<h2
id="假设系统采用段式存储管理方法进程-p-的段表如下所示逻辑地址请作答此空不能转换为对应的物理地址不能转换为对应的物理地址的原因是进行">假设系统采用段式存储管理方法，进程
P
的段表如下所示。逻辑地址（请作答此空）不能转换为对应的物理地址；不能转换为对应的物理地址的原因是进行（）。</h2>
<img src="/2024/09/19/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/4.png" class="">
<p>A.(0，790) 和 (2，88) B.(1，30) 和 (3，290) C.(2，88) 和 (4，98)
D.(0，810) 和 (4，120)</p>
<blockquote>
<p>解题步骤</p>
</blockquote>
<p>物理地址 = 段首 + 偏移量 逻辑地址（0，810）其中，0 是段号，810
是偏移量 选项 D 中，段号 0 的段长为 800，偏移量 810
超过了段长，所以不能转换为对应的物理地址。段号 4 的段长为 100，偏移量
120 超过了段长，所以不能转换为对应的物理地址。 故，答案为
D。原因为偏移量超过了段长。</p>
<blockquote>
<p>视频讲解</p>
</blockquote>
<p><a
href="https://www.bilibili.com/video/BV1Qw4m1e7n6/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">操作系统期末复习题（段表）</a></p>
<h1 id="磁盘单缓冲区与双缓冲区读取">磁盘单缓冲区与双缓冲区读取</h1>
<p>1.某计算机系统输入 /
输出采用双缓冲工作方式，其工作过程如下图所示，假设磁盘块与缓冲区大小相同，每个盘块读入缓冲区的时间
T 为 10μs，缓冲区送用户区的时间 M 为 6μs，系统对每个磁盘块数据韵处理时间
C 为 2μs。若用户需要将大小为 10 个磁盘块的 Docl
文件逐块从磁盘读入缓冲区，并送用户区进行处理，那么采用双缓冲需要花费的时间为（请作答此空）μs，比使用单缓冲节约了（
）μs 时间。 <img src="/2024/09/19/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/2.png" class=""></p>
<blockquote>
<p>解题步骤</p>
</blockquote>
<ul>
<li>单缓冲区计算
对于单缓冲区而言,读入缓冲区的时间和缓冲区送用户区的时间是串行的,当处理数据时,此时可以进行读入缓冲区的操作。所以,单缓冲区需要的时间为:(10+6)*10
+ 2 = 162μs</li>
<li>双缓冲区计算
对于双缓冲区而言,当缓冲区送用户区和处理数据时,可以进行读入缓冲区的操作。所以,单缓冲区需要的时间为:10*10
+6 + 2 = 108μs</li>
<li>图解 <img src="/2024/09/19/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/3.png" class=""></li>
</ul>
<blockquote>
<p>视频讲解</p>
</blockquote>
<p><a
href="https://www.bilibili.com/video/BV1gF411F74B/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">19
- 磁盘管理 - 磁盘单缓冲区与双缓冲区读取</a> <a
href="https://www.bilibili.com/video/BV1cV4y1R7nh/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">【操作系统】【考研真题】2011
年统考第 31 题【单缓冲区】【双缓冲区】【互斥】</a></p>
<h1 id="磁盘阵列">磁盘阵列</h1>
<p>1.假如有 4 块 80T 的硬盘，采用 RAID6 组建磁盘阵列的容量是（ ）。</p>
<blockquote>
<p>解题步骤</p>
</blockquote>
<p>RAID6 的容量是 (N-2)* 最低容量 = (4-2)*80T = 160T。</p>
<h1 id="流水线计算">流水线计算</h1>
<p>1.执行指令时，将每一节指令都分解为取指、分析和执行三步，已知取指时间
t 取指 = 5△t，分析时间 t 分析 = 2△t. 执行时间 t 执行 = 3△t
如果按照[执行]<sub>k</sub>,[分析]<sub>k+1</sub>,[取指]<sub>k+2</sub>重叠的流水线方式执行指令，从头到尾执行完
500 条指令需（ ）△t。</p>
<blockquote>
<p>解题步骤</p>
</blockquote>
<p>流水线周期为执行时间最长的一段 流水线计算公式为: 1 条指令执行时间 +
(指令条数 -1)*流水线周期 执行时间为 5+2+3+(500-1)*5=2505</p>
<blockquote>
<p>视频讲解</p>
</blockquote>
<p><a
href="https://www.bilibili.com/video/BV1Vi4y1k7JR/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">10.
2.09 流水线周期及流水线执行时间计算</a></p>
<h1 id="armstrong-公理系统">Armstrong 公理系统</h1>
<p>1.给定关系模式 R (U，F)，其中 U 为属性集，F 是 U
上的一组函数依赖，那么函数依赖的公理系统 (Armstrong 公理系统)
中的分解规则是指 (7) 为 F 所蕴涵</p>
<blockquote>
<p>解题步骤</p>
</blockquote>
<p>Armstrong 公理系统设关系模式 RU,F，其中 U 为属性集，F 是 U
上的一组函数依赖，那么有如下推理规则：</p>
<p>① A1 自反律：若 Y⊆X⊆U，则 X→Y 为 F 所蕴含； ② A2 增广律：若 X→Y 为 F
所蕴含，且 Z?U，则 XZ→YZ 为 F 所蕴含； ③ A3 传递律：若 X→Y，Y→Z 为 F
所蕴含，则 X→Z 为 F 所蕴含。</p>
<p>根据上面三条推理规则，又可推出下面三条推理规则：</p>
<p>④ 合并规则：若 X→Y，X→Z，则 X→YZ 为 F 所蕴含； ⑤ 伪传递规则：若
X→Y，WY→Z，则 XW→Z 为 F 所蕴含； ⑥ 分解规则：若 X→Y，Z⊆Y，则 X→Z 为 F
所蕴含。</p>
<p>答案:C.若 X→Y，Z⊆Y，则 X→Z</p>
<blockquote>
<p>视频讲解</p>
</blockquote>
<p>此题看视频解析比较容易理解<a
href="https://www.bilibili.com/video/BV1AcxTe2EKo/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">15.8.3.
Armstrong 公理系统</a></p>
<h1 id="文件最大长度">文件最大长度</h1>
<h2
id="某文件系统采用多级索引结构若磁盘块的大小为-512-字节每个块号需占-3-字节那么根索引采用一级索引时的文件最大长度为请作答此空k-字节采用二级索引时的文件最大长度为-k-字节">某文件系统采用多级索引结构，若磁盘块的大小为
512 字节，每个块号需占 3
字节，那么根索引采用一级索引时的文件最大长度为（请作答此空）K
字节；采用二级索引时的文件最大长度为（ ）K 字节。</h2>
<blockquote>
<p>解题步骤</p>
</blockquote>
<p>设块长为 512B，每个块号占 3B，一个物理块可放：512/3=170 个目录项：
一个一级索引可存放的文件大小为：170×512=85KB。
一个二级索引可存放文件的大小为：170×170×512=14450KB。
一个三级索引可存放文件的大小为：170×170×170×512=2456500KB。</p>
<blockquote>
<p>视频讲解 <a
href="https://www.bilibili.com/video/BV1Nv4y1s7jQ/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">【操作系统】【考研真题】2010
年统考第 30 题【物理结构】【多级索引】【间接地址】</a></p>
</blockquote>
<h1 id="信号量与-pv-操作">信号量与 PV 操作</h1>
<h2 id="进程-p1p2p3p4-和-p5-的前趋图如下">进程 P1、P2、P3、P4 和 P5
的前趋图如下：</h2>
<img src="/2024/09/19/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/5.jpg" class="">
<p>若用 PV 操作控制进程 P1 ～ P5 并发执行的过程，则需要设置 6 个信号
S1、S2、S3、S4、S5 和 S6，且信号量 S1-S6 的初值都等于零。下图中 a 和 b
处应分别填写（请作答此空）；c 和 d 处应分别填写（ ），e 和 f
处应分别填写（ ）。 <img src="/2024/09/19/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/6.jpg" class=""></p>
<blockquote>
<p>解题步骤</p>
</blockquote>
<p>从图中我们不难看出进程 P1 和 P2
没有前驱，也就是可以首先并发执行，而进程 P3 的前驱是 P1 和 P2，P4
的前驱是 P1 和 P3，P5 的前驱是 P2 和
P3。那么怎么理解前驱呢？其实前驱就是指只有在前驱进程完成后，该进程才能开始执行。
在本题的前驱图中我们不难看出，有 6 条路径，分别是
P1-P3，P1-P4，P2-P3，P2-P5，P3-P4，P3-P5。而且题目也告诉我们分别有 6
初值为 0 个信号量（S1-S6），要我们用 PV 操作来控制进程 P1 ～ P5
的并发执行。这里我们就需要清楚 P 与 V 这两种操作。 P 原语的主要操作是：
（1）信号量（sem）减 1； 　　
（2）若相减结果大于等于零，则进程继续执行； 　　
（3）若相减结果小于零，则阻塞一个在该信号量上的进程，然后再返回原进程继续执行或转进程调度。
V 原语的主要操作是： 　　 （1）信号量（sem）加 1； 　　
（2）若相加结果大于零，则进程继续执行； 　　
（3）若相加结果小于或等于零，则唤醒一阻塞在该信号量上的进程，然后再返回原进程继续执行或转进程调度。
总而言之，进行 P 操作的主要目的是阻塞某信号量上的进程，而进行 V
操作的主要目的是唤醒某信号量上的进程。</p>
<p>对于某个进程来说，如果箭头指向外部，就是 V
操作，如果箭头指向自己，就是 P 操作。出 V +，入 P -。</p>
<blockquote>
<p>视频讲解</p>
</blockquote>
<p><a
href="https://www.bilibili.com/video/BV1pm411X7D1/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">软考高级
(系统分析师）|| 习题讲解：信号量与 PV 操作</a></p>
<h1 id="最小生成树">最小生成树</h1>
<h2
id="山区某乡的-6-个村之间有山路如图所示其中的数字标明了各条山路的长度千米">山区某乡的
6 个村之间有山路如图所示，其中的数字标明了各条山路的长度（千米）。</h2>
<img src="/2024/09/19/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/8.jpg" class="">
<p>乡政府决定沿山路架设电话线。为实现村村通电话，电话线总长至少为（14）千米。</p>
<blockquote>
<p>解题步骤</p>
</blockquote>
<p>此题看视频讲解比较清楚。</p>
<blockquote>
<p>视频讲解</p>
</blockquote>
<p><a
href="https://www.bilibili.com/video/BV1wG411z79G/?spm_id_from=333.337.search-card.all.click&amp;vd_source=feaed3bcf7c26260dd3b1715d154fdbe">图
- 最小生成树 - Prim (普里姆) 算法和 Kruskal (克鲁斯卡尔) 算法</a></p>
<h1 id="其他知识点">其他知识点</h1>
<h2 id="markdown-如何如何打出上标下标">markdown
如何如何打出上标、下标</h2>
<p>Markdown 可以和 HTML 的语法兼容，所以可以采用 HTML
的语法实现效果：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">10<span class="tag">&lt;<span class="name">sup</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sup</span>&gt;</span> //上标</span><br><span class="line">H<span class="tag">&lt;<span class="name">sub</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sub</span>&gt;</span>O //下标</span><br></pre></td></tr></table></figure>
<h2 id="开发模型的特点">开发模型的特点</h2>
<img src="/2024/09/19/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/7.jpg" class="">
<h2 id="视图模型">视图模型</h2>
<img src="/2024/09/19/%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/9.png" class="">
<h2 id="需求分析的基本概念">需求分析的基本概念</h2>
<p>需求是多层次的，包括业务需求、用户需求和系统需求，这三个不同层次从目标到具体，从整体到局部，从概念到细节。</p>
<p>（1）业务需求。业务需求是指反映企业或客户对系统高层次的目标要求，通常来自项目投资人、购买产品的客户、客户单位的管理人员、市场营销部门或产品策划部门等。通过业务需求可以确定项目视图和范围，项目视图和范围文档把业务需求集中在一个简单、紧凑的文档中，该文档为以后的开发工作奠定了基础。</p>
<p>（2）用户需求。用户需求描述的是用户的具体目标，或用户要求系统必须能完成的任务。也就是说，用户需求描述了用户能使用系统来做些什么。通常采取用户访谈和问卷调查等方式，对用户使用的场景（scenarios）进行整理，从而建立用户需求。</p>
<p>（3）系统需求。系统需求是从系统的角度来说明软件的需求，包括功能需求、非功能需求和设计约束等。功能需求也称为行为需求，它规定了开发人员必须在系统中实现的软件功能，用户利用这些功能来完成任务，满足业务需要。功能需求通常是通过系统特性的描述表现出来的，所谓特性，是指一组逻辑上相关的功能需求，表示系统为用户提供某项功能（服务），使用户的业务目标得以满足；非功能需求是指系统必须具备的属性或品质，又可细分为软件质量属性（例如，可维护性、可维护性、效率等）和其他非功能需求。</p>
<p>质量功能部署（Quality Function
Deployment，QFD）是一种将用户要求转化成软件需求的技术，其目的是最大限度地提升软件工程过程中用户的满意度。为了达到这个目标，QFD
将软件需求分为三类，分别是常规需求、期望需求和意外需求。</p>
<p>（1）常规需求。用户认为系统应该做到的功能或性能，实现越多用户会越满意。</p>
<p>（2）期望需求。用户想当然认为系统应具备的功能或性能，但并不能正确描述自己想要得到的这些功能或性能需求。如果期望需求没有得到实现，会让用户感到不满意。</p>
<p>（3）意外需求。意外需求也称为兴奋需求，是用户要求范围外的功能或性能（但通常是软件开发人员很乐意赋予系统的技术特性），实现这些需求用户会更高兴，但不实现也不影响其购买的决策。意外需求是控制在开发人员手中的，开发人员可以选择实现更多的意外需求，以便得到高满意、高忠诚度的用户，也可以（出于成本或项目周期的考虑）选择不实现任何意外需求。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>系统架构师</tag>
        <tag>高项</tag>
        <tag>计算题</tag>
      </tags>
  </entry>
  <entry>
    <title>VSCode 插件推荐</title>
    <url>/2025/02/12/VSCode-%E6%8F%92%E4%BB%B6%E6%8E%A8%E8%8D%90/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>整理下自己常用的 VSCode 插件。其中标题带 ✨ 表示目前正在使用的。</p>
<h1 id="night-owl">Night Owl ✨</h1>
<p>我最喜欢的 VSCode 主题，强烈推荐！</p>
<h1 id="color-highlight">Color Highlight ✨</h1>
<p>Color Highlight 插件能让十六进制（#FFFFFF）、RGB（rgb (255, 255,
255)）或者是其他颜色表示法的文本旁边或者背景显示出相应的颜色，这样就可以直观地看到当前的颜色是什么，而不必去查找或者预览。</p>
<span id="more"></span>
<h1 id="codegeex-ai-coding-assistant">CodeGeeX: AI Coding Assistant
✨</h1>
<p>AI 编程助手。</p>
<table>
<colgroup>
<col style="width: 15%" />
<col style="width: 44%" />
<col style="width: 39%" />
</colgroup>
<thead>
<tr>
<th style="text-align: left;">功能名称</th>
<th style="text-align: left;">操作方法</th>
<th style="text-align: left;">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;"><strong>代码自动补全</strong></td>
<td style="text-align: left;">按 <code>Tab</code>
键采纳建议，按任意键取消</td>
<td style="text-align: left;">在编码过程中，CodeGeeX
会根据上下文内容提供代码补全建议</td>
</tr>
<tr>
<td style="text-align: left;"><strong>代码生成</strong></td>
<td style="text-align: left;">输入自然语言注释</td>
<td style="text-align: left;">CodeGeeX 可以生成相关代码片段</td>
</tr>
<tr>
<td style="text-align: left;"><strong>代码注释</strong></td>
<td style="text-align: left;">选中代码，右键点击选择
<code>CodeGeeX</code> -&gt; <code>Add Comment</code></td>
<td style="text-align: left;">为代码添加注释</td>
</tr>
<tr>
<td style="text-align: left;"><strong>幽灵注释</strong></td>
<td style="text-align: left;">选中代码，右键点击选择
<code>CodeGeeX</code> -&gt; <code>Add Ghost Comment</code></td>
<td
style="text-align: left;">为代码添加幽灵注释。这些注释不会直接写入代码中，因此得名“幽灵”</td>
</tr>
<tr>
<td style="text-align: left;"><strong>代码解释</strong></td>
<td style="text-align: left;">选中代码，右键点击选择
<code>CodeGeeX</code> -&gt; <code>Explain Code</code>，或输入
<code>/explain</code></td>
<td style="text-align: left;">解释选中的代码</td>
</tr>
<tr>
<td style="text-align: left;"><strong>代码优化</strong></td>
<td style="text-align: left;">选中代码，右键点击选择
<code>CodeGeeX</code> -&gt; <code>Optimize Code</code></td>
<td style="text-align: left;">优化选中的代码</td>
</tr>
<tr>
<td style="text-align: left;"><strong>生成单元测试</strong></td>
<td style="text-align: left;">选中代码，右键点击选择
<code>CodeGeeX</code> -&gt; <code>Generate Unit Test</code></td>
<td style="text-align: left;">为选中的代码生成单元测试</td>
</tr>
<tr>
<td style="text-align: left;"><strong>修复代码错误</strong></td>
<td style="text-align: left;">选中代码，右键点击选择
<code>CodeGeeX</code> -&gt; <code>Fix Bug</code></td>
<td style="text-align: left;">修复选中的代码中的错误</td>
</tr>
<tr>
<td style="text-align: left;"><strong>行内对话编程</strong></td>
<td style="text-align: left;">使用快捷键
<code>Ctrl+I</code>（Windows）或 <code>Command+I</code>（Mac）</td>
<td style="text-align: left;">触发行内对话编程功能</td>
</tr>
<tr>
<td style="text-align: left;"><strong>开源代码仓库智能问答</strong></td>
<td style="text-align: left;">使用 <code>@Repo</code> 功能</td>
<td style="text-align: left;">对开源代码仓库进行提问</td>
</tr>
</tbody>
</table>
<h1 id="code-spell-checker">Code Spell Checker ✨</h1>
<p>安装后，插件默认会自动识别单词的拼写错误，并在文件和 PROBLEM
选项框中提示，颜色默认是蓝色。 取消拼写检查:</p>
<ol type="1">
<li><strong>完全禁用插件</strong>：如果不想进行拼写检查，可以在插件商城中将该插件禁用。</li>
<li><strong>取消对单个文件的检查</strong>：在文件开头添加以下注释之一：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* cspell:disable */</span></span><br><span class="line"><span class="comment">/* spell-checker: disable */</span></span><br><span class="line"><span class="comment">/* spellchecker: disable */</span></span><br></pre></td></tr></table></figure>
<p>不同文件的注释方式可能不同，例如在 JavaScript 中可以使用
<code>// cspell:disable</code>，在 HTML 中可以使用
<code>&lt;!-- spell:disable --&gt;</code>。
<strong>忽略特定单词</strong>：在文件中添加以下注释，忽略特定单词：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// cspell:ignore Pinia,zaallano,wooorrdd</span></span><br></pre></td></tr></table></figure>
<p>这适用于文件中引入的库名或自定义字段。</p>
<h1 id="editorconfig-for-vs-code">EditorConfig for VS Code ✨</h1>
<p>在团队多人开发的项目中，不能保证团队成员都使用相同的编辑器，那么不同的编辑器之间的格式设置有可能各不相同，就无法保证项目代码格式的统一，往往会出现意想不到的问题。比如缩进大小、选项卡宽度、行尾字符、编码等。</p>
<p>那么如何保证团队代码在多人协同开发，使用编辑器格式不一的情况下仍然保证相同的格式呢，这就是
EditorConfig 要做的事情。</p>
<p>在项目的根目录下创建一个 <code>.editorconfig</code> 文件。
该文件用于定义项目的编码规范，确保团队成员之间的代码风格一致。</p>
<p>一个典型的 .editorconfig 文件示例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 指定为顶级配置文件，停止递归查找其他 .editorconfig 文件</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line"># 匹配所有文件</span><br><span class="line">[*]</span><br><span class="line">indent_style = space         # 使用空格缩进</span><br><span class="line">indent_size = 2              # 缩进为 2 个空格</span><br><span class="line">end_of_line = lf             # 使用 LF 换行符</span><br><span class="line">charset = utf-8              # 文件编码为 UTF-8</span><br><span class="line">trim_trailing_whitespace = true # 删除行尾多余空格</span><br><span class="line">insert_final_newline = true  # 文件末尾保留空行</span><br><span class="line"></span><br><span class="line"># 针对 Python 文件的特殊配置</span><br><span class="line">[*.py]</span><br><span class="line">indent_size = 4</span><br><span class="line"></span><br><span class="line"># 针对 Markdown 文件的特殊配置</span><br><span class="line">[*.md]</span><br><span class="line">trim_trailing_whitespace = false # Markdown 文件不删除行尾空格</span><br></pre></td></tr></table></figure>
<h1 id="eslint">ESLint ✨</h1>
<p>ESLint 是一个用于识别和报告 JavaScript（包括
JSX、ES6+）代码中的模式问题的工具。它可以帮助开发者保持代码风格的一致性，发现潜在的错误，并提高代码质量。</p>
<p>安装 ESLint：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install eslint --save-dev</span><br></pre></td></tr></table></figure>
<p>配置 ESLint：</p>
<ol type="1">
<li>在项目根目录下创建一个 <code>.eslintrc.js</code> 文件。</li>
<li>在 <code>.eslintrc.js</code> 文件中添加 ESLint 配置。</li>
</ol>
<p>一个典型的 <code>.eslintrc.js</code> 文件示例：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># <span class="title class_">GistPad</span> ✨</span><br><span class="line"></span><br><span class="line">可以在 <span class="title class_">VSCode</span> 中直接编辑 <span class="title class_">GitHub</span> <span class="title class_">Gist</span>，快速保存代码片段。</span><br><span class="line"></span><br><span class="line"># <span class="title class_">GitHub</span> <span class="title class_">Copilot</span> ✨</span><br><span class="line"></span><br><span class="line"><span class="title class_">GitHub</span> <span class="title class_">Copilot</span> 是一个 <span class="variable constant_">AI</span> 编程助手，它可以帮助开发者更快地编写代码，提高编码效率。<span class="title class_">GitHub</span> <span class="title class_">Copilot</span> 可以根据代码上下文自动生成代码，并提供代码建议和补全。</span><br><span class="line"></span><br><span class="line"># <span class="title class_">GitLens</span> ✨</span><br><span class="line"></span><br><span class="line"><span class="title class_">GitLens</span> 是一个强大的 <span class="title class_">Git</span> 扩展，它可以帮助开发者更好地理解代码的版本历史和变更情况。<span class="title class_">GitLens</span> 可以显示代码的提交历史、作者、变更内容等信息，还可以进行代码比较和搜索。</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Highlight</span> <span class="title class_">Matching</span> <span class="title class_">Tag</span> ✨</span><br><span class="line"></span><br><span class="line">在 <span class="variable constant_">HTML</span> 或 <span class="variable constant_">XML</span> 文件中，当您选择一个开始标签时，它会自动高亮显示对应的结束标签，反之亦然。这对于快速定位和验证标签对非常有帮助。</span><br><span class="line"></span><br><span class="line"># <span class="variable constant_">HTML</span> <span class="variable constant_">CSS</span> <span class="title class_">Support</span> ✨</span><br><span class="line"></span><br><span class="line">为 <span class="variable constant_">HTML</span> 文件提供 <span class="variable constant_">CSS</span> 属性和值的自动补全功能。当您在 <span class="variable constant_">HTML</span> 文件中输入 <span class="string">`&lt;div class=&quot;`</span> 时，插件会自动显示与该类名相关的 <span class="variable constant_">CSS</span> 属性和值。</span><br><span class="line"></span><br><span class="line"># <span class="title class_">Dracula</span> <span class="title class_">Theme</span> <span class="title class_">Official</span></span><br><span class="line"></span><br><span class="line">一款好看的黑色主题。</span><br><span class="line"></span><br><span class="line"># <span class="title class_">One</span> <span class="title class_">Dark</span> <span class="title class_">Pro</span></span><br><span class="line"></span><br><span class="line">一款好看的黑色主题。</span><br><span class="line"></span><br><span class="line"># <span class="title class_">DotENV</span></span><br><span class="line"></span><br><span class="line">.<span class="property">DotENV</span> 插件会自动检测项目根目录下的 .<span class="property">env</span> 文件，并转为 process.<span class="property">env</span> 变量的值。支持多个环境（如开发环境、测试环境、生产环境）.<span class="property">env</span> 文件的自动加载。在代码中，可以通过 process.<span class="property">env</span> 来访问这些环境变量。例如：</span><br><span class="line"></span><br><span class="line"><span class="string">``</span><span class="string">`JavaScript</span></span><br><span class="line"><span class="string">console.log(process.env.DB_HOST); // 输出: localhost</span></span><br><span class="line"><span class="string">console.log(process.env.DB_USER); // 输出: root</span></span><br><span class="line"><span class="string">console.log(process.env.DB_PASS); // 输出: s1mpl3</span></span><br></pre></td></tr></table></figure>
<h1 id="codesnap">CodeSnap</h1>
<p>在 VS Code 中拍摄代码的精美截图！</p>
<ul>
<li><p>功能 快速保存代码截图 将截图复制到剪贴板 显示行号
许多其他配置选项</p></li>
<li><p>使用说明 打开命令面板（在 Windows 和 Linux 上是 Ctrl+Shift+P，在
OS X 上是 Cmd+Shift+P），并搜索 CodeSnap。 选择您想要截图的代码。
如有需要，调整截图的宽度。
点击快门按钮，将截图保存到您的磁盘上。</p></li>
<li><p>小贴士： 您也可以通过选择代码，右键点击，然后选择 CodeSnap 来启动
CodeSnap。 如果您想将 CodeSnap
绑定到一个快捷键，打开您的键盘快捷键设置，并将 codesnap.start
绑定到一个自定义的快捷键。
如果您想将截图复制到剪贴板而不是保存，点击图片并按下复制的键盘快捷键（默认是
Windows 和 Linux 上的 Ctrl+C，OS X 上的 Cmd+C），或者在您的设置中将
codesnap.shutterAction 绑定为复制。</p></li>
</ul>
<h1 id="better-comments">Better Comments</h1>
<ol type="1">
<li>打开 Visual Studio Code 的设置（快捷键 Ctrl+,）。</li>
<li>在搜索框中输入 Better Comments。</li>
<li>根据需要调整以下设置：
better-comments.multilineComments：控制是否对多行注释使用注释标签进行样式化。
better-comments.highlightPlainText：控制是否对纯文本文件中的注释使用注释标签进行样式化。
better-comments.tags：自定义注释标签及其样式。</li>
<li>自定义注释样式 通过修改 better-comments.tags
设置来自定义注释的样式。例如：</li>
</ol>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="attr">&quot;better-comments.tags&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;!&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FF2D00&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;strikethrough&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;underline&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;transparent&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;bold&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;italic&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;?&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#3498DB&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;strikethrough&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;underline&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;transparent&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;bold&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;italic&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;//&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#474747&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;strikethrough&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;underline&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;transparent&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;bold&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;italic&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;todo&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#FF8C00&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;strikethrough&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;underline&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;transparent&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;bold&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;italic&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;tag&quot;</span><span class="punctuation">:</span> <span class="string">&quot;*&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;color&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#98C379&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;strikethrough&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;underline&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;backgroundColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;transparent&quot;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;bold&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;italic&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>VSCode 插件</tag>
      </tags>
  </entry>
  <entry>
    <title>2025 年度目标</title>
    <url>/2024/12/31/2025-%E5%B9%B4%E5%BA%A6%E7%9B%AE%E6%A0%87/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>刚刚复盘了 <a
href="https://toypipi.github.io/2024/01/02/2024-%E5%B9%B4%E5%BA%A6%E7%9B%AE%E6%A0%87/?highlight=%E5%B9%B4%E5%BA%A6">2024
年度目标</a>，马不停蹄开始 2025 年度规划。</p>
<p>2025 年牢记：</p>
<blockquote>
<p><strong>记录，思考，总结，复盘。</strong><br />
<strong>不要怕，不要等，想到什么立马去做。</strong></p>
</blockquote>
<p>2025 年目标：</p>
<ul>
<li>[] 1.三月份通过高中数学教资笔试
<ul class="task-list">
<li><label><input type="checkbox" checked="" />阅读教材</label></li>
<li><label><input type="checkbox" checked="" />看视频教程</label></li>
<li><label><input type="checkbox" checked="" />刷题</label></li>
</ul></li>
<li>[] 2.五月份通过高项考试
<ul class="task-list">
<li><label><input type="checkbox"
checked="" />阅读《历年真题，模拟题，计算题专题.pdf》</label></li>
<li><label><input type="checkbox"
checked="" />阅读《重点考点汇总，案例专题及论文专题.pdf》</label></li>
<li><label><input type="checkbox" checked="" />大量刷题</label></li>
</ul></li>
<li><label><input type="checkbox" checked="" />3.前端技术精进</label>
<ul class="task-list">
<li><label><input type="checkbox" checked="" />Vue 3
项目实战</label></li>
<li><label><input type="checkbox" checked="" />React 18
项目实战</label></li>
<li><label><input type="checkbox" checked="" />uni-app
项目实战</label></li>
<li><label><input type="checkbox"
checked="" />小程序项目实战</label></li>
<li><label><input type="checkbox" checked="" />ts 项目实战
<span id="more"></span></label></li>
</ul></li>
<li><label><input type="checkbox"
checked="" />3.提高词汇量，坚持英文原版书籍阅读</label>
<ul class="task-list">
<li><label><input type="checkbox"
checked="" />每天背单词打卡</label></li>
<li><label><input type="checkbox"
checked="" />每天英语听力打卡</label></li>
<li><label><input type="checkbox" checked="" />每日扇贝阅读 5
篇</label></li>
<li><label><input type="checkbox"
checked="" />每三个月测试词汇量</label></li>
</ul></li>
<li><label><input type="checkbox"
checked="" />4.用心陪伴家人和朋友</label>
<ul>
<li><label><input type="checkbox"
checked="" />每周至少给爸妈、姐姐打一次电话或者视频聊天，回家一趟看望父母</label></li>
<li><label><input type="checkbox"
checked="" />孩子大了可以一起去旅游了，每年安排一到两次长途旅游，周末可以在周边城市游玩</label></li>
<li>[] 中文绘本至少每天两本</li>
<li>[] 英语阅读打卡 300 天</li>
</ul></li>
<li>[] 6.坚持锻炼身体
<ul>
<li>[] 每周四次有氧运动，每次至少 30 分钟，跳绳或者跑步。</li>
</ul></li>
</ul>
<hr />
<p>2025 年总结：</p>
<p>今年完成了上述大部分的目标，但是教资考试和高项都没有通过。主要原因是这两门考试其实都有一定的难度，都需要花费大量的时间去复习。上班没时间复习，只利用下班和周末的时间，是远远不够的，而且也比较辛苦，导致了考试失败。2026
年需要拉长战线，先专注于一门考试，突破一门后再去搞其他的。值得高兴的是，今年下半年通过了中级系统集成的考试，特别开心，自己的辛苦付出终于得到了一些回报。</p>
<p>同时在工作中完成了一个 Vue 3
项目，其他几个目标也有进行小项目的练习，练习的还不够，今年将继续加强，多找几个项目练手。不过今年的工作内容会有些变化，前端项目可能没有那么多。后期也会根据实际情况再调整。</p>
<p>英语学习执行情况比较好，定的目标全部完成。扇贝阅读的难度已经有点低了，现在转为每日阅读<a
href="https://englishnewsinlevels.com/">English News in
Level</a>.同时在扇贝完成背单词和练习听力。可以明显感觉到听力和阅读能力的提升。完成软考后，下半年将重点花在英语说和写的锻炼上。</p>
<p>家人和孩子陪伴也做得也比较好，现在孩子大了，周末会约上好友一起出去溜娃，放松。中文绘本也是断断续续的在坚持，娃上一年级后，每天晚上回来要写作业，明现感觉时间不够用了。另外她对英语打卡也有点不情愿，后面还需要加强。</p>
<p>今年没怎么坚持锻炼身体，因为下班要复习考试，回家后已经比较晚，还要照顾小孩，辅导作业，基本没有自己的个人时间了，只有周末的时候陪娃上羽毛球课的时候打打羽毛球。这点
2026 年还要加强。</p>
<p>2026 年也要多记录，现在看看自己之前写的总结，还挺有意思的，哈哈哈哈
🤣。</p>
<p>总而言之，2025
年一直在沿着自己规划的方向前进，虽然走的慢一点，但是大方向是正确的。2026
年继续努力！</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>年度目标</tag>
      </tags>
  </entry>
  <entry>
    <title>2025 年单词量测试</title>
    <url>/2025/03/01/2025-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>20250301 测试结果： <img src="/2025/03/01/2025-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/1.png" class=""></p>
<span id="more"></span>
<p>20250603 测试结果： <img src="/2025/03/01/2025-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/2.png" class=""></p>
<p>20250904 测试结果： <img src="/2025/03/01/2025-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/3.png" class=""></p>
<p>测试网站 <a
href="https://preply.com/en/learn/english/test-your-vocab">Test your
English vocabulary</a></p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>英语</tag>
        <tag>单词量</tag>
      </tags>
  </entry>
  <entry>
    <title>Object.assign 与 Vue 响应式原理</title>
    <url>/2025/03/11/Object-assign-%E4%B8%8E-Vue-%E5%93%8D%E5%BA%94%E5%BC%8F%E5%8E%9F%E7%90%86/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="vue-响应式系统的工作原理">Vue 响应式系统的工作原理</h1>
<p>Vue  在初始化时会将  data  中的属性转换为  getter/setter.</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      // Vue 会递归遍历这个对象</span><br><span class="line">      user: &#123;</span><br><span class="line">        name: &quot;John&quot;, // 每个属性都会被转换为 getter/setter</span><br><span class="line">        age: 25</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>当 Vue 实例创建时：</p>
<ul>
<li>Vue 会遍历 data  中的所有属性</li>
<li>使用 Object.defineProperty(Vue 2) 或 Proxy(Vue 3) 将这些属性转换为
getter/setter</li>
<li>这些 getter/setter 允许 Vue 追踪依赖和更新视图</li>
</ul>
<h1 id="不同赋值方式的影响">不同赋值方式的影响</h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//  方式 1：直接替换整个对象  -  破坏响应式</span><br><span class="line">this.user = &#123; name: &#x27;Jane&#x27;, age: 30 &#125;;  // ❌  创建了新对象，丢失了响应式</span><br><span class="line"></span><br><span class="line">//  方式 2：单独更新属性  -  保持响应式</span><br><span class="line">this.user.name = &#x27;Jane&#x27;;  // ✅  通过  setter  更新，保持响应式</span><br><span class="line">this.user.age = 30;</span><br><span class="line"></span><br><span class="line">//  方式 3：使用  Object.assign -  保持响应式</span><br><span class="line">Object.assign(this.user, &#123; name: &#x27;Jane&#x27;, age: 30 &#125;);  // ✅  通过  setter  更新，保持响应式</span><br></pre></td></tr></table></figure>
<h1 id="object.assign-如何保持响应式">Object.assign 如何保持响应式</h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 假设有这样一个组件</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      networkBond: &#123;</span><br><span class="line">        isAuto: true,</span><br><span class="line">        ip: &#x27;&#x27;,</span><br><span class="line">        mask: 24</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    updateNetwork(newData) &#123;</span><br><span class="line">      // Object.assign 会遍历 newData 的所有属性</span><br><span class="line">      // 通过现有对象的 setter 方法更新每个属性</span><br><span class="line">      Object.assign(this.networkBond, newData);</span><br><span class="line">      // 等效于：</span><br><span class="line">      // this.networkBond.isAuto = newData.isAuto;</span><br><span class="line">      // this.networkBond.ip = newData.ip;</span><br><span class="line">      // this.networkBond.mask = newData.mask;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="对比不同方式的内部工作流程">对比不同方式的内部工作流程</h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 示例1：直接对象赋值</span><br><span class="line">this.networkBond = newData;</span><br><span class="line"></span><br><span class="line">/* 内部发生了什么：</span><br><span class="line">1. 创建新对象 newData</span><br><span class="line">2. 将 this.networkBond 指向新对象</span><br><span class="line">3. 原有的响应式对象被丢弃</span><br><span class="line">4. 新对象没有 getter/setter</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">// 示例2：Object.assign</span><br><span class="line">Object.assign(this.networkBond, newData);</span><br><span class="line"></span><br><span class="line">/* 内部发生了什么：</span><br><span class="line">1. 保持原有响应式对象的引用</span><br><span class="line">2. 通过现有的 getter/setter 更新每个属性</span><br><span class="line">3. 响应式系统可以检测到变化</span><br><span class="line">4. 视图会相应更新</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>
<h1 id="实际应用示例">实际应用示例</h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      form: &#123;</span><br><span class="line">        name: &#x27;&#x27;,</span><br><span class="line">        email: &#x27;&#x27;,</span><br><span class="line">        age: 0</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // 不好的方式</span><br><span class="line">    updateFormBad(data) &#123;</span><br><span class="line">      this.form = data; // ❌ 破坏响应式</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // 好的方式</span><br><span class="line">    updateFormGood(data) &#123;</span><br><span class="line">      Object.assign(this.form, data); // ✅ 保持响应式</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    // 如果需要重置表单</span><br><span class="line">    resetForm() &#123;</span><br><span class="line">      Object.assign(this.form, &#123;</span><br><span class="line">        name: &#x27;&#x27;,</span><br><span class="line">        email: &#x27;&#x27;,</span><br><span class="line">        age: 0</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="注意事项">注意事项</h1>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 1. 添加新属性仍需要 Vue.set</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    addNewProperty() &#123;</span><br><span class="line">      // 如果是新属性，Object.assign 也不能使其具有响应式</span><br><span class="line">      Object.assign(this.form, &#123; newProp: &#x27;value&#x27; &#125;); // ❌ 新属性不是响应式的</span><br><span class="line"></span><br><span class="line">      // 正确方式</span><br><span class="line">      this.$set(this.form, &#x27;newProp&#x27;, &#x27;value&#x27;); // ✅</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 2. 深层对象更新</span><br><span class="line">const deepObject = &#123;</span><br><span class="line">  nested: &#123;</span><br><span class="line">    very: &#123;</span><br><span class="line">      deep: &#x27;value&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">// Object.assign 是浅拷贝，深层对象需要特殊处理</span><br><span class="line">// 可以考虑使用深度合并库或递归合并</span><br></pre></td></tr></table></figure>
<p>理解这些原理后，你就能更好地在 Vue 项目中使用  Object.assign 
来维护数据的响应式特性了。</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Object.assign</tag>
        <tag>Vue 响应式原理</tag>
      </tags>
  </entry>
  <entry>
    <title>当 &lt;a&gt; 标签的 href 属性遇到 router.push 点击事件</title>
    <url>/2025/02/12/%E5%BD%93-a-%E6%A0%87%E7%AD%BE%E7%9A%84-href-%E5%B1%9E%E6%80%A7%E9%81%87%E5%88%B0-router-push-%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>今天在新增用户注册功能时，点击去注册按钮，发现页面刷新后，马上又回到了登录页面，并没有跳转到注册页面。反复排查了几个小时，最后发现问题在于
<code>&lt;a&gt;</code> 标签的 <code>href</code> 属性和
<code>router.push</code>
点击事件同时生效，导致页面刷新，没有正常跳转。</p>
<h2 id="问题原因">问题原因</h2>
<p>具体代码详见 <a
href="https://github.com/toypipi/imooc-front/blob/master/src/views/login-register/login/index.vue">GitHub</a>，出问题的在源文件的第
50 行：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;!-- 跳转按钮 --&gt;</span><br><span class="line">&lt;div class=&quot;pt-1 pb-3 leading-[0px] text-right&quot;</span><br><span class="line">  &lt;a</span><br><span class="line">    class=&quot;inline-block pb-1 text-zinc-400 text-right dark:text-zinc-600 hover:text-zinc-600 dark:hover:text-zinc-400 text-sm duration-300 cursor-pointer&quot;</span><br><span class="line">    href=&quot;&quot;</span><br><span class="line">    @click=&quot;onToReg&quot;</span><br><span class="line">    &gt;去注册&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>当默认行为未被阻止时：</p>
<ul>
<li>浏览器会尝试加载 <code>href=""</code>，空的 href
属性值通常被视为当前页面的 URL。因此，点击这样的 <code>&lt;a&gt;</code>
标签时，浏览器会尝试重新加载当前页面。</li>
<li>同时，<code>router.push('/register')</code>
会被执行，但不会生效，因为页面已经刷新。
所以会一直卡在登录页面，无法跳转到注册页面。</li>
</ul>
<h2 id="解决办法">解决办法：</h2>
<ol type="1">
<li>删除 <code>&lt;a&gt;</code> 标签的 <code>href</code> 属性 或将
<code>href</code> 属性的值设置为 <code>javascript:void(0)</code> 或
<code>#</code>（推荐方案一）。</li>
<li>阻止 <code>&lt;a&gt;</code> 标签的默认事件，在 <code>onToReg</code>
函数中添加：</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">onToReg</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  event.<span class="title function_">preventDefault</span>(); <span class="comment">// 阻止默认行为</span></span><br><span class="line">  router.<span class="title function_">push</span>(<span class="string">&quot;/register&quot;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Vue Routerye</tag>
        <tag>href</tag>
      </tags>
  </entry>
  <entry>
    <title>Mermaid 语法</title>
    <url>/2025/04/23/Mermaid-%E8%AF%AD%E6%B3%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>Mermaid
是一种基于文本的图表绘制工具，它使用简单的语法来定义图表的结构和样式。以下是
Mermaid 绘图的基本语法和一些常见元素的说明：</p>
<h3 id="图类型">1. <strong>图类型</strong></h3>
<p>Mermaid
支持多种类型的图表，包括流程图、序列图、甘特图、类图等。每种图表的定义以关键字开始，例如：</p>
<ul>
<li><code>graph TD</code>：定义一个自上而下的流程图（Top-Down）。</li>
<li><code>graph LR</code>：定义一个从左到右的流程图（Left-Right）。</li>
<li><code>sequenceDiagram</code>：定义一个序列图。</li>
<li><code>gantt</code>：定义一个甘特图。</li>
<li><code>classDiagram</code>：定义一个类图。</li>
</ul>
<h3 id="节点和连接">2. <strong>节点和连接</strong></h3>
<p>在流程图中，节点和连接是最基本的元素。</p>
<span id="more"></span>
<h4 id="节点"><strong>节点</strong></h4>
<p>节点可以是文本标签或带有描述的框。例如：</p>
<figure class="highlight md"><table><tr><td class="code"><pre><span class="line">A[用户终端]</span><br><span class="line">B[云端服务器]</span><br></pre></td></tr></table></figure>
<ul>
<li><code>A[用户终端]</code>：定义一个节点，标签为“用户终端”，节点名称为<code>A</code>。</li>
<li><code>B[云端服务器]</code>：定义一个节点，标签为“云端服务器”，节点名称为<code>B</code>。</li>
</ul>
<h4 id="连接"><strong>连接</strong></h4>
<p>连接表示节点之间的关系，使用箭头表示方向。例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">A-- &gt; B;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>A --&gt; B</code>：表示从节点<code>A</code>到节点<code>B</code>的单向连接。</li>
<li><code>A .-&gt; B</code>：表示从节点<code>A</code>到节点<code>B</code>的虚线连接。</li>
</ul>
<p>连接还可以带有描述文本：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">A --&gt;|云端安全通道 (<span class="variable constant_">MQTT</span>/<span class="variable constant_">HTTPS</span>)| B</span><br></pre></td></tr></table></figure>
<ul>
<li><code>|云端安全通道 (MQTT/HTTPS)|</code>：在连接线上添加描述文本。</li>
</ul>
<h3 id="方向">3. <strong>方向</strong></h3>
<p>流程图的方向可以通过关键字指定：</p>
<ul>
<li><code>TD</code>：自上而下（Top-Down）。</li>
<li><code>LR</code>：从左到右（Left-Right）。</li>
<li><code>RL</code>：从右到左（Right-Left）。</li>
<li><code>BT</code>：自下而上（Bottom-Up）。</li>
</ul>
<p>例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">graph <span class="variable constant_">TD</span></span><br><span class="line">    A --&gt; B</span><br></pre></td></tr></table></figure>
<pre><code class="highlight mermaid">graph TD
    A --&gt; B</code></pre>
<h3 id="分组和子图">4. <strong>分组和子图</strong></h3>
<p>可以使用<code>subgraph</code>关键字将多个节点组合在一起，形成一个子图。例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">subgraph 智能设备组</span><br><span class="line">    C[智能设备<span class="number">1</span>]</span><br><span class="line">    D[智能设备<span class="number">2</span>]</span><br><span class="line">    E[智能设备<span class="number">3</span>]</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<ul>
<li><code>subgraph 智能设备组</code>：定义一个子图，标签为“智能设备组”。</li>
<li><code>end</code>：结束子图的定义。</li>
</ul>
<h3 id="样式和样式类">5. <strong>样式和样式类</strong></h3>
<p>可以为节点和连接定义样式。例如：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">classDef <span class="keyword">default</span> <span class="attr">fill</span>:#f9f,<span class="attr">stroke</span>:#<span class="number">333</span>,stroke-<span class="attr">width</span>:2px;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">A</span>,B <span class="keyword">default</span>;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>classDef default fill:#f9f,stroke:#333,stroke-width:2px;</code>：定义一个样式类<code>default</code>，设置填充颜色为<code>#f9f</code>，边框颜色为<code>#333</code>，边框宽度为<code>2px</code>。</li>
<li><code>class A,B default;</code>：将样式类<code>default</code>应用到节点<code>A</code>和<code>B</code>。</li>
</ul>
<h3 id="完整示例">6. <strong>完整示例</strong></h3>
<p>以下是一个完整的 Mermaid
图表示例，展示了如何定义节点、连接、方向、子图和样式：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">%%&#123;<span class="attr">init</span>: &#123;<span class="string">&quot;theme&quot;</span>: <span class="string">&quot;default&quot;</span>, <span class="string">&quot;themeVariables&quot;</span>: &#123; <span class="string">&quot;primaryColor&quot;</span>: <span class="string">&quot;#ffcc00&quot;</span>, <span class="string">&quot;edgeLabelBackground&quot;</span>:<span class="string">&quot;#ffffff&quot;</span>, <span class="string">&quot;tertiaryColor&quot;</span>: <span class="string">&quot;#ffccaa&quot;</span>&#125;&#125;&#125;%%</span><br><span class="line">flowchart <span class="variable constant_">TB</span></span><br><span class="line">  %% 定义形状和文本的节点</span><br><span class="line">  <span class="title function_">A</span>(<span class="title class_">Start</span>) --&gt; B&#123;<span class="title class_">Is</span> <span class="title class_">Coffee</span> <span class="title class_">Ready</span>?&#125;</span><br><span class="line"></span><br><span class="line">  %% 定义带有标签的连接</span><br><span class="line">  B -- <span class="title class_">No</span> --&gt; C[<span class="title class_">Boil</span> <span class="title class_">Water</span>]</span><br><span class="line">  C --&gt; <span class="title function_">D</span>(<span class="title class_">Stir</span> <span class="title class_">Coffee</span>)</span><br><span class="line">  D --&gt; B</span><br><span class="line"></span><br><span class="line">  B -- <span class="title class_">Yes</span> --&gt; E[<span class="title class_">Pour</span> into <span class="title class_">Cup</span>]</span><br><span class="line">  E --&gt; F&#123;<span class="title class_">Add</span> <span class="title class_">Sugar</span>?&#125;</span><br><span class="line"></span><br><span class="line">  %% 子图：糖的选择</span><br><span class="line">  subgraph <span class="variable constant_">SUGAR_SELECTION</span>[<span class="title class_">Choose</span> <span class="title class_">Sugar</span> <span class="title class_">Level</span>]</span><br><span class="line">    direction <span class="variable constant_">TB</span></span><br><span class="line">    F -- <span class="title class_">Yes</span> --&gt; G[<span class="title class_">Add</span> <span class="title class_">Sugar</span>]</span><br><span class="line">  end</span><br><span class="line"></span><br><span class="line">  F -- <span class="title class_">No</span> --&gt; H[<span class="title class_">Serve</span> <span class="title class_">Coffee</span>]</span><br><span class="line"></span><br><span class="line">  %% 定义样式</span><br><span class="line">  style A <span class="attr">fill</span>:#f9f,<span class="attr">stroke</span>:#<span class="number">333</span>,stroke-<span class="attr">width</span>:2px;</span><br><span class="line">  style B <span class="attr">fill</span>:#bbf,<span class="attr">stroke</span>:#f66,stroke-<span class="attr">width</span>:2px;</span><br><span class="line">  style H <span class="attr">fill</span>:#bff,<span class="attr">stroke</span>:#f66,stroke-<span class="attr">width</span>:2px,stroke-<span class="attr">dasharray</span>: <span class="number">5</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line">  %% 使用类样式定义</span><br><span class="line">  classDef colorClass <span class="attr">fill</span>:#f96;</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">E</span> colorClass;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<pre><code class="highlight mermaid">%%&#123;init: &#123;&quot;theme&quot;: &quot;default&quot;, &quot;themeVariables&quot;: &#123; &quot;primaryColor&quot;: &quot;#ffcc00&quot;, &quot;edgeLabelBackground&quot;:&quot;#ffffff&quot;, &quot;tertiaryColor&quot;: &quot;#ffccaa&quot;&#125;&#125;&#125;%%
flowchart TB
  %% 定义形状和文本的节点
  A(Start) --&gt; B&#123;Is Coffee Ready?&#125;

  %% 定义带有标签的连接
  B -- No --&gt; C[Boil Water]
  C --&gt; D(Stir Coffee)
  D --&gt; B

  B -- Yes --&gt; E[Pour into Cup]
  E --&gt; F&#123;Add Sugar?&#125;

  %% 子图：糖的选择
  subgraph SUGAR_SELECTION[Choose Sugar Level]
    direction TB
    F -- Yes --&gt; G[Add Sugar]
  end

  F -- No --&gt; H[Serve Coffee]

  %% 定义样式
  style A fill:#f9f,stroke:#333,stroke-width:2px;
  style B fill:#bbf,stroke:#f66,stroke-width:2px;
  style H fill:#bff,stroke:#f66,stroke-width:2px,stroke-dasharray: 5 5

  %% 使用类样式定义
  classDef colorClass fill:#f96;
  class E colorClass;
</code></pre>
<h3 id="其他图表类型">7. <strong>其他图表类型</strong></h3>
<p>除了流程图，Mermaid 还支持其他类型的图表，例如：</p>
<h4 id="序列图"><strong>序列图</strong></h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant A <span class="keyword">as</span> 用户终端</span><br><span class="line">    participant B <span class="keyword">as</span> 云端服务器</span><br><span class="line">    A-&gt;&gt;<span class="attr">B</span>: 云端安全通道 (<span class="variable constant_">MQTT</span>/<span class="variable constant_">HTTPS</span>)</span><br></pre></td></tr></table></figure>
<pre><code class="highlight mermaid">sequenceDiagram
    participant A as 用户终端
    participant B as 云端服务器
    A-&gt;&gt;B: 云端安全通道 (MQTT/HTTPS)</code></pre>
<h4 id="甘特图"><strong>甘特图</strong></h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">gantt</span><br><span class="line">    dateFormat  <span class="variable constant_">YYYY</span>-<span class="variable constant_">MM</span>-<span class="variable constant_">DD</span></span><br><span class="line">    title 添加甘特图来展示项目进度</span><br><span class="line">    section 系统设计</span><br><span class="line">    系统架构设计 :a1, <span class="number">2024</span>-<span class="number">01</span>-<span class="number">01</span>, 5d</span><br><span class="line">    数据库设计 :a2, <span class="number">2024</span>-<span class="number">01</span>-<span class="number">06</span>, 3d</span><br><span class="line">    section 开发</span><br><span class="line">    前端开发 :b1, <span class="number">2024</span>-<span class="number">01</span>-<span class="number">10</span>, 7d</span><br><span class="line">    后端开发 :b2, <span class="number">2024</span>-<span class="number">01</span>-<span class="number">10</span>, 7d</span><br></pre></td></tr></table></figure>
<pre><code class="highlight mermaid">gantt
    dateFormat  YYYY-MM-DD
    title 添加甘特图来展示项目进度
    section 系统设计
    系统架构设计 :a1, 2024-01-01, 5d
    数据库设计 :a2, 2024-01-06, 3d
    section 开发
    前端开发 :b1, 2024-01-10, 7d
    后端开发 :b2, 2024-01-10, 7d</code></pre>
<h4 id="类图"><strong>类图</strong></h4>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">classDiagram</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">        +<span class="title class_">String</span> name</span><br><span class="line">        +int age</span><br><span class="line">        +<span class="title class_">String</span> email</span><br><span class="line">        +<span class="keyword">void</span> <span class="title function_">login</span>()</span><br><span class="line">        +<span class="keyword">void</span> <span class="title function_">logout</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">class</span> <span class="title class_">Product</span> &#123;</span><br><span class="line">        +<span class="title class_">String</span> name</span><br><span class="line">        +float price</span><br><span class="line">        +<span class="keyword">void</span> <span class="title function_">purchase</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title class_">User</span> <span class="string">&quot;1&quot;</span> -- <span class="string">&quot;many&quot;</span> <span class="title class_">Product</span> : owns</span><br></pre></td></tr></table></figure>
<pre><code class="highlight mermaid">classDiagram
    class User &#123;
        +String name
        +int age
        +String email
        +void login()
        +void logout()
    &#125;
    class Product &#123;
        +String name
        +float price
        +void purchase()
    &#125;
    User &quot;1&quot; -- &quot;many&quot; Product : owns</code></pre>
<h3 id="参考文档">参考文档</h3>
<ul>
<li><a href="https://www.mermaidchart.com/app/dashboard">Mermaid
Chart</a> Mermaid 官方在线图表编辑器，提供 AI 图表生成和修复功能。</li>
<li><a href="https://github.com/mermaid-js/mermaid">Mermaid
Github</a></li>
</ul>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Mermaid</tag>
        <tag>画图</tag>
      </tags>
  </entry>
  <entry>
    <title>Excel 统计多张工作表中出现的人名</title>
    <url>/2025/03/10/Excel-%E7%BB%9F%E8%AE%A1%E5%A4%9A%E5%BC%A0%E5%B7%A5%E4%BD%9C%E8%A1%A8%E4%B8%AD%E5%87%BA%E7%8E%B0%E7%9A%84%E4%BA%BA%E5%90%8D/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>假设有这样一个需求，一个 excel 表中含有多张工作表，每张工作表的 B
列都包含很多人名，如何统计出人名总共出现的次数。</p>
<p>可以通过 VBA 宏来实现，遍历所有工作表，统计每个人名在所有工作表的 B
列中出现的总次数，并将结果列在一个新创建的 “统计表” 中。</p>
<ol type="1">
<li><p>打开 Excel，按下 <code>Alt + F11</code> 打开 VBA
编辑器。</p></li>
<li><p>在 VBA 编辑器中，右键点击 “VBAProject”，选择
“插入”-&gt;“模块”。</p></li>
<li><p>将如下代码粘贴进去。</p></li>
</ol>
<span id="more"></span>
<figure class="highlight vb"><table><tr><td class="code"><pre><span class="line"><span class="keyword">Sub</span> CountNameOccurrences()</span><br><span class="line">    <span class="keyword">Dim</span> wsSummary <span class="keyword">As</span> Worksheet <span class="comment">&#x27; 定义一个工作表对象，用于存储统计结果</span></span><br><span class="line">    <span class="keyword">Dim</span> ws <span class="keyword">As</span> Worksheet <span class="comment">&#x27; 定义一个工作表对象，用于遍历所有工作表</span></span><br><span class="line">    <span class="keyword">Dim</span> lastRow <span class="keyword">As</span> <span class="type">Long</span> <span class="comment">&#x27; 定义一个长整型变量，用于存储当前工作表中 B 列的最后一行行号</span></span><br><span class="line">    <span class="keyword">Dim</span> name <span class="keyword">As</span> Range <span class="comment">&#x27; 定义一个范围对象，用于存储当前正在处理的单元格</span></span><br><span class="line">    <span class="keyword">Dim</span> nameList <span class="keyword">As</span> <span class="type">Object</span> <span class="comment">&#x27; 定义一个对象变量，用于存储字典对象</span></span><br><span class="line">    <span class="keyword">Dim</span> nameKey <span class="keyword">As</span> Variant <span class="comment">&#x27; 定义一个变体变量，用于遍历字典中的键</span></span><br><span class="line">    <span class="keyword">Dim</span> i <span class="keyword">As</span> <span class="type">Integer</span> <span class="comment">&#x27; 定义一个整型变量，用于循环计数</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&#x27; 创建一个统计表</span></span><br><span class="line">    <span class="keyword">Set</span> wsSummary = ThisWorkbook.Sheets.Add <span class="comment">&#x27; 在当前工作簿中添加一个新的工作表</span></span><br><span class="line">    wsSummary.Name = <span class="string">&quot;统计表&quot;</span> <span class="comment">&#x27; 将新工作表命名为“统计表”</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&#x27; 初始化一个字典来存储每个人名及其出现次数</span></span><br><span class="line">    <span class="keyword">Set</span> nameList = CreateObject(<span class="string">&quot;Scripting.Dictionary&quot;</span>) <span class="comment">&#x27; 创建一个字典对象</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&#x27; 遍历所有工作表</span></span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> ws <span class="keyword">In</span> ThisWorkbook.Sheets <span class="comment">&#x27; 遍历当前工作簿中的所有工作表</span></span><br><span class="line">        <span class="keyword">If</span> ws.Name &lt;&gt; wsSummary.Name <span class="keyword">Then</span> <span class="comment">&#x27; 如果当前工作表不是“统计表”</span></span><br><span class="line">            <span class="comment">&#x27; 找到当前工作表中 B 列的最后一行行号</span></span><br><span class="line">            lastRow = ws.Cells(ws.Rows.Count, <span class="number">2</span>).<span class="keyword">End</span>(xlUp).Row <span class="comment">&#x27; 找到 B 列的最后一行行号</span></span><br><span class="line">            <span class="comment">&#x27; 遍历当前工作表中 B 列的每一行</span></span><br><span class="line">            <span class="keyword">For</span> i = <span class="number">1</span> <span class="keyword">To</span> lastRow <span class="comment">&#x27; 从第 1 行到最后一行</span></span><br><span class="line">                <span class="keyword">Set</span> name = ws.Cells(i, <span class="number">2</span>) <span class="comment">&#x27; 获取当前行的 B 列单元格</span></span><br><span class="line">                <span class="comment">&#x27; 检查人名是否已经存在于字典中</span></span><br><span class="line">                <span class="keyword">If</span> nameList.exists(name.Value) <span class="keyword">Then</span> <span class="comment">&#x27; 如果字典中已经存在该人名</span></span><br><span class="line">                    <span class="comment">&#x27; 如果存在，增加出现次数</span></span><br><span class="line">                    nameList(name.Value) = nameList(name.Value) + <span class="number">1</span> <span class="comment">&#x27; 增加该人名的出现次数</span></span><br><span class="line">                <span class="keyword">Else</span></span><br><span class="line">                    <span class="comment">&#x27; 如果不存在，初始化出现次数为 1</span></span><br><span class="line">                    nameList(name.Value) = <span class="number">1</span> <span class="comment">&#x27; 初始化该人名的出现次数为 1</span></span><br><span class="line">                <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">            <span class="keyword">Next</span> i <span class="comment">&#x27; 继续下一行</span></span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span> <span class="comment">&#x27; 结束当前工作表的检查</span></span><br><span class="line">    <span class="keyword">Next</span> ws <span class="comment">&#x27; 继续下一个工作表</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&#x27; 将统计结果写入统计表</span></span><br><span class="line">    i = <span class="number">1</span> <span class="comment">&#x27; 初始化行号计数器</span></span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> nameKey <span class="keyword">In</span> nameList.keys <span class="comment">&#x27; 遍历字典中的所有键（人名）</span></span><br><span class="line">        wsSummary.Cells(i, <span class="number">1</span>).Value = nameKey <span class="comment">&#x27; 在统计表的第 i 行第 1 列写入人名</span></span><br><span class="line">        wsSummary.Cells(i, <span class="number">2</span>).Value = nameList(nameKey) <span class="comment">&#x27; 在统计表的第 i 行第 2 列写入该人名的出现次数</span></span><br><span class="line">        i = i + <span class="number">1</span> <span class="comment">&#x27; 行号计数器加 1</span></span><br><span class="line">    <span class="keyword">Next</span> nameKey <span class="comment">&#x27; 继续下一个键（人名）</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span> <span class="comment">&#x27; 结束子程序</span></span><br></pre></td></tr></table></figure>
<ol start="4" type="1">
<li><p>关闭 VBA 编辑器，返回 Excel。</p></li>
<li><p>按下 <code>Alt + F8</code>，选择 “CountNameOccurrences”
宏并运行。</p></li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>Excel</tag>
        <tag>宏</tag>
      </tags>
  </entry>
  <entry>
    <title>信息系统项目管理师计算题汇总</title>
    <url>/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="抢占进程调度">抢占进程调度</h1>
<p><strong>1.在一个单 CPU
的计算机系统中，采用按优先级抢占的进程调度方案，且所有任务可以并行使用
I/O 设备。现在有三个任务 T1、T2 和
T3，其优先级分别为高、中、低，每个任务需要先占用 CPU 10ms，然后再使用
I/O 设备 13ms，最后还需要再占用 CPU
5ms。如果操作系统的开销忽略不计，这三个任务从开始到全部结束所用的总时间为（
58 ）ms。</strong></p>
<p>解析： 如图所示</p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/1.png" class="">
<span id="more"></span>
<h1 id="沟通渠道计数">沟通渠道计数</h1>
<p><strong>1.某项目潜在沟通渠道数为 153，则项目干系人数量为（ 18
）人。</strong></p>
<p>解析：
本题考查沟通渠道数的计算，沟通渠道的计算公式：n*（n-1）/2（其中 n
表示人数）。</p>
<h1 id="运筹学">运筹学</h1>
<h2 id="指派问题">指派问题</h2>
<h3 id="匈牙利法一对一用匈牙利">匈牙利法（一对一用匈牙利）</h3>
<ol type="1">
<li>首先找出每行的最小值，然后该行每个数都减去这个数，得到一个矩阵。</li>
<li>在上面的矩阵中，再找出每列的最小值，然后该列每个数值都减去这个数，又可以得到一个矩阵。</li>
<li>在第二步所得的矩阵中，0 即为可以安排的对应工作。</li>
</ol>
<h3 id="伏格尔法多对多用伏格尔">伏格尔法（多对多用伏格尔）</h3>
<p><strong>1.某部门有 3 个生产同类产品的工厂（产地），生产的产品由 4
个销售点（销地）出售，各工厂的生产量（单位：吨）、各销售点的销售量（单位：吨）以及各工厂到各销售点的单位运价（百元
/ 吨）示于表 4 中。</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/2.jpg" class="">
<p>适当安排调运方案，最小总运费为（ 460）。</p>
<p>解析： 首先要看懂表格中的数字表示的含义，如图所示：</p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/3.png" class="">
<ul>
<li>红色：表示各销售点的单位运价</li>
<li>蓝色：各工厂的生产量</li>
<li>绿色：各销售点的销售量</li>
<li>黄色：表示产销平衡</li>
</ul>
<p>采用伏格尔法解题：伏格尔法又称差值法，该方法考虑到，某产地的产品如不能按最小运费就近供应，就考虑次小运费，这就有一个差额。差额越大，说明不能按最小运费调运时，运费增加越多。因而对差额最大处，就应当采用最小运费调运。同理也适用于产销量分配。
具体步骤</p>
<ol type="1">
<li>计算每行、每列中的最小元素和次小元素的差值，标在表的下方（列差）和右方（行差）</li>
<li>找出差额最大的列或行，将运输量赋予该列或行的最小元素</li>
<li>删掉满足条件的行或列（只能删掉其中一个）</li>
<li>继续步骤 1-3</li>
</ol>
<p>详细计算过程见图。</p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/4.png" class="">
<p><strong>2.五项任务需要分配到四种不同型号的机器上来执行。四种型号的机器分别有
25、30、20 和 30 台。五项任务的工作量分别是 20、20、30、10 和
25，不能把第四类机器分配到第四项任务上。每项任务当中的每个工作量在执行时需占用任意型号的
1
台机器。各类机器分配到各项任务时所发生的单位成本如下表所示：</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/5.jpg" class="">
<p>任务分配的最优分配方案中，总成本是（ 560 ）。</p>
<p>解析： 在运筹学中，解决分配问题的方法类同于运输问题的解法。
首先，将问题用规范的表格形式表示如下：</p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/6.png" class="">
<p>运筹学中解决运输问题或分配问题的方法是先建立初始方案，再逐步优化改进。
可以很容易地建立初始方案：从任务一看，分配给机型二是最经济的。不妨将 20
个工作量全部放在机型二上。从任务三看，分配给机型一最合适，但机型一只有
25 台机器，最多做 25 个工作量，所以任务三的 30 个工作量除了分配 25
个在机型一上外，还可以分配 5 个工作量给机型四。从任务四看，可以将 10
个工作量都分配给机型二。从机型五看，还有 25
个工作量可以分配给任务五。这样，剩余的 20 个工作量只能分配机器三。</p>
<p>该方案的总成本是 20x5+20x5+25x3+5x13+10x2+25x8=560 万元。</p>
<h2 id="决策分析">决策分析</h2>
<p><strong>悲观决策法</strong>，也称为最大最小决策标准，是基于“小中取大”准则的一种决策方法。先找到每种方案的最小收益，然后从最小收益方案中选择收益最大的。<br />
<strong>乐观决策法</strong>，是基于“大中取大”准则的一种决策方法。先找到每种方案的最大收益，然后从最大收益方案中选择收益最大的。</p>
<p><strong>1.三个备选投资方案的决策损益表如下，如果采用最大最小决策标准（悲观主义），则选择（
方案 C ）。</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/26.png" class="">
<p>解析： 本考题考查运筹学 - 决策分析 -
不确定型决策知识点，悲观决策法也称为最大最小决策标准，是基于 “小中取大”
准则的一种决策方法。题干已明确
“采用最大最小决策标准（悲观主义）”，我们先找到 A/B/C/D
四种方案的最小收益，分别是：-45，-80，-10，-20。然后从最小收益方案中选择收益最大的，即
- 10 的方案。即选项 C。</p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/27.png" class="">
<p><a
href="https://wangxiao.xisaiwang.com/tiku2/exam529428167.html">希赛题解</a></p>
<p><strong>2.某企业要投产一种新产品，生产方案有四个：A
新建全自动生产线；B 新建半自动生产线；C 购置旧生产设备；D
外包加工生产。未来该产品的销售前景估计为很好、一般和较差三种、不同情况下该产品的收益值如下：（单位：百万元）</strong>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/22.png" class="">
<strong>用后悔值（在同样的条件下，宣传方案所产生的收益损失值）的方案决策应该选（
B ）方案。</strong></p>
<p>解析；
计算后悔矩阵，先看列，首先找到每列的最大值，然后用该值减去每列的值。比如说销路很好这列，最大值为
800，用 800 减去每列对应的值，分别为
800-800=0，800-600=200，800-450=350，800-300=500.再看行，找到每行中的最大后悔值，形成第四列，然后取最大后悔值的最小值。</p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/23.png" class="">
<h1 id="科学管理">科学管理</h1>
<p><strong>1.一个活动有 4 道工序，一个工人只能负责 1
道工序。每名工人完成各工序所需小时数如表 1 所示，工序间的依赖关系如表 2
所示。完成该活动最少需要（16）小时。</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/7.png" class="">
<p>解析： 第一步：根据工序间的依赖关系表，画图如下：</p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/8.png" class="">
<p>由图片可知，甲做工序一，丁做工序四，可以把这两个工序压倒最短。那么乙和丙只能做工序二和工序三。</p>
<ul>
<li>假如乙做工序二 10，丙做工序三 11，由于是并行开展，总时长是 11；</li>
<li>假如乙做工序三 8，丙做工序二 7，由于是并行开展，总时长是 8。</li>
</ul>
<p>由此可知，总工序为：4+8+4 = 16.</p>
<h2 id="不确定性决策">不确定性决策</h2>
<p><strong>1.某企业有一投资方案：每年生产某种设备 1500 台，生产成本每台
700 元，预计售价每台 1800 元，估算投资额为 800 万元。该投资方案寿命为 7
年。假设年产量、每台售价和投资额均有可能在正负 20%
的范围内变动。就这三个不确定因素对投资回收期的敏感性分析得到了下表中的部分投资回收期数据（空缺部分尚未计算）。根据投资回收期的计算结果可知。这三个不确定因素中（
每台售价）是高风险因素（可能导致投资风险）。</strong> <img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/25.png" class=""></p>
<p>解析：</p>
<p>本考题考查的知识点为高风险因素计算题。差值越大，风险越大。</p>
<p>年产量最大差值 = 4.85－4.04=0.81。 每台售价最大差值 =
4.85－3.65=1.2。 投资额最大差值 = 4.85－5.82=0.97。</p>
<p>每台售价的变化导致的投资回收期变化最大。</p>
<p><a
href="https://wangxiao.xisaiwang.com/tiku2/exam529429249.html">希赛题解</a></p>
<h2 id="投资回收期">投资回收期</h2>
<p>项目从建设年算起，用每年的净收益将初始投资全部收回的时间。</p>
<p><strong>静态投资回收期</strong>（不考虑货币的时间价值）=
累计净现金流量开始出现正值或零的年份数–1+上年累计净现金流量的绝对值/
当年净现金流量<br />
<strong>动态投资回收期</strong>（考虑货币的时间价值）=
累计折现值开始出现正值或零的年份数–1+上年累计折现值的绝对值/
当年折现值<br />
<strong>投资收益率（ROI）</strong> =
项目达到设计生产能力后的一个正常年份的年息税前利润与项目总投资的比率<br />
<strong>净现值率</strong> = 净现值/总投资<br />
<strong>投资回报率</strong> = （投资收益-投资成本）/投资成本*100%</p>
<p>投资收益率越大越好，投资回收期越小越好。</p>
<p><strong>1.某软件企业 2006 年初计划投资 2000
万人民币开发某产品，预计从 2007
年开始盈利，各年产品销售额如表所示。根据表中的数据，该产品的静态投资回收期是（1.8）年，动态投资回收期是（2.1）年。（提示：设贴现率为
0.1）</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/16.jpg" class="">
<p>解析：</p>
<ol type="1">
<li>先求净现金流量：用流入（收入）减去流出（支出）。</li>
<li>累计净现金流量：将每年的净现金流量累加。</li>
<li>静态投资回收期：累计净现金流量开始出现正值的年份数–1+上年累计净现金流量的绝对值/
当年净现金流量</li>
<li>动态投资回收期：先计算每年现金流量的现值，再累加。</li>
</ol>
<p>根据相关计算公式与方法得出每年的累计净现金、贴现系数、现值、累计现值如下表所示。
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/17.jpg" class=""></p>
<p>由此表可知，静态投资回收期 =（2-1）+|-1010|/1210=1.8 年。<br />
动态投资回收期 =（3-1）+|-94.8|/898.5=2.1 年。<br />
每年的贴现系数 = 1/(1+i)<sup>n</sup>，其中的 i 是贴现率，n
代表第几年。<br />
投资元年（2006 年）对应的 n 是 0，所以贴现系数是 1。2007 年对应的 n 是
1，所以该年的贴现系数 = 1/(1+0.1)
1=0.91（四舍五入后的值其他年份依此类推）。</p>
<h2 id="最短路径">最短路径</h2>
<p><strong>1.图中 V1
是物流集散地，其他点均为不同的二级转运站，弧上的数字代表两点间的距离（单位公里），则
V1 到二级运转站（ V7 ）最远，其最短路径为（ 13 ）公里。</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/29.png" class="">
<p>解析： 在图中标注出到每个转运站的<strong>最短路径</strong>。
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/30.png" class=""> V1 到 V6 的最短路径和距离为：V1-V2-V5-V9-V6，10； V1 到
V7 的最短路径和距离为：V1-V2-V5-V9-V7，13； V1 到 V8
的最短路径和距离为：V1-V2-V5-V9-V8，12； V1 到 V9
的最短路径和距离为：V1-V2-V5-V9，4。</p>
<p><a
href="https://wangxiao.xisaiwang.com/tiku2/exam529450162.html">希赛题解</a></p>
<h2 id="费用现值法">费用现值法</h2>
<p><strong>1.【考生回忆版】某项目有四个方案均能满足要求。其费用数据如下表所示。在基准折现率为
10% 情况下，根据费用现值法，最优方案是（丙）。</strong>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/31.png" class=""></p>
<p>解析：
费用现值是不同方案在计算期内的各年成本，按基准收益率换算到基准年的现值与方案的总投资现值的和。费用现值越小，其方案经济效益越好。
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/32.png" class=""></p>
<p>
PC<sub> 甲</sub> =150+40/（1+0.1）+40/（1+0.1）<sup>
2</sup>+40/（1+0.1）<sup>3</sup>=249.47<o:p></o:p>
</p>
<p>
PC<sub> 乙</sub> =300+5/（1+0.1）+5/（1+0.1）<sup>
2</sup>+5/（1+0.1）<sup>3</sup>=312.43<o:p></o:p>
</p>
<p>
PC<sub> 丙</sub> =200+15/（1+0.1）+15/（1+0.1）<sup>
2</sup>+15/（1+0.1）<sup>3</sup>=237.3<o:p></o:p>
</p>
<p>
PC<sub> 丁</sub> =250+10/（1+0.1）+10/（1+0.1）<sup>
2</sup>+10/（1+0.1）<sup>3</sup>=274.86<o:p></o:p>
</p>
<h1 id="挣值管理">挣值管理</h1>
<p>明确含义和计算公式：</p>
<table>
<colgroup>
<col style="width: 1%" />
<col style="width: 11%" />
<col style="width: 6%" />
<col style="width: 20%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr>
<th>缩写</th>
<th>英文全称</th>
<th>中文名称</th>
<th>定义</th>
<th>计算公式</th>
</tr>
</thead>
<tbody>
<tr>
<td>PV</td>
<td>Planned Value</td>
<td>计划价值</td>
<td>在即定时间点前计划完成活动或 WBS 组件工作的预算成本</td>
<td></td>
</tr>
<tr>
<td>EV</td>
<td>Earned Value</td>
<td>挣值</td>
<td>在既定时间段内实际完工工作的预算成本</td>
<td>完成工作的计划值之和</td>
</tr>
<tr>
<td>AC</td>
<td>Actual Cost</td>
<td>实际成本</td>
<td>在既定时间段内实际完成工作发生的实际总成本</td>
<td></td>
</tr>
<tr>
<td>CV</td>
<td>Cost Variance</td>
<td>成本偏差</td>
<td>已完成工作的计划价值与实际成本之间的差</td>
<td>CV = EV - AC <br> &gt;0 成本节省 &lt;0 成本超支</td>
</tr>
<tr>
<td>SV</td>
<td>Schedule Variance</td>
<td>进度偏差</td>
<td>已完成工作的计划价值与计划完成工作之间的差</td>
<td>SV = EV - PV <br> &gt;0 进度超前 &lt;0 进度滞后</td>
</tr>
<tr>
<td>CPI</td>
<td>Cost Performance Index</td>
<td>成本绩效指数</td>
<td>测量成本的指标，表示挣值与实际成本之比</td>
<td>CPI = EV/AC <br> &gt;1 成本节约 &lt;1 成本超支</td>
</tr>
<tr>
<td>SPI</td>
<td>Schedule Performance Index</td>
<td>进度执行指数</td>
<td>测量进度的指标，表示挣值与计划价值之比</td>
<td>SPI = EV/PV <br> &gt;1 进度超前 &lt;1 进度滞后</td>
</tr>
<tr>
<td>ETC</td>
<td>Estimate to Completion</td>
<td>完工尚需估算</td>
<td>完成所有剩余项目工作的预计成本</td>
<td>非典型：ETC = BAC - EV<br>典型：ETC = (BAC - EV)/CPI</td>
</tr>
<tr>
<td>EAC</td>
<td>Estimate at Completion</td>
<td>完工估算</td>
<td>完成所有工作所需的预算总成本</td>
<td>非典型：EAC = AC + ETC<br>典型的话选择题可用：EAC = BAC / CPI</td>
</tr>
<tr>
<td>BAC</td>
<td>Budget at Completion</td>
<td>完工预算</td>
<td>为执行工作的全部预算总和</td>
<td>成本基线(基准)就是 BAC，包含应急储备，不包含管理储备</td>
</tr>
<tr>
<td>TCPI</td>
<td>To Complete Performance Index</td>
<td>完工尚需绩效指数</td>
<td>是剩余工作所需成本与可用预算之比</td>
<td>按原计划：TCPI = (BAC - EV)/(BAC - AC)<br>按新计划：TCPI = (BAC -
EV)/(EAC - AC) <br> TCPI &gt; 1 难以完成<br>TCPI = 1 正好完成<br>TCPI
&lt; 1 可以完成</td>
</tr>
<tr>
<td>VAC</td>
<td>Variance at Completion</td>
<td>完工偏差</td>
<td>对预算亏空或盈余的预测，是完工预算与完工估算的差</td>
<td>VAC = BAC - EAC</td>
</tr>
</tbody>
</table>
<h2 id="典型">典型</h2>
<p>题目中出现不采取任何措施、仍按目前状态、按原状态继续进行等字眼时为典型，典型就是比例关系。</p>
<p>完工工期：计划工期/SPI。<br />
完工工期：已花时间 + ETC/每天花的钱。</p>
<h2 id="非典型">非典型</h2>
<p>题目中出现找到了原因，并纠正了偏差，调整措施，按原计划继续进行的字眼时为非典型，需要判断每天花的钱是多少。</p>
<p>完工工期：已花时间 + ETC/每天花的钱。<br />
哪个项目最早完工，我们只需要计算 SPI 的值即可。SPI
的值越大，项目的进度就越好。</p>
<h2 id="三元素口诀">三元素口诀</h2>
<ul>
<li>PV 检查日期点</li>
<li>EV 实际完成量</li>
<li>AC 花了多少钱</li>
</ul>
<h2 id="可以采取的措施">可以采取的措施</h2>
<h3 id="sv0-cv0-进度滞后成本超支">SV&lt;0 CV&lt;0
进度滞后、成本超支</h3>
<ol type="1">
<li>快速跟进， 并行施工， 以缩短关键路径的长度；</li>
<li>使用高素质的资源或经验更丰富的人员；</li>
<li>减小活动范围或降低活动要求； －－－－－注意甲方同意</li>
<li>改进方法或技术， 以提高生产效率；</li>
<li>加强质量管理， 及时发现问题， 减少返工，从而缩短工期。</li>
</ol>
<h3 id="sv0-cv0-进度滞后成本节约">SV&lt;0 CV&gt;0
进度滞后、成本节约</h3>
<ol type="1">
<li>赶工，投入更多的资源或增加工作时间，以缩短关键活动的工期；</li>
<li>快速跟进，并行施工，以缩短关键路径的长度；</li>
<li>使用高素质的资源或经验更丰富的人员；</li>
<li>减小活动范围或降低活动要求； －－－－－注意甲方同意</li>
<li>改进方法或技术，以提高生产效率；</li>
<li>加强质量管理， 及时发现问题， 减少返工， 从而缩短工期。</li>
</ol>
<h3 id="sv0-cv0-进度超前成本超支">SV&gt;0 CV&lt;0
进度超前、成本超支</h3>
<ol type="1">
<li>抽出部分人员;</li>
<li>适当降低工作效率;</li>
<li>适当安排休假;</li>
</ol>
<h3 id="sv0-cv0-进度超前成本节约">SV&gt;0 CV&gt;0
进度超前、成本节约</h3>
<ol type="1">
<li>分析原因，看计划是否有误;</li>
<li>检查质量， 若偏离不大， 维持现状，加强质量控制;</li>
<li>继续保持;</li>
</ol>
<p><strong>1.某软件开发项目包括 A、B、C
三项活动，目前各活动的相关数据如下（单位：万元）则该项目绩效处于（进度提前且成本节约）状态。</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/9.png" class="">
<p>解析： PMB 是绩效测量基准，等于 BAC（完工预算）。首先需要知道：</p>
<ul>
<li>PV 计划价值</li>
<li>EV 挣值，完成工作的计划值之和</li>
<li>AC 实际成本</li>
<li>SV(进度偏差) = EV - PV &gt;0 进度超前 &lt;0 进度滞后</li>
<li>CV(成本偏差) = EV - AC &gt;0 成本节省 &lt;0 成本超支</li>
</ul>
<p>由题目可知：<br />
PV = 20 + 5 = 25<br />
EV = 20*100% + 15*50% + 7*0 = 27.5<br />
AC = 20 + 6 = 26<br />
SV = EV - PV = 27.5 - 25 = 2.5 &gt; 0 进度超前<br />
CV = EV - AC = 27.5 - 26 = 1.5 &gt; 0 成本节约</p>
<h1 id="三点估算法">三点估算法</h1>
<p><strong>PERT（Program Evaluation and Review
Technique，计划评审技术）</strong><br />
三点估算法：期望值 T1，悲观值 T2，乐观值 T3，最可能值
T4，求期望值的公式：<br />
T1 = （T2 + T3 + 4 * T4)/6</p>
<p>标准差(σ) = （悲观值 - 乐观值）/6 ，贝塔分布用这个公式。<br />
三角分布用这个公式： T1 = (T2 + T3 + T4)/3</p>
<p>记住下面这个面积图： <img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/19.jpg" class=""></p>
<p><strong>1.某软件开发项目拆分成 3
个模块，项目组对每个模块的开发量（代码行）进行了估计（见下表），该软件项目的总体规模估算为（
10333 ）代码行。</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/10.png" class="">
<p>解析：</p>
<p>三点估算法计算公式 = （最乐观 + 4*最可能 + 最悲观）/6<br />
(1000+4*1500+2000)/6 + (5000+4*6000+8000)/6 + (2000+4*2500+4000)/6 =
10333</p>
<h1 id="线性规划">线性规划</h1>
<p><strong>1.某乳制品加工厂用纯牛奶和酸牛奶两种生产原料，加工生产甲、乙两种乳制品。该厂加工每单位乳制品消耗原料数、现有原料数、每单位乳制品的利润如下表所示。则该公司的最大利润为（ 
）万元。公司获得最大利润时，生产甲的数量是 （  ）吨。</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/11.png" class="">
<p>解析：</p>
<p>本题考查线性规划内容。设生产甲 X 个；乙 Y 个，列出不等式组：<br />
X+2Y≤86；<br />
5X+3Y≤150；<br />
其中 X、Y 均 ≥0；<br />
求函数 3X+4Y 的最大值。<br />
消元法求得 X=6；Y=40；最大值为 178。</p>
<p><strong>2.某公司打算向它的三个营业区增设 6
个销售店，每个营业区至少增设 1
个。各营业区年增加的利润与增设的销售店个数有关，具体关系如下表所示。可以调整各营业区增设的销售店的个数，使公司总利润增加额最大达（
490）万元。</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/14.png" class="">
<p>解析：</p>
<p>将每个区可以增加的店铺数量全部列举出来，得出下图：</p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/15.png" class="">
<p><a
href="https://wangxiao.xisaiwang.com/tiku2/exam528264648.html">希赛题解</a></p>
<h1 id="最小生成树">最小生成树</h1>
<p><strong>1.工程师小张需要完成图中所有区域的巡检工作，图中圆圈代表巡检地点，两点之间的连接线为可行的交通线路，连接线上所标识的数字为两点之间所需的交通费用（单位：元），从地点
1
开始完成巡检（不需要按数字顺序也无需返回起点）所需的最少交通费为（400）元。</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/12.png" class="">
<p>解析：<br />
将途中费用最低的线用红笔画出来：</p>
<ul>
<li>1.画 1-2 费用 30</li>
<li>2.画 4-5 费用 50</li>
<li>3.画 3-4、7-8 费用 60</li>
<li>……</li>
<li>直到所有的点都有红线连接，此时出现了一个环路，4-5-6，删除 4-5
这条线，得到最终的巡检路线：1-2-3-4-6-5-7-8</li>
</ul>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/13.png" class="">
<p><a
href="https://wangxiao.xisaiwang.com/tiku2/exam528264648.html">希赛题解</a></p>
<h1 id="项目进度网络图">项目进度网络图</h1>
<p><strong>总时差</strong>指一项工作在不影响总工期的前提下所具有的机动时间。<br />
总时差 = 本活动的最迟开始 - 最早开始 = 本活动的最迟结束 - 最早结束</p>
<p><strong>自由时差</strong>指一项工作在不影响后续工作的情况下所拥有的机动时间。<br />
自由时差 = min 紧后活动的 ES - 本活动的 EF</p>
<p>求最早时间用正推法，做加法，遇到多个值的时候选大的。<br />
求最迟时间用倒推法，做减法，遇到多个值的时候选小的。<br />
关键路径上的活动的总时差、自由时差都是 0。</p>
<h2 id="时标网络图">时标网络图</h2>
<p>从起点到终点，没有波浪线的就是关键路径。工期就是最后的刻度。<br />
自由时差：该工作所在的波浪线的长度。<br />
总时差：从起点到终点，把每条路径的波浪线的长度的和求出来，和的最小值就是总时差。</p>
<h1 id="期望货币价值">期望货币价值</h1>
<p>EMV = 各分支的影响*概率全部加起来。 <img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/24.png" class=""></p>
<h1 id="投资收益率">投资收益率</h1>
<p><strong>1.甲、乙、丙、丁 4
个已完工项目的历史数据如表所示，其中负值代表项目的投资额，正值代表项目的收益。从投资收益率来看，（甲）项目最优。单位：万元</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/18.png" class="">
<p>解析： 按照第 4 版教程，总投资收益率的计算公式为 ROI=EBIT/TI。TI
为投资总额，包括固定资产投资和流动资金投资等；EBIT
为项目达产后正常年份的年息税前利润或平均年息税前利润，包括组织的利润总额和利息支出。从表格给的数据来看，数据不是趋于稳定的，所以需要用年均来计算。</p>
<ul>
<li>甲：((2+23+7)/3)/10≈1.07</li>
<li>乙：((80+110)/2)/100=0.95</li>
<li>丙：((15+18+30)/3)/20=1.05</li>
<li>丁：((150+150)/2)/150=1</li>
</ul>
<p><a
href="https://wangxiao.xisaiwang.com/tiku2/exam528291966.html">希赛题解</a></p>
<h1 id="博弈论">博弈论</h1>
<h2 id="赢得矩阵">赢得矩阵</h2>
<p><strong>1.两家企业生产同种产品，为抢占市场规模，每家企业都制定了三个市场推销策略。两家企业的市场策略会影响双方的市场规模占有情况，赢得矩阵如下：</strong></p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/20.png" class="">
<p><strong>在这个矩阵中，每个单元格中的正数表示甲企业比乙企业多占的市场规模，负数则表示甲企业比乙企业少占的市场规模。则双方各应采用哪种策略（A.
甲企业选择策略 2，乙企业选择策略 2 ）。</strong></p>
<p>解析： 每行取最小值，每列取最大值，取行列相等值就是答案。
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/21.png" class=""> <a
href="https://wangxiao.xisaiwang.com/tiku2/exam528334033.html">希赛题解</a></p>
<h1 id="成本报销-cr">成本报销 (CR)</h1>
<p>成本加激励费合同（CPIF）：合同付款在成本的基础上叠加激励费，激励费通常以实际成本与预期成本之间的差异计量。</p>
<p>举例：合同的估计成本 20000，费用 2000，风险分担比率
70：30。如果发生为情况 1：实际成本 16000. 情况 2：实际成本 25000.
买方应支付的总价计算如下：</p>
<p>情况 1：买方支付总价：16000+2000+（20000-16000）*30%＝ 19200<br />
情况 2：买方支付总价：25000+2000+（20000-25000）*30%＝ 25500</p>
<img src="/2025/03/12/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E8%AE%A1%E7%AE%97%E9%A2%98%E6%B1%87%E6%80%BB/28.jpg" class="">
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>信息系统项目管理师</tag>
        <tag>软考</tag>
        <tag>计算题</tag>
      </tags>
  </entry>
  <entry>
    <title>信息系统项目管理师知识点</title>
    <url>/2025/05/09/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="权力利益方格">权力利益方格</h1>
<img src="/2025/05/09/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E7%9F%A5%E8%AF%86%E7%82%B9/%E6%9D%83%E5%8A%9B%E5%88%A9%E7%9B%8A%E6%96%B9%E6%A0%BC.png" class="">
<span id="more"></span>
<h1 id="合同的分类">合同的分类</h1>
<img src="/2025/05/09/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E7%9F%A5%E8%AF%86%E7%82%B9/%E5%90%88%E5%90%8C%E7%9A%84%E5%88%86%E7%B1%BB.png" class="">
<h1 id="it-审计范围">IT 审计范围</h1>
<img src="/2025/05/09/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E7%9F%A5%E8%AF%86%E7%82%B9/IT%E5%AE%A1%E8%AE%A1%E8%8C%83%E5%9B%B4.png" class="">
<h1 id="it-运维能力模型">IT 运维能力模型</h1>
<img src="/2025/05/09/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E7%9F%A5%E8%AF%86%E7%82%B9/IT%E8%BF%90%E7%BB%B4%E8%83%BD%E5%8A%9B%E6%A8%A1%E5%9E%8B.png" class="">
<h1 id="一致性成本和非一致性成本">一致性成本和非一致性成本</h1>
<img src="/2025/05/09/%E4%BF%A1%E6%81%AF%E7%B3%BB%E7%BB%9F%E9%A1%B9%E7%9B%AE%E7%AE%A1%E7%90%86%E5%B8%88%E7%9F%A5%E8%AF%86%E7%82%B9/%E4%B8%80%E8%87%B4%E6%80%A7%E6%88%90%E6%9C%AC%E5%92%8C%E9%9D%9E%E4%B8%80%E8%87%B4%E6%80%A7%E6%88%90%E6%9C%AC.png" class="">
<h1
id="成本加激励费用合同cost-plus-incentive-feecpif">成本加激励费用合同（Cost
Plus Incentive Fee，CPIF）</h1>
<p>在 CPIF 合同下，如果实际成本大于目标成本，卖方可以得到的付款总数为
“目标成本 + 目标费用 +
买方应负担的成本超支”；如果实际成本小于目标成本，则卖方可以得到的付款总数为
“目标成本 + 目标费用－买方应享受的成本节约”。</p>
<h1 id="项目的生命周期">项目的生命周期</h1>
<table>
<colgroup>
<col style="width: 44%" />
<col style="width: 27%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>预测型</th>
<th>迭代型与增量型</th>
<th>适应型</th>
</tr>
</thead>
<tbody>
<tr>
<td>需求在开发前预先确定</td>
<td>需求在交付期间定期细化</td>
<td>需求在交付期间频繁细化</td>
</tr>
<tr>
<td>针对最终可交付成果制订交付计划，然后在项目结束时一次交付最终产品</td>
<td>分次交付整体项目或产品的各个子集</td>
<td>频繁交付对客户有价值的各个子集</td>
</tr>
<tr>
<td>尽量限制变更</td>
<td>定期把变更融入项目</td>
<td>在交付期间实时把变更融入项目</td>
</tr>
<tr>
<td>关键干系人在特定里程碑点参与</td>
<td>关键干系人定期参与</td>
<td>关键干系人持续参与</td>
</tr>
<tr>
<td>通过对基本已知的情况编制详细计划来控制风险和成本</td>
<td>通过用新信息逐渐细化计划来控制风险和成本</td>
<td>随着需求和制约因素的显现而控制风险和成本</td>
</tr>
</tbody>
</table>
<h1
id="工作绩效数据工作绩效信息和工作绩效报告">工作绩效数据、工作绩效信息和工作绩效报告</h1>
<table style="width:100%;">
<thead>
<tr>
<th style="width:12%;">
特性
</th>
<th style="width:35%;">
工作绩效数据
</th>
<th style="width:26%;">
工作绩效信息
</th>
<th style="width:26%;">
工作绩效报告
</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<b>定义</b>
</td>
<td>
原始的、未经处理的项目数据，直接从项目活动中收集。
</td>
<td>
经过分析和处理的工作绩效数据，用于评估项目进展和绩效。
</td>
<td>
综合的工作绩效信息，以报告的形式呈现给项目干系人。
</td>
</tr>
<tr>
<td>
<b>内容</b>
</td>
<td>
例如：实际开始日期、实际完成日期、实际成本、实际工作量等。
</td>
<td>
例如：成本偏差、进度偏差、质量指标、资源使用情况等。
</td>
<td>
例如：项目状态报告、里程碑报告、趋势分析报告等。
</td>
</tr>
<tr>
<td>
<b>来源</b>
</td>
<td>
项目执行过程中的直接记录和测量。
</td>
<td>
对工作绩效数据进行分析和处理的结果。
</td>
<td>
将工作绩效信息整理和总结后形成的文档或报告。
</td>
</tr>
<tr>
<td>
<b>用途</b>
</td>
<td>
作为评估项目绩效的基础数据，用于进一步分析和处理。
</td>
<td>
用于监控项目进展，识别潜在问题，支持决策。
</td>
<td>
用于向项目干系人传达项目状态和绩效情况，支持项目沟通。
</td>
</tr>
<tr>
<td>
<b>处理程度</b>
</td>
<td>
原始数据，未经处理。
</td>
<td>
经过初步分析和处理的数据。
</td>
<td>
经过综合分析和整理的信息，具有较高的可读性和可用性。
</td>
</tr>
<tr>
<td>
<b>呈现形式</b>
</td>
<td>
数据表格、日志记录等。
</td>
<td>
图表、趋势线、偏差分析等。
</td>
<td>
文档、演示文稿、仪表板等。
</td>
</tr>
<tr>
<td>
<b>时效性</b>
</td>
<td>
实时或接近实时的数据。
</td>
<td>
根据数据收集和分析的频率而定。
</td>
<td>
通常按预定的时间间隔（如每周、每月）发布。
</td>
</tr>
<tr>
<td>
<b>用户</b>
</td>
<td>
项目团队成员，特别是数据收集和记录人员。
</td>
<td>
项目经理、项目团队成员、技术专家等。
</td>
<td>
项目干系人，包括管理层、客户、团队成员等。
</td>
</tr>
<tr>
<td>
<b>示例</b>
</td>
<td>
任务 A 的实际开始日期为 2023 年 1 月 1 日，实际成本为 1000 元。
</td>
<td>
任务 A 的成本偏差为-200 元，进度偏差为+5 天。
</td>
<td>
项目状态报告：截至 2023 年 1 月 31 日，项目整体进度提前
10%，成本控制在预算内。
</td>
</tr>
<tr>
<td>
<b>联系</b>
</td>
<td>
工作绩效数据是工作绩效信息的基础，工作绩效信息是对工作绩效数据的分析和处理结果。工作绩效报告则是将工作绩效信息以更易于理解的形式呈现给项目干系人。
</td>
<td>
</td>
<td>
</td>
</tr>
</tbody>
</table>
<p>总结</p>
<ul>
<li>工作绩效数据是项目执行过程中直接收集的原始数据，是评估项目绩效的基础。</li>
<li>工作绩效信息是对工作绩效数据进行分析和处理后的结果，用于监控项目进展和识别潜在问题。</li>
<li>工作绩效报告是将工作绩效信息整理和总结后形成的文档或报告，用于向项目干系人传达项目状态和绩效情况。</li>
</ul>
<h1 id="绩效域">绩效域</h1>
<h2 id="干系人绩效域">干系人绩效域</h2>
<table>
<colgroup>
<col style="width: 59%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr>
<th>预期目标</th>
<th>指标及检查方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>建立高效的工作关系</td>
<td>干系人参与的连续性</td>
</tr>
<tr>
<td>干系人认同项目目标</td>
<td>变更的频率</td>
</tr>
<tr>
<td>支持项目的干系人提高了满意度，并从中收益；<br>
反对项目的干系人没有对项目产生负面影响</td>
<td>1.干系人行为 <br> 2.干系人满意度<br>3.干系人相关问题和风险</td>
</tr>
</tbody>
</table>
<h2 id="团队绩效域">团队绩效域</h2>
<table>
<colgroup>
<col style="width: 46%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr>
<th>预期目标</th>
<th>指标及检查方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>共享责任</td>
<td>目标和责任心</td>
</tr>
<tr>
<td>建立高绩效团队</td>
<td>1.信任与协作程序<br>2.适应变化的能力<br>3.彼此赋能<br></td>
</tr>
<tr>
<td>所有团队成员都展现出相应的领导力和人际关系技能</td>
<td>管理和领导力风格适宜性</td>
</tr>
</tbody>
</table>
<h2 id="开发方法和生命周期绩效域">开发方法和生命周期绩效域</h2>
<table>
<colgroup>
<col style="width: 74%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th>预期目标</th>
<th>指标及检查方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>开发方法与项目可交付物相符合</td>
<td>产品质量和变更成本</td>
</tr>
<tr>
<td>将项目交付与干系人价值紧密联系</td>
<td>价值导向型项目阶段</td>
</tr>
<tr>
<td>项目生命周期由促进交付节奏的项目阶段和产生项目交付物所需的开发方法组成</td>
<td>适宜的交付节奏和开发方法</td>
</tr>
</tbody>
</table>
<h2 id="规划绩效域">规划绩效域</h2>
<table>
<thead>
<tr>
<th>预期目标</th>
<th>指标及检查方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>项目以有条理、协调一致的方式推荐</td>
<td>绩效偏差</td>
</tr>
<tr>
<td>应用系统的方法交付项目成果</td>
<td>规划的整体性</td>
</tr>
<tr>
<td>对演变情况进行详细说明</td>
<td>规划的详尽程度</td>
</tr>
<tr>
<td>规划投入的时间成本是适当的</td>
<td>规划适宜性</td>
</tr>
<tr>
<td>规划的内容对管理干系人的需求而言是充分的</td>
<td>规划的充分性</td>
</tr>
<tr>
<td>可以根据新出现的和不断变化的需求进行调整</td>
<td>可适应变化</td>
</tr>
</tbody>
</table>
<h2 id="工作绩效域">工作绩效域</h2>
<table>
<colgroup>
<col style="width: 48%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr>
<th>预期目标</th>
<th>指标及检查方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>高效且有效的项目绩效</td>
<td>状态报告</td>
</tr>
<tr>
<td>适合项目和环境的项目过程</td>
<td>1.过程的适宜性<br>2.过程相关性和有效性</td>
</tr>
<tr>
<td>干系人适当的沟通和参与</td>
<td>沟通的有效性</td>
</tr>
<tr>
<td>对实物资源进行了有效管理</td>
<td>资源利用率</td>
</tr>
<tr>
<td>对采购进行了有效管理</td>
<td>采购过程适宜</td>
</tr>
<tr>
<td>有效处理了变更</td>
<td>变更处理情况</td>
</tr>
<tr>
<td>通过持续学习和过程改进提高了团队能力</td>
<td>团队绩效</td>
</tr>
</tbody>
</table>
<h2 id="交付绩效域">交付绩效域</h2>
<table>
<colgroup>
<col style="width: 58%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr>
<th>预期目标</th>
<th>指标及检查方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>项目有助于实现业务目标和战略</td>
<td>目标一致性</td>
</tr>
<tr>
<td>项目实现了预期成功</td>
<td>项目完成度</td>
</tr>
<tr>
<td>在预定时间内实现了项目收益</td>
<td>项目收益</td>
</tr>
<tr>
<td>项目团队对需求由清晰地理解</td>
<td>需求稳定性</td>
</tr>
<tr>
<td>干系人接受项目可交付物的成果，并对其满意</td>
<td>1.干系人满意度<br>2.质量问题</td>
</tr>
</tbody>
</table>
<h2 id="度量绩效域">度量绩效域</h2>
<table>
<thead>
<tr>
<th>预期目标</th>
<th>指标及检查方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>对项目状况充分理解</td>
<td>度量结果和报告</td>
</tr>
<tr>
<td>数据充分，可支持决策</td>
<td>度量结果</td>
</tr>
<tr>
<td>及时采取行动，确保项目最佳绩效</td>
<td>度量结果</td>
</tr>
<tr>
<td>能够基于预测和评估做出决策，实现目标并产生价值</td>
<td>工作绩效数据</td>
</tr>
</tbody>
</table>
<h2 id="不确定性绩效域">不确定性绩效域</h2>
<table>
<colgroup>
<col style="width: 74%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr>
<th>预期目标</th>
<th>指标及检查方法</th>
</tr>
</thead>
<tbody>
<tr>
<td>了解项目的运行环境，包括技术、社会、政治、市场和经济环境等</td>
<td>环境因素</td>
</tr>
<tr>
<td>积极识别、分析和应对不确定性</td>
<td>风险应对措施</td>
</tr>
<tr>
<td>了解项目中多个因素之间的相互依赖关系</td>
<td>应对措施适宜性</td>
</tr>
<tr>
<td>能够对威胁和机会进行预测，了解问题的后果</td>
<td>风险管理机制或系统</td>
</tr>
<tr>
<td>最小化不确定性对项目交付的负面影响</td>
<td>项目绩效处于临界值内</td>
</tr>
<tr>
<td>能够利用机会改进项目的绩效和成果</td>
<td>利用机会的机制</td>
</tr>
<tr>
<td>有效利用成本和进度储备，与项目目标保持一致</td>
<td>储备使用</td>
</tr>
</tbody>
</table>
<h1 id="uml">UML</h1>
<ol type="1">
<li>类图（class
diagram）：类图描述一组类、接口、协作和它们之间的关系。在 OO
系统的建模中，最常见的图就是类图。类图给出了系统的静态设计视图，活动类的类图给出了系统的静态进程视图。</li>
<li>对象图（object
diagram）：对象图描述一组对象及它们之间的关系。对象图描述了在类图中所建立的事物实例的静态快照。和类图一样，这些图给出系统的静态设计视图或静态进程视图，但它们是从真实案例或原型案例的角度建立的。</li>
<li>构件图（component diagram）： 构件图描述一个封装的类和它的接口、
端口，以及由内嵌的构件和连接件构成的内部结构。构件图用于表示系统的静态设计实现视图。对于由小的部件构建大的系统来说，构件图是很重要的。构件图是类图的变体。</li>
<li>组合结构图（composite structure
diagram）：组合结构图描述结构化类（例如，构件或类）的内部结构，包括结构化类与系统其余部分的交互点。组合结构图用于画出结构化类的内部内容。</li>
<li>用例图（use case
diagram）：用例图描述一组用例、参与者及它们之间的关系。用例图给出系统的静态用例视图。这些图在对系统的行为进行组织和建模时是非常重要的。</li>
<li>顺序图（sequence diagram，
也称序列图）：顺序图是一种交互图（interaction
diagram），交互图展现了一种交互，它由一组对象或参与者以及它们之间可能发送的消息构成。交互图专注于系统的动态视图。顺序图是强调消息的时间次序的交互图。</li>
<li>通信图（communication
diagram）：通信图也是一种交互图，它强调收发消息的对象或参与者的结构组织。顺序图和通信图表达了类似的基本概念，但它们所强调的概念不同，顺序图强调的是时序，通信图强调的是对象之间的组织结构（关系）。在
UML1.X 版本中，通信图称为协作图 （collaboration diagram）。</li>
<li>定时图（timing
diagram，也称计时图）：定时图也是一种交互图，它强调消息跨越不同对象或参与者的实际时间，而不仅仅只是关心消息的相对顺序。</li>
<li>状态图（state
diagram）：状态图描述一个状态机，它由状态、转移、事件和活动组成。状态图给出了对象的动态视图。它对于接口、类或协作的行为建模尤为重要，而且它强调事件导致的对象行为，这非常有助于对反应式系统建模。</li>
<li>活动图（activity diagram）：
活动图将进程或其他计算结构展示为计算内部一步步的控制流和数据流。活动图专注于系统的动态视图。它对系统的功能建模和业务流程建模特别重要，并强调对象间的控制流程。</li>
<li>部署图（deployment
diagram）：部署图描述对运行时的处理节点及在其中生存的构件的配置。部署图给出了架构的静态部署视图，通常一个节点包含一个或多个部署图。</li>
<li>制品图（artifact
diagram）：制品图描述计算机中一个系统的物理结构。制品包括文件、数据库和类似的物理比特集合。制品图通常与部署图一起使用。制品也给出了它们实现的类和构件。</li>
<li>包图（package diagram）：
包图描述由模型本身分解而成的组织单元，以及它们之间的依赖关系。</li>
<li>交互概览图（interaction overview diagram）：
交互概览图是活动图和顺序图的混合物。</li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>信息系统项目管理师</tag>
        <tag>软考</tag>
      </tags>
  </entry>
  <entry>
    <title>工厂方法模式</title>
    <url>/2025/06/21/%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>工厂方法模式（Factory Method
Pattern）是一种创建型设计模式，它定义了一个用于创建对象的接口，但将实际的实例化延迟到子类。这意味着，你不再直接使用
<code>new</code>
关键字来创建对象，而是通过调用一个“工厂方法”来获取对象，这个工厂方法由子类实现，决定了要实例化哪个具体类。</p>
<span id="more"></span>
<h3 id="为什么要用工厂方法模式">为什么要用工厂方法模式？</h3>
<p>在软件开发中，我们经常需要根据不同的条件创建不同类型的对象。如果直接在代码中通过
<code>new</code>
关键字来创建对象，会导致代码与具体的类紧密耦合。当需要添加新的产品类型或者修改现有产品类型时，就需要修改大量的客户端代码，这违反了“开闭原则”（Open-Closed
Principle），即对扩展开放，对修改关闭。</p>
<p>工厂方法模式的引入，就是为了解决这个问题。它将对象的创建过程抽象化，使得客户端代码不必关心对象的具体创建细节，从而降低了耦合度，提高了代码的灵活性和可维护性。</p>
<h3 id="核心组成部分">核心组成部分</h3>
<p>工厂方法模式主要包含以下四个核心角色：</p>
<ol type="1">
<li><strong>抽象产品（Abstract
Product）</strong>：定义了工厂方法所创建的对象的接口。所有具体产品都必须实现这个接口。</li>
<li><strong>具体产品（Concrete
Product）</strong>：实现抽象产品接口的类。工厂方法会创建这些具体产品的实例。</li>
<li><strong>抽象工厂（Abstract
Creator）</strong>：声明工厂方法，该方法返回一个抽象产品类型的对象。</li>
<li><strong>具体工厂（Concrete
Creator）</strong>：实现抽象工厂接口，负责实际创建具体产品对象。每个具体工厂都对应一个具体产品。</li>
</ol>
<h3 id="如何应用工厂方法模式">如何应用工厂方法模式？</h3>
<p>现在，我们通过一个实际的例子来一步步学习如何应用工厂方法模式。假设我们要开发一个生产不同类型汽车的游戏。</p>
<h4 id="步骤-1定义抽象产品">步骤 1：定义抽象产品</h4>
<p>首先，我们需要定义一个抽象的汽车产品，它规定了所有汽车都应该具备的功能。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># abstract_product.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Car</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">drive</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_info</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h4 id="步骤-2创建具体产品">步骤 2：创建具体产品</h4>
<p>接下来，我们创建几种具体的汽车类型，它们都继承自 <code>Car</code>
类，并实现其方法。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># concrete_product.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SedanCar</span>(<span class="title class_ inherited__">Car</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">drive</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Driving a comfortable Sedan car.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_info</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Type: Sedan, Features: Comfortable ride, good for city.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SUVCar</span>(<span class="title class_ inherited__">Car</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">drive</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Driving a rugged SUV car.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_info</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Type: SUV, Features: Off-road capabilities, spacious.&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SportsCar</span>(<span class="title class_ inherited__">Car</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">drive</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Driving a fast Sports car.&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">get_info</span>(<span class="params">sel<span class="string">f&quot;:</span></span></span><br><span class="line"><span class="string"><span class="params">        return &quot;</span><span class="type">Type</span>: Sports Car, Features: High speed, sleek design.<span class="string">&quot;</span></span></span><br></pre></td></tr></table></figure>
<h4 id="步骤-3定义抽象工厂">步骤 3：定义抽象工厂</h4>
<p>然后，我们定义一个抽象的汽车工厂，它包含一个用于创建汽车的工厂方法。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># abstract_creator.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CarFactory</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_car</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<h4 id="创建具体工厂">4：创建具体工厂</h4>
<p>最后，我们为每种具体的汽车类型创建对应的具体工厂。每个具体工厂都实现
<code>create_car</code> 方法，并返回相应的具体汽车实例。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># concrete_creator.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> abstract_product <span class="keyword">import</span> Car</span><br><span class="line"><span class="keyword">from</span> concrete_product <span class="keyword">import</span> SedanCar, SUVCar, SportsCar</span><br><span class="line"><span class="keyword">from</span> abstract_creator <span class="keyword">import</span> CarFactory</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SedanCarFactory</span>(<span class="title class_ inherited__">CarFactory</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_car</span>(<span class="params">self</span>) -&gt; Car:</span><br><span class="line">        <span class="keyword">return</span> SedanCar()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SUVCarFactory</span>(<span class="title class_ inherited__">CarFactory</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_car</span>(<span class="params">self</span>) -&gt; Car:</span><br><span class="line">        <span class="keyword">return</span> SUVCar()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SportsCarFactory</span>(<span class="title class_ inherited__">CarFactory</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">create_car</span>(<span class="params">self</span>) -&gt; Car:</span><br><span class="line">        <span class="keyword">return</span> SportsCar()</span><br></pre></td></tr></table></figure>
<h4 id="步骤-5客户端代码">步骤 5：客户端代码</h4>
<p>现在，我们可以使用工厂方法模式来创建汽车了。客户端代码只需要与抽象工厂和抽象产品交互，而无需关心具体的汽车类型是如何创建的。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># client.py</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> concrete_creator <span class="keyword">import</span> SedanCarFactory, SUVCarFactory, SportsCarFactory</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">client_code</span>(<span class="params">factory</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    客户端代码与抽象工厂接口一起工作。</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    car = factory.create_car()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Client: I&#x27;m using the factory to get a car.&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Client: <span class="subst">&#123;car.get_info()&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;Client: <span class="subst">&#123;car.drive()&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;-&quot;</span> * <span class="number">30</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;App: Launched with the SedanCarFactory.&quot;</span>)</span><br><span class="line">    client_code(SedanCarFactory())</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;App: Launched with the SUVCarFactory.&quot;</span>)</span><br><span class="line">    client_code(SUVCarFactory())</span><br><span class="line"></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;App: Launched with the SportsCarFactory.&quot;</span>)</span><br><span class="line">    client_code(SportsCarFactory())</span><br></pre></td></tr></table></figure>
<h4 id="运行结果">运行结果</h4>
<p>当你运行 <code>client.py</code> 文件时，你会看到如下输出：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">App: Launched with the SedanCarFactory.</span><br><span class="line">Client: I&#x27;m using the factory to get a car.</span><br><span class="line">Client: Type: Sedan, Features: Comfortable ride, good for city.</span><br><span class="line">Client: Driving a comfortable Sedan car.</span><br><span class="line">------------------------------</span><br><span class="line">App: Launched with the SUVCarFactory.</span><br><span class="line">Client: I&#x27;m using the factory to get a car.</span><br><span class="line">Client: Type: SUV, Features: Off-road capabilities, spacious.</span><br><span class="line">Client: Driving a rugged SUV car.</span><br><span class="line">------------------------------</span><br><span class="line">App: Launched with the SportsCarFactory.</span><br><span class="line">Client: I&#x27;m using the factory to get a car.</span><br><span class="line">Client: Type: Sports Car, Features: High speed, sleek design.</span><br><span class="line">Client: Driving a fast Sports car.</span><br><span class="line">------------------------------</span><br></pre></td></tr></table></figure>
<h3 id="工厂方法模式的优点">工厂方法模式的优点</h3>
<ul>
<li><strong>解耦</strong>：客户端代码与具体的产品类解耦。当需要添加新的产品类型时，只需要添加新的具体产品类和新的具体工厂类，而无需修改客户端代码。</li>
<li><strong>符合开闭原则</strong>：对扩展开放，对修改关闭。</li>
<li><strong>单一职责原则</strong>：产品创建的职责被移到了具体的工厂类中，每个工厂只负责创建一种产品。</li>
<li><strong>易于维护和扩展</strong>：当需要引入新的产品时，只需要增加新的具体产品类和对应的具体工厂类，而无需修改现有代码。</li>
</ul>
<h3 id="工厂方法模式的缺点">工厂方法模式的缺点</h3>
<ul>
<li><strong>类的数量增加</strong>：每增加一个产品，就需要增加一个具体产品类和一个具体工厂类，这会导致类的数量急剧增加，增加系统的复杂度。</li>
<li><strong>代码结构复杂</strong>：相对于简单的对象创建，工厂方法模式的代码结构会更复杂一些。</li>
</ul>
<h3 id="什么时候使用工厂方法模式">什么时候使用工厂方法模式？</h3>
<ul>
<li>当一个类无法预知它需要创建的对象的类时。</li>
<li>当一个类希望其子类来指定它所创建的对象时。</li>
<li>当类库需要提供一种方法让客户端代码扩展其内部组件时。</li>
</ul>
<h3 id="试题巩固">试题巩固</h3>
<ol type="1">
<li><p>场景决策题： 假设你正在开发一个跨平台的 UI
库，这个库需要能够创建在 Windows、macOS 和 Linux
上看起来和行为都一致的按钮（Button）。但是，不同操作系统创建按钮的底层实现是完全不同的。在这种情况下，工厂方法模式是一个好的选择吗？为什么？</p></li>
<li><p>代码重构题： 请看下面这段代码。它直接在 PizzaStore 类中根据 type
创建不同种类的披萨。如果让你用工厂方法模式来重构它，你会如何修改？请描述你的重构思路，特别是，你会如何把
create_pizza 这个 “工厂” 的职责分离出去？</p></li>
</ol>
<h1 id="原始代码">原始代码</h1>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Pizza</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">prepare</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&quot;Preparing <span class="subst">&#123;self.name&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">CheesePizza</span>(<span class="title class_ inherited__">Pizza</span>):</span><br><span class="line">    name = <span class="string">&quot;Cheese Pizza&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VeggiePizza</span>(<span class="title class_ inherited__">Pizza</span>):</span><br><span class="line">    name = <span class="string">&quot;Veggie Pizza&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">PizzaStore</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">order_pizza</span>(<span class="params">self, <span class="built_in">type</span>: <span class="built_in">str</span></span>) -&gt; Pizza:</span><br><span class="line">        pizza = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">type</span> == <span class="string">&#x27;cheese&#x27;</span>:</span><br><span class="line">            pizza = CheesePizza()</span><br><span class="line">        <span class="keyword">elif</span> <span class="built_in">type</span> == <span class="string">&#x27;veggie&#x27;</span>:</span><br><span class="line">            pizza = VeggiePizza()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> pizza:</span><br><span class="line">            pizza.prepare()</span><br><span class="line">            <span class="comment"># ... 其他烘焙、切片、打包等流程</span></span><br><span class="line">        <span class="keyword">return</span> pizza</span><br></pre></td></tr></table></figure>
<ol start="3" type="1">
<li><p>模式扩展题：
在使用工厂方法模式时，抽象工厂（Creator）类中除了定义创建产品（Product）的工厂方法（如
create_car()）之外，通常还会包含一些与产品相关的通用业务逻辑（如
order_pizza()
中的准备、烘焙、打包流程）。你认为这样设计有什么好处？为什么不把这些业务逻辑直接放在客户端代码里呢？</p></li>
<li><p>辨析题： 工厂方法模式的核心思想是
<strong>“将对象的实例化延迟到子类”</strong>。请用你自己的话解释一下，这句话中的
“延迟”（defer）体现在哪里？</p></li>
</ol>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>设计模式</tag>
        <tag>工厂方法</tag>
        <tag>创建型</tag>
      </tags>
  </entry>
  <entry>
    <title>为什么 TypeScript 代码库中充斥着 var 语句</title>
    <url>/2025/10/10/%E4%B8%BA%E4%BB%80%E4%B9%88-TypeScript-%E4%BB%A3%E7%A0%81%E5%BA%93%E4%B8%AD%E5%85%85%E6%96%A5%E7%9D%80-var-%E8%AF%AD%E5%8F%A5/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>原文：<a href="https://vincentrolfs.dev/blog/ts-var">The Temporal
Dead Zone, or why the TypeScript codebase is littered with var
statements</a></p>
</blockquote>
<p>如果您使用 JavaScript
已经有一段时间，您可能知道有几种不同的方式来初始化变量。现在，我们通常使用：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> password = <span class="string">&quot;hunter2&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>并且偶尔的，当状态可变时我们使用：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> password = <span class="string">&quot;hunter2&quot;</span>;</span><br></pre></td></tr></table></figure>
<p>这些声明方式已经存在一段时间了，它们拥有合理的块级作用域规则：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params">measurement</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(calculation); <span class="comment">// ReferenceError（引用错误）</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(anotherCalc); <span class="comment">// ReferenceError（引用错误）</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (measurement &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> calculation = measurement + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">let</span> anotherCalc = measurement * <span class="number">2</span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(calculation); <span class="comment">// ReferenceError（引用错误）</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(anotherCalc); <span class="comment">// ReferenceError（引用错误）</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>但是，如果您使用 JS
的时间<strong>真的</strong>很长，您可能还记得那时这些声明方式都不存在。我们所拥有的只有
<code>var</code>。而 <code>var</code>
非常糟糕。不仅每个变量都是可变的，无法强制实现不变性，更糟的是，<code>var</code>
会泄漏到块级作用域之外：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params">measurement</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(calculation); <span class="comment">// undefined - 可访问！calculation 泄漏了</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">// undefined - 可访问！i 泄漏了</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (measurement &gt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> calculation = measurement + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(calculation); <span class="comment">// 1 - 可访问！calculation 泄漏了</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i); <span class="comment">// 3 - 可访问！i 泄漏了</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>太糟糕了！</p>
<p>因此，当我发现 <strong>TypeScript 的代码库</strong>（它本身是用
TypeScript 编写的——至少<a
href="https://devblogs.microsoft.com/typescript/typescript-native-port/">目前</a>是）<a
href="https://github.com/microsoft/TypeScript/blob/968d5deb8b5fd4af3ce85433872bdefc1eb17f10/src/compiler/scanner.ts#L1033">中充斥着像
2003 年那样的大量 var 语句</a>时，我感到非常惊讶：</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@internal</span> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createSourceMapGenerator</span>(<span class="params"></span></span><br><span class="line"><span class="params">  host: EmitHost,</span></span><br><span class="line"><span class="params">  file: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  sourceRoot: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  sourcesDirectoryPath: <span class="built_in">string</span>,</span></span><br><span class="line"><span class="params">  generatorOptions: SourceMapGeneratorOptions</span></span><br><span class="line"><span class="params"></span>): <span class="title class_">SourceMapGenerator</span> &#123;</span><br><span class="line">  <span class="comment">/* eslint-disable no-var */</span></span><br><span class="line">  <span class="keyword">var</span> &#123; enter, exit &#125; = generatorOptions.<span class="property">extendedDiagnostics</span></span><br><span class="line">    ? performance.<span class="title function_">createTimer</span>(<span class="string">&quot;Source Map&quot;</span>, <span class="string">&quot;beforeSourcemap&quot;</span>, <span class="string">&quot;afterSourcemap&quot;</span>)</span><br><span class="line">    : performance.<span class="property">nullTimer</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Current source map file and its index in the sources list</span></span><br><span class="line">  <span class="keyword">var</span> <span class="attr">rawSources</span>: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="keyword">var</span> <span class="attr">sources</span>: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="keyword">var</span> sourceToSourceIndexMap = <span class="keyword">new</span> <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt;();</span><br><span class="line">  <span class="keyword">var</span> <span class="attr">sourcesContent</span>: (<span class="built_in">string</span> | <span class="literal">null</span>)[] | <span class="literal">undefined</span>; <span class="comment">// eslint-disable-line no-restricted-syntax</span></span><br><span class="line">  <span class="keyword">var</span> <span class="attr">names</span>: <span class="built_in">string</span>[] = [];</span><br><span class="line">  <span class="keyword">var</span> <span class="attr">nameToNameIndexMap</span>: <span class="title class_">Map</span>&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; | <span class="literal">undefined</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> <span class="attr">mappingCharCodes</span>: <span class="built_in">number</span>[] = [];</span><br><span class="line">  <span class="keyword">var</span> mappings = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Last recorded and encoded mappings</span></span><br><span class="line">  <span class="keyword">var</span> lastGeneratedLine = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> lastGeneratedCharacter = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> lastSourceIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> lastSourceLine = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> lastSourceCharacter = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> lastNameIndex = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">var</span> hasLast = <span class="literal">false</span>;</span><br><span class="line">  <span class="comment">// ... 等等</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>原因与所谓的<a
href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/let#temporal_dead_zone_tdz">暂时性死区（Temporal
Dead Zone，简称 TDZ）</a>有关。</p>
<p>对于代码中的每个变量，都存在一个区域，在这个区域内变量已被声明，但<strong>尚未初始化</strong>。下面的例子可以清楚地说明这一点：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> result = <span class="title class_">Math</span>.<span class="title function_">random</span>() &lt; <span class="number">0.5</span> ? <span class="title function_">useX</span>() : <span class="number">1</span>; <span class="comment">// 50% 的概率出现 ReferenceError</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> x = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">useX</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在上面的例子中，将 <code>useX</code>
声明在函数的底部是完全有效的。问题出在当你在 <code>x</code>
尚未初始化之前就调用它时——换句话说，当解释器仍处于 <code>x</code> 的
<strong>TDZ</strong> 中时。解释器拒绝让您访问 <code>x</code>
并抛出一个错误。</p>
<p>这一点非常好！因为如果您在这个例子中使用 <code>var</code> 而不是
<code>const</code>，就不会报错，函数只会简单地返回
<code>undefined</code>！</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="title function_">useX</span>(); <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result; <span class="comment">// undefined</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">useX</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">example</span>()); <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
<p>太糟糕了！</p>
<p>所以 TDZ 实际上是 <code>const</code> 和 <code>let</code>
带来的一个<strong>超有用的特性</strong>。那么为什么 TypeScript
不愿意使用它呢？</p>
<p><strong>答案是性能（Performance）。</strong></p>
<p>判断是否处于变量的 TDZ
中，对解释器来说是一项繁重的工作。正如您在上面看到的，它不能静态完成，而是取决于<strong>非确定性的运行时行为</strong>。这会带来显著的性能开销，这对
TypeScript 代码库来说是至关重要的。</p>
<p>在将大量声明迁移回 <code>var</code>
之后，他们在某些基准测试中看到了<a
href="https://github.com/microsoft/TypeScript/issues/52924">8%
的性能提升</a>。</p>
<p>对我个人而言，我很高兴不必再使用 <code>var</code> 了。而对于
TypeScript，我确信这只是他们<a
href="https://devblogs.microsoft.com/typescript/typescript-native-port/">将代码库迁移到
Go 语言</a>的又一个理由。</p>
<h1 id="译注">译注</h1>
<p>文章中提到的“暂时性死区”（Temporal Dead Zone，简称 TDZ）是理解
JavaScript 中 <code>let</code> 和 <code>const</code>
行为的关键概念。</p>
<p>简单来说，TDZ
是指<strong>变量已经存在于作用域中，但你不能访问它的时间段。</strong></p>
<hr />
<h2 id="暂时性死区的核心理解">暂时性死区的核心理解</h2>
<p>要理解 TDZ，我们需要先了解 <code>var</code>、<code>let</code> 和
<code>const</code> 在作用域内的声明过程。</p>
<h3 id="var-的行为变量提升-hoisting">1. <code>var</code>
的行为：变量提升 (Hoisting)</h3>
<p>使用 <code>var</code>
声明的变量，在代码执行前，会被“提升”到其所在作用域（函数作用域）的顶部。在实际执行代码时，它虽然被提升了，但<strong>会默认被初始化为
<code>undefined</code></strong>。</p>
<ul>
<li><strong>代码：</strong> <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(myVar); <span class="comment">// 输出：undefined (没有报错)</span></span><br><span class="line"><span class="keyword">var</span> myVar = <span class="number">10</span>;</span><br></pre></td></tr></table></figure></li>
<li><strong>TDZ 视角：</strong> <code>var</code> 没有
TDZ。它被提升并初始化为
<code>undefined</code>，所以你可以在它声明之前访问它，虽然得到的是一个无效值。</li>
</ul>
<h3 id="let-和-const-的行为tdz-保护">2. <code>let</code> 和
<code>const</code> 的行为：TDZ 保护</h3>
<p><code>let</code> 和 <code>const</code>
声明的变量也会被提升到其块级作用域的顶部，但与 <code>var</code>
不同的是，<strong>它们不会被默认初始化</strong>。它们的状态会经历以下三个阶段：</p>
<ol type="1">
<li><strong>被创建 (Created)：</strong>
变量进入作用域，但未初始化。</li>
<li><strong>暂时性死区 (TDZ)：</strong>
从变量被创建，到代码执行到它的声明语句为止的这段时间。在这段时间内访问变量，会立即抛出
<code>ReferenceError</code>。</li>
<li><strong>被初始化 (Initialized)：</strong> 代码执行到
<code>let</code> 或 <code>const</code>
的声明行，变量被赋予一个值（或等待赋值）。</li>
</ol>
<hr />
<h2 id="示例与-tdz-的作用">示例与 TDZ 的作用</h2>
<p>让我们通过文章中的例子，来明确 TDZ 如何“保护”你的代码：</p>
<h3 id="带有-tdz-的-const安全">带有 TDZ 的
<code>const</code>（安全）</h3>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ---- x 的 TDZ 开始 ----</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 试图在 TDZ 内访问 x</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="title class_">Math</span>.<span class="title function_">random</span>() &lt; <span class="number">0.5</span> ? <span class="title function_">useX</span>() : <span class="number">1</span>; <span class="comment">// 约 50% 概率调用 useX()</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 假设 useX() 尝试访问 x</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">useX</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x; <span class="comment">// &lt;-- 如果在这里访问，就会抛出 ReferenceError！</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// ---- 代码执行到这里，x 离开 TDZ，并被初始化 ----</span></span><br><span class="line">  <span class="keyword">const</span> x = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>TDZ 的好处：</strong>
它强制你在变量被赋予有效值（即初始化）之后才能使用它，避免了使用<strong>未定义状态</strong>的变量，从而帮助你捕获潜在的运行时错误，让代码更加可靠。</p>
<h3 id="没有-tdz-的-var危险">没有 TDZ 的 <code>var</code>（危险）</h3>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">example</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="title function_">useX</span>(); <span class="comment">// useX() 访问 x，但 x 此时是 undefined</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">useX</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> x; <span class="comment">// 访问的是 undefined</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> x = <span class="number">10</span>; <span class="comment">// 即使在这里赋值，也于事无补</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result; <span class="comment">// 返回 undefined，但程序没有报错</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><code>var</code> 的问题：</strong> 由于 <code>var</code>
在提升时自动初始化为
<code>undefined</code>，程序虽然逻辑错误，但没有抛出错误，而是返回了
<code>undefined</code>，这会使错误更难被发现和调试。</p>
<h3 id="总结">总结</h3>
<p>TDZ 不是一个物理空间，而是一个<strong>时间概念</strong>。它是
JavaScript
引擎设计用来确保程序在变量被正确初始化之前不会意外使用它的安全机制。</p>
<p>至于文章中提到的 TypeScript <strong>为了性能而避免
TDZ</strong>，是因为在复杂的代码库中，解释器在运行时跟踪变量是否在 TDZ
中会带来额外的性能负担。这是大型项目在<strong>代码执行速度</strong>和<strong>代码安全性/现代性</strong>之间做出的一个权衡。</p>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>Var</tag>
        <tag>TDZ</tag>
        <tag>Temporal Dead Zone</tag>
      </tags>
  </entry>
  <entry>
    <title>让你真正听懂英语的秘诀</title>
    <url>/2025/10/23/%E8%AE%A9%E4%BD%A0%E7%9C%9F%E6%AD%A3%E5%90%AC%E6%87%82%E8%8B%B1%E8%AF%AD%E7%9A%84%E7%A7%98%E8%AF%80/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>英语难懂并非总是语速太快，而是我们聆听的方式存在问题。</p>
<ol type="1">
<li><p><strong>听单个词而非语块</strong></p>
<ul>
<li><strong>问题：</strong>
像试图抓住每一个雨滴一样，去听每一个单独的词，这会让人感到不知所措，最终错过一切。</li>
<li><strong>解决：</strong> 必须听“词组”，即“意义的语块”（chunks of
meaning）。</li>
<li><strong>练习：</strong>
从阅读开始，阅读时划分语块，理解其含义，而不是逐字翻译。这能训练你的大脑以“语块”为单位进行处理，从而更快地理解意思，让语速感觉变慢。</li>
</ul></li>
<li><p><strong>忽略语言的“音乐性”——重音节奏 (Stress-Timed
Language)</strong></p>
<ul>
<li><strong>问题：</strong>
英语是一种重音计时语言，重要的词（内容词）发音响亮且长，不重要的词（功能词）则短而弱，甚至几乎听不见。如果你只等着听每一个“完整”的词，就会错过信息。</li>
<li><strong>解决：</strong>
学习英语的基本结构（即语法），将其视为语言的“地图”
。当你知道这个“地图”，即使听不到某些虚词（如“are”），你的大脑也能自动预测和填补缺失的词，理解完整的意思。
<strong>诀窍不是在听，而是在预测</strong> 。</li>
</ul>
<span id="more"></span></li>
<li><p><strong>期待“完美的”教科书式英语 (The Myth of Perfect
English)</strong></p>
<ul>
<li><strong>问题：</strong>
教科书中的英语发音清晰、缓慢且谨慎（例如：How are you
today?）。但在现实世界中，人们会连读、吞音和缩略（例如：going to 变成
gonna）。如果只期待教科书上的发音，你会感到迷失。</li>
<li><strong>解决：</strong> <strong>广泛地听</strong>
不同口音（美、英、澳、印等）、不同人群（年轻人、老年人、记者、电影角色）的真实英语
。你的大脑需要熟悉同一首歌的不同“歌手”版本，才能理解歌曲本身。</li>
</ul></li>
</ol>
<h3
id="核心秘密聆听不是耳朵的活动而是大脑的活动">核心秘密：聆听不是耳朵的活动，而是大脑的活动</h3>
<ul>
<li>让快语速变慢的秘密是：<strong>你的大脑，而不是你的耳朵</strong>。</li>
<li>当你掌握了语块、理解了节奏并熟悉了真实的自然发音时，你的大脑就不会惊慌，它变成了一个平静的观察者，因为它有了“地图”，知道期待什么
。</li>
<li>这种预测的过程使输入信息感觉更慢。你不是听得更慢，而是<strong>处理得更快</strong>
。</li>
<li><strong>听力不是一个被动技能，而是一个主动技能，是一个预测和理解的游戏。</strong></li>
</ul>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>技巧</tag>
        <tag>英语</tag>
        <tag>听力</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo 中渲染公式</title>
    <url>/2025/10/20/hexo-%E4%B8%AD%E6%B8%B2%E6%9F%93%E5%85%AC%E5%BC%8F/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>如果博客中含有公式，记得要在顶部添加
<code>mathjax: true</code>，否则公式无法渲染。例如：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: hexo 中渲染公式</span><br><span class="line">categories:</span><br><span class="line"><span class="bullet">  -</span> 技术</span><br><span class="line">tags:</span><br><span class="line"><span class="bullet">  -</span> hexo</span><br><span class="line"><span class="bullet">  -</span> 公式</span><br><span class="line">mathjax: true</span><br><span class="line"><span class="section">date: 2025-10-20 12:25:59</span></span><br><span class="line"><span class="section">---</span></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>公式</tag>
      </tags>
  </entry>
  <entry>
    <title>使用用户脚本为拥有 24 年历史的政府网站添加键盘快捷键</title>
    <url>/2025/10/20/%E4%BD%BF%E7%94%A8%E7%94%A8%E6%88%B7%E8%84%9A%E6%9C%AC%E4%B8%BA%E6%8B%A5%E6%9C%89-24-%E5%B9%B4%E5%8E%86%E5%8F%B2%E7%9A%84%E6%94%BF%E5%BA%9C%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E9%94%AE%E7%9B%98%E5%BF%AB%E6%8D%B7%E9%94%AE/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>原文：<a
href="https://wcedmisten.fyi/post/keyboard-shortcuts-userscripts/">Adding
Keyboard Shortcuts to a 24 Year Old Government Website with
Userscripts</a></p>
</blockquote>
<h1 id="背景-background">背景 (Background)</h1>
<p>在过去的一年里，我一直在清理美国食品药品监督管理局（FDA）的 510k
数据库的数据<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="https://www.accessdata.fda.gov/scripts/cdrh/cfdocs/cfpmn/pmn.cfm
">[1]</span></a></sup>。</p>
<p>该数据库收录了 510k
项目<sup id="fnref:7"><a href="#fn:7" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="510k 项目 是美国食品药品监督管理局（FDA）针对大多数医疗器械在美国上市前要求进行的一项审批流程
">[7]</span></a></sup>的申请，包含 FDA
的审批流程，几乎所有（99%）供人使用的医疗器械都采用这一程序。<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10465388/
">[2]</span></a></sup>。</p>
<p>在 archive.org<sup id="fnref:3"><a href="#fn:3" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="https://web.archive.org/web/20001015000000*/https://www.accessdata.fda.gov/scripts/cdrh/cfdocs/cfpmn/pmn.cfm
">[3]</span></a></sup> 上的搜索显示，这个网站至少从 2000 年 10 月 18
日就存在了。事实上，我们甚至可以看到它当年的样子。顶上配有官方的 Comic
Sans 字体设计的标志。</p>
<img src="/2025/10/20/%E4%BD%BF%E7%94%A8%E7%94%A8%E6%88%B7%E8%84%9A%E6%9C%AC%E4%B8%BA%E6%8B%A5%E6%9C%89-24-%E5%B9%B4%E5%8E%86%E5%8F%B2%E7%9A%84%E6%94%BF%E5%BA%9C%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E9%94%AE%E7%9B%98%E5%BF%AB%E6%8D%B7%E9%94%AE/1.png" class="">
<span id="more"></span>
<p>这是截至 2024 年的网站。令人惊讶的是，在过去的 24
年里，它的外观竟然没什么变化。</p>
<img src="/2025/10/20/%E4%BD%BF%E7%94%A8%E7%94%A8%E6%88%B7%E8%84%9A%E6%9C%AC%E4%B8%BA%E6%8B%A5%E6%9C%89-24-%E5%B9%B4%E5%8E%86%E5%8F%B2%E7%9A%84%E6%94%BF%E5%BA%9C%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E9%94%AE%E7%9B%98%E5%BF%AB%E6%8D%B7%E9%94%AE/2.png" class="">
<p>从那时起，其主界面几乎没什么变化，更像一个简单时代的活化石。它的样式相当简陋，并且页面都是服务器渲染的。除了用于日期选择器的一些代码，它几乎不包含任何
JavaScript。</p>
<p>根据 .cfm 文件扩展名，它似乎是由一个 1995 年的构建工具 Adobe
ColdFusion 构建的<sup id="fnref:4"><a href="#fn:4" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="https://en.wikipedia.org/wiki/Adobe_ColdFusion
">[4]</span></a></sup>。</p>
<h1 id="数据录入">数据录入</h1>
<p>为了清理数据，我使用该数据库的搜索功能按名称查找医疗器械。</p>
<p>然而，数据中存在一些问题，减慢了我的速度。</p>
<p>器械和公司名称没有标准化，可能存在缩写、首字母缩略词或常见的拼写错误。该网站的搜索功能不提供模糊字符串匹配，因此查找一个器械通常需要反复试错。我的工作流程是点击搜索输入框，输入一个名称（可能会输入几次），然后用鼠标高亮文本并将其复制到另一个程序中。</p>
<p>这个过程感觉非常低效。每次搜索，我都必须将手从鼠标和键盘之间多次移动。</p>
<p>我手动搜索了数千个器械，因此优化流程的每一步都是值得的。此外，写代码比手动录入数据更有趣，这给了我一个有趣的休息机会。</p>
<p>我的目标是扩展网站的功能，以便我可以在不离开键盘的情况下完成大部分任务。</p>
<h1 id="用户脚本">用户脚本</h1>
<p>什么是用户脚本？用户脚本<sup id="fnref:5"><a href="#fn:5" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="https://en.wikipedia.org/wiki/Userscript
">[5]</span></a></sup>实际上是一个用 JavaScript
编写的程序，旨在为网站提供原始开发者意图之外的附加功能。</p>
<p>在这个案例中，是为了给 FDA 的 510k 数据库网站提供键盘快捷键。</p>
<p>我想要实现以下任务的快捷键：</p>
<ul>
<li>打开搜索页面</li>
<li>聚焦到“器械名称”的搜索输入框</li>
<li>复制器械的 510K ID 号码</li>
</ul>
<h1 id="violentmonkey">ViolentMonkey</h1>
<p>有许多支持用户脚本的浏览器扩展，但我使用的是一个名为
<strong>ViolentMonkey</strong> 的工具。它是更流行的扩展 TamperMonkey
的开源替代品。</p>
<p>这个工具提供了一种在不同网站上运行自定义 JavaScript
的好方法。它提供了一个浏览器内的 JavaScript
编辑器，也允许用户从各种用户脚本库安装其他人的脚本。</p>
<p>幸运的是，由于网站使用的是非常简单的
HTML，因此编写这些快捷键的代码非常简单。</p>
<h1 id="快捷键">快捷键</h1>
<p>ViolentMonkey
通过它的快捷键扩展<sup id="fnref:6"><a href="#fn:6" rel="footnote"><span
class="hint--top hint--error hint--medium hint--rounded hint--bounce"
aria-label="https://github.com/violentmonkey/vm-shortcut
">[6]</span></a></sup>，使得注册快捷键变得非常容易。通过在头部（header）添加这一行代码，我可以轻松注册快捷键：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// @require https://cdn.jsdelivr.net/npm/@violentmonkey/shortcut@1</span></span><br></pre></td></tr></table></figure>
<h2 id="打开搜索页面">打开搜索页面</h2>
<p>这是最容易写的快捷键了。我们只需将位置（location）设置为搜索页面的
URL。当按下 <code>Ctrl + Alt + N</code>
时，该标签页会被重定向到搜索页面。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">VM</span>.<span class="property">shortcut</span>.<span class="title function_">register</span>(<span class="string">&quot;ctrl-alt-n&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  location.<span class="property">href</span> =</span><br><span class="line">    <span class="string">&quot;https://www.accessdata.fda.gov/scripts/cdrh/cfdocs/cfPMN/pmn.cfm&quot;</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="聚焦搜索输入框">聚焦搜索输入框</h2>
<p>打开搜索页面后，我想要聚焦到器械名称输入字段。</p>
<p>这是此输入框的 HTML 代码。开发人员很有帮助地给了它一个
ID：<code>DeviceName</code>，所以我们可以使用
<code>document.getElementById()</code> 在页面上找到它。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="string">`&lt;input type=&quot;text&quot; name=&quot;DeviceName&quot; id=&quot;DeviceName&quot; size=&quot;20&quot; maxlength=&quot;20&quot;&gt;</span></span><br></pre></td></tr></table></figure>
<p>这是用户脚本。我们找到该元素，然后使用 <code>focus()</code>
将我们的浏览器焦点放在它上面。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">VM</span>.<span class="property">shortcut</span>.<span class="title function_">register</span>(<span class="string">&quot;ctrl-alt-s&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> input = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;DeviceName&quot;</span>);</span><br><span class="line">  input.<span class="title function_">focus</span>();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="复制器械-id">复制器械 ID</h2>
<p>最后一个快捷键稍微复杂一些，因为它必须处理两种情况。在网站上提交搜索表单后，下一个页面可能以两种方式渲染：</p>
<ol type="1">
<li>如果只有一个结果，网站会显示该结果的详细信息，包括 510k 编号。
<img src="/2025/10/20/%E4%BD%BF%E7%94%A8%E7%94%A8%E6%88%B7%E8%84%9A%E6%9C%AC%E4%B8%BA%E6%8B%A5%E6%9C%89-24-%E5%B9%B4%E5%8E%86%E5%8F%B2%E7%9A%84%E6%94%BF%E5%BA%9C%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E9%94%AE%E7%9B%98%E5%BF%AB%E6%8D%B7%E9%94%AE/3.png" class=""></li>
<li>如果有多个结果，网站会显示一个表格，其中包含每个 510k
编号以及指向每个提交详情的链接。 <img src="/2025/10/20/%E4%BD%BF%E7%94%A8%E7%94%A8%E6%88%B7%E8%84%9A%E6%9C%AC%E4%B8%BA%E6%8B%A5%E6%9C%89-24-%E5%B9%B4%E5%8E%86%E5%8F%B2%E7%9A%84%E6%94%BF%E5%BA%9C%E7%BD%91%E7%AB%99%E6%B7%BB%E5%8A%A0%E9%94%AE%E7%9B%98%E5%BF%AB%E6%8D%B7%E9%94%AE/4.png" class=""></li>
</ol>
<p>在我们的代码中，我们检查 URL 中是否存在字符串
<code>?ID=</code>，该字符串仅出现在单结果详情页面上。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (location.<span class="property">href</span>.<span class="title function_">includes</span>(<span class="string">&quot;?ID=&quot;</span>)) &#123;</span><br><span class="line">  <span class="comment">// 复制详情页中的ID</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 复制表格中的结果</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不幸的是，显示器械 510k 编号的 HTML 元素没有使用 <code>id</code>
属性。因此，我们需要使用该元素的 <strong>xpath(XML Path
Language)</strong>。</p>
<p>xpath
描述如何从树的根部（文档的起点）走到树上某个特定成员（某个节点）的
“地址” 或 “导航路线”。如果元素在页面上移动，xpath
将不再准确。幸运的是，由于该页面是服务器模板化（server templated）的
HTML，该元素在页面上并不会真正移动。如果这是一个现代的 JavaScript
网页应用，我们就要使用一种不同的方法。</p>
<p>我们可以使用 Firefox 方便的开发者工具中的“复制
xpath”选项来快速找到这个值。</p>
<p>现在我们可以使用 <code>window.navigator.clipboard.writeText()</code>
将该节点的 <code>innerText</code> 值复制到我们的剪贴板。</p>
<p>目前我们有了：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (location.<span class="property">href</span>.<span class="title function_">includes</span>(<span class="string">&quot;?ID=&quot;</span>)) &#123;</span><br><span class="line">  <span class="comment">// 复制详情页中的ID</span></span><br><span class="line">  <span class="keyword">var</span> xpath =</span><br><span class="line">    <span class="string">&quot;/html/body/div[3]/maxamineignore/div[2]/div[2]/span[2]/table[2]/tbody/tr/td/table/tbody/tr[2]/td/table/tbody/tr/td/table/tbody/tr[2]/td&quot;</span>;</span><br><span class="line">  <span class="comment">// 根据提供的 XPath 路径，在文档对象模型（DOM）树中查找并选择匹配的节点</span></span><br><span class="line">  <span class="keyword">var</span> deviceId = <span class="variable language_">document</span>.evaluate(</span><br><span class="line">    xpath,</span><br><span class="line">    <span class="variable language_">document</span>,</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    <span class="title class_">XPathResult</span>.<span class="property">FIRST_ORDERED_NODE_TYPE</span>,</span><br><span class="line">    <span class="literal">null</span></span><br><span class="line">  ).<span class="property">singleNodeValue</span>.<span class="property">innerText</span>;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">navigator</span>.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(deviceId);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 复制表格中的最后一个结果</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在我们处理有多个响应的情况。有时我们对同一个器械有多个 510k
提交。我武断地使用最旧的一个值作为打破僵局的规则，所以我的脚本也会这样做。</p>
<p>与之前类似，我们使用表格的 xpath
在文档中找到它。然后我们找到表格的最后一行，并获取它的第三个子元素，即包含
510K
编号的列。一旦我们有了这一列，我们就获取它的第一个子元素，并将其文本写入剪贴板。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment">// 复制表格中的最后一个结果</span></span><br><span class="line">  <span class="keyword">var</span> xpath = <span class="string">&#x27;/html/body/div[3]/maxamineignore/div[2]/div[2]/span[2]/table[2]/tbody/tr/td/table/tbody&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> table = <span class="variable language_">document</span>.evaluate(</span><br><span class="line">    xpath,</span><br><span class="line">    <span class="variable language_">document</span>,</span><br><span class="line">    <span class="literal">null</span>,</span><br><span class="line">    <span class="title class_">XPathResult</span>.<span class="property">FIRST_ORDERED_NODE_TYPE</span>,</span><br><span class="line">    <span class="literal">null</span></span><br><span class="line">  ).<span class="property">singleNodeValue</span>;</span><br><span class="line">  <span class="keyword">var</span> tableLength = table.<span class="property">children</span>.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">var</span> lastRow = table.<span class="property">children</span>[tableLength-<span class="number">1</span>]</span><br><span class="line">  <span class="comment">// 从最后一个元素获取ID</span></span><br><span class="line">  <span class="keyword">var</span> deviceId = lastRow.<span class="property">children</span>[<span class="number">2</span>].<span class="property">firstChild</span>.<span class="property">text</span>;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">navigator</span>.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(deviceId);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>最后，我们将这段代码封装在 <code>VM.shortcut.register()</code>
的回调函数中，以获得我们的最终脚本。现在，当我按下
<code>Ctrl + Shift + C</code> 时，510k
编号会自动写入我的剪贴板，省去了我必须用鼠标手动高亮 510k
编号的麻烦。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable constant_">VM</span>.<span class="property">shortcut</span>.<span class="title function_">register</span>(<span class="string">&quot;ctrl-shift-c&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (location.<span class="property">href</span>.<span class="title function_">includes</span>(<span class="string">&quot;?ID=&quot;</span>)) &#123;</span><br><span class="line">    <span class="comment">// 复制详情页中的ID</span></span><br><span class="line">    <span class="keyword">var</span> xpath =</span><br><span class="line">      <span class="string">&quot;/html/body/div[3]/maxamineignore/div[2]/div[2]/span[2]/table[2]/tbody/tr/td/table/tbody/tr[2]/td/table/tbody/tr/td/table/tbody/tr[2]/td&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> deviceId = <span class="variable language_">document</span>.evaluate(</span><br><span class="line">      xpath,</span><br><span class="line">      <span class="variable language_">document</span>,</span><br><span class="line">      <span class="literal">null</span>,</span><br><span class="line">      <span class="title class_">XPathResult</span>.<span class="property">FIRST_ORDERED_NODE_TYPE</span>,</span><br><span class="line">      <span class="literal">null</span></span><br><span class="line">    ).<span class="property">singleNodeValue</span>.<span class="property">innerText</span>;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">navigator</span>.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(deviceId);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 复制表格中的最后一个结果</span></span><br><span class="line">    <span class="keyword">var</span> xpath =</span><br><span class="line">      <span class="string">&quot;/html/body/div[3]/maxamineignore/div[2]/div[2]/span[2]/table[2]/tbody/tr/td/table/tbody&quot;</span>;</span><br><span class="line">    <span class="keyword">var</span> table = <span class="variable language_">document</span>.evaluate(</span><br><span class="line">      xpath,</span><br><span class="line">      <span class="variable language_">document</span>,</span><br><span class="line">      <span class="literal">null</span>,</span><br><span class="line">      <span class="title class_">XPathResult</span>.<span class="property">FIRST_ORDERED_NODE_TYPE</span>,</span><br><span class="line">      <span class="literal">null</span></span><br><span class="line">    ).<span class="property">singleNodeValue</span>;</span><br><span class="line">    <span class="keyword">var</span> tableLength = table.<span class="property">children</span>.<span class="property">length</span>;</span><br><span class="line">    <span class="keyword">var</span> lastRow = table.<span class="property">children</span>[tableLength - <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// 从最后一个元素获取ID</span></span><br><span class="line">    <span class="keyword">var</span> deviceId = lastRow.<span class="property">children</span>[<span class="number">2</span>].<span class="property">firstChild</span>.<span class="property">text</span>;</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">navigator</span>.<span class="property">clipboard</span>.<span class="title function_">writeText</span>(deviceId);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h1 id="结论">结论</h1>
<p>如果你发现自己被网站上一些重复性的任务所困扰，我强烈建议尝试用用户脚本来自动化其中的一部分。</p>
<p>最酷的部分在于你可以自己动手解决这个问题，并为自己节省一些时间。</p>
<p>很难量化我在这里为自己节省了多少时间，但现在我减少了将手离开键盘的次数，我的工作流程无疑变得更轻松了。</p>
<h1 id="脚注-footnotes">脚注 (Footnotes)</h1>
<div id="footnotes">
<hr>
<div id="footnotelist">
<ol style="list-style: none; padding-left: 0; margin-left: 40px">
<li id="fn:1">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">https://www.accessdata.fda.gov/scripts/cdrh/cfdocs/cfpmn/pmn.cfm<a href="#fnref:1" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:2">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">2.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">https://www.ncbi.nlm.nih.gov/pmc/articles/PMC10465388/<a href="#fnref:2" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:3">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">3.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">https://web.archive.org/web/20001015000000*/https://www.accessdata.fda.gov/scripts/cdrh/cfdocs/cfpmn/pmn.cfm<a href="#fnref:3" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:4">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">4.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">https://en.wikipedia.org/wiki/Adobe_ColdFusion<a href="#fnref:4" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:5">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">5.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">https://en.wikipedia.org/wiki/Userscript<a href="#fnref:5" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:6">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">6.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">https://github.com/violentmonkey/vm-shortcut<a href="#fnref:6" rev="footnote">
↩︎</a></span>
</li>
<li id="fn:7">
<span
style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">7.</span><span
style="display: inline-block; vertical-align: top; margin-left: 10px;">510k
项目
是美国食品药品监督管理局（FDA）针对大多数医疗器械在美国上市前要求进行的一项审批流程<a href="#fnref:7" rev="footnote">
↩︎</a></span>
</li>
</ol>
</div>
</div>
</div>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>快捷键</tag>
        <tag>用户脚本</tag>
      </tags>
  </entry>
  <entry>
    <title>英语学习网站</title>
    <url>/2025/11/03/%E8%8B%B1%E8%AF%AD%E5%AD%A6%E4%B9%A0%E7%BD%91%E7%AB%99/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="阅读">阅读</h1>
<h2 id="designobserver"><a
href="https://designobserver.com/">DesignObserver</a></h2>
<p>设计类文章，文章比较短小，可以练习阅读。</p>
<h2 id="english-news-in-levels"><a
href="https://englishnewsinlevels.com/">English News in Levels</a>
👍</h2>
<p>这个要强烈推荐一下，英语分级阅读，每天更新两篇文章，有测试题目，有听力，还可以下载
PDF 文档。真的是学习利器。已经成为每天必打卡的网站了。</p>
<span id="more"></span>
<h1 id="词汇">词汇</h1>
<h2 id="vocabulary.com"><a
href="https://www.vocabulary.com/vocabtrainer/">vocabulary.com</a></h2>
<p>首页 Train your brain! 导航下的未订阅用户每天只能练习 3
道题目。最好用的是 Browse lists 导航下的 list
练习，不限制练习次数。查单词功能也好用，有真人发音。</p>
<h2 id="type-words"><a href="https://2study.top/">Type Words</a></h2>
<p>通过敲击键盘背单词。类似的网站：<a
href="https://qwerty.kaiyi.cool/">Qwerty Learner</a></p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>英语</tag>
        <tag>网站</tag>
      </tags>
  </entry>
  <entry>
    <title>OLAP SQL 之美</title>
    <url>/2025/10/15/OLAP-SQL-%E4%B9%8B%E7%BE%8E/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>原文：<a
href="https://taki-mekhalfa.github.io/misc/2024/04/14/beauty_of_olap_sql.html">The
beauty of OLAP SQL</a></p>
</blockquote>
<p>我的日常工作是构建分析仪表板的后端系统。这些仪表板通过数据可视化，帮助用户深入洞察其业务数据。今天，我将分享一个利用
SQL 编写强大 OLAP 查询的真实案例。</p>
<p>请设想您正在运营一系列披萨品牌，目标是评估您的产品货架份额与主要竞争对手的差距。您最关心的业务问题可能包括：</p>
<ul>
<li>您在披萨品类中的铺货份额（Share of Assortment,
SOA）是多少？在沃尔玛分销的披萨产品中，有 <strong>50%</strong>
是您的吗？还是只有 <strong>5%</strong>？</li>
<li>平均而言，您的披萨产品有多少在 Kroger 进行了分销？您有
<strong>5</strong> 种不同的产品，但平均只有 <strong>2</strong>
种有售？是更多还是更少？</li>
<li>您的铺货份额随时间推移是如何变化的？与去年/上个月相比，是增加
<strong>10%</strong> 还是减少 <strong>5%</strong>？</li>
<li>哪些竞争对手占据了大部分货架份额？您与他们的比较如何？</li>
<li>谁正在投放新产品？谁在减少投放？</li>
<li>您的哪个品牌是成功的？哪个需要撤市或通过广告/更优惠的价格等进行改进？</li>
</ul>
<p>数据结构如下所示（已匿名化）：</p>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 20%" />
<col style="width: 13%" />
<col style="width: 8%" />
<col style="width: 13%" />
<col style="width: 11%" />
<col style="width: 26%" />
</colgroup>
<thead>
<tr>
<th style="text-align: center;">p_id</th>
<th style="text-align: center;">manufacturer</th>
<th style="text-align: center;">category</th>
<th style="text-align: center;">brand</th>
<th style="text-align: center;">retailer</th>
<th style="text-align: center;">period</th>
<th style="text-align: center;">distributed_days</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;">i64</td>
<td style="text-align: center;">i64</td>
<td style="text-align: center;">i64</td>
<td style="text-align: center;">i64</td>
<td style="text-align: center;">i64</td>
<td style="text-align: center;">str</td>
<td style="text-align: center;">i64</td>
</tr>
<tr>
<td style="text-align: center;">6581</td>
<td style="text-align: center;">61</td>
<td style="text-align: center;">20</td>
<td style="text-align: center;">273</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">2023_52</td>
<td style="text-align: center;">31407</td>
</tr>
<tr>
<td style="text-align: center;">8563</td>
<td style="text-align: center;">34</td>
<td style="text-align: center;">4</td>
<td style="text-align: center;">274</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">2023_52</td>
<td style="text-align: center;">27515</td>
</tr>
<tr>
<td style="text-align: center;">8411</td>
<td style="text-align: center;">11</td>
<td style="text-align: center;">6</td>
<td style="text-align: center;">276</td>
<td style="text-align: center;">1</td>
<td style="text-align: center;">2023_52</td>
<td style="text-align: center;">30693</td>
</tr>
<tr>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
<td style="text-align: center;">…</td>
</tr>
</tbody>
</table>
<span id="more"></span>
<p>数据代表了从零售商网站（如 Walmart、Kroger
等）抓取的产品数据的一个子集。在这个具体的案例中，我们对分析每个品牌制造商的产品组合份额相对于不同变量的情况感兴趣。</p>
<p>每行包含有关产品的数据：</p>
<ul>
<li><strong>p_id</strong>: 产品的唯一 ID。</li>
<li><strong>manufacturer</strong>: 制造商 ID。</li>
<li><strong>category</strong>:
产品类别，例如：<code>牙膏</code>、<code>除臭剂</code>、<code>酱料</code>等。</li>
<li><strong>brand</strong>: 产品品牌，例如：Dove、Pepsi、KitKat
等。</li>
<li><strong>retailer</strong> 和 <strong>period</strong>: 零售商 ID
和数据爬取的周（这里的数据代表 2023 年的最后一周和 2024
年的第一周）。</li>
<li><strong>distributed_days</strong>:
在此期间内，产品在该零售商网站上的所有商店中被看到的天数总和。例如，如果沃尔玛在美国有
<strong>1000</strong>
家商店，并且产品在一整周内在所有商店都有售，那么分销天数将是
<strong>1000 * 7 = 7000</strong>
天。我们稍后会看到如何使用它来计算铺货份额。</li>
</ul>
<p>在接下来的内容中，我将使用 <strong><a
href="https://duckdb.org/">DuckDB</a></strong>，一个令人惊叹且强大的嵌入式查询引擎。</p>
<h3 id="这两周内所有零售商中每个制造商分销了多少种独特产品">1)
这两周内所有零售商中，每个制造商分销了多少种独特产品？</h3>
<p>这是一个简单的查询，我们只需获取不同的产品并按制造商分组：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    manufacturer,</span><br><span class="line">    <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> p_id) <span class="keyword">AS</span> nb_unique_products <span class="comment">-- 独特产品的数量</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    product_details</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    <span class="keyword">ALL</span> <span class="comment">-- DuckDB 提供的强大结构</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">    nb_unique_products <span class="keyword">DESC</span></span><br><span class="line">LIMIT</span><br><span class="line">    <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ┌──────────────┬────────────────────┐</span></span><br><span class="line"><span class="comment">-- │ manufacturer │ nb_unique_products │</span></span><br><span class="line"><span class="comment">-- │    int64     │       int64        │</span></span><br><span class="line"><span class="comment">-- ├──────────────┼────────────────────┤</span></span><br><span class="line"><span class="comment">-- │            7 │               3463 │ &lt;-- The big players</span></span><br><span class="line"><span class="comment">-- │           34 │               2688 │</span></span><br><span class="line"><span class="comment">-- │            2 │               2368 │</span></span><br><span class="line"><span class="comment">-- │           26 │               1227 │</span></span><br><span class="line"><span class="comment">-- │           39 │                978 │</span></span><br><span class="line"><span class="comment">-- │            6 │                783 │</span></span><br><span class="line"><span class="comment">-- │           58 │                727 │</span></span><br><span class="line"><span class="comment">-- │           21 │                499 │</span></span><br><span class="line"><span class="comment">-- │           57 │                372 │ &lt;-- Let&#x27;s say this is me</span></span><br><span class="line"><span class="comment">-- │            3 │                333 │</span></span><br><span class="line"><span class="comment">-- ├──────────────┴────────────────────┤</span></span><br><span class="line"><span class="comment">-- │ 10 rows                 2 columns │</span></span><br><span class="line"><span class="comment">-- └───────────────────────────────────┘</span></span><br></pre></td></tr></table></figure>
<p><strong>结果示例：</strong> 制造商 7、34、2
是主要的参与者。假设制造商 <strong>57</strong> 是“我”（有 372
种独特产品）。</p>
<h3 id="我的产品在不同类别中的分布情况如何">2)
我的产品在不同类别中的分布情况如何？</h3>
<p>只筛选我的产品，然后按产品类别分组并计算独特产品数量。</p>
<p>查看每个类别所占的百分比是很重要的。窗口函数是一个很棒的工具。它可以在一个行窗口上应用类似聚合的计算。</p>
<p><strong>重要提示：</strong> 窗口函数考虑的行是经过
<code>WHERE</code>、<code>GROUP BY</code> 和 <code>HAVING</code>
子句（如果有的话）处理后产生的行。你可以认为窗口函数是最后运行的。</p>
<p><code>nb_unique_products / SUM(nb_unique_products) OVER ()</code>
的含义是：</p>
<blockquote>
<p>取当前行的 <code>nb_unique_products</code>，并将其除以窗口中所有行
<code>nb_unique_products</code> 的总和。这里的窗口是所有类别。</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    category,</span><br><span class="line">    <span class="comment">-- 1. 计算每个类别中的独特产品数量</span></span><br><span class="line">    <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> p_id) <span class="keyword">AS</span> nb_unique_products,</span><br><span class="line">    <span class="comment">-- 2. 计算该类别产品数量占总产品数量的百分比</span></span><br><span class="line">    ROUND(</span><br><span class="line">        <span class="comment">---OVER ()：这是定义 “窗口” 的部分。一个空的 () 括号意味着窗口包含 GROUP BY 之后的所有行。</span></span><br><span class="line">        <span class="number">100</span> <span class="operator">*</span> nb_unique_products <span class="operator">/</span> <span class="built_in">SUM</span>(nb_unique_products) <span class="keyword">OVER</span> (),</span><br><span class="line">        <span class="number">2</span></span><br><span class="line">    ) <span class="keyword">AS</span> &quot;% of products&quot;</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    product_details</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    manufacturer <span class="operator">=</span> <span class="number">57</span> <span class="comment">-- 筛选我的产品</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    category</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">    nb_unique_products <span class="keyword">DESC</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ┌──────────┬────────────────────┬───────────────┐</span></span><br><span class="line"><span class="comment">-- │ category │ nb_unique_products │ % of products │</span></span><br><span class="line"><span class="comment">-- │  int64   │       int64        │    double     │</span></span><br><span class="line"><span class="comment">-- ├──────────┼────────────────────┼───────────────┤</span></span><br><span class="line"><span class="comment">-- │        4 │                203 │         54.57 │&lt; products concentrated on</span></span><br><span class="line"><span class="comment">-- │        3 │                 50 │         13.44 │&lt; these two categories.</span></span><br><span class="line"><span class="comment">-- │       18 │                 23 │          6.18 │</span></span><br><span class="line"><span class="comment">-- │       16 │                 22 │          5.91 │</span></span><br><span class="line"><span class="comment">-- │       22 │                 22 │          5.91 │</span></span><br><span class="line"><span class="comment">-- │        2 │                 22 │          5.91 │</span></span><br><span class="line"><span class="comment">-- │        1 │                 18 │          4.84 │</span></span><br><span class="line"><span class="comment">-- │       11 │                 10 │          2.69 │</span></span><br><span class="line"><span class="comment">-- │        5 │                  2 │          0.54 │</span></span><br><span class="line"><span class="comment">-- └──────────┴────────────────────┴───────────────┘</span></span><br></pre></td></tr></table></figure>
<p><strong>问题：</strong> 假设您只负责类别 <strong>1、2、3</strong> 和
<strong>4</strong>。您不希望看到其他类别。您可能会尝试添加
<code>AND category IN (1, 2, 3, 4)</code> 到 <code>WHERE</code>
子句中。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    category,</span><br><span class="line">    <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> p_id) <span class="keyword">AS</span> nb_unique_products,</span><br><span class="line">    ROUND(</span><br><span class="line">        <span class="number">100</span> <span class="operator">*</span> nb_unique_products <span class="operator">/</span> <span class="built_in">SUM</span>(nb_unique_products) <span class="keyword">OVER</span> (),</span><br><span class="line">        <span class="number">2</span></span><br><span class="line">    ) <span class="keyword">AS</span> &quot;% of products&quot;</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    product_details</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    manufacturer <span class="operator">=</span> <span class="number">57</span></span><br><span class="line">    <span class="keyword">AND</span> category <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>) <span class="comment">-- 你添加了这行</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    category</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">    nb_unique_products <span class="keyword">DESC</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- which gives:</span></span><br><span class="line"><span class="comment">-- ┌──────────┬────────────────────┬───────────────┐</span></span><br><span class="line"><span class="comment">-- │ category │ nb_unique_products │ % of products │</span></span><br><span class="line"><span class="comment">-- │  int64   │       int64        │    double     │</span></span><br><span class="line"><span class="comment">-- ├──────────┼────────────────────┼───────────────┤</span></span><br><span class="line"><span class="comment">-- │        4 │                203 │         69.28 │</span></span><br><span class="line"><span class="comment">-- │        3 │                 50 │         17.06 │</span></span><br><span class="line"><span class="comment">-- │        2 │                 22 │          7.51 │</span></span><br><span class="line"><span class="comment">-- │        1 │                 18 │          6.14 │</span></span><br><span class="line"><span class="comment">-- └──────────┴────────────────────┴───────────────┘</span></span><br></pre></td></tr></table></figure>
<p>这样做会导致百分比（铺货份额）从 <strong>54.57%</strong> 变为
<strong>69.28%</strong>。</p>
<p><strong>原因：</strong> 如前所述，窗口函数在 <code>WHERE</code> 和
<code>GROUP BY</code>
子句执行后对行进行评估。在这种情况下，意味着您仅针对（1、2、3 和
4）这些类别计算份额。</p>
<p>有两种方法可以解决这个问题：</p>
<ol type="1">
<li><strong>使用子查询：</strong> 在外部查询中筛选类别。</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line"> (<span class="operator">&lt;</span>PREVIOUS QUERY<span class="operator">&gt;</span>)</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  category <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br></pre></td></tr></table></figure>
<ol start="2" type="1">
<li><strong>使用 DuckDB 提供的 <code>QUALIFY</code>：</strong>
在计算窗口函数后进行筛选。</li>
</ol>
<!-- end list -->
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">  category,</span><br><span class="line">  <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> p_id) <span class="keyword">AS</span> nb_unique_products,</span><br><span class="line">  ROUND(</span><br><span class="line">      <span class="number">100</span> <span class="operator">*</span> nb_unique_products <span class="operator">/</span> <span class="built_in">SUM</span>(nb_unique_products) <span class="keyword">OVER</span> (),</span><br><span class="line">      <span class="number">2</span></span><br><span class="line">  ) <span class="keyword">AS</span> &quot;% of products&quot;</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">  product_details</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">  manufacturer <span class="operator">=</span> <span class="number">57</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">  category</span><br><span class="line">QUALIFY <span class="comment">-- At last, filter on window function result using the following:</span></span><br><span class="line">  category <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">  nb_unique_products <span class="keyword">DESC</span></span><br><span class="line"><span class="comment">-- ┌──────────┬────────────────────┬───────────────┐</span></span><br><span class="line"><span class="comment">-- │ category │ nb_unique_products │ % of products │</span></span><br><span class="line"><span class="comment">-- │  int64   │       int64        │    double     │</span></span><br><span class="line"><span class="comment">-- ├──────────┼────────────────────┼───────────────┤</span></span><br><span class="line"><span class="comment">-- │        4 │                203 │         54.57 │</span></span><br><span class="line"><span class="comment">-- │        3 │                 50 │         13.44 │</span></span><br><span class="line"><span class="comment">-- │        2 │                 22 │          5.91 │</span></span><br><span class="line"><span class="comment">-- │        1 │                 18 │          4.84 │</span></span><br><span class="line"><span class="comment">-- └──────────┴────────────────────┴───────────────┘</span></span><br></pre></td></tr></table></figure>
<p>使用 <code>QUALIFY</code>
后，结果将显示在<strong>所有类别总数</strong>中的份额（例如
54.57%），同时只返回您感兴趣的类别行。</p>
<h3 id="在类别-3-和-4-中我们的竞争对手是谁">3) 在类别 3 和 4
中，我们的竞争对手是谁？</h3>
<p>我们主要在两个类别中分销产品（假设是 <code>牙膏</code> 和
<code>漱口水</code>）。我们应该更关注这些类别的竞争对手。</p>
<p>我们先来看一个简单的例子：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    category,</span><br><span class="line">    manufacturer,</span><br><span class="line">    <span class="built_in">COUNT</span>( <span class="keyword">DISTINCT</span> p_id) <span class="keyword">as</span> nb_unique_products</span><br><span class="line"><span class="keyword">FROM</span> product_details</span><br><span class="line"><span class="keyword">WHERE</span> category <span class="keyword">IN</span> (<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">ALL</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> category, nb_unique_products <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">5</span>;</span><br><span class="line"><span class="comment">-- ┌──────────┬──────────────┬────────────────────┐</span></span><br><span class="line"><span class="comment">-- │ category │ manufacturer │ nb_unique_products │</span></span><br><span class="line"><span class="comment">-- │  int64   │    int64     │       int64        │</span></span><br><span class="line"><span class="comment">-- ├──────────┼──────────────┼────────────────────┤</span></span><br><span class="line"><span class="comment">-- │        3 │            2 │                196 │</span></span><br><span class="line"><span class="comment">-- │        3 │           39 │                185 │</span></span><br><span class="line"><span class="comment">-- │        3 │           41 │                124 │</span></span><br><span class="line"><span class="comment">-- │        3 │           67 │                119 │</span></span><br><span class="line"><span class="comment">-- │        3 │           34 │                 92 │</span></span><br><span class="line"><span class="comment">-- └──────────┴──────────────┴────────────────────┘</span></span><br></pre></td></tr></table></figure>
<p>这样我们就得到了所有制造商在类别 3 和 4 中分销的独特产品数量。<br />
接下来，我们尝试只筛选出每个类别中排名前三的制造商，因为这些才是我们最需要重点关注的竞争对手。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    category,</span><br><span class="line">    manufacturer,</span><br><span class="line">    <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> p_id) <span class="keyword">as</span> nb_unique_products, <span class="comment">-- over the category+manufacturer,</span></span><br><span class="line">    <span class="built_in">row_number</span>() <span class="keyword">OVER</span> (</span><br><span class="line">        <span class="keyword">PARTITION</span> <span class="keyword">BY</span> category <span class="comment">-- rank inside the category</span></span><br><span class="line">        <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="comment">-- more products = better position</span></span><br><span class="line">            nb_unique_products <span class="keyword">DESC</span></span><br><span class="line">    ) <span class="keyword">as</span> position,</span><br><span class="line">    ROUND(</span><br><span class="line">        <span class="number">100</span> <span class="operator">*</span> nb_unique_products <span class="operator">/</span> <span class="built_in">SUM</span>(nb_unique_products) <span class="keyword">OVER</span> (</span><br><span class="line">            <span class="keyword">PARTITION</span> <span class="keyword">BY</span> category</span><br><span class="line">        ),</span><br><span class="line">        <span class="number">2</span></span><br><span class="line">    ) <span class="keyword">as</span> &quot;% of the market&quot;</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    product_details</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">    category <span class="keyword">IN</span> (<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    category,</span><br><span class="line">    manufacturer</span><br><span class="line">QUALIFY</span><br><span class="line">    position <span class="operator">&lt;=</span> <span class="number">3</span> <span class="comment">-- top 3 competitors</span></span><br><span class="line">    <span class="keyword">OR</span> manufacturer <span class="operator">=</span> <span class="number">57</span> <span class="comment">-- and me please</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">    category,</span><br><span class="line">    position</span><br><span class="line"><span class="comment">-- ┌──────────┬──────────────┬────────────────────┬──────────┬─────────────────┐</span></span><br><span class="line"><span class="comment">-- │ category │ manufacturer │ nb_unique_products │ position │ % of the market │</span></span><br><span class="line"><span class="comment">-- │  int64   │    int64     │       int64        │  int64   │     double      │</span></span><br><span class="line"><span class="comment">-- ├──────────┼──────────────┼────────────────────┼──────────┼─────────────────┤</span></span><br><span class="line"><span class="comment">-- │        3 │            2 │                196 │        1 │           18.23 │</span></span><br><span class="line"><span class="comment">-- │        3 │           39 │                185 │        2 │           17.21 │</span></span><br><span class="line"><span class="comment">-- │        3 │           41 │                124 │        3 │           11.53 │</span></span><br><span class="line"><span class="comment">-- │        3 │           57 │                 50 │        7 │            4.65 │&lt; this is me</span></span><br><span class="line"><span class="comment">-- │        4 │           34 │                452 │        1 │           23.12 │</span></span><br><span class="line"><span class="comment">-- │        4 │            7 │                303 │        2 │            15.5 │</span></span><br><span class="line"><span class="comment">-- │        4 │            2 │                278 │        3 │           14.22 │</span></span><br><span class="line"><span class="comment">-- │        4 │           57 │                203 │        5 │           10.38 │&lt; this is me</span></span><br><span class="line"><span class="comment">-- └──────────┴──────────────┴────────────────────┴──────────┴─────────────────┘</span></span><br></pre></td></tr></table></figure>
<p>这样一来，你就能看到（例如）你在类别 4
中排名第五，并且还能知道是谁占据了最高的份额。
我们来拆解一下这个查询：</p>
<ol type="1">
<li><code>WHERE</code>: 筛选出类别 3 和 4 的数据。</li>
<li><code>GROUP BY</code>:
获取每个制造商在每个类别中的独特产品数量。</li>
<li><code>row_number()</code>:
对每个制造商在所属类别内进行排名。这是在一个窗口内完成的，该窗口按类别进行分区（partitioned
by category），并按我们在第 1 步中计算的独特产品数量进行排序（ordered
by…）。我们必须按类别分区，这是为了确保两个类别分开计算。因此，每个制造商将会有
2 个排名：一个在类别 3，另一个在类别 4。（注：原文提到类别 2 和
3，根据上下文应为类别 3 和 4）。</li>
<li><code>SUM() OVER (PARTITION BY category)</code>:
计算每个制造商在给定类别中的产品份额。</li>
<li><code>QUALIFY</code>: 仅返回前 3 名竞争对手和制造商 57。</li>
</ol>
<hr />
<h3 id="多层次分销产品分析">4) 多层次分销产品分析</h3>
<p>假设您想获取您的独特产品数量，并从以下多个维度进行汇总：</p>
<ul>
<li>按零售商和类别</li>
<li>按零售商（涵盖所有类别）</li>
<li>按类别（涵盖所有零售商）</li>
<li>按所有零售商和所有类别（总计）</li>
</ul>
<p>您可以独立计算每一项，然后将所有结果进行合并（UNION），但其实有一个更简单的方法。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="built_in">COALESCE</span>(retailer, <span class="number">0</span>) <span class="keyword">AS</span> retailer, <span class="comment">-- 将空值转换为可读的 ID</span></span><br><span class="line">    <span class="built_in">COALESCE</span>(category, <span class="number">0</span>) <span class="keyword">AS</span> category, <span class="comment">-- 将空值转换为可读的 ID</span></span><br><span class="line">    <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> p_id) <span class="keyword">AS</span> nb_unique_products</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    product_details</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    <span class="keyword">GROUPING</span> SETS (</span><br><span class="line">        <span class="comment">-- 按零售商和类别（进行分组） (即，计算每个零售商在每个类别中的总数)</span></span><br><span class="line">        (category, retailer),</span><br><span class="line">        <span class="comment">-- 按类别（涵盖所有零售商） (即，计算每个类别在所有零售商中的总数)</span></span><br><span class="line">        (category),</span><br><span class="line">        <span class="comment">-- 按零售商（涵盖所有类别） (即，计算每个零售商在所有类别中的总数)</span></span><br><span class="line">        (retailer),</span><br><span class="line">        <span class="comment">-- 按所有类别和所有零售商（ (即，计算总计总数)</span></span><br><span class="line">        ()</span><br><span class="line">    )</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">    <span class="keyword">ALL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ┌──────────┬──────────┬────────────────────┐</span></span><br><span class="line"><span class="comment">-- │ retailer │ category │ nb_unique_products │</span></span><br><span class="line"><span class="comment">-- │  int64   │  int64   │       int64        │</span></span><br><span class="line"><span class="comment">-- ├──────────┼──────────┼────────────────────┤</span></span><br><span class="line"><span class="comment">-- │        0 │        0 │              17428 │</span></span><br><span class="line"><span class="comment">-- │        0 │        1 │                136 │</span></span><br><span class="line"><span class="comment">-- │        0 │        2 │               2105 │</span></span><br><span class="line"><span class="comment">-- │        0 │        3 │               1075 │</span></span><br><span class="line"><span class="comment">-- │        0 │        4 │               1955 │</span></span><br><span class="line"><span class="comment">-- │        · │        · │                 ·  │</span></span><br><span class="line"><span class="comment">-- │        · │        · │                 ·  │</span></span><br><span class="line"><span class="comment">-- │        · │        · │                 ·  │</span></span><br><span class="line"><span class="comment">-- │        2 │       11 │                346 │</span></span><br><span class="line"><span class="comment">-- ├──────────┴──────────┴────────────────────┤</span></span><br><span class="line"><span class="comment">-- │ x rows (xx shown)              3 columns │</span></span><br><span class="line"><span class="comment">-- └──────────────────────────────────────────┘</span></span><br></pre></td></tr></table></figure>
<p>GROUPING SETS 等同于将多个不同的 GROUP BY
查询的结果进行合并（UNION）。</p>
<p>对于未包含在分组集中的维度，结果中将显示
<code>NULL</code>。因此，针对分组集
<code>(category)</code>（仅按类别汇总）产生的结果行，其
<code>retailer</code> 字段的值将被设置为 <code>NULL</code>。</p>
<p>如果你需要使用所有可能的分组集（即所有维度及其组合，包括总计），那么你可以使用
CUBE 关键字来简化语法：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="built_in">COALESCE</span>(retailer, <span class="number">0</span>) <span class="keyword">AS</span> retailer,</span><br><span class="line">    <span class="built_in">COALESCE</span>(category, <span class="number">0</span>) <span class="keyword">AS</span> category,</span><br><span class="line">    <span class="built_in">COUNT</span>(<span class="keyword">DISTINCT</span> p_id) <span class="keyword">AS</span> nb_unique_products</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    product_details</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    <span class="comment">-- 这等同于所有可能的分组集:</span></span><br><span class="line">    <span class="comment">-- (category, retailer), (category), (retailer), (category), ()</span></span><br><span class="line">    <span class="keyword">CUBE</span>(retailer, category)</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">    <span class="keyword">ALL</span></span><br></pre></td></tr></table></figure>
<p><code>ROLLUP</code> 是另一种分组结构，但它与 <code>CUBE</code>
的工作方式不同，因为它会限制可能的分组集。</p>
<p><code>ROLLUP(x, y)</code> 的定义如下：</p>
<ul>
<li><code>(x, y)</code></li>
<li><code>(x)</code></li>
<li><code>()</code></li>
</ul>
<p><code>(y)</code> 这一分组集会被 <code>CUBE</code> 包含，但不会被
<code>ROLLUP</code> 包含。</p>
<p>当不同维度之间存在<strong>层次关系</strong>时，<code>ROLLUP</code>
更加有用，例如：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="built_in">SUM</span>(population) <span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="keyword">ROLLUP</span>(county, region, city) <span class="comment">-- (国家, 地区, 城市)</span></span><br></pre></td></tr></table></figure>
<p>在这种情况下，分组集
<code>(region)</code>（仅按地区汇总）的意义就不大，因为它与
<code>(country, region)</code>（按国家和地区汇总）是等价的，因为一个地区（region）总是隶属于一个国家（county）。</p>
<h3 id="既然我的主战场是类别-3-和-4我的铺货份额-soa是多少">5)
既然我的主战场是类别 3 和 4，我的铺货份额 (SOA)是多少？</h3>
<p>在第三问中，我们看到了用来统计类别 <strong>3 和 4
中</strong>独特的分销产品数量。</p>
<p>但是，拥有更多的独特分销产品数量，与你的铺货份额（Share of
Assortment, SOA）并非完全正相关。</p>
<p>想象一下，你拥有 <strong>15</strong>
种独特的冷冻食品，而你的竞争对手只有 <strong>3</strong>
种，并且市场上只有你们两家。</p>
<p>如果在某个零售商（比如沃尔玛），他们总是上架竞争对手的
<strong>2</strong> 种产品和你的 <strong>1</strong>
种产品。在这种情况下，你的 SOA <strong>只有 <span
class="math inline">1/3 = 33%</span></strong>，而你的竞争对手将占据冷冻食品货架
<strong><span class="math inline">2/3 = 77%</span></strong>
的份额。尽管你在独特产品数量上拥有巨大的份额 <strong><span
class="math inline">15/18 = 83%</span></strong>，但你在实际货架占比上却被竞争对手超越了。</p>
<p>铺货份额（SOA）可以定义为：</p>
<p><span class="math display">$$\text {SOA} = \frac {\text {SUM}(\text
{我的产品的分销天数})}{\text {SUM}(\text {我的产品} + \text
{竞争对手产品的分销天数})}$$</span></p>
<p>（<em>注：这里的“分销天数”（distributed
days）是衡量产品实际占有货架空间和时间的关键指标。</em>）</p>
<p>以下是针对类别 3 和 4，按 SOA 排名获取前 3 名竞争对手的查询：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WITH</span> soa_per_category_per_manufacturer <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">        category,</span><br><span class="line">        manufacturer,</span><br><span class="line">        <span class="built_in">SUM</span>(distributed_days) <span class="keyword">AS</span> _total_ddays, <span class="comment">-- 每个制造商的总分销天数</span></span><br><span class="line">        ROUND(</span><br><span class="line">            <span class="number">100</span> <span class="operator">*</span> _total_ddays <span class="operator">/</span> <span class="built_in">SUM</span>(_total_ddays) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> category),</span><br><span class="line">            <span class="number">2</span></span><br><span class="line">        ) <span class="keyword">AS</span> soa <span class="comment">-- 这正是 SOA 公式</span></span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">        product_details</span><br><span class="line">    <span class="keyword">WHERE</span></span><br><span class="line">        category <span class="keyword">IN</span> (<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">        category,</span><br><span class="line">        manufacturer</span><br><span class="line">)</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="operator">*</span> EXCLUDE(_total_ddays), <span class="comment">-- 感谢 DuckDB 的 EXCLUDE :)</span></span><br><span class="line">    <span class="built_in">row_number</span>() <span class="keyword">OVER</span> (</span><br><span class="line">        <span class="keyword">PARTITION</span> <span class="keyword">BY</span> category</span><br><span class="line">        <span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">            soa <span class="keyword">DESC</span></span><br><span class="line">    ) <span class="keyword">AS</span> position <span class="comment">-- 然后按类别上的 soa 排序</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    soa_per_category_per_manufacturer</span><br><span class="line">QUALIFY</span><br><span class="line">    position <span class="operator">&lt;=</span> <span class="number">3</span> <span class="comment">-- 前 3 名竞争对手</span></span><br><span class="line">    <span class="keyword">OR</span> manufacturer <span class="operator">=</span> <span class="number">57</span> <span class="comment">-- 加上我</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- ┌──────────┬──────────────┬────────┬──────────┐</span></span><br><span class="line"><span class="comment">-- │ category │ manufacturer │  soa   │ position │</span></span><br><span class="line"><span class="comment">-- │  int64   │    int64     │ double │  int64   │</span></span><br><span class="line"><span class="comment">-- ├──────────┼──────────────┼────────┼──────────┤</span></span><br><span class="line"><span class="comment">-- │        3 │           39 │  22.12 │        1 │</span></span><br><span class="line"><span class="comment">-- │        3 │            2 │  16.04 │        2 │</span></span><br><span class="line"><span class="comment">-- │        3 │           67 │  14.36 │        3 │</span></span><br><span class="line"><span class="comment">-- │        3 │           57 │   3.95 │        8 │&lt; I am no longer 7th on the market</span></span><br><span class="line"><span class="comment">-- │        4 │           34 │   24.6 │        1 │</span></span><br><span class="line"><span class="comment">-- │        4 │            7 │  17.27 │        2 │</span></span><br><span class="line"><span class="comment">-- │        4 │            2 │   10.9 │        3 │</span></span><br><span class="line"><span class="comment">-- │        4 │           57 │  10.36 │        5 │&lt; Still 5th</span></span><br><span class="line"><span class="comment">-- └──────────┴──────────────┴────────┴──────────┘</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>该查询使用了 公共表表达式（CTEs, Common Table
Expressions），这是一种组织查询的方式，可以使其更具可读性。在某些情况下，如果
CTE
被物化并在多个地方使用，还能避免一遍又一遍地重复计算相同的结果（请查阅
<a
href="https://duckdb.org/docs/sql/query_syntax/with#materialized-ctes">物化
CTEs</a>）。</p>
<h3 id="时间演变">6) 时间演变！</h3>
<p>现在，假设你想比较你的产品类别在当前选定的周<code>2024_1</code>与前一周<code>2023_52</code>之间的铺货份额（SOA）变化。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WITH</span> soa_per_period_category_per_manufacturer <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">        <span class="keyword">period</span>,</span><br><span class="line">        category,</span><br><span class="line">        manufacturer,</span><br><span class="line">        <span class="built_in">SUM</span>(distributed_days) <span class="keyword">as</span> _total_ddays,</span><br><span class="line">        ROUND(</span><br><span class="line">            <span class="number">100</span> <span class="operator">*</span> _total_ddays <span class="operator">/</span> <span class="built_in">SUM</span>(_total_ddays) <span class="keyword">OVER</span> (</span><br><span class="line">                <span class="keyword">PARTITION</span> <span class="keyword">BY</span></span><br><span class="line">                <span class="keyword">period</span>, <span class="comment">-- 注意这里加入了 period :)</span></span><br><span class="line">                category</span><br><span class="line">            ),</span><br><span class="line">            <span class="number">2</span></span><br><span class="line">        ) <span class="keyword">as</span> soa,</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">        product_details</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">        <span class="keyword">period</span>, <span class="comment">-- 这里也是 :)</span></span><br><span class="line">        category,</span><br><span class="line">        manufacturer),</span><br><span class="line">soa_variation <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">        <span class="operator">*</span> EXCLUDE (_total_ddays),</span><br><span class="line">        <span class="comment">-- 注意使用已定义的窗口来简化查询，</span></span><br><span class="line">        <span class="comment">-- 特别是当窗口在多个地方使用时。</span></span><br><span class="line">        soa <span class="operator">-</span> <span class="built_in">lag</span>(soa, <span class="number">1</span>, <span class="number">0</span>) <span class="keyword">OVER</span> period_window <span class="keyword">as</span> variation_soa,</span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">        soa_per_period_category_per_manufacturer</span><br><span class="line">        <span class="comment">-- 定义窗口并为其指定名称</span></span><br><span class="line">        <span class="keyword">WINDOW</span> period_window <span class="keyword">AS</span> (</span><br><span class="line">            <span class="keyword">PARTITION</span> <span class="keyword">BY</span> category,</span><br><span class="line">            <span class="comment">-- 注意，这里需要制造商（manufacturer），</span></span><br><span class="line">            <span class="comment">-- 因为变化是按制造商和类别计算的</span></span><br><span class="line">            manufacturer</span><br><span class="line">            <span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">                <span class="comment">-- 这非常重要，因为变化是：当前 soa - 之前的 soa。</span></span><br><span class="line">                <span class="comment">-- 窗口中的值必须按此顺序排列，才能使用 soa - lag(soa, 1, 0)。</span></span><br><span class="line">                <span class="comment">-- 另外请注意 &#x27;2023_52&#x27; &lt; &#x27;2024_1&#x27;</span></span><br><span class="line">                <span class="keyword">period</span></span><br><span class="line">        )</span><br><span class="line">        <span class="comment">-- 在窗口函数计算后，只取本周数据，</span></span><br><span class="line">        <span class="comment">-- 因为变化量是与本周挂钩的。</span></span><br><span class="line">        QUALIFY <span class="keyword">period</span> <span class="operator">=</span> <span class="string">&#x27;2024_1&#x27;</span></span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">        <span class="keyword">period</span>)</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    <span class="comment">-- 感谢 DuckDB 的 EXCLUDE/REPLACE :)</span></span><br><span class="line">    <span class="operator">*</span> EXCLUDE (<span class="keyword">period</span>) REPLACE (ROUND(variation_soa, <span class="number">2</span>) <span class="keyword">as</span> variation_soa),</span><br><span class="line">    <span class="built_in">row_number</span>() <span class="keyword">OVER</span> (</span><br><span class="line">        <span class="keyword">PARTITION</span> <span class="keyword">BY</span> category</span><br><span class="line">        <span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">            variation_soa <span class="keyword">DESC</span></span><br><span class="line">    ) <span class="keyword">as</span> position <span class="comment">-- 然后按类别上的 soa 变化量排序</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    <span class="comment">-- 筛选出每个类别中排名第一的制造商</span></span><br><span class="line">    soa_variation QUALIFY position <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span></span><br><span class="line">    category</span><br><span class="line">LIMIT</span><br><span class="line">    <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ┌──────────┬──────────────┬────────┬───────────────┬──────────┐</span></span><br><span class="line"><span class="comment">-- │ category │ manufacturer │  soa   │ variation_soa │ position │</span></span><br><span class="line"><span class="comment">-- ├──────────┼──────────────┼────────┼───────────────┼──────────┤</span></span><br><span class="line"><span class="comment">-- │        1 │           39 │  34.19 │          3.11 │        1 │&lt; 39 正在变好</span></span><br><span class="line"><span class="comment">-- │        2 │           39 │  11.68 │          1.37 │        1 │&lt; 跨多个类别</span></span><br><span class="line"><span class="comment">-- │        3 │           39 │   24.8 │          5.64 │        1 │</span></span><br><span class="line"><span class="comment">-- │        4 │            6 │  11.84 │          2.41 │        1 │</span></span><br><span class="line"><span class="comment">-- │        5 │           39 │  40.07 │          6.52 │        1 │</span></span><br><span class="line"><span class="comment">-- │        6 │           39 │  42.08 │         10.42 │        1 │&lt; 这是一个很好的提升</span></span><br><span class="line"><span class="comment">-- │        7 │           34 │   6.29 │          3.65 │        1 │</span></span><br><span class="line"><span class="comment">-- │        8 │            6 │  51.29 │          0.86 │        1 │</span></span><br><span class="line"><span class="comment">-- │        9 │            3 │  52.69 │          9.33 │        1 │</span></span><br><span class="line"><span class="comment">-- │       10 │            3 │  42.24 │          6.81 │        1 │</span></span><br><span class="line"><span class="comment">-- └──────────┴──────────────┴────────┴───────────────┴──────────┘</span></span><br></pre></td></tr></table></figure>
<p>这个查询获取了在每个类别中 SOA
变化量最大的制造商。请注意，这里使用了多个 <code>CTE</code> 来组织查询。
<code>LAG(n)</code> 是一个窗口函数，它允许你使用窗口内前第 <span
class="math inline"><em>n</em></span> 行的值。</p>
<hr />
<h3 id="并非所有零售商都是平等的">7) 并非所有零售商都是平等的！</h3>
<p>假设你拥有按零售商计算的
SOA，现在你想计算一个平均值，但不是一个简单的普通平均值。因为零售商的重要性（商店数量、区域、合同等）并不相同，你需要计算一个加权平均值（Weighted
Average）。</p>
<p>假设你拥有以下权重（权重数据在 <code>retailer_w</code> 表中）：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> retailer_w;</span><br><span class="line"><span class="comment">-- ┌──────────┬────────┐</span></span><br><span class="line"><span class="comment">-- │ retailer │   w    │</span></span><br><span class="line"><span class="comment">-- ├──────────┼────────┤</span></span><br><span class="line"><span class="comment">-- │       2  │    1.0 │</span></span><br><span class="line"><span class="comment">-- │       1  │    3.0 │&lt; 重要性是零售商 2 的 3 倍</span></span><br><span class="line"><span class="comment">-- └──────────┴────────┘</span></span><br></pre></td></tr></table></figure>
<p>那么，加权平均 SOA 可定义为：</p>
<p><span class="math display">$$\text{avg_soa} = \frac{\sum
(\text{零售商}_{i} \times \text{权重}_{i})}{\sum (\text{权重}_{i})}
\quad \text{对于所有} (\text{零售商}_{i}, \text{权重}_{i})$$</span></p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">WITH</span> soa_per_retailer_per_manufacturer <span class="keyword">AS</span> (</span><br><span class="line">    <span class="keyword">SELECT</span></span><br><span class="line">        retailer,</span><br><span class="line">        manufacturer,</span><br><span class="line">        <span class="built_in">SUM</span>(distributed_days) <span class="keyword">as</span> _total_ddays,</span><br><span class="line">        <span class="comment">-- 每个制造商的总分销天数</span></span><br><span class="line">        ROUND(</span><br><span class="line">            <span class="number">100</span> <span class="operator">*</span> _total_ddays <span class="operator">/</span> <span class="built_in">SUM</span>(_total_ddays) <span class="keyword">OVER</span> (<span class="keyword">PARTITION</span> <span class="keyword">BY</span> retailer),</span><br><span class="line">            <span class="number">2</span></span><br><span class="line">        ) <span class="keyword">as</span> soa <span class="comment">-- 这正是 SOA 公式</span></span><br><span class="line">    <span class="keyword">FROM</span></span><br><span class="line">        product_details</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">        retailer,</span><br><span class="line">        manufacturer)</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    manufacturer,</span><br><span class="line">    ROUND(</span><br><span class="line">        <span class="comment">-- 我们按制造商分组，因此可以直接进行以下计算</span></span><br><span class="line">        <span class="comment">-- 来获取加权平均值</span></span><br><span class="line">        <span class="built_in">SUM</span>(soa <span class="operator">*</span> w) <span class="operator">/</span> <span class="built_in">SUM</span>(w),</span><br><span class="line">        <span class="number">2</span></span><br><span class="line">    ) <span class="keyword">as</span> avg_soa</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">    soa_per_retailer_per_manufacturer</span><br><span class="line">    <span class="keyword">JOIN</span> retailer_w <span class="keyword">USING</span>(retailer) <span class="comment">-- 将 SOA 结果与权重表连接</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">    manufacturer</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> avg_soa <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ┌──────────────┬─────────┐</span></span><br><span class="line"><span class="comment">-- │ manufacturer │ avg_soa │</span></span><br><span class="line"><span class="comment">-- ├──────────────┼─────────┤</span></span><br><span class="line"><span class="comment">-- │            7 │   22.52 │</span></span><br><span class="line"><span class="comment">-- │           34 │   16.03 │</span></span><br><span class="line"><span class="comment">-- │            2 │    12.8 │</span></span><br><span class="line"><span class="comment">-- │           26 │    7.56 │</span></span><br><span class="line"><span class="comment">-- │           39 │    6.72 │</span></span><br><span class="line"><span class="comment">-- └──────────────┴─────────┘</span></span><br></pre></td></tr></table></figure>
<p>全文完！希望你阅读愉快 :)</p>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>数据分析</tag>
        <tag>SQL</tag>
        <tag>OLAP</tag>
      </tags>
  </entry>
  <entry>
    <title>English Grammar in Use Exercises</title>
    <url>/2025/10/28/English-Grammar-in-Use-Exercises/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>记录一下《English Grammar in Use，5th Edition》的练习题。</p>
<h1 id="present-continuousi-am-doing20251028">Present continuous（I am
doing）(20251028)</h1>
<h2 id="exercises">Exercises</h2>
<h3 id="whats-happening-in-the-pictures-choose-from-these-verbs">1.1
What’s happening in the pictures? Choose from these verbs:</h3>
<p><strong>cross hide scratch take tie wave</strong> 1 She’s taking a
picture. 2 He is tying a shoelace. 3 They are crossing the road. 4 He is
scratching his hand. 5 She is hiding behind a tree. 6 They are waving to
somebody.</p>
<span id="more"></span>
<h3
id="he-sentences-on-the-right-follow-those-on-the-left-.-which-sentence-goes-with-which">1.2
he sentences on the right follow those on the left . Which sentence goes
with which?****</h3>
<p>1 Please don’t make so much noise.I’m trying to work. 2 We need to
leave soon.It’s getting late. 3 I don’t have anywhere to live right
now.I’m staying with friends. 4 I need to eat something soon.I’m getting
hungry. 5 They don’t need their car any more.They’re trying to sell it.
6 Things are not so good at work.The company is losing money. 7 It isn’t
true what they say.They’re lying. 8 We’re going to get wet.It’s starting
to rain.</p>
<h3 id="write-questions.-use-the-present-continuous.">1.3 Write
questions. Use the present continuous.</h3>
<p>1 What’s all that noise? What’s happening? (what / happen?) 2 What’s
the matter? Why are you cring? (why / you / cry?) 3 Where’s your mother?
Is she working today? (she / work / today?) 4 I haven’t seen you for
ages. What are you doing these days? (what / you / do / these days?) 5
Amy is a student. What is she studying? (what / she / study?) 6 Who are
those people? What are they doing? (what / they / do?) 7 I heard you
started a new job.Are you enjoying it? (you / enjoy / it?) 8 We’re not
in a hurry. Why are you walking so fast? (why / you / walk / so
fast?)</p>
<h3
id="put-the-verb-into-the-correct-form-positive-im-doing-etc.-or-negative-im-not-doing-etc..">1.4
Put the verb into the correct form, positive (I’m doing etc.) or
negative (I’m not doing etc.).</h3>
<p>1 Please don’t make so much noise. I’m trying (I / try) to work. 2
Let’s go out now. It isn’t raining (it / rain) any more. 3 You can turn
off the radio.I’m not listening (I / listen) to it. 4 Kate phoned last
night. She’s on holiday with friends. (She / have)She is having a great
time and doesn’t want to come back. 5 Andrew started evening classes
recently. (He / learn)He is learning Japanese. 6 Paul and Sarah have had
an argument and now they are not speaking(they / speak)to one another. 7
The situation is already very bad and now it is getting (it / get)
worse. 8 Tim is not working (work) today. He’s taken the day off . 9 (I
/ look)I am looking for Sophie. Do you know where she is? 10 The washing
machine has been repaired. (It / work)It is working now. 11 (They /
build)They are building a new hospital. It will be finished next year.
12 Ben is a student, but he’s not very happy. (He / enjoy)He isn’t
enjoying his course. 13 (The weather / change)The weather is changing.
Look at those clouds.I think it’s going to rain. 14 Dan has been in the
same job for a long time. (He / start)He is starting to get bored with
it.</p>
<h1 id="present-simple-i-do-20251106">Present simple (I do)
(20251106)</h1>
<h2 id="exercises-1">Exercises</h2>
<h3 id="complete-the-sentences-using-the-following-verbs">2.1 Complete
the sentences using the following verbs:</h3>
<p><strong>cause(s) close(s) connect(s) go(es) live(s) speak(s)
take(s)</strong><br />
1 Tanya speaks German very well.<br />
2 Ben and Jack go to the same school.<br />
3 Bad driving causes many accidents.<br />
4 The museum closes at 4 o’clock on Sundays.<br />
5 My parents live in a very small flat.<br />
6 The Olympic Games take place every four years.<br />
7 The Panama Canal connects the Atlantic and Pacific oceans.</p>
<h3 id="put-the-verb-into-the-correct-form.">2.2 Put the verb into the
correct form.</h3>
<p>1 Julia doesn’t drink (not / drink) tea very often.<br />
2 What time do the banks close (the banks / close) here?<br />
3 I have a car, but I don’t use (not / use) it much.<br />
4 Where does Maria come (Maria / come) from? Is she Spanish?<br />
5 ‘What do you do (you / do)?’ ‘I’m an electrician.’<br />
6 Look at this sentence. What does this word mean(this word /
mean)?<br />
7 David isn’t very fit. He doesn’t do (not / do) any sport.<br />
8 It takes (take) me an hour to get to work in the morning. How long
does it take (it / take) you?</p>
<h3
id="complete-the-sentences-using-these-verbs.-sometimes-you-need-the-negative.">2.3
Complete the sentences using these verbs. Sometimes you need the
negative.</h3>
<p><strong>believe eat flow go grow make rise tell
translate</strong><br />
1 The earth goes round the sun.<br />
2 Rice doesn’t grow in cold climates.<br />
3 The sun rises in the east.<br />
4 Bees make honey.<br />
5 Vegetarians don’t eat meat.<br />
6 An atheist doesn’t believe in God.<br />
7 An interpreter from one language translates into another.<br />
8 Liars are people who don’t tell the truth.<br />
9 The River Amazon flows into the Atlantic Ocean.</p>
<h3
id="you-ask-lisa-questions-about-herself-and-her-family.-write-the-questions.">2.4
You ask Lisa questions about herself and her family. Write the
questions.</h3>
<p>1 You know that Lisa plays tennis. You want to know how often. Ask
her.<br />
How often do you play tennis ?<br />
2 Perhaps Lisa’s sister plays tennis too. You want to know. Ask
Lisa.<br />
Does your sister play tennis too ?<br />
3 You know that Lisa goes to the cinema a lot. You want to know how
often. Ask her.<br />
How often do you go to the cinema ?<br />
4 You know that Lisa’s brother works. You want to know what he does. Ask
Lisa.<br />
What does your brother do ?<br />
5 You’re not sure whether Lisa speaks Spanish. You want to know. Ask
her.<br />
Do you speak Spanish ?<br />
6 You don’t know where Lisa’s grandparents live. You want to know. Ask
Lisa.<br />
Where do your grandparents live ?</p>
<h3 id="complete-using-the-following">2.5 Complete using the
following:</h3>
<p><strong>I agree I apologise I insist I promise I recommend I
suggest</strong><br />
1 Mr Evans is not in the office today. I suggest you try calling him
tomorrow.<br />
2 I won’t tell anybody what you said. I promise .<br />
3 (in a restaurant) You must let me pay for the meal. I insist.<br />
4 I apologise for what I said. I shouldn’t have said it.<br />
5 The new restaurant in Baker Street is very good. I recommend it.<br />
6 I think you’re absolutely right.I agree with you.</p>
<h1 id="present-continuous-and-present-simple-1-20251107">Present
continuous and present simple 1 (20251107)</h1>
<p>(<strong>I am doing</strong> and <strong>I do</strong>)</p>
<h2 id="exercises-2">Exercises</h2>
<h3 id="are-the-underlined-verbs-ok-correct-them-where-necessary.">3.1
Are the underlined verbs OK? Correct them where necessary.</h3>
<p>1 Water boils at 100 degrees Celsius. OK 2 How often are you going to
the cinema? do you go 3 Ben tries to find a job, but he hasn’t had any
luck yet. is trying 4 Martina is phoning her mother every day. phones 5
The moon goes round the earth in about 27 days. OK 6 Can you hear those
people? What do they talk about? are they talking 7 What do you do in
your spare time?. OK 8 Sarah is a vegetarian. She doesn’t eat meat. OK 9
I must go now. It gets late. is getting 10 ‘Come on! It’s time to
leave.’ ‘OK, I come.’ am coming 11 Paul is never late. He’s always
starting work on time. starts 12 They don’t get on well. They’re always
arguing. OK</p>
<h3
id="put-the-verb-into-the-correct-form-present-continuous-or-present-simple.">3.2
Put the verb into the correct form, present continuous or present
simple.</h3>
<p>1 a I usually get (I / usually / get) hungry in the afternoon. b I’m
getting (I / get) hungry. Let’s go and eat something. 2 a ‘ Are you
listening (you / listen) to the radio?’ ‘No, you can turn it off.’ b ‘Do
you listen (you / listen) to the radio a lot?’ ‘No, not very often.’ 3 a
The River Nile flows (flow) into the Mediterranean. b The river is
flowing (flow) very fast today – much faster than usual. 4 a I’m not
very active. I don’t do (I / not / do) any sport. b What do you usually
do (you / usually / do) at weekends? 5 a Rachel is in New York right
now. (She / stay)She is staying at the Park Hotel. b She always stays
(She / always / stay) there when she’s in New York.</p>
<h3
id="put-the-verb-into-the-correct-form-present-continuous-or-present-simple.-1">3.3
Put the verb into the correct form, present continuous or present
simple.</h3>
<p>1 Why are all these people here? What’s happening (What / happen)? 2
Julia is good at languages. (She / speak)She speaks four languages very
well. 3 Are you ready yet? (Everybody / wait)Everybody is waiting for
you. 4 I’ve never heard this word. How (you / pronounce)do you pronounce
it? 5 Kate isn’t working (not / work) this week. She’s on holiday. 6 I
think my English (improve) is improving slowly. It’s better than it was.
7 Nicola (live)lives in Manchester. She has never lived anywhere else. 8
Can we stop walking soon? (I / start)I am starting to get tired. 9 Sam
and Tina are in Madrid right now. (They / visit)They are visiting a
friend of theirs. 10 ‘What does your father do(your father / do)?’ ‘He’s
an architect.’ 11 It took me an hour to get to work this morning. Most
days it doesn’t take (it / not / take) so long. 12 I (I / learn)I am
learning to drive. My driving test is next month. My father teaches
(teach) me.</p>
<h3 id="finish-bs-sentences.-use-always--ing.">3.4 Finish B’s sentences.
Use always -ing.</h3>
<p>1 a: I’ve lost my keys again. b: Not again! You’re always losing your
keys . 2 a: The car has broken down again. b: That car is useless. It is
always breaking down. 3 a: Look! You’ve made the same mistake again. b:
Oh no, not again! I am always making the same mistake. 4 a: Oh, I’ve
left my phone at home again. b: Typical! I am always leaving my phone at
home.</p>
<h1 id="present-continuous-and-present-simple-2-20251112">Present
continuous and present simple 2 （20251112）</h1>
<p>(<strong>I am doing</strong> and <strong>I do</strong>)</p>
<h2 id="exercises-3">Exercises</h2>
<h3
id="put-the-verb-into-the-correct-form-present-continuous-or-present-simple.-2">4.1
Put the verb into the correct form, present continuous or present
simple.</h3>
<p>1 Are you hungry? Do you want (you / want) something to eat? 2 Alan
says he’s 90 years old, but nobody believes (believe) him. 3 She told me
her name, but I don’t remember(I / not / remember) it now. 4 Don’t put
the dictionary away. I’m using(I / use) it. 5 Don’t put the dictionary
away. I need(I / need) it. 6 Air consists (consist) mainly of nitrogen
and oxygen. 7 Who is that man? What does he want (he / want)? 8 Who is
that man? Why is he looking (he / look) at us? 9 Who is that man? Do you
recognise (you / recognise) him? 10 (I / think)I’m thinking of selling
my car. Would you be interested in buying it? 11 I can’t make up my
mind. What do you think (you / think) I should do? 12 Gary wasn’t well
earlier, but he seems(he / seem) OK now.</p>
<h3 id="use-the-words-in-brackets-to-make-sentences.">4.2 Use the words
in brackets to make sentences.</h3>
<p>1 (you / not / seem / very happy today) You don’t seem very happy
today.</p>
<p>2 Are you OK? You look worried</p>
<p>I don’t think so.</p>
<p>3 (who / this umbrella / belong to?) Who does this umbrella belong
to?</p>
<p>4 (this / smell / good) This smells good.</p>
<p>5 Excuse me. (anybody / sit / there?) Is anybody sitting there?</p>
<p>6 (these gloves / not / fit / me) These gloves don’t fit me.</p>
<h3 id="are-the-underlined-verbs-ok-correct-them-where-necessary.-1">4.3
Are the underlined verbs OK? Correct them where necessary.</h3>
<p>1 Nicky is thinking of giving up her job. OK 2 It’s not true. I’m not
believing it. I don’t believe it. 3 I’m feeling hungry. Is there
anything to eat?I feel hungry. 4 I’ve never eaten that fruit. What is it
tasting like?What does it taste like? 5 I’m not sure what she does. I
think she works in a shop.OK 6 Look over there. What are you seeing?What
can you see? 7 You’re very quiet. What are you thinking about?Ok</p>
<h3
id="complete-the-sentences.-use-isare-being-continuous-or-isare-simple.">4.4
Complete the sentences. Use is/are being (continuous) or is/are
(simple).</h3>
<p>1 I can’t understand why he’s being so selfish. He isn’t usually like
that. 2 You’ll like Sophie when you meet her. She is very nice. 3 Sarah
very nice to me at the moment. I’m wondering why. 4 They are very happy.
They’ve just got married. 5 You’re normally very patient, so why are you
so unreasonable about waiting ten more minutes? 6 Would you like
something to eat? Are you hungry?</p>
<h1 id="unit-5-past-simple-i-did">Unit 5 Past simple (I did)</h1>
<h2 id="exercises-4">Exercises</h2>
<h3 id="read-what-laura-says-about-a-typical-working-day">5.1 Read what
Laura says about a typical working day:</h3>
<p>LAURA:I usually get up at 7 o’clock and have a big breakfast. I walk
to work, which takes me about half an hour. I start work at 8.45. I
never have lunch. I finish work at 5 o’clock. I’m always tired when I
get home. I usually cook a meal in the evening. I don’t usually go out.
I go to bed at about 11 o’clock, and I always sleep well.</p>
<p>Yesterday was a typical working day for Laura. Write what she did or
didn’t do yesterday. 1 She got up at 7 o’clock. 2 She had a big
breakfast. 3 She walked to work. 4 It took her half an hour to get to
work. 5 She started work at 8.45. 6 She didn’t have lunch. 7 She
finished work at 5 o’clock. 8 She was tired when she got home. 9 She
cooked a meal yesterday evening. 10 She didn’t go out yesterday evening.
11 She went to bed at 11 o’clock. 12 She slept well last night.</p>
<h3
id="complete-the-sentences-using-the-following-verbs-in-the-correct-form">5.2
Complete the sentences using the following verbs in the correct
form:</h3>
<p>buy catch cost fall hurt sell spend teach throw write</p>
<p>1 Mozart wrote more than 600 pieces of music. 2 ‘How did you learn to
drive?’ ‘My father taught me.’ 3 We couldn’t afford to keep our car, so
we sold it. 4 Dave fell down the stairs this morning and broke his leg.
5 Joe threw the ball to Sue, who caught it. 6 Kate spent a lot of money
yesterday. She bought a dress which cost £100.</p>
<h3
id="you-ask-james-about-his-holiday-in-the-us.-write-your-questions.">5.3
You ask JAMES about his holiday in the US. Write your questions.</h3>
<p>1 YOU: Where did you go ? JAMES: To the US. We went on a trip from
San Francisco to Denver. 2 YOU: How did you get there ? By car? JAMES:
Yes, we hired a car in San Francisco. 3 YOU: It’s a long way to drive.
How long did it take? JAMES: Two weeks. We stopped at a lot of places
along the way. 4 YOU: Where did you live ? In hotels? JAMES: Yes, small
hotels or motels. 5 YOU: Was the weather good? JAMES: Yes, but it was
very hot – sometimes too hot. 6 YOU: Did you visit the Grand Canyon?
JAMES: Of course. It was wonderful.</p>
<h3
id="complete-the-sentences.-put-the-verb-into-the-correct-form-positive-or-negative.">5.4
Complete the sentences. Put the verb into the correct form, positive or
negative.</h3>
<p>1 It was warm, so I took off my coat. (take) 2 The film wasn’t very
good. I didn’t enjoy it much. (enjoy) 3 I knew Sarah was busy, so I
didn’t disturb her. (disturb) 4 We were very tired, so we left the party
early. (leave) 5 It was hard carrying the bags. They were really heavy.
(be) 6 The bed was very uncomfortable. I didn’t sleep well. (sleep) 7
This watch wasn’t expensive. It didn’t cost much. (cost) 8 The window
was open and a bird flew into the room. (fly) 9 I was in a hurry, so I
didn’t have time to call you. (have) 10 I didn’t like the hotel. The
room was not very clean. (be)</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>英语</tag>
      </tags>
  </entry>
  <entry>
    <title>设计的复利：不该做什么</title>
    <url>/2025/10/24/%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%A4%8D%E5%88%A9%EF%BC%9A%E4%B8%8D%E8%AF%A5%E5%81%9A%E4%BB%80%E4%B9%88/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>原文：<a
href="https://designobserver.com/the-compound-interest-of-design-what-not-to-build/">The
compound interest of design: what not to build</a></p>
</blockquote>
<p>在设计领域摸爬滚打了二十五年后，Dave Snyder
认为，最明智的设计策略不是追逐潮流，而是种下一棵树，让时间来发挥作用。</p>
<p><em>编者注：这是 Dave Snyder 为《Design Juice》
撰写的第一篇评论文章。请务必阅读到最后。</em></p>
<p>我从事数字产品设计已经有 25 年了。我记得当时最大的决定是，从 800×600
像素升级到 1024
像素。我经历了多轮虚拟现实（VR）炒热潮，见证了网络从静态页面发展到社交网络，再到现在的“万物皆
AI”。我曾推出过失败惨重的的产品，也有一些产品取得了巨大的成功。</p>
<p>树木不会在明天就带来回报。它们需要十年才能结出果实。它们静静地成长，让周围的一切变得更好：提供荫凉、价值、美感和长久生命力。而大多数产品呢？我们把它们当作灌木。种下二十个功能，希望有一个能存活。这不过是打着“创新”旗号的功能臃肿。这是急躁且愚蠢的做法。</p>
<span id="more"></span>
<p>更明智的做法是保持克制。种下一棵树。解决一个核心问题。投入匠心。然后，让时间和真实的用户行为来完成剩下的工作。</p>
<p>以 Shopify 的 Shop
应用为例。七年前推出时，它并没有试图满足所有人的需求。它出色地解决了一个核心问题：包裹追踪。这就是它的树。正因为他们抵制了立即添加支付、社交功能或任何其他流行趋势的冲动，他们得以专注于使这一核心体验变得更加出色。它的枝干自然生长，首先是在结账时添加了“Shop”按钮，接着是个性化推荐，最终发展成一个完整的市场。每一次新增功能都建立在最初的基础之上。</p>
<p>再看看像 Duolingo
的“下拉刷新”交互设计这样的小细节。他们没有在语言学习应用中硬塞更多功能，而是将精力投入到了一个大多数团队都会视为次要的微交互上。正是这个带来愉悦感的小细节，以十个新功能永远无法做到的方式，在个性塑造、习惯养成和用户留存方面实现了复利增长。</p>
<p>最难的部分不是确定要构建什么，而是确定不该构建什么。在披萨外卖应用
Slice
中，我们不断面临着将业务扩展到披萨以外的压力：中餐怎么样？墨西哥卷饼呢？每一种餐厅类型似乎都是一个明显的机会。但正是专注于披萨，让我们能够针对披萨爱好者看重的事情进行优化：轻松地重新订购你常点的披萨、搭配合理的配料，以及展示披萨的真实图片。我们可以构建像“重新订购您最近三次的订单”这样的功能，因为我们理解披萨顾客有自己的习惯，而不是因为我们试图服务所有人。</p>
<p>这就是设计的复利——不仅仅是金融上的，更是人与人之间的。良好的基础性选择会随着时间的推移带来成倍的回报。它们产生的回报会让用户不断回归、深入使用并分享给朋友。</p>
<p>大多数团队认为复利意味着构建一个接一个堆叠起来的功能。但我学到的是，它实际上意味着投资于那些让用户愿意回来的基础性细节。那个让你微笑的下拉刷新。那个运行流畅的重新订购流程。那个真正帮助你做出决定的图片。</p>
<p>你事先做的每一个猜测都是一种负担。你每一次刻意的克制都是一种投资。重要的事情需要时间，这恰恰是没人愿意投入的原因。但二十五年观察产品的成败经历告诉我：不要耍小聪明，不要贪婪。选一件重要的事情，把它做好，然后让进化战胜预测。</p>
<p>种下那该死的树。</p>
<hr />
<p><em>作者简介：Dave Snyder 是 Siberia
的合伙人兼首席设计官。他是一位屡获殊荣的设计高管，拥有超过 23
年的经验，致力于发展高效的内部和代理团队，专注于构建现代的、数十亿美元的品牌和数字产品。他的工作范围广泛，从数字优先、整合营销活动和内容，到
VR 和 AR
中的沉浸式互动体验，以及在电子商务和数字产品领域的长期职业生涯，服务过的品牌包括
Twitter、Flexport 和
Slice。他最大的动力是发现公司表达其目标的新方式——无论是新的产品愿景和叙事、设计系统、新功能，还是
UI
元素的微交互。正是这种对工艺的热情和奉献，使他和他的团队能够有意义地推动业务向前发展，并在此过程中赢得了一些值得注意的奖项。Dave
在布鲁克林外约一小时的地方有一栋海滨小屋，他在那里养殖自己的牡蛎、玩滑板，并喜欢重建老式路虎。</em></p>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>设计</tag>
        <tag>复利</tag>
      </tags>
  </entry>
  <entry>
    <title>如何成为一名-10倍工程师</title>
    <url>/2025/12/05/%E5%A6%82%E4%BD%95%E6%88%90%E4%B8%BA%E4%B8%80%E5%90%8D-10%E5%80%8D%E5%B7%A5%E7%A8%8B%E5%B8%88/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>原文：<a href="https://taylor.town/-10x">How to be a -10x
Engineer</a></p>
</blockquote>
<p>+10 倍工程师听起来可能是个神话，但-10 倍工程师确实存在。 想要成为一名
-10 倍工程师，你只需要按照以下原则，每周浪费 400 个小时就行了：</p>
<h2 id="使-10-位工程师的产出归零">使 10 位工程师的产出归零。</h2>
<p>尽可能晚地更改需求。 为避免责备，从一开始就模糊化需求。</p>
<h2 id="制造-400-小时的瞎忙">制造 400 小时的瞎忙。</h2>
<p>让你的团队执行那些看起来像工作的任务。
比如演示文稿、图表和工单管理。创建毫无意义的仪式。</p>
<h2 id="制造-400-小时的倦怠-人员流动">制造 400 小时的倦怠 /
人员流动。</h2>
<p>不感恩。 推卸责任。散布困惑。发脾气。导致他人加班。</p>
<h2 id="在技术讨论中劫持-10-位工程师">在技术讨论中劫持 10
位工程师。</h2>
<p>让工程师们讨论想法。
鼓励他们追求优雅而非实用主义。确保任何人都无权做出任何决定。</p>
<span id="more"></span>
<h2 id="增加-400-小时的沟通开销">增加 400 小时的沟通开销。</h2>
<p>会议毁掉日程表。 为了不引人注意地浪费他人的时间，撰写冗长的消息 /
文档并尽可能广泛地分享。欢迎所有意见，并以提高参与度为目标。</p>
<h2 id="在云成本上浪费-10-周的工资">在云成本上浪费 10 周的工资。</h2>
<p>编写运行缓慢的程序。 避免使用数据库索引。在 16
核机器上运行单线程程序。选择带有炫酷内存和 GPU 的奇异硬件。在内存 /
磁盘上随意存储数据。不要压缩任何东西。不要注意数据布局。</p>
<h2 id="创建无用的工具">创建无用的工具。</h2>
<p>认定现有解决方案不能完全满足你的需求。
编写只有一个人能理解的脚本。如果脚本做着重要的事情，请避免编写文档。</p>
<h2 id="增加-400-小时的编译-构建时间">增加 400 小时的编译 /
构建时间。</h2>
<p>慢速构建浪费时间并产生复利。
随着构建时间的增加，开发人员更有可能分心。为确保开发人员进行上下文切换，重新编译应该至少需要
20 秒。你也可以编写慢速测试来达到类似效果。</p>
<h2 id="编写毫无意义的测试">编写毫无意义的测试。</h2>
<p>测试只关注代码中非核心的、易变的数据（比如一个特定的字符串或数字），而不是验证函数的核心业务逻辑。
过度使用 Mocking（模拟）。
在单元测试中，将待测函数所依赖的所有子函数全部用模拟对象替代。在测试中引入微妙的随机性，使其无缘无故地成功
/ 失败。</p>
<h2 id="在糟糕的架构上浪费-400-小时的时间">在糟糕的架构上浪费 400
小时的时间。</h2>
<p>对系统设计将如何随时间演变不作任何考虑。
或者，驱使你的团队沉迷于架构决策，以至于他们没有时间来测试他们的假设。</p>
<h2 id="在部署上浪费-400-小时">在部署上浪费 400 小时。</h2>
<p>创建尽可能多的环境。
生产环境和预演环境必须有天壤之别。用脆弱的构建系统启动脆弱的代码。频繁迁移你的数据库。</p>
<h2 id="在不愉快的客户身上损失-10-周的工资">在不愉快的客户身上损失 10
周的工资。</h2>
<p>反复的检测不出和解决严重的错误。 不注意安全漏洞。</p>
<h2 id="编写毫无价值的文档">编写毫无价值的文档。</h2>
<p>在私人消息中解释代码。 编写没人使用的 Wiki。</p>
<h2 id="将-10-位工程师困在徒劳的-臭鼬工厂-项目里">将 10
位工程师困在徒劳的 “臭鼬工厂” 项目里。</h2>
<p>吸引聪明的工程师并浪费他们的潜力。
对管理层低估项目的难度；对管理层夸大项目的用处。告诉管理层它
“快完成了”，直到他们将其取消。</p>
<h2 id="增加需要-400-小时维护的依赖项">增加需要 400
小时维护的依赖项。</h2>
<p>工程师们需要分别学习每一个库。</p>
<h2 id="延迟转向">延迟转向。</h2>
<p>永不承认失败。
让你的团队淹没在沉没成本中。忽略可以改善你处境的二八原则妥协方案。</p>
<h2 id="雇佣-10-位-0-倍工程师">雇佣 10 位 0 倍工程师。</h2>
<p>机会成本是致命的。
冗员可能不会主动伤害你的团队，但他们占据了原本可以积极帮助团队的人的座位。</p>
<h2 id="雇佣-5-位--1-倍工程师">雇佣 5 位 -1 倍工程师。</h2>
<p>不要满足于冗员。 积极雇佣那些会造成灾难并抵制学习的工程师。</p>
<h2 id="阻止-10-位--1-倍工程师被解雇">阻止 10 位 -1
倍工程师被解雇。</h2>
<p>不要兴风作浪。 不要留下任何失败的书面记录。为糟糕的工程实践担保。</p>
<h2 id="带来-400-小时的-bug-分类">带来 400 小时的 Bug 分类。</h2>
<p>编写无法调试的程序。
用过多的、不必要的抽象层将代码包裹起来。编写意大利面条式代码（译注：指结构混乱、代码逻辑跳跃、控制流复杂、缺乏模块化或清晰结构的程序）。使所有东西都对初始条件敏感。避免纯函数。随意使用依赖项。尽可能说
“它在我的机器上能跑”。</p>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>提效</tag>
      </tags>
  </entry>
  <entry>
    <title>国外免费技术教程</title>
    <url>/2025/11/06/%E5%9B%BD%E5%A4%96%E5%85%8D%E8%B4%B9%E6%8A%80%E6%9C%AF%E6%95%99%E7%A8%8B/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<h1 id="anthropic-academy"><a
href="https://www.anthropic.com/learn">Anthropic Academy</a></h1>
<p>课程做的很好，每节课几分钟，很容易坚持下来。讲的浅显易懂，有视频、配套文档和代码。没有中文字幕，对英语听力和理解要求较高。</p>
<span id="more"></span>
<h1 id="visual-types"><a href="https://types.kitlangton.com/">VISUAL
TYPES</a></h1>
<p>很好的 TypeScript
教程。顶部有进度条展示学习进度，每种类型有丰富的示例，值得推荐。</p>
<h1 id="svg-tutorial"><a href="https://svg-tutorial.com/">SVG
Tutorial</a></h1>
<p>通过 24 个案例学习 SVG，教程很详细，一步步绘制出 SVG
图形。网页设计的很漂亮。</p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>网站</tag>
        <tag>学习</tag>
        <tag>教程</tag>
      </tags>
  </entry>
  <entry>
    <title>new URL() 的问题，以及 URL.parse() 如何解决它</title>
    <url>/2025/12/15/new-URL-%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%8C%E4%BB%A5%E5%8F%8A-URL-parse-%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%AE%83/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>原文：<a
href="https://kilianvalkhof.com/2024/javascript/the-problem-with-new-url-and-how-url-parse-fixes-that/">The
problem with new URL(), and how URL.parse() fixes that</a></p>
</blockquote>
<h2 id="new-url-的问题以及-url.parse-如何解决它"><code>new URL()</code>
的问题，以及 <code>URL.parse()</code> 如何解决它</h2>
<p>作为一个构建<a
href="https://polypane.app/">浏览器</a>的人(译注：本文作者 Kilian
Valkhof 也是 Polypane 浏览器的开发者)，我需要解析大量的
URL。其中一部分是为了验证它们，但也是为了规范化它们或并从中提取特定部分。浏览器中的
<code>URL</code> API
可以让你做到这一点，但其人体工程学设计并不理想。</p>
<span id="more"></span>
<h2 id="new-url-的问题"><code>new URL()</code> 的问题</h2>
<p><code>new URL()</code> 前面的 “new”
表明它被用作构造函数：调用它会为你创建一个新的 <code>URL</code>
实例。然而，当你给它一个格式错误的、无法解析的 URL
时，它会抛出一个错误（throw an
error）。因为它会抛出错误，所以你需要编写代码来处理该错误。</p>
<p>如果你不这样做，抛出的错误将得不到处理，你的 JS
将停止执行。下面的代码看起来很棒，但如果 <code>urlstring</code>
格式错误，它将停止执行：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> urlstring = <span class="string">&quot;this is not a URL&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> not_a_url = <span class="keyword">new</span> <span class="title function_">URL</span>(urlstring);</span><br><span class="line"><span class="comment">// Uncaught TypeError: URL constructor: &quot;this is not a URL&quot; is not a valid URL.</span></span><br></pre></td></tr></table></figure>
<p>因此，你会希望将其包装在一个 <code>try...catch</code>
块中，以便捕获该错误。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> urlstring = <span class="string">&quot;this is not a URL&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> not_a_url;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  not_a_url = <span class="keyword">new</span> <span class="title function_">URL</span>(urlstring);</span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">  <span class="comment">// 我们捕获并忽略该错误</span></span><br><span class="line">  <span class="comment">// not_a_url 已经是 undefined，所以实际上不需要做任何事情。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这要多出很多行代码，有更多的视觉干扰，而且这意味着你必须将
<code>not_a_url</code> 从 <code>const</code> 更改为 <code>let</code>
才能对其进行覆盖。应用程序的控制流程最终变得更加复杂。</p>
<h2 id="略微改进">略微改进</h2>
<p><code>URL</code> API 最近的一个补充是
<code>URL.canParse()</code>，如果 URL 是一个可解析的 URL,这个函数会返回
<code>true</code>。</p>
<p>它直到 2023 年 12
月才实现跨浏览器可用，因此现在用于一般用途可能还为时过早，但它确实让代码更具可读性。</p>
<p>我们不需要再捕获错误，而是可以在解析之前先检查 URL
是否可解析，并且我们可以内联地做到这一点：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> urlstring = <span class="string">&quot;this is not a URL&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> not_a_url = <span class="variable constant_">URL</span>.<span class="title function_">canParse</span>(urlstring) &amp;&amp; <span class="keyword">new</span> <span class="title function_">URL</span>(urlstring);</span><br><span class="line"><span class="comment">// not_a_url = false</span></span><br></pre></td></tr></table></figure>
<p>这使得 <code>not_a_url</code> 再次成为
<code>const</code>，并且绝对更容易理解。</p>
<h2 id="抱怨">抱怨</h2>
<p>我并没有封装一个小函数来将 <code>try...catch</code> 或
<code>canParse</code>
从我的常规代码库中抽象出来，而是决定做正确的事情并在 Twitter
上抱怨：</p>
<blockquote>
<p>当你提供无效 URL 时让 <code>new URL()</code> 抛出错误是一个糟糕的 API
选择。</p>
</blockquote>
<p>不久之后，Anne van Kesteren 回复了一个 GitHub
问题的链接，该问题讨论了向 <code>URL</code> 中添加一个不会抛出错误的
“parse” 函数。</p>
<p>Anne 在 2018
年就提出了这个问题，但我的推文重新引起了兴趣。不久之后，Anne 将
<code>URL.parse()</code> 添加到了规范中，并为所有浏览器引擎提交了实现
任务。</p>
<p>Anne 本人已在 WebKit 中实现了它，它也将在 <strong>Chromium
126</strong> 和 <strong>Firefox 126</strong> 中发布。</p>
<h2 id="使用-url.parse">使用 <code>URL.parse()</code></h2>
<p>有了
<code>URL.parse()</code>，我们就可以回到最上面的那个原始示例，并保持我们的控制流程尽可能简单：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> urlstring = <span class="string">&quot;this is not a URL&quot;</span>;</span><br><span class="line"><span class="keyword">const</span> not_a_url = <span class="variable constant_">URL</span>.<span class="title function_">parse</span>(urlstring);</span><br><span class="line"><span class="comment">// not_a_url = null</span></span><br></pre></td></tr></table></figure>
<p>带有此功能的浏览器将在接下来的几个月内发布（Firefox 在 5 月，Chrome
在 6 月，我还没能确定 Safari
何时发布），所以你必须稍等片刻才能使用它，但我迫不及待地想要摆脱所有
<code>try..catch</code> 调用！</p>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>URL()</tag>
        <tag>URL.parse()</tag>
      </tags>
  </entry>
  <entry>
    <title>你应该多使用 /tmp/ 目录</title>
    <url>/2025/12/26/%E4%BD%A0%E5%BA%94%E8%AF%A5%E5%A4%9A%E4%BD%BF%E7%94%A8-tmp-%E7%9B%AE%E5%BD%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>原文：<a href="https://atthis.link/blog/2025/58671.html">You Should
Use /tmp/ More</a></p>
</blockquote>
<p>在 Linux 系统中 /tmp/
是专门为临时文件设计的，通常用于保存不需要长期保留的
“东西”：比如你正在处理的文件的临时备份、浏览器缓存的内容、或是正在进行的更新的暂存地。/tmp/
还有一个独特的优点：每当机器重启时，它都会被清空 —— 毕竟它是临时的。</p>
<p>最强大的一个用途是将 <strong>下载文件夹设置为</strong>
/tmp。这样就不会因为遗忘，而让默认的“下载”文件夹变成一个永远不会被清空的垃圾桶，从而造成文件残留。</p>
<p>比如：你可以将项目中临时使用的一张图扔进 /tmp/
文件夹，而不是多年后看着一张莫名其妙的 JPEG 图片纳闷。</p>
<span id="more"></span>
<p>在做研究时，我可能需要翻阅数百份 PDF 研究论文。我可以把它们全部下载到
/tmp/
文件夹中，然后开始查阅。完全不用担心它们会被丢在某个文件夹里被遗忘，也不用担心它们在任务完成后占用空间。</p>
<p>做项目的数据集也可以放在 /tmp/
里。下次回来时直接下载最新版本即可，不会不断累积出
“v1”、“v2”、“v2_final” 等一堆冗余文件。</p>
<p>快速待办事项（TODO）和其他草稿类内容也非常适合
/tmp/。我以前常在主目录下随便丢一个笔记，比如 monday.md 或
2023-03-05.txt。/tmp/ 同样适合这些场景。我可以在一天开始时在 /tmp/
里创建一个文本文件，写满需要做的事，然后在关机时让它自动消失。</p>
<p>我经常使用
LaTeX，它在编译文档时会产生大量文件：目录文件、参考文献文件、PDF
之前的中间 DVI
文件等。虽然保留它们可以加速以后的编译，但通常我并不需要它们。所以，我可以在
pdflatex 命令中添加以下参数，将所有临时文件放回它们该去的地方：</p>
<p><code>pdflatex -output-directory=/tmp/</code></p>
<p>虽然这也会把生成的 PDF 放到 /tmp/
中，但通常我只想保留源代码，并在需要时重新编译 —— 这样可以节省空间。</p>
<p>/tmp/
提供了许多令人惊讶的应用，这纯粹源于它的临时性。它能帮助你更好地决定哪些内容需要长期存储，哪些可以丢弃；通过自动删除不需要的文件来控制空间占用；通过本质上清除冗余内容来保持整个文件系统的整洁。</p>
<p>所以，考虑尝试一下 /tmp/
吧。如果它不适合你，下次重启后你又可以重新开始。</p>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>Linux</tag>
        <tag>/tmp/</tag>
      </tags>
  </entry>
  <entry>
    <title>穷人的信号</title>
    <url>/2025/12/16/%E7%A9%B7%E4%BA%BA%E7%9A%84%E4%BF%A1%E5%8F%B7/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>原文：<a
href="https://plainvanillaweb.com/blog/articles/2024-08-30-poor-mans-signals/">Poor
man’s signals</a></p>
</blockquote>
<p>信号（Signals）目前正风靡一时。所有人都开始使用它们：Angular、Solid、Preact，对于那些还没有内置信号的框架，也可以使用第三方包。甚至还有将它们添加到语言规范中的提案，如果该提案通过，那么所有框架内置信号就只是时间问题了。</p>
<h2 id="消息闭塞">消息闭塞</h2>
<p>如果你一直对这些新技术一无所知，下面是一个来自 Preact
文档的例子，它简洁地概括了信号的作用：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; signal, computed, effect &#125; <span class="keyword">from</span> <span class="string">&quot;@preact/signals&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> name = <span class="title function_">signal</span>(<span class="string">&quot;Jane&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> surname = <span class="title function_">signal</span>(<span class="string">&quot;Doe&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> fullName = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> <span class="string">`<span class="subst">$&#123;name.value&#125;</span> <span class="subst">$&#123;surname.value&#125;</span>`</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 每次 name 变化时都会打印：</span></span><br><span class="line"><span class="title function_">effect</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(fullName.<span class="property">value</span>));</span><br><span class="line"><span class="comment">// 打印: &quot;Jane Doe&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新 `name` 会更新 `fullName`，从而再次触发 effect：</span></span><br><span class="line">name.<span class="property">value</span> = <span class="string">&quot;John&quot;</span>;</span><br><span class="line"><span class="comment">// 打印: &quot;John Doe&quot;</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>简而言之，信号将值和计算结果包裹起来，使我们能够轻松响应这些值和结果的每一个变化，而不像我们在
React
中那样必须重新渲染整个应用程序。总而言之，信号是一种高效且有针对性地响应变化的方法，无需进行状态比较和
DOM 差异（DOM-diffing）计算。</p>
<p>好的，既然信号如此强大，我为什么要在 Vanilla Web
开发博客上向你推销它们呢？别担心！Vanilla Web 开发者也可以拥有信号。</p>
<h2 id="仅仅是一个包装器">仅仅是一个包装器</h2>
<p>信号的本质不过是一个值的包装器，当这个值发生变化时，它会发送事件。使用一个不太为人所知但非常方便的基类
<code>EventTarget</code>，就可以轻松解决这个问题。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Signal</span> <span class="keyword">extends</span> <span class="title class_ inherited__">EventTarget</span> &#123;</span><br><span class="line">  #value;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">value</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.#value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">value</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.#value === value) <span class="keyword">return</span>;</span><br><span class="line">    <span class="variable language_">this</span>.#value = value;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">dispatchEvent</span>(<span class="keyword">new</span> <span class="title class_">CustomEvent</span>(<span class="string">&quot;change&quot;</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.#value = value;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这为我们提供了一个最基本的信号体验：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="keyword">new</span> <span class="title class_">Signal</span>(<span class="string">&quot;Jane&quot;</span>);</span><br><span class="line">name.<span class="title function_">addEventListener</span>(<span class="string">&quot;change&quot;</span>, <span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(name.<span class="property">value</span>));</span><br><span class="line">name.<span class="property">value</span> = <span class="string">&quot;John&quot;</span>; <span class="comment">// 打印: John</span></span><br></pre></td></tr></table></figure>
<p>但这有点丑陋。<code>new</code> 关键字在十年前就过时了，而且
<code>addEventListener</code>
确实很笨重。所以，我们来添加一点语法糖。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Signal</span> <span class="keyword">extends</span> <span class="title class_ inherited__">EventTarget</span> &#123;</span><br><span class="line">  #value;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">value</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.#value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">value</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.#value === value) <span class="keyword">return</span>;</span><br><span class="line">    <span class="variable language_">this</span>.#value = value;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">dispatchEvent</span>(<span class="keyword">new</span> <span class="title class_">CustomEvent</span>(<span class="string">&quot;change&quot;</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">value</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>();</span><br><span class="line">    <span class="variable language_">this</span>.#value = value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">effect</span>(<span class="params">fn</span>) &#123;</span><br><span class="line">    <span class="title function_">fn</span>();</span><br><span class="line">    <span class="variable language_">this</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;change&quot;</span>, fn);</span><br><span class="line">    <span class="keyword">return</span> <span class="function">() =&gt;</span> <span class="variable language_">this</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;change&quot;</span>, fn);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">valueOf</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.#value;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">toString</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">String</span>(<span class="variable language_">this</span>.#value);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">signal</span> = (<span class="params">_</span>) =&gt; <span class="keyword">new</span> <span class="title class_">Signal</span>(_);</span><br></pre></td></tr></table></figure>
<p>现在，我们的基本示例使用起来舒服多了：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="title function_">signal</span>(<span class="string">&quot;Jane&quot;</span>);</span><br><span class="line">name.<span class="title function_">effect</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(name.<span class="property">value</span>)); <span class="comment">// 打印: Jane</span></span><br><span class="line">name.<span class="property">value</span> = <span class="string">&quot;John&quot;</span>; <span class="comment">// 打印: John</span></span><br></pre></td></tr></table></figure>
<p><code>effect(fn)</code>
方法会调用指定的函数，并将其订阅到信号值的变化。</p>
<p>它还会返回一个 <code>dispose</code> 函数，可用于注销
<code>effect</code>。然而，使用 <code>EventTarget</code>
和浏览器内置事件作为响应性原语的一个很好的副作用是，当信号超出作用域（比如所在页面组件被销毁了，没有变量再指向这个信号）时，浏览器可以智能地对信号及其
<code>effect</code> 进行垃圾回收。这意味着即使我们从不调用
<code>dispose</code> 函数，也减少了内存泄漏的机会。</p>
<p>最后，<code>toString</code> 和 <code>valueOf</code>
魔法方法允许我们在大多数使用信号值的地方省略
<code>.value</code>。（但在本例中不行，因为控制台会打印出整个对象的内部细节。）</p>
<h2 id="无法计算">无法计算</h2>
<p>这个信号实现已经很有用了，但在某些时候，基于多个信号的
<code>effect</code> 可能会很方便。这意味着需要支持计算值（computed
values）。基础信号是对值的包装器，而计算信号是对函数的包装器。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Computed</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Signal</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">fn, deps</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(<span class="title function_">fn</span>(...deps));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">const</span> dep <span class="keyword">of</span> deps) &#123;</span><br><span class="line">      <span class="keyword">if</span> (dep <span class="keyword">instanceof</span> <span class="title class_">Signal</span>)</span><br><span class="line">        dep.<span class="title function_">addEventListener</span>(<span class="string">&quot;change&quot;</span>, <span class="function">() =&gt;</span> (<span class="variable language_">this</span>.<span class="property">value</span> = <span class="title function_">fn</span>(...deps)));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> <span class="title function_">computed</span> = (<span class="params">fn, deps</span>) =&gt; <span class="keyword">new</span> <span class="title class_">Computed</span>(fn, deps);</span><br></pre></td></tr></table></figure>
<p>计算信号根据一个函数计算其值。它也依赖于其他信号，当它们变化时，它会重新计算其值。必须将它所依赖的信号作为附加参数传递有点烦人，但是，嘿，我这篇文章的标题可不是“富人的信号”。</p>
<p>这使得将 Preact 的信号示例移植到原生 JS 成为可能。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> name = <span class="title function_">signal</span>(<span class="string">&quot;Jane&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> surname = <span class="title function_">signal</span>(<span class="string">&quot;Doe&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> fullName = <span class="title function_">computed</span>(<span class="function">() =&gt;</span> <span class="string">`<span class="subst">$&#123;name&#125;</span> <span class="subst">$&#123;surname&#125;</span>`</span>, [name, surname]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 每次 name 变化时都会打印：</span></span><br><span class="line">fullName.<span class="title function_">effect</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(fullName.<span class="property">value</span>)); <span class="comment">// -&gt; Jane Doe</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新 `name` 会更新 `fullName`，从而再次触发 effect：</span></span><br><span class="line">name.<span class="property">value</span> = <span class="string">&quot;John&quot;</span>; <span class="comment">// -&gt; John Doe</span></span><br></pre></td></tr></table></figure>
<h2 id="你能把它用在实际场景中吗">你能把它用在实际场景中吗？</h2>
<p>你可能会想，所有这些 <code>console.log</code>
示例都很好，但你如何在实际的 Web
开发中使用这些东西呢？这个简单的加法器演示了信号如何与 Web Components
结合：</p>
<p><code>adder.js</code></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; signal, computed &#125; <span class="keyword">from</span> <span class="string">&quot;./signals.js&quot;</span>;</span><br><span class="line"></span><br><span class="line">customElements.<span class="title function_">define</span>(</span><br><span class="line">  <span class="string">&quot;x-adder&quot;</span>,</span><br><span class="line">  <span class="keyword">class</span> <span class="title class_">extends</span> <span class="title class_">HTMLElement</span> &#123;</span><br><span class="line">    a = <span class="title function_">signal</span>(<span class="number">1</span>);</span><br><span class="line">    b = <span class="title function_">signal</span>(<span class="number">2</span>);</span><br><span class="line">    result = <span class="title function_">computed</span>(<span class="function">(<span class="params">a, b</span>) =&gt;</span> <span class="string">`<span class="subst">$&#123;a&#125;</span> + <span class="subst">$&#123;b&#125;</span> = <span class="subst">$&#123;+a + +b&#125;</span>`</span>, [<span class="variable language_">this</span>.<span class="property">a</span>, <span class="variable language_">this</span>.<span class="property">b</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="title function_">connectedCallback</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;input&quot;</span>)) <span class="keyword">return</span>;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">innerHTML</span> = <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;input type=&quot;number&quot; name=&quot;a&quot; value=&quot;<span class="subst">$&#123;<span class="variable language_">this</span>.a&#125;</span>&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;input type=&quot;number&quot; name=&quot;b&quot; value=&quot;<span class="subst">$&#123;<span class="variable language_">this</span>.b&#125;</span>&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;p&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">    `</span>;</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">result</span>.<span class="title function_">effect</span>(</span><br><span class="line">        <span class="function">() =&gt;</span> (<span class="variable language_">this</span>.<span class="title function_">querySelector</span>(<span class="string">&quot;p&quot;</span>).<span class="property">textContent</span> = <span class="variable language_">this</span>.<span class="property">result</span>)</span><br><span class="line">      );</span><br><span class="line"></span><br><span class="line">      <span class="variable language_">this</span>.<span class="title function_">addEventListener</span>(</span><br><span class="line">        <span class="string">&quot;input&quot;</span>,</span><br><span class="line">        <span class="function">(<span class="params">e</span>) =&gt;</span> (<span class="variable language_">this</span>[e.<span class="property">target</span>.<span class="property">name</span>].<span class="property">value</span> = e.<span class="property">target</span>.<span class="property">value</span>)</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>这是一个实时演示： （略）</p>
<p>如果你想知道，这里的 <code>if</code>
语句是为了防止在组件已经渲染时调用 <code>connectedCallback</code> 导致
<code>effect</code> 被添加两次。</p>
<p>完整的“穷人的信号”代码（总共 36 行）可以在 Github 上的 <a
href="https://www.google.com/search?q=https://github.com/plainvanillaweb/tiny-signals">tiny-signals
仓库</a>中找到。</p>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>signal</tag>
      </tags>
  </entry>
  <entry>
    <title>CSS :has() 交互指南</title>
    <url>/2026/01/08/CSS-has-%E4%BA%A4%E4%BA%92%E6%8C%87%E5%8D%97/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<blockquote>
<p>原文 <a href="https://ishadeed.com/article/css-has-guide/">CSS :has()
Interactive Guide</a></p>
</blockquote>
<h1 id="什么是-has">1. 什么是 :has()？</h1>
<p>:has() 常被称为
“父级选择器”。它允许你根据一个元素内部是否包含某些子元素（或符合某种条件的后代元素）来给该元素本身设置样式。
本文将会探讨此问题，并介绍 :has() 的一些常见用法。</p>
<h2 id="痛点">1.1 痛点</h2>
<p>假设我们有一个 <code>&lt;figure&gt;</code> 标签，当它包含
<code>&lt;figcaption&gt;</code> 标签时，我们希望给
<code>&lt;figure&gt;</code> 添加一个样式。我们应该如何实现呢？</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;thumb.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">figcaption</span>&gt;</span>A great looking tart.<span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br></pre></td></tr></table></figure>
<span id="more"></span>
<p>当有说明文字时，我希望图片显示以下效果：</p>
<ul>
<li>Paddding</li>
<li>Background</li>
<li>Shadow</li>
</ul>
<p>在 CSS 中，唯一可行的方法是给 <code>&lt;figure&gt;</code>
标签手动添加一个类名（class），然后通过该类名来选择其中的
<code>&lt;figcaption&gt;</code>。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">figure</span><span class="selector-class">.with-caption</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">3px</span> <span class="number">10px</span> <span class="number">0</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果 HTML 是由后台编辑器或 Markdown
引擎动态生成的，你很难手动给包含标题的图片（figure）精准地加上
<code>.with-caption</code> 这个类。</p>
<h2 id="解决办法">1.2 解决办法</h2>
<p>有了 CSS :has() 选择器，就好办多了。你可以像下面这样写 CSS：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">figure</span><span class="selector-pseudo">:has</span>(<span class="selector-tag">figcaption</span>) &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0.5rem</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">figure</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;thumb.jpg&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">figcaption</span>&gt;</span>A great looking tart.<span class="tag">&lt;/<span class="name">figcaption</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">figure</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>而这仅仅是使用 CSS :has() 的冰山一角。</p>
<h1 id="复习-css-选择器">复习 CSS 选择器</h1>
<p>在我们深入之前，先来复习一下 CSS 选择器。</p>
<h2 id="相邻兄弟选择器">2.1 相邻兄弟选择器</h2>
<p>要选择元素的下一个同级元素，我们可以使用相邻兄弟选择器
(+)。用于选择紧接在另一个元素后的元素，且二者有相同的父元素。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.book</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.frame</span> + <span class="selector-class">.book</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="通用兄弟选择器">2.2 通用兄弟选择器</h2>
<p>要选择元素的下一个同级元素，我们可以使用通用兄弟选择器
(~)。用于选择紧接在另一个元素后的元素，且二者有相同的父元素。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.book</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.frame</span> ~ <span class="selector-class">.book</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="前一个兄弟选择器">2.3 前一个兄弟选择器</h2>
<p>借由 :has()，我们现在可以实现选择 “后面紧跟 B 的 A
元素”，从而间接实现了前一个兄弟选择器的功能。</p>
<p>以下代码实现如下功能：选中一个 .book
元素，前提是它的紧后方（+）紧跟着一个 .frame 元素。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.book</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.book</span><span class="selector-pseudo">:has</span>(+ <span class="selector-class">.frame</span>) &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>基于上述，我们可以选择某个特定元素前的所有元素。以下代码实现选择
.frame 元素之前所有 .books 元素。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.book</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.book</span><span class="selector-pseudo">:has</span>(~ <span class="selector-class">.frame</span>) &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="not-伪类">2.5 :not 伪类</h2>
<p>:not()
伪类选择器在排除某个元素时非常有用。比如，当我们想要选择所有不包含 .blue
的 .book 元素时，可以这样写：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.book</span><span class="selector-pseudo">:not</span>(<span class="selector-class">.blue</span>) &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>翻译</category>
      </categories>
      <tags>
        <tag>CSS</tag>
        <tag>交互</tag>
        <tag>:has()</tag>
      </tags>
  </entry>
  <entry>
    <title>2026 年单词量测试</title>
    <url>/2026/01/04/2026-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><hr />
<p>20260104 测试结果： <img src="/2026/01/04/2026-%E5%B9%B4%E5%8D%95%E8%AF%8D%E9%87%8F%E6%B5%8B%E8%AF%95/1.png" class=""></p>
<span id="more"></span>
<p>20260603 测试结果：</p>
<p>20260904 测试结果：</p>
<p>测试网站 <a
href="https://preply.com/en/learn/english/test-your-vocab">Test your
English vocabulary</a></p>
]]></content>
      <categories>
        <category>生活</category>
      </categories>
      <tags>
        <tag>英语</tag>
        <tag>单词量</tag>
      </tags>
  </entry>
</search>
